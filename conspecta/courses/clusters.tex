\documentclass[a4paper]{article}

\usepackage{../mathstemplate}

\date{IV семестр, весна 2024 г.}
\title{Кластерные алгебры и кластерные категории.\\ Неофициальный конспект}
\author{Лектор: Михаил Александрович Антипов\\ Конспектировал Леонид Данилевич}

\begin{document}
    \shorthandoff{"}
    \maketitle
    \tableofcontents
    \newpage
    \setcounter{lection}{0}
    \newlection{11 февраля 2026 г.}
    \section{Примеры}
    ...

    Пусть $K$ --- поле.
    Вспомним грассманиан $\Gr(k, n)$ --- многообразие, параметризующее $k$-мерные подпространства в $n$-мерии (например, в пространстве строк $\ind{^n}{K}{}$).

    Грассманиан удобно представлять себе, как множество матриц $M_{k \times n}(K)$ с точностью до действия $\GL_k(K)$ умножениями слева.

    Однородными координатами на грассманиане служат значения миноров $k \times k$, на которые накладываются соотношения Плюккера.
    В случае $k = 2$ эти соотношения выглядят следующим образом:
    \[p_{ik}p_{j\ell} = p_{ij}p_{k\ell} + p_{jk}p_{i \ell}\label{plucker}\tag{$\star$}\]
    где $i < j < k < \ell$, а $p_{ij} = p_{ji}$ равен значению квадратного минора из $i$-го и $j$-го столбца.
    Иными словами, для матрицы $x$: $p_{ij} = x_{1,\min(i, j)}x_{2,\max(i, j)} - x_{1,\max(i, j)}x_{2,\min(i, j)}$.
    Изображая это правило на картинке, получаем правило Птолемея:
    \[\begin{tikzpicture}
          \pgfmathsetmacro{\R}{1.3};
          \coordinate (A) at ({\R * cos(0)}, {\R * sin(0)});
          \coordinate (B) at ({\R * cos(40)}, {\R * sin(40)});
          \coordinate (C) at ({\R * cos(80)}, {\R * sin(80)});
          \coordinate (D) at ({\R * cos(120)}, {\R * sin(120)});
          \coordinate (E) at ({\R * cos(160)}, {\R * sin(160)});
          \coordinate (F) at ({\R * cos(200)}, {\R * sin(200)});
          \coordinate (G) at ({\R * cos(240)}, {\R * sin(240)});
          \coordinate (H) at ({\R * cos(280)}, {\R * sin(280)});
          \coordinate (I) at ({\R * cos(320)}, {\R * sin(320)});
          \fill[lightgray] plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
          \draw plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
          \draw[-] (A) -- (E);
          \draw[-] (D) -- (G);
          \fill[black] (A) circle (1pt) node[above right]{$i$};
          \fill[black] (D) circle (1pt) node[above right]{$j$};
          \fill[black] (E) circle (1pt) node[left]{$k$};
          \fill[black] (G) circle (1pt) node[below]{$\ell$};
    \end{tikzpicture}\] (все же помнят теорему из школьной планиметрии: у вписанного четырёхугольника произведение длин диагоналей равно сумме произведений противоположных сторон?)
    Из картинки ясно, что на самом деле имеет значение только циклический порядок индексов $i, j, k, \ell \in \Z/n\Z$.

    \newlection{18 февраля 2026 г.}
    Размерность многообразия $\Gr(2, n)$ равна $2n - 4$, а размерность Крулля однородного координатного кольца $K[\Gr(2, n)] = K[p_{ij}]/\eqref{plucker}$ на единичку больше, значит, $2n - 3$.
    \definition[Матрица $A \in M_{m\times n}(\R)$ вполне положительна]{Все миноры $A$ положительны.}
    Заинтересуемся схожим вопросом: когда все миноры $2 \times 2$ в матрице $2 \times n$ положительны?
    Более точно, сколько миноров надо проверить на положительность, чтобы положительность остальных последовала?

    Из описания координатного кольца грассманиана ясно, что такие миноры --- любой набор $p_{ij} \in K$, удовлетворяющий соотношениям~\eqref{plucker}.
    Так как $\dim\R[\Gr(2, n)] = 2n - 3$, то такова и степень трансцендентности его поля частных, откуда ясно, что ответ хотя бы $2n - 3$. \comment{Не совсем строгое утверждение, так как $\R$ не алгебраически замкнуто.}
    С другой стороны, эта оценка достигается:
    \proposal{\label{plucker-recovery}
    Пусть $T$ --- триангуляция правильного $n$-угольника (множество неупорядоченных пар вершин, соединённых ребром, в том числе пары соседних вершин).
        Пусть $P \coloneqq \defset{p_{ij}}{(i,j)\in T}$
        Тогда любой $p_{rs}$ выражается в виде некоторой рациональной функции от элементов $P$ с положительными коэффициентами.
    В частности, положительность элементов $P$ повлечёт положительность всех миноров $2 \times 2$.
    \prove{Рассмотрим граф, вершины которого --- триангуляции $n$-угольника, а рёбра соответствуют \emph{флипам} следующего вида:
        \[\begin{tikzpicture}[baseline=(current bounding box.center)]
              \fill[lightgray] plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
              \draw plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
              \draw plot [smooth cycle, tension=0] coordinates { (A) (B) (C) (D) (E) (F) (G) (H) (I) };
              \fill[black] (A) circle (1pt) node[above right]{$1$};
              \fill[black] (B) circle (1pt) node[above right]{$2$};
              \fill[black] (C) circle (1pt) node[above right]{$3$};
              \fill[black] (D) circle (1pt) node[above left]{$\dots$};
              \fill[black] (I) circle (1pt) node[right]{$n$};
              \draw[-] (A) -- (C);
              \draw[-] (G) -- (I);
              \draw[-] (D) -- (G);
        \end{tikzpicture}\qquad\rightsquigarrow\qquad\begin{tikzpicture}[baseline=(current bounding box.center)]
              \fill[lightgray] plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
              \draw plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
              \draw plot [smooth cycle, tension=0] coordinates { (A) (B) (C) (D) (E) (F) (G) (H) (I) };
              \fill[black] (A) circle (1pt) node[above right]{$1$};
              \fill[black] (B) circle (1pt) node[above right]{$2$};
              \fill[black] (C) circle (1pt) node[above right]{$3$};
              \fill[black] (D) circle (1pt) node[above left]{$\dots$};
              \fill[black] (I) circle (1pt) node[right]{$n$};
              \draw[-] (A) -- (C);
              \draw[-] (G) -- (I);
              \draw[-] (A) -- (E);
        \end{tikzpicture}\]
    А именно, любая хорда триангуляции является ребром двух смежных треугольников, в объединении дающих четырёхугольник.
        Назовём \emph{флипом} замену данной хорды триангуляции на другую диагональ четырёхугольника.
        Кстати, этот граф является остовом $(n-3)$-мерного ассоциэдра.

    Ясно, что любая хорда $n$-угольника лежит в какой-то триангуляции.
        Без доказатеельства утверждается, что граф триангуляций связен. Начнём с триангуляции $T$, и, применяя флипы, дойдём до триангуляции, содержащей хорду $r-s$.
        Легко видеть, что $p_{ik}$, где $i-k$ --- хорда, появляющаяся после флипа, выражается через остальные $p_{j\ell}$, отвечающие хордам, присутствовавшим до флипа:
    \[p_{ik} = \frac{p_{ij}p_{k\ell} + p_{jk}p_{i \ell}}{p_{j\ell}}\qquad
    \begin{tikzpicture}[baseline=(current bounding box.center)]
         \fill[lightgray] plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
         \draw plot [smooth cycle, tension=0] coordinates { (A) (D) (E) (G) };
         \draw[-] (A) -- (E);
         \draw[-] (D) -- (G);
         \fill[black] (A) circle (1pt) node[above right]{$i$};
         \fill[black] (D) circle (1pt) node[above right]{$j$};
         \fill[black] (E) circle (1pt) node[left]{$k$};
         \fill[black] (G) circle (1pt) node[below]{$\ell$};
    \end{tikzpicture}\qedhere\]
    }
    }

    Эту теорему можно пытаться обобщать на разные интересные случаи --- рассматривать не только триангуляции, или скажем работать не на плоскости (или её компактификации --- сфере), а на поверхности с большим числом ручек.
    Впрочем, начиная с некоторого места она уже перестаёт быть верной.

    Ещё пару слов про флипы и триангуляции: можно считать, что диагонали пронумерованы от $1$ до $n - 3$, и при флипе новая диагональ нумеруется тем числом, что было написано на стираемой.
    Тогда получается, что на множестве триангуляций действует свободное произведение $\underbrace{C_2 * \ldots * C_2}_{n}$.

    Действие разумеется не свободное.
    Например, флипы диагоналей, далеко друг от друга отстоящих, коммутируют.
    Сами пометки на диагоналях тоже могут перемещаться:
    \exercise{
    Получите последовательностью пяти флипов из одной триангуляции шестиугольника другую:
        \[\begin{tikzpicture}[baseline=(current bounding box.center)]
            \pgfmathsetmacro{\R}{1.3};
            \coordinate (BC) at ({\R * cos(60)}, {\R * sin(60)});
            \coordinate (EF) at ({\R * cos(180)}, {\R * sin(180)});
            \coordinate (HI) at ({\R * cos(300)}, {\R * sin(300)});
            \fill[lightgray] plot [smooth cycle, tension=0] coordinates { (A) (BC) (D) (EF) (G) (HI) };
            \draw plot [smooth cycle, tension=0] coordinates { (A) (BC) (D) (EF) (G) (HI) };
            \draw[-] (A) -- (D) node [midway, above] {$1$};
            \draw[-] (D) -- (G) node [midway, left] {$2$};
            \draw[-] (G) -- (A) node [midway, below] {$3$};
        \end{tikzpicture}\qquad\rightsquigarrow\qquad\begin{tikzpicture}[baseline=(current bounding box.center)]
           \fill[lightgray] plot [smooth cycle, tension=0] coordinates {(A) (BC) (D) (EF) (G) (HI)};
           \draw plot [smooth cycle, tension=0] coordinates {(A) (BC) (D) (EF) (G) (HI) };
           \draw[-] (A) -- (D) node [midway, above] {$1$};
           \draw[-] (D) -- (G) node [midway, left] {$3$};
           \draw[-] (G) -- (A) node [midway, below] {$2$};
        \end{tikzpicture}\]
    }
    \subsection{Классификация фризов}
    Пусть $p \in \Gr(2, n)$ --- точка с однородными координатами $p_{ij}$; предположим, что для всех $i \in \Z/n\Z$: $p_{i,i+1} = 1$.
    Можно составить фриз из координат этой точки следующим образом:
    \[\cdots\begin{array}{ccccccc}
          \hline
          1 && 1 && 1 && 1\\
          & p_{1,3} && p_{2,4} && p_{3,5} &\\
          p_{n,3} && p_{1,4} && p_{2,5} && p_{3,6} \\
          & p_{n,4} && p_{1,5} && p_{2,6} &\\
          \hline
          &&&\ddots &&& \\
          \hline
          & p_{?,?-2} && p_{?+1,?-1} && p_{?+2,?} & \\
          1 && 1 && 1 && 1 \\
          \hline
    \end{array}\cdots\]
    $\SL_2$-соотношения выполнены, так как в них превращается соотношение~\eqref{plucker}:
    \[\begin{array}{ccc}
          &p_{i+1,j}& \\
          p_{i,j}&&p_{i+1,j+1}\\
          & p_{i,j+1} &
    \end{array}
    \qquad\begin{tikzpicture}[baseline=(current bounding box.center)]
          \draw[dashed] (-2,-1.5) -- (-2,1.5);
          \draw plot [smooth cycle, tension=0] coordinates { (BC) (D) (EF) (G) };
          \fill (BC) circle (1pt) node[above right]{$i$};
          \fill (D) circle (1pt) node[above right]{$i+1$};
          \fill (D) circle (1pt) node[above right]{$i+1$};
          \fill (EF) circle (1pt) node[left]{$j$};
          \fill (G) circle (1pt) node[left]{$j+1$};
          \draw[dashed] (1.4,-1.5) -- (1.4,1.5);
    \end{tikzpicture}\qquad
    p_{i,j}p_{i+1,j+1} - p_{i+1,j}p_{i,j+1} = p_{i,i+1}p_{j,j+1} = 1
    \]
    Обратно, если есть некоторый фриз, то можно построить числа $p_{ij}$, удовлетворяющие соотношениям Плюккера: пройдём зигзагом вниз по фризу, и положим значения координат, соответствующим зигзаг-триангуляции, равными $q_i$, а остальные восстановим как в~(\cref{plucker-recovery}).
    \[\cdots\begin{array}{ccccccc}
                \hline
                1 && 1 && 1 && 1\\
                & q_1 && \square && \square &\\
                q_2 && \square && \square && \square \\
                & q_3 && \square && \square &\\
                \hline
                &&&\ddots &&& \\
                \hline
                & q_{n-3} && \square && \square & \\
                1 && 1 && 1 && 1 \\
                \hline
    \end{array}\cdots\qquad\begin{tikzpicture}[baseline=(current bounding box.center)]
           \draw plot [smooth cycle, tension=0] coordinates { (A) (B) (C) (D) (E) (F) (G) (H) (I) };
           \draw[-] (D) -- (B) -- (E) -- (A) -- (F) -- (I) -- (G);
    \end{tikzpicture}\]
    Далее остальные значения во фризе восстанавливаются однозначно из $\SL_2$-соотношений, и в силу выше построенного примера, они все будут иметь вид $p_{ij}$.
    Единственность на самом деле имеет место чуть более слабая --- например, она есть если все $q_i > 0$ --- тогда~\cref{plucker-recovery} говорит, что все полученные координаты будут положительными.
    Значит, на самом деле фриз однозначно восстанавливается по $q_i$ и на некотором открытом по Зарисскому множестве.
    \section{Определения}
    \subsection{Колчаны и кластерные матрицы}
    \definition[Колчан]{Произвольный ориентированный граф $Q = (V, E)$, в котором всё разрешено: петли, кратные рёбра, может быть даже бесконечное число вершин или рёбер\ldots}
    \definition[Кластерный колчан]{Конечный колчан без петель и рёбер туда-обратно (пары рёбер вида $i \to j$ и $j \to i$).}

    Кластерные колчаны $Q$ взаимно однозначно соответствуют кососимметрическим матрицам: колчану $Q$ отвечает матрица $B_Q \in M_{n}(\Z)$ (где $n = |V|$):
    \[(B_Q)_{i,j} = \all{\#\{i \to j\},& \text{ есть стрелки $i \to j$} \\ \#\{j \to i\},& \text{ есть стрелки $j \to i$}\\0,&\text{иначе}}\]
    \definition[Кластерный колчан с замороженными вершинами]{
        Кластерный колчан на $m$ вершинах, где первые $n \le m$ вершин называются \emph{незамороженными}, а последние $m - n$ вершин называются \emph{замороженными}, и между ними нет рёбер.
    }
    На матричном языке кластерный колчан с замороженными вершинами изображают в виде матрицы $\tilde{B} \in M_{m\times n}(\Z)$, где $\tilde{B} = \vect{B\\\hline C}$, и $B \in M_{n}(\Z)$ кососимметрическая, а $C \in M_{(m-n) \times n}(\Z)$ --- любая.
    Теоретически можно было бы считать, что кластерному колчану с замороженными вершинами отвечает кососимметрическая матрица из $M_{m}(\Z)$, где правый нижний квадрат $(m - n) \times (m - n)$ нулевой, но так уже не поступить с обобщением данного понятия --- \emph{кластерными матрицами}, которые мы определим чуть позже.


    Пусть $Q$ --- конечный кластерный колчан, $1 \le i \le n$ --- незамороженная вершина.
    \definition[Мутация $Q$ в вершине i]{
        На колчанном языке это новый колчан $M_i(Q)$, в котором множество вершин то же самое, а множество рёбер претерпевает следующие изменения:
    \numbers{
        \item Для каждой пары вершин $k, \ell$, таких, что есть рёбра $k \to i \to \ell$, добавляем ребро $k \to \ell$ (если рёбер $k \to i$ всего $n_k$ штук, а рёбер $i \to \ell$ всего $n_\ell$ штук, то мы добавим $n_k \cdot n_\ell$ рёбер.
        \item Разворачиваем стрелки, инцидентные $i$.
        \item Стираем всевозможные противонаправленные пары (если было $n$ рёбер в одну сторону, и $m$ в другую, то останется $\abs{n - m}$ понятно в какую сторону).
    }
    }
    На матричном языке мутация выглядит так: из $B_Q = (b_{ij})$ получается $B_{M_i(Q)} \eqqcolon M_i(B_Q) = (b'_{ij})$:
    \[b'_{pq} = \all{-b_{pq}, & i = p \text{ или } i = q \\ b_{pq} + b_{pi}b_{iq},& b_{pi}, b_{iq} > 0 \\ b_{pq} - b_{pi}b_{iq} ,& b_{pi}, b_{iq} < 0 \\ b_{pq} ,&\text{иначе}}\tag{$\triangle$}\label{mutation}\]

    \note{Это инволюция: две мутации подряд в одной и той же вершине не меняют колчан.}
    \example{Пусть $v$ --- сток или исток. Мутация в вершине $v$ --- разворот рёбер, инцидентных $v$.}
%    // времени много прошло сегодня... Ладно, может хотя бы определение кластерной алгебры дадим сегодня. (18:14)
    \exercise{Если $Q$ --- дерево на $n$ вершинах, то мутациями в истоках и стоках можно получить любую ориентацию всех $n - 1$ рёбер.}
    Этот факт известен даже среди алгебраистов, и отвечает следующему утверждению: категории модулей над некоторыми конечномерными алгебрами почти эквивалентны в некотором смысле, \comment{вроде так}.

    Однако если делать мутации не в источниках и стоках, то даже какой-нибудь путь может претерпевать очень значительные изменения.
    Тем не менее, верен следующий факт:
    \intfact{Пусть $Q_1$ и $Q_2$ --- два кластерных колчана без ориентированных циклов на одном множестве вершин.
    Предположим, что они эквивалентны: существует последовательность мутаций, превращающих один в другой.
    Тогда $Q_2$ получается из $Q_1$ только при помощи мутаций в источниках и стоках. В частности, они изоморфны как неориентированные графы.}
    Что любопытно, комбинаторное доказательство этой теоремы неизвестно, а вот с помощью кластерных категорий доказательство существует уже давно.

    \definition[Матрица $B' \in M_{n}(\mathbb{Z})$ кососимметризуема]{Существуют $D = \mathrm{diag}(d_1, \ldots, d_n)$ при $d_i > 0$ и кососимметричная $B \in M_n(\mathbb{Z})$: $B' D = D B$. }
    Говоря русским языком, кососимметричная матрица с точностю до перемасштабирования строк \comment{Что? Вроде же с точностью до сопряжения\ldots}
    \definition[Кластерная матрица]{$\tilde{B} \in M_{m,n}(\mathbb{Z})$, такая что верхний квадрат $n \times n$ --- кососимметризуемая матрица, а нижний прямоугольник --- любая.}
Мутацию в незамороженной вершине $1 \le i \le n$ кластерной матрицы определим по формуле\eqref{mutation}.
\statement{Мутация по-прежнему инволюция; кососимметризуемость верхнего квадрата сохраняется после мутации; $M_i$ коммутирует с транспониованием $B \mapsto B^t$ и разворотом всех рёбер $B \mapsto -B$. Если $b_{ij} = b_{ji}=0$, то мутации $M_i$ и $M_j$ коммутируют при действии на даyную кластерную матрицу.
\prove{
    Не совсем очевидно, но проверяется в лоб.
}
}
    \subsection{Кластерная алгебра}
    Обозначим через $T_n$ регулярное дерево степени $n$ с неориентированными рёбрами, покрашенными числами $1, \ldots, n$.
    Иными словами, граф Кэли для $\underbrace{C_2 \star \ldots \star C_2}_{n}$.
    Отметим некоторую вершину $t_0$.

    Теперь пусть $K$ --- поле, $\tilde{B} \in M_{m\times n}(\mathbb{Z})$ --- кластерная матрица.
    Для определения кластерной алгебры нам потребуется следующий набор данных:
    \bullets{
    \item Отображение, сопоставляющее каждой вершине $T_n$ по кластерной матрице $m\times n$, такое что для любых вершин $t_1$ и $t_2$, соединённых ребром цвета $i$, выполнено соотношение $B(t_2) = M_i(B(t_1))$.
        Ясно, что задать такое отображение --- всё равно, что задать кластетрную матрицу для $t_0$, остальные определяются однозначно.
    \item Отображение $x: V(T_n) \to K(x_1, \ldots, x_{m})^m$. Вектор $x(t) = \vect{x_1^t, \ldots, x_m^t}$ называется \emph{расширенным кластером} в вершине $t$, а совокупность всех элементов всех векторов зовётся \emph{кластерными переменными}.
        Первые $n$ переменных расширенного кластера формируют обычный \emph{кластер}.
        При этом $x(t_0) = (x_1, \ldots, x_m)$, и опять же имеется связь между значениями в соседних вершинах: если вершины $t$ и $t'$ соединены ребром цвета $i$, $x(t) = y, x(t') = y'$, и в вершине $i$ стоит матрица $B(t) = (b_{ij})$ то при $j \ne i$: $y_j = y_j'$, а при $j = i$ выполнено соотношение: \[y_i y_i' = \prod_{b_{ji}>0}y_j^{b_{ji}} + \prod_{b_{ji}<0}y_j^{-b_{ji}}.\]
    }
    \definition[Кластерная алгебра $A(B)$]{Подалгебра в $K(x_1, \ldots, x_m)$, порождённая кластерным переменными.}
    Оказывается, однородное кольцо грассманиана и некоторых других интересных многообразий --- кластерные алгебры.
\end{document}
