\documentclass[a4paper]{report}

\usepackage{../mathstemplate}
\usepackage{textcomp}

\date{III семестр, осень 2023 г.}
\title{Алгебра. Неофициальный конспект}
\author{Лекторы: Николай Александрович Вавилов \\ Степанов Алексей Владимирович \and \\ Конспектировал Леонид Данилевич}

\begin{document}

    \shorthandoff{"}
    \maketitle
    Изначально предполагалось, что лекции будет читать Николай Александрович Вавилов.

    13 сентября была прочитана третья лекция.
    Николай Александрович прекрасно выглядел, сообщил о пересдаче в следующем месяце, а после лекции как обычно остался, чтобы отвечать на вопросы.
    Я подошёл с вопросом о том, почему спин полуцелый (да, к лектору по алгебре --- это было упомянуто на лекции с обоснованием того, что $\R P^2$ двулистно накрывает плоскость (может, я ошибаюсь)).
    Николай Александрович что-то говорил про специальный индийский танец с чашей, про привязывание греческого кратера резинками за обе ручки к стенкам с последующим закручиванием, и про спиноры.
    К сожалению, про это я так ничего и не понял --- сложно описывать повороты трёхмерного тела в пространстве, а о спинорах я слышал в первый раз.

    Уже выйдя на улицу, я потом в шутку предложил на следующий день принести греческую чашу и резинки, чтобы Николай Александрович сам всё показал --- 14 сентября была запланирована очередная, четвёртая, лекция.

    Я пришёл на неё за несколько минут до начала, и с удивлением увидел, что у аудитории стоит лишь несколько человек.
    Оказалось, лекцию отменили --- Николай Алесандрович внезапно плохо себя почувствовал, и сообщил об этом администраторам.
    Нам написали, что 14 сентября лекции не будет, и её проведут в другой день.

    А уже вечером того дня до нас сарафанной почтой дошло известие о смерти учителя.
    Мой одногруппник, Лев, поделился чьим-то сообщением с фотографией записи, приписав <<Это правда?>>

    Сначала, кажется, никто не поверил.
    Я увидел текст, и подумал: <<И ведь действительно, сегодня лекции не было.
    Но он заболел, а не умер, что за глупая шутка>>.
    Потом я проверил, что запись на стене поделившегося человека действительно существует, и в ту же секунду Лев написал, что, похоже, это не шутка.

    Это была не шутка.

    Николай Александрович Вавилов, наш учитель алгебры, прекрасный преподаватель, которого любили, кажется, все, скоропостижно скончался 14 сентября 2023 года.

%    Все последующие лекции прочитаны Алексеем Владимировичем Степановым.
    \tableofcontents
    \newpage
    \setcounter{lection}{0}

    %полилинейная алгебра, теория представлений конечных групп, теория категорий


    \chapter{Полилинейная алгебра}

    \newlection{5 сентября 2023 г.}


    \section{Полилинейные отображения}
    Пусть $R$ --- коммутативное кольцо.
    \definition[Полилинейное отображение]{
        Отображение $\phi: M_1 \times \dots \times M_s \map M$, где $M_1, \dots, M_s, M$ --- $R$-модули, такое, что оно
        \numbers{
            \item Аддитивно по любому аргументу при фиксированных остальных.
            \item Однородно степени $1$ по каждому аргументу (выносится скаляр).
        }
    }
    \examples{
        \item Билинейные формы --- скалярные произведения.
        \item Умножение в алгебре $A \times A \map A$, где $A$ --- алгебра над $R$.
        \item Определитель --- $n$-линейная форма.
    }
    \note{
        Если $M_1, \dots, M_s$ свободны, то $\phi$ определён заданием значений на наборах базисных векторов.
    }
    Обозначим за $L(M_1, \dots, M_s; M)$ множество всех $s$-линейных отображений $M_1 \times \dots \times M_s \map M$.
    На этом множестве можно ввести структуру $R$-модуля:
    \gather{
        (\phi + \psi)(u_1, \dots, u_s) = \phi(u_1, \dots, u_s) + \psi(u_1, \dots, u_s)\\
        (\lambda\phi)(u_1, \dots, u_s) = \lambda \cdot \phi(u_1, \dots, u_s)\\
    }
    Если $R = K$ --- поле, то $\dim(L(M_1, \dots, M_s; M)) = \dim(M_1) \proddots \dim(M_s) \cdot \dim(M)$.

    Тензорные произведения позволяют в некотором смысле сводить полилинейные отображения к линейным.


    \section{Определение тензорного произведения двух модулей}

    \subsection{Мотивация}
    Рассмотрим $X, Y$ --- два множества.
    Хотим построить функцию $\phi: X \times Y \map K$, где $K$ --- поле.

    Рассмотрим пару функций $f: X \map K, g: Y \map K$.
    Как их превратить в одну функцию?
    Надо взять их тензорное произведение!

    \[f\otimes g: X \times Y \map K; (x, y) \mapsto f(x) \cdot g(y)\]
    Это было бы произведение функций, если бы $f$ и $g$ были заданы на одном множестве $X = Y$.

    Функция такого вида --- функция с разделяющимися переменными.

    К сожалению, не все функции имеют такой вид.
    Рассмотрим лучше суммы
    \[f_1 \otimes g_1 + \dots + f_m \otimes g_m: X \times Y \map K\]
    Если $|X|, |Y| < \infty$, то (из сравнения размерностей) имеет место равенство $K^{X \times Y} = K^X \otimes K^Y$.

    Получается, $\dim(U \oplus V) = \dim(U) + \dim(V)$, и $\dim(U \otimes V) = \dim(U) \cdot \dim(V)$.

    Мы таким образом сможем отождествить $L(M_1, \dots, M_s; M) = \Hom(M_1 \otimes \dots \otimes M_s; M)$, действительно сведя полилинейные отображения к линейным.

    \subsection{Симметричность}
    \definition[Полилинейное отображение $\phi: M \times \dots \times M \map N$ симметрично] {
        \[\phi(\dots, u, \dots, v, \dots) = \phi(\dots, v, \dots, u, \dots)\]
    }
    \definition[Полилинейное отображение $\phi: M \times \dots \times M \map N$ антисимметрично] {
        \[\phi(\dots, u, \dots, u, \dots) = 0\]
    }
    Для таких полилинейных отображений возникнут особые конструкции --- симметрической степени $S^m(M)$ и внешней степени $\ext^m(M)$.

    \subsection{Тензорное произведение двух модулей}
    Пусть $R$ --- коммутативное кольцо.
    \definition[Тензорное произведение $R$-модулей $L, M$]{
        $R$-модуль $L \otimes M$ вместе с билинейным отображением $\psi: L \times M \map L \otimes M$ таким, что

        $\forall$ $R$-модуля $N$, $\forall$ полилинейного $\phi: L \times M \map N$: $\exists! $ $R$-линейное $\theta: L \otimes M \map N$, такое, что диаграмма ниже коммутативна.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJMIFxcdGltZXMgTSJdLFsyLDAsIkwgXFxvdGltZXMgTSJdLFsxLDEsIk4iXSxbMCwxLCJcXHBzaSJdLFswLDIsIlxccGhpIiwyXSxbMSwyLCJcXHRoZXRhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {L \times M}
              \&\& {L \otimes M} \\
              \& N
              \arrow["\psi", from=1-1, to=1-3]
              \arrow["\phi"', from=1-1, to=2-2]
              \arrow["\theta", dashed, from=1-3, to=2-2]
        \end{tikzcd}\]
    }

    Обозначим $\psi(x, y)$ за $x \otimes y$, назовём это \emph{разложимым тензором}.

    Должно выполняться
    \gather{
        (x_1 + x_2) \otimes y = x_1 \otimes y + x_2 \otimes y\\
        x\otimes (y_1 + y_2) = x \otimes y_1 + x \otimes y_2 \\
        x \lambda \otimes y = (x \otimes y)\lambda = x \otimes y \lambda
    }
    Последнее в случае $L$ --- левого модуля, $M$ --- правого модуля, обращается в $x \lambda \otimes y = x \otimes \lambda y$.

    \theorem[Существование тензорного произведения]{
        Для любых $R$-модулей $L, M$ существует $L \otimes M$.
        \provehere{
            Введём $P$ --- свободный модуль на множестве образующих --- множестве пар $(x, y) \in L \times M$.
            Его элементы --- формальные суммы
            \[\sum\limits_{x \in L, y \in M}(x, y)\lambda_{x,y},\qquad\text{где }\lambda_{x,y}\in R,\text{ почти все }0\]
            В $P$ не выполнены соотношения, перечисленные выше, введём их и профакторизуем.

            \[Q \coloneqq \angles{\arr{c}{(x_1 + x_2, y) - (x_1, y) - (x_2, y)\\
            (x, y_1 + y_2) - (x, y_1) - (x, y_2) \\
            (x \lambda, y) - (x, y)\lambda\\
            (x,y \lambda) - (x,y)\lambda}} \le P\]
            Теперь по определению обозначим $L \otimes M = P / Q$.

            Докажем универсальное свойство: обозначим за $i: L \times M \map P$ вложение множеств ($i(x, y) = (x, y)$), за $\pi_Q: P \map P/Q$ факторпроекцию.
            Положим $\psi \coloneqq \pi_Q \circ i$.

            Теперь надо показать, что $\forall$ полилинейного $\phi: L \times M \map N: \exists! \theta: P/Q \map N$, такое, что диаграмма коммутативна.
        % https://q.uiver.app/#q=WzAsNCxbMCwxLCJMIFxcdGltZXMgTSJdLFsxLDEsIlAvUSJdLFsyLDAsIlAiXSxbMiwyLCJOIl0sWzAsMiwiaSJdLFsyLDEsIlxccGlfUSJdLFswLDMsIlxccGhpIiwyXSxbMiwzLCJcXHRpbGRle1xcdGhldGF9IiwyXSxbMSwzLCJcXHRoZXRhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fV0sWzAsMSwiXFxwc2kiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \&\& P \\
                  {L \times M} \& {P/Q} \\
                  \&\& N
                  \arrow["i", from=2-1, to=1-3]
                  \arrow["{\pi_Q}", from=1-3, to=2-2]
                  \arrow["\phi"', from=2-1, to=3-3]
                  \arrow["{\tilde{\theta}}"', from=1-3, to=3-3]
                  \arrow["\theta", dotted, from=2-2, to=3-3]
                  \arrow["\psi", dashed, from=2-1, to=2-2]
            \end{tikzcd}\]
            Введём $\tilde{\theta}: P \map N$, заданное на системе образующих $\tilde{\theta}((x, y)) = \phi(x, y)$, и продолженное по линейности.

            Заметим, что $Q \le \Ker(\tilde{\theta})$ (в точности потому что $\phi$ полилинейно), поэтому по теореме о гомоморфизме $\tilde{\theta}$ пропускается через фактор: $\exists! \theta: P/Q \map N$, такое, что $\theta \circ \psi = \phi$.
            Осталось заметить, что никак по-другому $\theta$ определить нельзя: если нашлось $\theta': P/Q \map N$, такое, что $\theta' \circ \psi = \phi$, то можно построить $\tilde{\theta}' \coloneqq \theta' \circ \pi_Q$, и из коммутативности диаграммы $\tilde{\theta} = \tilde{\theta}'$, откуда $\theta = \theta'$.
        %универсальное свойство базиса, по теореме о гомоморфизме пропускается через L \otimes M \map N
        }
    }

    \subsection{Базис тензорного произведения двух модулей}
    Выберем два свободных модуля $L = R^l, M = R^m$.
    Пусть $L = \angles{e_1, \dots, e_l}, M = \angles{f_1, \dots, f_m}$.
    \theorem{
        В качестве базиса $L \otimes M$ можно выбрать \[\arr{c c c}{e_1 \otimes f_1 & \dots & e_1 \otimes f_m \\ \vdots & \ddots & \vdots \\ e_l \otimes f_1 & \dots & e_l \otimes f_m }\]
        \provehere{
            $L \times M \map L \otimes M$ --- отображение, переводящее $(e_i, f_j)$ в $e_i \otimes f_j$.
            Всякое полилинейное $\phi$ задаётся значениями на базисных элементах.
            Значит, надо знать $\phi(e_i, f_j)$. Введём $\eta$ на базисных значениях, положив $\eta(e_i \otimes f_j) = \phi(e_i, f_j)$.
            Понятно, что эти условия необходимы, то есть $\eta$ единственна.
        }
    }
    \corollary{
        $\dim(L \otimes M) = \dim(L) \dim(M)$.
    }
    \newlection{7 сентября 2023 г.}
    Можно определить $U \otimes V \otimes W$ как $(U \otimes V) \otimes W \overset{?}= U \otimes (V \otimes W)$.

    Почему (и можно ли?) считать, что тензорное произведение ассоциативно?
    Коммутативно ли оно?

    Коммутативным тензорное произведение считать не хочется: $U \otimes V$ и $V \otimes U$ --- разные модули. Тем не менее, ниже мы увидим, что имеется канонический изоморфизм.

    Определим $M_1 \otimes \dots \otimes M_s$ так, что $L(M_1, \dots, M_s; M) = \Hom(M_1, \otimes \dots \otimes M_s, M)$, а потом докажем существование всяких канонических изоморфизмов.


    \section{Тензорное произведение нескольких модулей}
    $R$ --- по-прежнему коммутативное кольцо.

    \definition[Тензорное произведение $M_1 \otimes \dots \otimes M_s$]{
        Модуль $M_1 \otimes \dots \otimes M_s$ вместе с $s$-линейным отображением \begin{align*}
                                                                                      \psi: M_1 \times \dots \times M_s &\map M_1 \otimes \dots \otimes M_s\\(x_1, \dots, x_s) &\mapsto \underbrace{x_1 \otimes \dots \otimes x_s}_{\text{разложимый тензор}}
        \end{align*}такой, что
        $\forall$ $R$-модуля $M, \forall$ полилинейного отображения $ \phi: M_1 \times \dots \times M_s \map M$: $\exists ! \theta: M_1 \otimes \dots \otimes M_s \map M$, такая что диаграмма ниже коммутативна.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJNXzEgXFx0aW1lcyBcXGRvdHMgXFx0aW1lcyBNX3MiXSxbMiwwLCJNXzEgXFxvdGltZXMgXFxkb3RzIFxcb3RpbWVzIE1fcyJdLFsxLDEsIk0iXSxbMCwyLCJcXHBoaSJdLFsxLDIsIlxcdGhldGEiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwxLCJcXHBzaSIsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=large]
        {M_1 \times \dots \times M_s}
              \&\& {M_1 \otimes \dots \otimes M_s} \\
              \& M
              \arrow["\phi", from=1-1, to=2-2]
              \arrow["\theta"', dashed, from=1-3, to=2-2]
              \arrow["\psi"', from=1-1, to=1-3]
        \end{tikzcd}\]
    }
    \provehere[Доказательство существования]{
        Универсальное свойство базиса и теорема о гомоморфизме опять.

        Возьмём свободный модуль $P = \angles{(x_1, \dots, x_s)}_{x_i \in M_i}$, профакторизуем по подмодулю \[Q = \angles{\arr{c}{(x_1 + x_1', x_2, \dots, x_s) - (x_1, x_2, \dots, x_s) - (x_1', x_2, \dots, x_s)\\\ddots\\(x_1 \lambda, x_2, \dots, x_s) - (x_1, x_2, \dots, x_s)\lambda\\\ddots}}\]

        Обозначим $M_1 \otimes \dots \otimes M_s = P/Q$, где $\psi: M_1 \times \dots \times M_s \map M_1 \otimes \dots \otimes M_s$ есть композиция отображения, переводящего элементы множества $(x_1, \dots, x_s)$ в соответствующие элементы, образующие свободный модуль $P$ и канонической проекции.

        $\theta$ построится единственным образом согласно универсальному свойству фактормодуля.
    }
    \theorem{
        Тензорное произведение ассоциативно с точностью до изоморфизма.
        \provehere{Ассоциативность устроена так
        \gather{(L \otimes M) \otimes N \leftrightarrow L \otimes M \otimes N \leftrightarrow L \otimes (M \otimes N)\\(x_1 \otimes x_2) \otimes x_3 \leftrightarrow x_1 \otimes x_2 \otimes x_3 \leftrightarrow x_1 \otimes (x_2 \otimes x_3)\qedhere}
        }
    }
    \definition[Тензор]{
        Элемент тензорного произведения.
    }
    \note{
        Всякий тензор представим в виде конечной суммы разложимых тензоров
        \[x_1 \otimes \dots \otimes x_s + y_1 \otimes \dots \otimes y_s + \dots + z_1 \otimes \dots \otimes z_s\]
        и наименьшее количество слагаемых называется \emph{ранг} тензора.
    }

    \subsection{Базис тензорного произведения}
    Предположим, что $M_1, \dots, M_s$ свободны, $(e_1^{(j)}, \dots, e_{n_j}^{(j)})$ --- базис $M_j$.
    \theorem{
        Тогда $M_1 \otimes \dots \otimes M_s$ --- свободный модуль с базисом $e_{i_1}^{(1)} \otimes e_{i_2}^{(2)} \otimes \dots \otimes e_{i_s}^{(s)}$, где $1 \le i_j \le n_j$, $1 \le j \le s$.
        \provehere{
            Аналогично случаю двух тензорных множителей.
        }
    }


    \section{Изоморфизмы тензорного произведения}

    \subsection{Геометрическое определение тензорного произведения}
    <<Берёте вы какую-нибудь книжку по дифференциальным уравнениям, и там на первых страницах написано>>
    \[U \otimes V = L(U^*, V^*; K)\]
%Локально тривиальные расслоения --- проективные модули (ого)

    \subsection{Определение $\otimes$ через $\Hom$}
    Пусть $U, V, W$ --- свободные модули над $R$ конечного ранга.
    \theorem{
        Имеет место канонический изоморфизм $U \otimes V = \Hom(U^*, V) = \Hom(V^*, U)$.
        \provehere{
            Рассмотрим $u \in U, v \in V$, сопоставим \gather{(u, v) \mapsto (\eta_{u,v}: U^* \map V), \qquad \eta_{u,v}: \theta \mapsto \theta(u) \cdot v}
            Заметим, что $U \times V \map \Hom(U^*, V)$ билинейно, значит, пропускается через тензорное произведение:
            \begin{align*}
                U \otimes V &\map \Hom(U^*, V)\\(u,v)&\mapsto\eta_{u,v}
            \end{align*} определено корректно и $R$-линейно.

            Базис переходит в базис: $e_i \otimes f_j \mapsto \all{e_i^* \mapsto f_j \\ e_h^* \mapsto 0}$, значит, ранги $U \otimes V$ и $\Hom(U^*, V)$ равны, откуда отображение биективно (но только потому, что модули конечного ранга).
        }
    }
    \ok
    \intfact{$\Hom(U \otimes V, W \otimes Z) = \Hom(U, W) \otimes \Hom(V, Z)$ --- докажем, определив тензорное произведение гомоморфизмов.}
    То, что пишется в этом и следующем подразделе --- частные случаи данного факта.

    \subsection{Двойственность для $\otimes$}
    \theorem{
        $(U \otimes V)^* = U^* \otimes V^*$.
        \provehere{
            Пусть $\eta \in U^*, \theta \in V^*$. Сопоставим $(\eta, \theta) \mapsto (u \otimes v \mapsto \eta(u)\cdot \theta(v))$.
            Определение корректно, так как от $\eta$ и от $\theta$ зависит линейно, то есть зависит билинейно от $(\eta, \theta)$, значит, по определению тензорного произведения есть единственное отображение $U^* \otimes V^* \map (U \otimes V)^*$.

            Это изоморфизм, так как отображение инъективно, и размеры базисов совпадают:
            \bullets{
                \item $e_i^* \otimes f_j^*$ --- базис $U^* \otimes V^*$
                \item $(e_i \otimes f_j)^*$ --- базис $(U \otimes V)^*$.\qedhere
            }
        }
    }
    \corollary[Определение $\otimes$ через $\Hom$]{
        $U \otimes V = (U^* \otimes V^*)^* = \Hom(U^* \otimes V^*, R) = L(U^*, V^*; R)$.
    }
    В силу ассоциативности $\otimes$ это верно для любого количества модулей.

    \subsection{Сопряжённость $\otimes$ и $\Hom$}
    \theorem{
        $\Hom(U \otimes V, W) = \Hom(U, \Hom(V, W))$.
    }


    \section{Тензорное произведение линейных отображений}
    Докажем, что тензорное произведение является ковариантным \emph{функтором}~(\cref{functor}) двух аргументов.

    Функтор --- это что-то, что берёт одну вещь, и сопоставляет ей другую вещь, сохраняя морфизмы --- какие-то полезные стрелки.

%    Сопоставим $\vect{\phi: U \map W \\ \psi: V \map Z} \rightsquigarrow (\phi \otimes \psi): U \otimes V \map W \otimes Z$.
%    Нарисовав матрицу тензорного произведения в базисах тензорных сомножителей мы получим кронекеровское произведение матриц.

    \newlection{13 сентября 2023 г.}

    Сопоставим двум линейным отображениям $\phi: U \map W, \psi: V \map Z$ отображение $\phi \otimes \psi: U \otimes V \map W \otimes Z$.
    \definition[Тензорное произведение линейных отображений]{
        Такое отображение, определённое на разложимых тензорах
        \begin{align*}
            \phi \otimes \psi: U \otimes V &\map W \otimes Z \\u \otimes v &\mapsto \phi(u) \otimes \psi(v)
        \end{align*}
    }
    \note{Определение корректно, и продолжается по линейности на все элементы $U \otimes V$}
    \theorem{
        Тензорное произведение билинейно (1-3) и функториально (4-5):
        \numbers{
            \item $(\phi_1 + \phi_2) \otimes \psi = \phi_1 \otimes \psi + \phi_2 \otimes \psi$.
            \item $\phi \otimes (\psi_1 + \psi_2) = \phi \otimes \psi_1 + \phi \otimes \psi_2$.
            \item $\phi \otimes (\lambda\psi) = (\lambda\phi ) \otimes \psi = \lambda(\phi \otimes \psi)$.
            \item $(\phi_2 \otimes \psi_2)\circ(\phi_1 \otimes \psi_1) = (\phi_2 \circ \phi_1) \otimes (\psi_2 \circ \psi_1)$.
            \item $\id_U \otimes \id_V = \id_{U \otimes V}$
        }
        \provehere{
            Применить обе части к одному и тому же разложимому тензору $u \otimes v \in U \otimes V$.
            По билинейности совпадения на них будет достаточно.

            Например, \multline{((\phi_2 \otimes \psi_2)\circ(\phi_1 \otimes \psi_1))(u \otimes v) = (\phi_2 \otimes \psi_2)((\phi_1 \otimes \psi_1)(u \otimes v)) = \\
                = (\phi_2 \otimes \psi_2)(\phi_1(u) \otimes \psi_1(v)) = \phi_2(\phi_1(u)) \otimes \psi_2(\psi_1(v)) = \\
                = (\phi_2 \circ \phi_1 \otimes \psi_2 \circ \psi_1)(u \otimes v)}
        }
    }
    Таким образом, мы определили билинейное отображение $\Hom(U, W) \times \Hom(V, Z) \map \Hom(U \otimes V, W \otimes Z)$, ему соответствует отображение из тензорного произведения
    \[\Hom(U, W) \otimes \Hom(V, Z) \map \Hom(U \otimes V, W \otimes Z)\]
    \theorem{
        Выше написанное отображение --- изоморфизм (для свободных модулей конечного ранга $U, V, W, Z$).
        При данном изоморфизме разложимому тензору $\phi \otimes \psi$ ставится в соответствие тензорное произведение линейных отображений $\phi \otimes \psi$.
        \provehere{
            Ранги модулей в левой и правой частях равны $\rk(U) \cdot \rk(V)\cdot \rk(W)\cdot \rk(Z)$.
            Обозначим маленькими пронумерованными буковками базис соответствующего кольца.

            Рассмотрев базисные элементы $\phi_{i,h}: u_i \mapsto w_h;\: \psi_{j,k}: v_j \mapsto z_k$ видим, что они отправляются в базисные элементы
            \begin{align*}
                \phi_{i,h}\otimes \psi_{j,k}=\theta_{(i,j),(h,k)}: U \otimes V &\map W \otimes Z\\u_i \otimes v_j &\mapsto w_h \otimes z_k\qedhere
            \end{align*}
        }
    }
    \note{
        Этот изоморфизм обобщает все ранее написанные изоморфизмы, кроме сопряжённости тензорного произведения и $\Hom$.
    }

    \subsection{Матрица тензорного произведения линейных отображений}
    Пусть $(x_{i,j}) = x \in M(m, n, R), (y_{h,k}) = y \in M(p, q, R)$.
    \definition[Тензорное произведение матриц]{
        Блочная матрица \[x \otimes y = \vect{x_{1,1}y & \cdots & x_{1,n}y \\ \vdots & \ddots & \vdots \\ x_{m,1}y & \cdots & x_{m,n}y}\]
        Также данная матрица называется кронекеровским произведением $x$ и $y$.
    }
    \note{
        Вот так, например, выглядит кронекеровское произведение столбцов: \[\vect{x_1 \\ \vdots \\ x_m}\otimes \vect{y_1 \\ \vdots \\ y_n} = \vect{x_1y_1 \\\vdots \\x_1y_n\\\vdots\\\vdots \\ x_m y_1 \\\vdots \\ x_m y_n}\]
    }
    \proposal{\down
    \numbers{
        \item $(x \otimes y) \otimes z = x \otimes (y \otimes z)$.
        \item $(x_1 + x_2) \otimes y = x_1 \otimes y + x_2 \otimes y$.
        \item $x \otimes (y_1 + y_2) = x \otimes y_1 + x \otimes y_2$.
        \item $\lambda x \otimes y = \lambda (x \otimes y) = x \otimes \lambda y$.
        \item $(xz) \otimes (yw) = (x \otimes y) \cdot (z \otimes w)$.
        \item $e_n \otimes e_m = e_{m \cdot n}$, здесь $e_n$ --- единичная матрица ранга $n$.
    }
    \provehere{
        Пусть $\phi: U \map V, \psi: W \map Z$, причём матрица $\phi$ в базисе $(e_i)$ равна $x$, матрица $\psi$ в базисе $(f_j)$ равна $y$.

        Тогда матрица $\phi \otimes \psi$ в базисе $(e_i \otimes f_j)_{i,j}$, упорядоченном в виде \[e_1\otimes f_1, \dots, e_1 \otimes f_n, \dots, e_m \otimes f_1 \dots, e_m \otimes f_n\] равна $x \otimes y$.

        Все записанные свойства уже доказаны ранее про тензорное произведение линейных отображений.
    }
    }

    \subsection{Кронекеровское произведение и кронекеровская сумма многочленов}
    Пусть $\phi: U \map U, \psi: V \map V$.
    Пусть $u, v$ --- собственные векторы $\phi$ и $\psi$ с числами $\lambda$ и $\mu$ соответственно.
    \[(\phi \otimes \psi)(u \otimes v) = \phi(u) \otimes \psi(v) = \lambda u \otimes \mu v = \lambda \mu(u \otimes v)\]
    Таким образом, если мультимножество собственных чисел $\phi$ --- $(\lambda_1, \dots, \lambda_m)$, а мультимножество собственных чисел $\psi$ --- $(\mu_1, \dots, \mu_n)$, то собственные числа $\phi \otimes \psi$ равны $(\lambda_i\cdot \mu_j)_{i,j}$.

    Выберем унитальный многочлен $f \in R[t]$, пусть $f = x^n + a_{n-1}x^{n-1} + \dots + a_0$.
    Ему можно сопоставить сопровождающую матрицу
    \[B(f) = (-1)^n\vect{0 & \dots & \dots & -a_0 \\ 1 & & & -a_1 \\ & \ddots & &\vdots\\ 0 & & 1 & -a_{n-1}}\]
    Она обладает тем свойством, что $\chi(B(f)) = f$.

    Из подсчёта собственных чисел получается, что $\chi(B(f) \otimes B(g))$ --- многочлен, корни которого --- попарные произведения корней $f$ и $g$.
    Этот многочлен обозначается $f \boxtimes g$, и называется \emph{кронекеровским произведением многочленов}.

    Ещё Кронекер определил кронекеровскую сумму.
    \definition[Кронекеровская сумма многочленов $f, g$]{
        $f \boxplus g = \chi(B(f) \otimes e_n + e_m \otimes B(g))$ (здесь $e_n$ --- матричная единица ранга $n$).
    }
    Это многочлен, корни которого --- попарные суммы корней $f$ и $g$.
    \corollary{
        Множество целых алгебраических чисел образует кольцо.
    }


    \section{Тензорные пространства}
    Пусть $U$ --- модуль (его элементы --- векторы --- элементы $T^1(U)$).
    Можно построить $U^*$ (его элементы --- ковекторы --- элементы $T_1(U)$).

    Дальше можно построить $\Hom(U, U) = U^* \otimes U = T^1_1(U)$.
    \definition[Тензорное пространство типа $(p, q)$]{
        $T^p_q(U) = \underbrace{U \otimes \dots \otimes U}_{p} \otimes \underbrace{U^* \otimes \dots \otimes U^*}_{q}$.

        Число $p$ традиционно называется \emph{контравариантной валентностью}, а $q$ --- \emph{ковариантной валентностью}.
        (Инверсия <<ко>> и <<контра>> произошла из-за слежения не за базисами, а за координатами)
    }

    Координаты элемента тензора $x \in T^p_q(U)$ индексируется $p$ верхними и $q$ нижними индексами.
    Иногда ещё помнят, в каком порядке шли $U$ и $U^*$ в тензорном произведении (и возникают записи вида $x^{\cdot j \cdot}_{k \cdot h}$), но все перестановки канонически изоморфны.

    \definition[Чисто ковариантное тензорное пространство]{$T^0_q(U)$.}
    \definition[Чисто контравариантное тензорное пространство]{$T^p_0(U)$.}
    Иначе ($p,q\ne0$) пространство называют \emph{смешанным}

    Сумму $p + q$ называют \emph{полной валентностью тензора}.

    Перечислим некоторые тензоры маленькой полной размерности.
    \examples[Всё на свете --- тензор]{
        \item $T^0_0(U) = R$ --- скаляры.
        \item $T^1_0(U) = U$ --- векторы.
        \item $T^0_1(U) = U^*$ --- ковекторы.
        \item $T^1_1(U) = U \otimes U^* = \Hom(U, U)$ --- линейные операторы.
        \item $T^2_0(U) = U \otimes U = U^{\otimes 2} = L(U^*, U^*; R)$.
        \item $T^0_2(U) = U^* \otimes U^* = (U \otimes U)^*$ --- билинейные отображения $U \times U \map R$, или просто отображения $U \otimes U \map R$ (также известные в природе, как 2-формы).
        \item $T^0_3(U) = U^* \otimes U^* \otimes U^* = L(U,U,U;R)$.
        \item $T^1_2(U) = U \otimes U^* \otimes U^* = \Hom((U^* \otimes U^*)^*, U) = \Hom(U \otimes U, U)$ --- задают на $U$ структуру алгебры с билинейным умножением.
        \note{
            Пусть $A$ --- алгебра над кольцом $R$, $(e_1, \dots, e_n)$ --- базис группы по сложению $A$ (если это свободный $R$-модуль).
            На алгебре задано умножение $\text{mul}: A \times A \map A$.
            \[\text{mul}: e_i, e_j \mapsto e_i \cdot e_j = \sum\limits_{h}x_{i,j}^h e_h\]
            Эти коэффициенты $x_{i,j}^h$ --- \emph{структурные константы} алгебры.
            Тензор $(x_{i,j}^h)$ --- \emph{структурный тензор} алгебры $A$.

            Вот эти структурные константы зависят от выбора базиса, но зависят с точностью до чего-то вроде сопряжения~(\cref{coordinate-transformation}).

            Сам структурный тензор от выбора базиса, конечно, не зависит.
        }
        \item $T^2_1(U) = U \otimes U \otimes U^* = \Hom(U, U \otimes U)$. Операция $\Delta: U \map U \otimes U$ --- \emph{копроизведение}, объекты снабжённые копроизведениями --- \emph{коалгебры}.
        \item $T^3_0(U) = U \otimes U \otimes U = U^{\otimes 3}$ --- 3-формы на $U^*$.
        \item Дальше --- больше.
        Дальше идут объекты, с которыми мы ещё не сталкивались, но в науке они встречаются.
        Будут встречаться 4-формы $U \times U \times U \times U \map R$, тернарные алгебры $U \times U \times U \map U$, ещё какие-то структуры --- например, $U \otimes U \map U \otimes U$, что уже и не описать без тензорных произведений.
    }
    \newlection{19 сентября 2023 г.}
%https://alexei.stepanov.spb.ru --- в том числе конспект
    Пусть $V$ --- свободный $R$-модуль над коммутативным кольцом.

    Пусть $(e_1, \dots, e_n) = e$ --- базис $V$;\ пусть $V^* = \Hom(V, R)$ --- двойственный модуль.

    $V^*$ --- тоже свободный модуль, его базис --- двойственный $e^* = \vect{e^1\\ \vdots\\ e^n}$.
    По определению $e^i(e_j) = \delta_{i,j}$.

    Пусть $e = (e_1, \dots, e_n)$ и $f = (f_1, \dots, f_n)$ --- два базиса $V$.
    Введём матрицу замена от базиса к базису $f = e\cdot \vect{e \rightsquigarrow f}$.

    В первом семестре мы показали, что матрица замены базиса для двойственного пространства --- обратная к данной.
    \proposal{
        Матрица перехода от $e^*$ к $f^*$ равна $(f^* \leftsquigarrow e^*) = (e \rightsquigarrow f)^{-1}$:
        \[\vect{f^1 \\ \vdots \\ f^n} = (f^* \leftsquigarrow e^*)\vect{e^1 \\ \vdots \\ e^n}\]
        \provehere{
            Равенство $e^i(e_j) = \delta_{i,j}$ в матричном виде выглядит в виде ${\vect{e^1 \\ \vdots \\ e^n} \cdot \vect{e_1 & \cdots & e_n} = E}$.

            Аналогично $\vect{f^1 \\ \vdots \\ f^n} \cdot \vect{f_1 & \cdots & f_n} = E$.

            Домножая первое равенство справа на $(e \rightsquigarrow f)$ и слева на обратную матрицу, получаем \[(e \rightsquigarrow f)^{-1}\vect{e^1 \\ \vdots \\ e^n}\vect{f_1 & \cdots & f_n} = E = \vect{f^1 \\ \vdots \\ f^n} \vect{f_1 & \cdots & f_n}\]

            Так как $f$ --- базис, то есть векторы $f_1, \dots, f_n$ линейно независимы, то $(e \rightsquigarrow f)^{-1}\vect{e^1 \\ \vdots \\ e^n} = \vect{f^1 \\ \vdots \\ f^n}$.
        }
    }
    Теперь рассмотрим $T^p_q(V) = \underbrace{V \otimes \dots \otimes V}_p \times \underbrace{V^* \otimes \dots \otimes V^*}_q$.

    Пусть $x \in T^p_q(V)$.
    \[x = \sum\limits_{\substack{i_1, \dots, i_q \\ j_1, \dots, j_p}} \left(e_{j_1} \otimes \dots \otimes e_{j_p} \otimes e^{i_1} \otimes \dots \otimes e^{i_q}\right) \cdot ([x]_e)^{j_1, \dots, j_p}_{i_1, \dots, i_q}\]
    где $[x]_e$ --- координаты разложения $x$ по базису $e$, которые индексируются $p$ верхними и $q$ нижними индексами.
    \theorem[Преобразование координат тензора]{\label{coordinate-transformation}
    При замене координат базиса координаты разложения меняются следующим образом
        \[([x]_f)^{j_1, \dots, j_p}_{i_1, \dots, i_q} = \sum\limits_{\substack{k_1, \dots, k_p \\ m_1, \dots, m_q}} (\tilde{c})_{i_1, \dots, i_q}^{m_1, \dots, m_q} \cdot ([x]_e)^{k_1, \dots, k_p}_{m_1, \dots, m_q} \cdot (c)_{k_1 \dots k_p}^{j_1 \dots j_p}\]
        где $(\tilde{c})_{i_1, \dots, i_q}^{m_1, \dots, m_q} = \prod\limits_{l = 1}^{q}((f \rightsquigarrow e)^{-1})^{m_l}_{i_l}$ и $(c)_{k_1 \dots k_p}^{j_1 \dots j_p} = \prod\limits_{l=1}^{p}(f \rightsquigarrow e)_{k_l}^{j_l}$.
        \provehere{
            Запишем преобразования базисов $\vect{e_1 & \cdots & e_n} = \vect{f_1 & \cdots & f_n}(f \rightsquigarrow e)$ и $\vect{e^1 \\ \vdots \\ e^n} = (f \rightsquigarrow e)^{-1}\vect{f^1 \\ \vdots \\ f^n}$.

            Отсюда извлекаем $e_r = \sum\limits_{s} f_s (f \rightsquigarrow e)_r^s = \sum\limits_{s} f_s \cdot (c)_r^s$ и $e^s = \sum\limits_{r} (e \rightsquigarrow f)_r^s \cdot f^r = \sum\limits_{r}(\tilde{c})_r^s\cdot f^r$.
            \[x = \sum\limits_{\substack{k_1, \dots, k_p \\ m_1, \dots, m_q}}\left(e_{k_1} \otimes \dots \otimes e_{k_p} \otimes e^{m_1} \otimes \dots \otimes e^{m_q}\right) \cdot ([x]_e)^{k_1, \dots, k_p}_{m_1, \dots, m_q}\]
            Раскрывая $e_i$ и $e^i$ через суммы по базису $f$, действительно получаем
            \[x = \sum\limits_{\substack{i_1, \dots, i_q \\ j_1, \dots, j_p}} \left(\sum\limits_{\substack{k_1, \dots, k_p \\ m_1, \dots, m_q}} (\tilde{c})_{i_1, \dots, i_q}^{m_1, \dots, m_q}\left(f_{j_1} \otimes \dots \otimes f_{j_p} \otimes f^{i_1} \otimes \dots \otimes f^{i_q}\right) \cdot (c)_{k_1, \dots, k_p}^{j_1, \dots, j_p}\cdot ([x]_e)^{k_1, \dots, k_p}_{m_1, \dots, m_q}\right)\]
        }
    }
    \newlection{21 сентября 2023 г.}

    \subsection{Операции над тензорами}
    \bullets{
        \item Как элементы $R$-модуля, тензоры, конечно, можно складывать.
        В координатах сложение происходит покомпонентно.
        \item Аналогично с умножением на скаляр.
        \item Можно определить умножение на тензорах \begin{align*}
                                                         \otimes: T^p_q \times T^{p'}_{q'} &\map T^{p + p'}_{q + q'}\\(v_{1 \dots p} \otimes f^{1\dots q}), (v'_{1 \dots p'} \otimes f'^{1 \dots q'})&\mapsto v_{1\dots p} \otimes v'_{1\dots p'}\otimes f^{1 \dots q} \otimes f'^{1 \dots q'}
        \end{align*}
        Несложно проверить, что умножение билинейно (то есть дистрибутивно).
        \item Сворачивание (не путать со свёрткой) --- от англ. contraction (а отнюдь не convolution).
        Зададим сворачивание на разложимых тензорах.
        \begin{align*}
            C_r^s: T^p_q(V) &\map T^{p - 1}_{q - 1}(V)\\
            (v_1 \otimes \dots \otimes v_p \otimes f^1 \otimes \dots \otimes f^q) &\mapsto (v_1 \otimes \dots \otimes \hat{v_s} \otimes \dots \otimes v_p \otimes f^1 \otimes \dots \otimes \hat{f^r} \otimes \dots \otimes f^q)f^r(v_s)
        \end{align*}
        Как обычно, крышка над элементом последовательности означает, что он пропущен.

        В координатном виде сворачивание записывается в виде $([C_r^s(x)]_e)^{i_1, \dots, \hat{i}_r, \dots, i_p}_{j_1, \dots, \hat{j}_s, \dots j_q} = \sum\limits_{h}([x]_e)^{i_1, \dots, h, \dots, i_p}_{j_1, \dots, h, \dots j_q}$ где при суммировании $h$ стоит сверху на месте $r$, снизу --- на месте $s$.
        \examples[Сворачивание]{
            \item Пусть $A \in T^1_1(V)$ --- эндоморфизм $V$.
            Если $A$ --- ранга 1, то есть $A = v \otimes \phi$, то $C^1_1(v \otimes \phi) = \phi(v)$.
            Это в точности взятие следа, что может быть записано в координатном виде:
            \gather{
                v = \vect{e_1 & \dots & e_n}\vect{v^1 \\ \vdots \\ v^n}\quad\phi = \vect{\phi_1 & \dots & \phi_n}\vect{e^1 \\ \vdots \\ e^n}\\
                C^1_1(v \otimes \phi) = C^1_1\vect{\phi_1 v^1 & \dots & \phi_n v^1 \\ \vdots & \ddots & \vdots \\ \phi_n v^1 & \dots & \phi_n v^n} = \sum\limits_{i = 1}^{n}\phi_i v^i = \phi(v)
            }
            \item Пусть $A, B \in T^1_1(V)$, то есть $\End(V)$.
            Тензорное произведение $A \otimes B \in T^2_2(V)$.

            Что такое $C_1^2(A \otimes B)$?
            Это элемент $T^1_1(V)$, то есть эндоморфизм пространства $V$.

            Пусть $A = (v\otimes \phi), B = (u \otimes \psi)$.
            \[C_1^2(A \otimes B) = C_1^2\left((v \otimes \phi) \otimes (u \otimes \psi)\right) = C^2_1(v \otimes u \otimes \phi \otimes \psi) = \phi(u)(v \otimes \psi)\]
            Применение $C^2_1(A \otimes B)$ к некоторому $w \in V$ выдаст $\phi(u)(v \otimes \psi)(w) = v \cdot \phi(u)\psi(w)$, что в точности есть результат применения композиции $AB$ к $w$.
            Таким образом, $C^2_1$ соответствует умножению матриц.
        }
    }


    \section{Тензорная алгебра}
    Заинтересуемся <<наименьшей алгеброй (ассоциативной, с единицей), в которую можно вложить $V$>>.
    Умножение на алгебре зададим как выше, тензорно, валентность произведения равна сумме валентностей множителей.

    В $R$-алгебре с единицей должны присутствовать все скаляры, выполнено вложение $R \hookrightarrow A$.
    Дальше просто по условию выполнено вложение $V \hookrightarrow A$.
    Так как произведение двух элементов $V$ --- контравариантный тензор валентности 2, то такие элементы тоже лежат в $A$.
    И так далее.
    Итого, зададим
    \[T(V) \coloneqq \bigoplus\limits_{n = 0}^{\infty}V^{\otimes n} = R \oplus V \oplus V^{\otimes 2} \oplus \dots\]

    На \emph{однородных элементах} (элементах $V^{\otimes n}$ для некоего $n \in \N_0$) умножение определено, как описано выше.
    Дальше, умножение продлевается по линейности на все элементы $T(V)$.

    Что означает, что алгебра должна быть наименьшей?
    Сформулируем универсальное свойство.

    С точки зрения теории категорий отображения из модуля в алгебру рассматривать нельзя.
    Для этого обозначим за $\cat{F}(A)$ модуль, на котором построена данная алгебра (забыли про умножение).
    Этот $\cat{F}$ --- \emph{забывающий функтор}.

    На самом деле, функторы переводят не только объекты из одной категории в другую, но и стрелки.
    Гомоморфизму алгебр $\phi: A \map B$ соответствует гомоморфизм модулей $\cat{F}(\phi): A \map B$.

    Потребуем, чтобы для любой $R$-алгебры с единицей $B$ и для любого гомоморфизма $R$-модулей $\phi: V \map \cat{F}(B)$ выполнялось условие: $\exists! \psi: A \map B$ --- гомоморфизм алгебр, такой, что диаграмма коммутативна.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJWIl0sWzEsMCwiXFxtYXRoc2Nye0Z9KEEpIl0sWzEsMSwiXFxtYXRoc2Nye0Z9KEIpIl0sWzAsMiwiXFxwaGkiLDJdLFsxLDIsIlxcbWF0aHNjcntGfShcXHBzaSkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwxLCJcXHRleHR7aW59IiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          V \& {\mathscr{F}(A)} \\
          \& {\mathscr{F}(B)}
          \arrow["\phi"', from=1-1, to=2-2]
          \arrow["{\mathscr{F}(\psi)}", dashed, from=1-2, to=2-2]
          \arrow["{\text{in}}", hook, from=1-1, to=1-2]
    \end{tikzcd}\]
    \theorem{
        Для так построенной тензорной алгебры $T(V)$ в качестве $A$ выполняется выше описанное универсальное свойство.
        \provehere{
            Если такое $\psi$ найдётся, то $\forall v \in V: \psi(v) = \phi(v)$, а так как $V$ --- множество образующих $\cat{F}(T(V))$, как алгебры, то $\psi$ единственно.
            Проверим, что $\psi$ существует.

            Пусть $B$ --- произвольная $R$-алгебра, $\psi: V \map \cat{F}(A)$ --- гомоморфизм модулей.

            Определим полилинейное \begin{align*}
                                       \theta_n: \underbrace{V \times \dots \times V}_{n} &\map \cat{F}(B)\\(v_1 \otimes \dots \otimes v_n)&\mapsto \phi(v_1) \proddots \phi(v_n)
            \end{align*} на разложимых тензорах.
            Согласно универсальному свойству тензорного произведения, для него найдётся единственное линейное отображение $\eta_n: V^{\otimes n} \map \cat{F}(B)$.

            Зададим $\cat{F}(\psi): \cat{F}(T(V)) \map \cat{F}(B)$ на прямых слагаемых в соответствии с $\eta_n$, дальше оно продлевается по линейности.

            Осталось проверить, что $\psi: T(V) \map B$ --- гомоморфизм алгебр, то есть сохраняет умножение.
            Это достаточно проверять на разложимых тензорах, так как умножение билинейно.
            На разложимых же тензорах это очевидно: \[\psi(v_1 \otimes \dots \otimes v_n) \cdot \psi(u_1 \otimes \dots \otimes u_m) = \phi(v_1)\proddots \phi(v_n)\cdot\phi(u_1)\proddots \phi(u_m) = \psi(v_1 \otimes \dots \otimes v_n \otimes u_1 \otimes \dots \otimes u_m)\]
        }
    }


    \section{Градуированные алгебры}
    Пусть $(N, +)$ --- аддитивный коммутативный моноид.
    Часто $N = \N_0$.

    \definition[$N$-градуированная $R$-алгебра]{
        Такая $R$-алгебра $A$, которая раскладывается в прямую сумму $R$-модулей $A_n$.
        \[A = \bigoplus\limits_{n \in N}A_n\]
        причём умножение удовлетворяет свойствам $A_n \cdot A_m \le A_{n + m}$.
    }
    Напоминание: как множество $\bigoplus\limits_{n \in N}A_n = \defset{\{a_n\}_{n \in N}}{\text{почти все $a_n$ нули}}$.
    \definition[Однородный элемент $x \in A$]{
        Элемент $x \in \bigcup\limits_{n \in N}A_n$.
    }
    Рассмотрим произвольный элемент $a \in A$.
    Он разложим в сумму однородных элементов, которые называются \emph{однородными компонентами элемента} $a$.

    При построении базиса Грёбнера на кольце многочленов $\Ff[t_1, \dots, t_k]$ вводится градуировка $\N_0^k$, моному $t_1^{n_1} \proddots t_k^{n_k}$ ставится в соответствие $(n_1, \dots, n_k) \in \N_0^k$.

    Также часто встречаются $\Z/2\Z$ градуировки: $A = A_0 \oplus A_1$, где $A_0$ --- подалгебра, а $A_1$ --- подмодуль, такой, что $A_1 \cdot A_1 \le A_0$.
    Например, алгебры Клиффорда.
    \newlection{26 сентября 2023 г.}

    \lemma{
        Пусть $A = \bigoplus\limits_{n \in N}A_n$ --- $N$-градуированная алгебра.
        Пусть $I \normeq A$ --- двусторонний идеал.
        Следующие условия эквивалентны:
        \numbers{
            \item $I = \bigoplus\limits_{n \in N}(A_n \cap I)$.
            \item $\forall a \in I$: однородные компоненты $a$ лежат в $I$.
            \item $I$ порождён некоторым множеством однородных элементов.
            \item Проекция $A \map A/I$ является гомоморфизмом $N$-градуированных алгебр (то есть в том числе утверждается, что $A/I$ --- $N$-градуированная алгебра).
        }
        \provebullets{
            \item[$(1)\Leftrightarrow(2)$] И (1), и (2) записываются в виде $\forall a \in I: \exists \{a_n\}$: $a_n \in I \cap A_n$ и $a = \sum\limits_{n \in N}a_n$.
            \item[$(2) \then (3)$] Для $a \in I$ обозначим за $s_a$ набор однородных компонент $a$.
            Согласно $(2)$ $s_a \subset I$, тогда $\angles{\bigcup\limits_{a \in I}s_a} = I$.

            \note{Если $I$ конечно порождён, то можно выбрать объединение $s_a$ для всех образующих $I$, тогда найдётся и конечная система однородных образующих.}
            \item[$(3) \then (2)$] Рассмотрим $\forall a \in I$.
            Из условия на порождение получаем $a = \mu_1 x_1 \lambda_1 + \dots + \mu_n x_n \lambda_n$, где $x_i \in I$ --- однородные, $\mu_i, \lambda_i \in R$.
            Каждый из $\mu_i, \lambda_i$ является конечной суммой однородных компонент, а произведение однородных однородно.
            \item[$(1) \then (4)$] Положим $I_n \coloneqq A_n \cap I$. Для всяких модулей верно, что $A/I = \frac{\bigoplus A_n}{\bigoplus I_n} = \bigoplus \frac{A_n}{I_n}$.
            Проекция отображает $a \in A_n$ в $a + I_n$, действительно она уважает градуировку.
            \item[$(4) \then (2)$] Рассмотрим $a \in I$, пусть $a = \sum\limits_{n \in N}a_n$, почти все $a_n = 0$.

            Тогда для гомоморфизма редукции $\rho: \rho(a) = \sum\limits_{n \in N}\rho(a_n)$, где $\rho(a_n) \in A_n/I_n$, но так как это 0, то $a_n \in I_n$.
        }
    }

    \subsection{Смена градуировки}
    \label{change-grad}
    Пусть $\phi: N \map N'$ --- гомоморфизм моноидов, $A$ --- $N$-градуированная алгебра.

    Тогда $A = \bigoplus\limits_{n \in N}A_n = \bigoplus\limits_{n' \in N'}\left(\bigoplus\limits_{n \in \phi^{-1}(n')}A_n\right)$, то есть $A$ можно превратить в $N'$-градуированную алгебру.

    \example{
        Построим <<общую матрицу с определителем 1>>: $\vect{x_{1,1} & \cdots & x_{1,n}\\\vdots&\ddots&\vdots\\x_{n,1}&\cdots&x_{n,n}}$.

        Чтобы определитель был 1, мы рассматриваем эту матрицу над кольцом \[A \coloneqq \Z[x_{1,1}, \dots, x_{n,n}]/(\det(x) - 1)\]

        Эта матрица обладает универсальным свойством: $\forall R, \forall a \in SL_n(R): \exists! \phi: A \map R: SL_n(\phi)(x) = a$.
        $SL_n$ --- функтор, который в частности сопоставляет стрелке $\phi: A \map R$ стрелку $SL_n(\phi): SL_n(A) \map SL_n(R)$ покомпонентным применением $\phi$.

        Так как $\Z[x_{1,1}, \dots, x_{n,n}]$ --- $\N_0$-градуированная алгебра, а $\det(x) - 1$ --- многочлен с однородными компонентами степени $n$ и $0$, то $A$ --- $\Z/n\Z$-градуированная алгебра.
    }
    \definition[Антикоммутативная $\Z/2\Z$-градуированная $R$-алгебра $A$]{
        Такая алгебра, что $\forall a \in A_n, b \in A_m: ab = (-1)^{mn}\cdot ba$.
        Дополнительно потребуем, чтобы $2 \in \Reg R$, тогда $\forall a \in A_1: a^2 = 0$.

        Также такие алгебры называют \emph{градуировано-коммутативными}.
    }
    Если $A$ --- $N$-градуированная $R$-алгебра, и имеется гомоморфизм моноидов $\phi: N \map \Z/2\Z$ (например, $\phi: \N_0 \map \Z/2\Z$), то $A$ тоже можно считать градуировано-коммутативной, если она градуировано-коммутативна, как $\Z/2\Z$ алгебра $A$, полученная при помощи гомоморфизма $\phi$, как в~(\cref{change-grad}).
    \definition[Антисимметричное отображение $B: V \times V \map U$]{
        Такое отображение, что $B(x, y) = -B(y, x)$ и $B(x, x) = 0$.
        Если $B$ --- билинейно, то достаточно второго условия, а если $2 \in \Reg R$, то можно обойтись и первым.
    }


    \section{Построение симметрической и внешней алгебр}
    Тензорное пространство (пусть полностью контравариантное) валентности $n$ соответствует однородным многочленам степени $n$ от некоммутирующих переменных.

    В симметрической алгебре мы введём соотношения о коммутировании переменных.
    Для этого профакторизуем по соответствующему идеалу $I_S = \angles{x \otimes y - y \otimes x \middle| x, y \in V} \normeq T(V)$.
    \definition[Симметрическая алгебра]{
        $S(V) \coloneqq T(V)/I_S$
    }
    Если $V$ --- свободный $R$-модуль с базисом мощности $n$, то $S(V) \cong R[x_1, \dots, x_n]$~(\cref{s_is_poly}).
    В соответствии с этим, умножение в симметрической алгебре обозначают точкой.

    Заметим, что тензорное пространство --- $\N_0$-градуированная алгебра, и при факторизации по $I_S$ градуировка сохраняется, таким образом, $S(V)$ --- тоже $\N_0$-градуированная алгебра.

    В пару к симметрической алгебре построим <<антисимметрическую>>.
    Здесь переменные будут \emph{антикоммутировать}, $x \otimes y = -y \otimes x$.
    В характеристике не 2 это то же самое, что и $x \otimes x = 0$ для любого $x \in V$, а в общем случае условие равенства квадрата нулю сильнее.

    Определим идеал $I_{\wedge} = \angles{x \otimes x \middle| x \in V}\normeq T(V)$.

    \definition[Внешняя алгебра или алгебра Грассмана]{
        $\ext(V) \coloneqq T(V)/I_{\wedge}$
    }
    Если $V$ --- свободный $R$-модуль с базисом мощности $n$, то эта алгебра конечномерна над $R$~(\cref{s_is_poly}).
    Умножение во внешней степени обозначают значком $\wedge$.

    $V$ вкладывается как в $S(V)$, так и в $\ext(V)$ --- ядро композиции $V \hookrightarrow T(V) \map S(V)$ нулевое, так же как и у $V \hookrightarrow T(V) \map \ext(W)$ (подмодуль, по которому происходит факторизация, содержит только элементы степени хотя бы 2).

    Аналогично симметрической, внешняя алгебра --- $\N_0$-градуированная алгебра.
    \theorem[Универсальное свойство симметрической алгебры]{
        Для любой \textbf{коммутативной} алгебры $A$, для любого гомоморфизма $R$-модулей $\phi: V \map A$ найдётся единственный гомоморфизм $R$-алгебр $\eta: S(V) \map A$, такой, что диаграмма коммутирует.
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJWIl0sWzEsMCwiVChWKSJdLFsxLDEsIkEiXSxbMiwwLCJTKFYpIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyLCJcXHBoaSIsMl0sWzEsMywiXFxyaG8iXSxbMywyLCJcXGV0YSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDIsIlxccHNpIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              V \& {T(V)} \& {S(V)} \\
              \& A
              \arrow[hook, from=1-1, to=1-2]
              \arrow["\phi"', from=1-1, to=2-2]
              \arrow["\rho", from=1-2, to=1-3]
              \arrow["\eta", dashed, from=1-3, to=2-2]
              \arrow["\psi", dashed, from=1-2, to=2-2]
        \end{tikzcd}\]
        \provehere{
            По гомоморфизму $\phi: V \map A$ найдётся единственный гомоморфизм $R$-алгебр $\psi: T(V) \map A$ (универсальное свойство тензорного произведения).

            Так как $\psi: T(V) \map A$ бьёт в коммутативную алгебру, то \[\psi(x \otimes y) = \psi(x) \cdot \psi(y) = \psi(y) \cdot \psi(x) = \psi(y \otimes x)\]
            поэтому образующие $I_S$ лежат в $\Ker(\psi)$.
            Таким образом, $\psi$ пропускается через фактор, а так как $\rho$ --- редукция по $I_S$ --- эпиморфизм, то $\eta$ единственно.
        }
    }
    \theorem[Универсальное свойство внешней алгебры]{
        Для любой градуировано коммутативной $\N_0$-градуированной $R$-алгебры $A$, и для любого гомоморфизма $R$-модулей $\phi: V \map A_1$ ($A_1$ --- однородная компонента $A$ с индексом 1) найдётся единственный гомоморфизм $\eta: \ext(V) \map A$, такой, что диаграмма коммутирует.
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJWIl0sWzEsMCwiVChWKSJdLFsxLDEsIkEiXSxbMiwwLCJcXGJpZ3dlZGdlKFYpIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyLCJcXHBoaSIsMl0sWzEsMiwiXFxwc2kiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXHJobyJdLFszLDIsIlxcZXRhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              V \& {T(V)} \& {\ext(V)} \\
              \& A
              \arrow[hook, from=1-1, to=1-2]
              \arrow["\phi"', from=1-1, to=2-2]
              \arrow["\psi", dashed, from=1-2, to=2-2]
              \arrow["\rho", from=1-2, to=1-3]
              \arrow["\eta", dashed, from=1-3, to=2-2]
        \end{tikzcd}\]
        \provehere{
            По гомоморфизму $\phi: V \map A$ найдётся единственный гомоморфизм $R$-алгебр $\psi: T(V) \map A$ (универсальное свойство тензорного произведения).

            Так как $\psi: T(V) \map A$ бьёт в антикоммутативную $\N_0$-градуированную $R$-алгебру, то $\forall x \in V$: \[\psi(x \otimes x) = \psi(x) \cdot \psi(x) = -\psi(x) \cdot \psi(x) = -\psi(x \otimes x)\]
            Так как $2 \in \Reg R$, то $\psi(x \otimes x) = 0$;
            поэтому образующие $I_{\wedge}$ лежат в $\Ker(\psi)$.
            Таким образом, $\psi$ пропускается через фактор, а так как $\rho$ --- редукция по $I_\wedge$ --- эпиморфизм, то $\eta$ единственно.
        }
    }
    \ok
    Итак, $I_S = (x \otimes y - y \otimes x)$.
    \note{
        $I_S \cap V^{\otimes n}$ --- подмодуль в $V^{\otimes n}$, порождённый элементами вида \[(x_1 \otimes \dots \otimes y \otimes z \otimes \dots \otimes x_{n - 2}) - (x_1 \otimes \dots \otimes z \otimes y \otimes \dots \otimes x_{n - 2})\] где $y$ и $z$ на одном и том же месте в одном и том же кортеже $x_1 \otimes \cdots \otimes \_ \otimes \_ \otimes \cdots \otimes x_{n-2}$.}
    \begin{definition_env}[$n$-я симметрическая степень $V$]
        Фактормодуль $V^{\otimes n}/\left(I_S \cap V^{\otimes n}\right)$.
    \end{definition_env}
    Умножение в симметрической алгебре традиционно обозначается точкой, что, как мы впоследствии увидим~(\cref{s_is_poly}), неслучайно.
    Рассмотрим \begin{align*}
                   \phi: \underbrace{V \times \dots \times V}_{n} &\map S^n(V)\\(v_1, \dots, v_n) &\mapsto \overline{v_1 \otimes \dots \otimes v_n} \equiv v_1 \proddots v_n
    \end{align*}
    $\phi$ полилинейно и симметрично.
    \theorem[Универсальное свойство $n$-й симметрической степени]{
        $\forall R$-модуля $M$ и симметричного полилинейного отображения $\underbrace{V \times \dots \times V}_{n} \map M: \exist! \psi: S^n(V) \map V$, такое что диаграмма коммутативна.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJWIFxcdGltZXMgXFxkb3RzIFxcdGltZXMgViJdLFsyLDAsIlNebihWKSJdLFsxLDEsIk0iXSxbMCwxXSxbMCwyLCJcXHBoaSIsMl0sWzEsMiwiXFxwc2kiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&, column sep=small]
        {V \times \dots \times V}
              \&\& {S^n(V)} \\
              \& M
              \arrow[from=1-1, to=1-3]
              \arrow["\phi"', from=1-1, to=2-2]
              \arrow["\psi", dashed, from=1-3, to=2-2]
        \end{tikzcd}\]
        \provehere{
            Пусть $\theta: V \times \dots \times V \map V^{\otimes n}$
            Согласно универсальному свойству тензорного произведения найдётся $\eta: V^{\otimes n} \map M$, такое, что $\phi = \eta \circ \theta$.
            Из симметричности $\phi$ \[\forall a \in V^{\otimes k}, b \in V^{\otimes n - 2 - k}: \eta(a \otimes x \otimes y \otimes b) = \eta(a \otimes y \otimes x \otimes b)\] то есть образующие лежат в ядре $\eta$, и $\eta$ пропускается через фактор.
        }
    }
    Аналогично определяется $n$-я внешняя степень
    \[\ext^n(V) \bydef V^{\otimes n}/I_n = V^{\otimes n}/\angles{a \otimes x \otimes x \otimes b \middle| x \in V, a \in V^{\otimes k}, b \in V^{\otimes n - 2 - k}}\]
    \theorem[Универсальное свойство $n$-й внешней степени]{
        $\forall R$-модуля $M$ и антисимметричного полилинейного отображения $\phi: V \times \dots \times V \map M: \exist! \psi: \ext^n(V) \map V$, такое что диаграмма коммутативна.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJWXFx0aW1lc1xcY2RvdHNcXHRpbWVzIFYiXSxbMiwwLCJcXGV4dF5uKFYpIl0sWzEsMSwiTSJdLFswLDFdLFswLDIsIlxccGhpIiwyXSxbMSwyLCJcXHBzaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {V\times\cdots\times V} \&\& {\ext^n(V)} \\
        \& M
        \arrow[from=1-1, to=1-3]
        \arrow["\phi"', from=1-1, to=2-2]
        \arrow["\psi", dashed, from=1-3, to=2-2]
        \end{tikzcd}\]
        \provehere{
            Пусть $\theta: V \times \dots \times V \map V^{\otimes n}$
            Согласно универсальному свойству тензорного произведения найдётся $\eta: V^{\otimes n} \map M$, такое, что $\phi = \eta \circ \theta$.
            Из антисимметричности $\phi$ \[\forall a \in V^{\otimes k}, b \in V^{\otimes n - 2 - k}: \eta(a \otimes x \otimes x \otimes b) = 0\]то есть образующие лежат в ядре $\eta$, и $\eta$ пропускается через фактор.
        }
    }
    \newlection{28 сентября 2023 г.}
%    $I_\wedge, I_S \normeq T(V)$, где $I_S = \angles{x \otimes y - y \otimes x \middle| x, y \in V}, I_{\wedge} = \angles{x \otimes x \middle| x \otimes x \in V}$.
%    \gather{S(V) = T(V)/I_S\qquad\ext(V) = T(V)/I_\wedge\\
%    S^n(V) = V^{\otimes n}/\angles{a (x \otimes y - y \otimes x) b \middle | x, y \in V, a \in V^{\otimes k}, b \in V^{\otimes n - k - 2}} \\
%    \ext^n(V) = V^{\otimes n}/\angles{a (x \otimes x) b \middle | x \in V, a \in V^{\otimes k}, b \in V^{\otimes n - k - 2}}}
%
%    Операция в $S(V)$ пишется $\cdot$, как обычное умножение, операция в $\ext(V)$ пишется $\wedge$.

    \subsection{Базисы симметрической и внешней степеней}
    Пусть $V$ --- свободный модуль.
    Какие базисы у $S^n(V)$ и $\ext^n(V)$?

    Пусть $(x_1, \dots, x_m)$ --- базис $V$.

    Зададим отображение $f$ из базиса в произвольную коммутативную алгебру.
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHt4XzEsIFxcZG90cywgeF9tXFx9Il0sWzEsMCwiViJdLFsyLDAsIlMoVikiXSxbMSwxLCJBIl0sWzEsMywiXFxleGlzdHMgISBcXHBoaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDMsIlxcZXhpc3RzICEgXFxwc2kiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwzLCJmIiwyXSxbMCwxXSxbMSwyLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\{x_1, \dots, x_m\}}
          \& V \& {S(V)} \\
          \& A
          \arrow["{\exists ! \phi}", dashed, from=1-2, to=2-2]
          \arrow["{\exists ! \psi}", dashed, from=1-3, to=2-2]
          \arrow["f"', from=1-1, to=2-2]
          \arrow[from=1-1, to=1-2]
          \arrow[hook, from=1-2, to=1-3]
    \end{tikzcd}\]
    Тогда существует и единственно $\psi: S(V) \map A$ --- гомоморфизм алгебр, а это универсальное свойство кольца многочленов.\label{s_is_poly}

    Таким образом, $S^n(V) \cong R[x_1, \dots, x_m]_{\deg = n}$.
    Можно явно выписать базис.
    Кстати, отсюда видно, почему в $S(V)$ умножение обозначают точкой --- как и в случае обычных переменных.
    \ok
    Элементарная комбинаторика (так как $x_i \wedge x_j = -x_j \wedge x_i$, то соседние переменные в разложимом тензоре можно менять местами, меняя знак; если в одном разложимом тензоре две переменные $x_i$ для какого-то $i$, то он равен нулю) показывает, что $\ext^n(V) = \angles{x_{i_1} \wedge \dots \wedge x_{i_n}\middle|1 \le i_1 < \dots < i_n \le m}$.
    \proposal{
        Это не просто система образующих, а базис $\ext^n(V)$.
        \provehere{
            Надо проверить линейную независимость.
            Пусть $I = \{i_1, \dots, i_n\}$, где $i_1 < i_2 < \dots < i_n$.
            Обозначим $x_{i_1} \wedge \dots \wedge x_{i_n} \eqqcolon x_I$.
            Обозначим $\{1, \dots, n\} \eqqcolon [n]$.

            Предположим наличие линейной зависимости:
            \[\sum\limits_{I \subset [m],|I| = n}x_{I}\alpha_I = 0\]
            Домножим равенство на $x_{[m]\sm J}$, получим $\pm \alpha_J x_{[m]}$.

            Отсюда хочется доказать, что $\alpha_J = 0$ (и мы получим, что всякая линейная зависимость тривиальна), но для этого надо показать, что $x_J \ne 0$.
            Как ни странно, это сделать не очень просто.

            Одним из способов является воспользоваться универсальным свойством внешнего произведения.
            Найдём антисимметричное полилинейное отображение $\underbrace{V \times \dots \times V}_{m} \map R$.
            По счастливому стечению обстоятельств $\dim V = m$, поэтому такое отображение мы знаем, это --- определитель.

            Так как базис $V$ состоит из линейно независимых векторов, то $\det(x_1, \dots, x_m) \ne 0$.
            Но согласно универсальному свойству внешнего произведения $\det$ пропускается через фактор, а тогда из условия $\det(x_1 \wedge \dots \wedge x_m) \ne 0$ следует и само условие $x_{[m]} = x_1 \wedge \dots \wedge x_m \ne 0$.
        }
    }
    \note{Обозначения из доказательства $x_{i_1} \wedge \dots \wedge x_{i_n} \eqqcolon x_I$, $\{1, \dots, n\} \eqqcolon [n]$ будут повсеместно встречаться и далее.}


    \section{Другое определение симметрической и внешней алгебр}
    Если кольцо $R$ является $\Q$-алгеброй (то есть разрешается делить на все ненулевые целые), то можно дать другое определение симметрической и внешней алгебрам.

    Введём действие $S_n \curvearrowright V^{\otimes n}$: \begin{align*}
                                                              S_n \times V^{\otimes n}&\map V^{\otimes n}\\\pi, (x_1 \otimes \dots \otimes x_n) &\mapsto x_{\pi(1)} \otimes \dots \otimes x_{\pi(n)}
    \end{align*}
    продолженное так по линейности на все элементы $V^{\otimes n}$.

    Тензор $x \in V^{\otimes n}$ назовём \emph{симметрическим}, если $\forall \pi \in S_n: \pi(x) = x$.
    Все симметрические тензоры образуют подмодуль $\tilde{S}^n(V) \le V^{\otimes n}$, который изоморфен $S^n(V)$.
    Более того, если $R$ --- $\Q$-алгебра, то можно ввести умножение данных симметрических тензоров, об этом ниже.

    Проблема в том, что по умолчанию произведение симметрических тензоров --- необязательно симметрический тензор, переменные можно переставлять только <<внутри множителей>>.

    Для того, чтобы избежать этой проблемы, введём \emph{симметризацию} $\text{Sym}: V^{\otimes n} \map \tilde{S}^n(V)$.
    Также хочется, чтобы симметризация была проектором на $\tilde{S}^n(V)$, то есть $\forall x \in \tilde{S}^n(V): \text{Sym}(x) = x$.
    Для этого мы её определим так: \begin{align*}
                                       \text{Sym}:V^{\otimes n} &\map \tilde{S}^n(V)\\x &\mapsto \frac{1}{n!}\sum\limits_{\pi \in S_n}\pi(x)
    \end{align*}
    \intfact{$\text{Sym}$ является проектором на $\tilde{S}^n(V)$.
    Умножение \begin{align*}
                  \tilde{S}^n(V),\tilde{S}^k(V)&\map\tilde{S}^{n+k}(V)\\x, y &\mapsto \text{Sym}(x \otimes y)
    \end{align*} коммутативно и ассоциативно.
    С данной операцией $\bigoplus\limits_{n \ge 0}\tilde{S}^n(V)$ становится алгеброй с единицей.
    }
    \ok
    Для внешней алгебры можно действовать также, определив действие $S_n \curvearrowright V^{\otimes n}$: \begin{align*}
                                                                                                              S_n \times V^{\otimes n}&\map V^{\otimes n}\\\pi, (x_1 \otimes \dots \otimes x_n) &\mapsto \sgn(\pi) \cdot x_{\pi(1)} \otimes \dots \otimes x_{\pi(n)}
    \end{align*}и положив $\tilde{\ext}\!{}^n(V) \le V^{\otimes n}$, подмодулем, инвариантным относительно данного действия.
    Для умножения введём \begin{align*}
                             \text{Alt}: V^{\otimes n} &\map \tilde{\ext}\!{}^n(V)\\x &\mapsto \frac{1}{n!}\sum\limits_{\pi \in S_n}\sgn(\pi)\cdot\pi(x)
    \end{align*}
    \intfact{$\text{Alt}$ является проектором на $\tilde{\ext}{}\!^n(V)$.
    Умножение \begin{align*}
                  \tilde{\ext}\!{}^n(V),\tilde{\ext}\!{}^k(V)&\map\tilde{\ext}\!{}^{n+k}(V)\\x, y &\mapsto \text{Alt}(x \otimes y)
    \end{align*} антикоммутативно и ассоциативно.
    С данной операцией $\bigoplus\limits_{n \ge 0}\tilde{\ext}\!{}^n(V)$ становится антикоммутативной $\N_0$-градуированной алгеброй с единицей.
    }

    \newlection{3 октября 2023 г.}


    \section{Вычисления в алгебре Грассмана}
    Пусть $A \in M(m, n, R)$. $I \subset [m], J \subset[m]$,
    Обозначим за \begin{align*}
                     A^I& \text{ подматрицу, состоящую из строк с номерами из }I\\ A_J& \text{ подматрицу, состоящую из столбцов с номерами из }J\\A^I_J& = (A^I)_J = (A_J)^I
    \end{align*}
    \note{
        \[e_{j_1}\wedge \dots\wedge e_{j_n} = (-1)^{\text{inv}(j_1, \dots, j_n)} e_J,\text{ где $\text{inv}(j_1, \dots, j_m)$ --- число беспорядков (инверсий) в $j_1, \dots, j_n$}\]
    }

    Рассмотрим алгебру Грассмана $\ext(V)$.
    \theorem{\label{calculations_in_grassman}
    Пусть $(u_1, \dots, u_n)C = (v_1, \dots, v_m)$, где $C \in M(n, m, R)$, $u_i, v_j \in V$.
    Интересным случаем является $m \le n$, иначе в обеих частях равенства стоят нули. Утверждается, что
        \[v_{[m]} \coloneqq v_1 \wedge \dots \wedge v_m = \sum\limits_{|I| = m, I \subset [n]}u_{I}\det (C^I)\]
        где $C^I$ --- подматрица $C$, берутся строки с номерами из $I$.
        \provebullets{
            \item Сначала предполагаем, что $(u_i)_{i=1}^{n}$ являются базисом $V$, причём $m = n$.

            Тогда $v_{[m]} \in \ext^m (V) = \angles{ u_{[m]} }$, то есть $v_{[m]} = u_{[m]} \cdot \alpha(C)$, где коэффициент $\alpha$ зависит от матрицы $C$.
            Таким образом, этот коэффициент можно рассматривать, как отображение $\alpha: M(n, R) \map R$.

            Несложно видеть полилинейность, антисимметричность и нормированность $\alpha$, то есть это определитель.

            \item Теперь пусть $m < n$, но $(u_i)_{i=1}^{n}$ --- всё ещё базис $V$.
            Тогда $\defset{u_{I}}{I \subset [n], |I| = m}$ --- базис $\ext^m(V)$ и $v_{[m]} = \sum\limits_{I}u_I \alpha_I$.

            Зафиксируем $J \subset [n], |J| = m$. Определим $U \le V$, как подмодуль, натянутый на $\defset{u_j}{j \in J}$.
            Определим проекцию на $U$: $\overline{\cdot}: V \map U, u_i \mapsto \all{u_i, &i \in J \\ 0,& i \notin J}$.
            Чтобы найти коэффициент перед $u_J$, домножим слева выражение $v_j$ через $u_i$ на матрицу проекции на $U$ (применим надчёркивание):
            \[(\overline{u}_1, \dots, \overline{u}_n)C = (\overline{v}_1, \dots, \overline{v}_m) \qquad\iff\qquad (u_{j_1}, \dots, u_{j_m})C^J = (\overline{v}_1, \dots, \overline{v}_m)\]
            Из предыдущего пункта находим $u_J \det(C^J) = v_{[m]}$.

            \item Теперь докажем общий случай.
            Пусть $M$ --- свободный модуль с базисом $(e_1, \dots, e_n)$, пусть $(f_1, \dots, f_m) \coloneqq (e_1, \dots, e_n)C$. Согласно предыдущему пункту
            \[f_{[m]} = f_1 \wedge \dots \wedge f_m = \sum\limits_{I\subset[n],|I| = m}e_I \det C^I\]
            Согласно универсальному свойству базиса $\exists! L: M \map V: L(e_i) = u_i$.

            Теперь $(v_1, \dots, v_m) = (u_1, \dots, u_n)C = (L(e_1), \dots, L(e_n))C = (L(f_1), \dots, L(f_m))$.
            Применим $\ext^k(L)$ к $f_1 \wedge \dots \wedge f_m$ (применим $L$ к каждой компоненте):
            \[v_{[m]} = L(f_1) \wedge \dots \wedge L(f_m) = \sum\limits_{I}L(e)_{I}\det (C^I) = \sum\limits_{I}u_I \det (C^I)\qedhere\]
        }
    }
    \corollary[Теорема Бине-Коши]{
        Пусть $R$ --- коммутативное кольцо, $A \in M(m, n, R), C \in M(n, m, R)$.
        Полезным случаем является $m \le n$, иначе обе части будут точно нулями. Утверждается, что
        \[\det(A \cdot C) = \sum\limits_{I \subset [n],|I| = m}\det(A_I)\det(C^I)\]
        \provehere{
            Пусть $V$ --- свободный правый модуль ранга $m$ с базисом $(e_1, \dots, e_m)$.

            Положим $(u_1, \dots, u_n) \coloneqq (e_1, \dots, e_m)A$; далее положим $(v_1, \dots, v_m) \coloneqq (u_1, \dots, u_n)C$.

            Согласно~(\cref{calculations_in_grassman}): $v_1 \wedge \dots \wedge v_m = \sum\limits_{I \subset [n], |I| = m}u_I \det(C^I)$.

            Дальше раскрывая $(u_{i_1}, \dots, u_{i_m}) = (e_{1}, \cdots, e_{m})A_I$, получаем \[v_{[m]} = \sum\limits_{I \subset [n], |I| = m}u_I \det(C^I) = \sum\limits_{I \subset [n], |I| = m}e_{[m]}\det(A_I) \det(C^I)\]
            Сравнивая с тем, что $(v_1, \dots, v_m) = (e_1, \dots, e_m)\cdot (AC)$, получаем равенство определителей.
        }
    }
    \theorem[Разложение по нескольким столбцам]{\label{eps_def}
    Рассмотрим блочную матрицу $(B | C)$, где $B \in M(n, k, R), C \in M(n, n - k, R)$.
    Утверждается, что
        \[\det\left(B|C\right) = \sum\limits_{I \subset [n],|I| = k}{\eps_I}\cdot \det\left(B^I\right)\det\left(C^{[n]\sm I}\right)\]
        где $\eps_I$ --- знак перестановки ниже (пусть $I = \{i_1 < \cdots < i_k\}; J \coloneqq [n] \sm I = \{j_1 < \cdots < j_{n - k}\}$).
        \[\eps_I = \sgn\vect{1&&\cdots&\cdots&&n\\i_1& \dots& i_k& j_1& \dots& j_{n - k}} = (-1)^{\sum\limits_{i = 1}^{k}(i_s - s)}\]
        \provehere{
            Пусть $(b_1, \dots, b_k)$ --- столбцы матрицы $B$, $(c_1, \dots, c_{n-k})$ --- столбцы матрицы $C$.
            Посчитаем $b_1 \wedge \dots \wedge  b_k \wedge c_1 \wedge \dots \wedge c_{n - k}$.

            С одной стороны, это равно $e_{[n]} \cdot \det(B | C)$.

            С другой стороны, внешнее произведение ассоциативно: \[(b_1 \wedge \dots b_k) \wedge (c_1 \wedge \dots \wedge c_{n-k}) =\left(\sum\limits_{I \subset [n], |I| = k}e_I \det\left(B^I\right)\right)\wedge\left(\sum\limits_{J \subset [n], |J| = n-k}e_J \det\left(C^J\right)\right) \]
            Так как произведение $e_I \wedge e_J$ не обнуляется только если $I \sqcup J = [n]$, то
            \[(b_1 \wedge \dots b_k) \wedge (c_1 \wedge \dots \wedge c_{n-k}) =\left(\sum\limits_{I \subset [n], |I| = k}e_I \wedge e_{[n]\sm I} \det\left(B^I\right)\det\left(C^{[n]\sm I}\right)\right) \]
            Теперь осталось вычислить $e_I \wedge e_{[n]\sm I}$. Это равняется $\eps_I \cdot e_{[n]}$, где $\eps_I$ --- знак перестановки \[\vect{1&&\cdots&\cdots&&n\\i_1& \dots& i_k& j_1& \dots& j_{n - k}}\]
            Нетрудно видеть, что индексы $i$ упорядочены по возрастанию, $j$ --- тоже, инверсии в данной перестановки образуют только пары $(i_l, j_m)$.
            Индекс $i_l$ образует инверсию с меньшими $j$, таких имеется $i_l - l$.
            В $\Z/2\Z$: $\sum\limits_{l = 1}^{k}(i_l - l) = \sum\limits_{l = 1}^{k}i_l + \frac{l(l + 1)}{2}$
        }
    }


    \section{Элементы матрицы внешней степени}
    \lemma[Функториальность $\wedge^k$]{\label{functoriality-of-extk}
    Всякому отображению $L: U \map V$ соответствует единственное линейное
    \begin{align*}
        \ext^k (L): \ext^k(U) &\map \ext^k(V)\\u_1 \wedge \dots \wedge u_k &\mapsto L(u_1) \wedge \dots \wedge L(u_k)
    \end{align*}
    Это является иллюстрацией того, что всякая хорошая конструкция, задающееся универсальным свойством, является функтором (действует и на морфизмах).
    \provehere{
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJVIFxcdGltZXMgXFxkb3RzIFxcdGltZXMgVSJdLFsxLDAsIlxcZXh0XmsoVSkiXSxbMCwxLCJWXFx0aW1lcyBcXGRvdHMgXFx0aW1lcyBWIl0sWzEsMSwiXFxleHReayhWKSJdLFswLDIsIihMLFxcZG90cyxMKSIsMl0sWzIsM10sWzAsMV0sWzAsMywiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsMywiXFxleHReayhMKSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {U \times \dots \times U}
              \& {\ext^k(U)} \\
              {V\times \dots \times V} \& {\ext^k(V)}
              \arrow["{(L,\dots,L)}"', from=1-1, to=2-1]
              \arrow[from=2-1, to=2-2]
              \arrow[from=1-1, to=1-2]
              \arrow[dashed, from=1-1, to=2-2]
              \arrow["{\ext^k(L)}", dotted, from=1-2, to=2-2]
        \end{tikzcd}\]
        Композиция $(L,\dots,L)$ и вложения $V \times \dots \times V \map \ext^k(V)$, бьющая $U \times \dots \times U \map \ext^k(V)$ антисимметрична и полилинейна, значит, согласно универсальному свойству внешней алгебры, найдётся единственная стрелка $\ext^k(L):\ext^k(U)\map\ext^k(V)$.
        Часто её обозначают просто $L$, в программировании это называется \emph{полиморфизмом} --- зависимость стрелки от передающихся ей аргументов.
    }
    }

    Пусть $L: V \map V$ линейно, $V = \angles{e_1, \dots, e_n}$ --- свободный модуль.
    Обозначим матрицу $L$ в базисе $e$ за $[L]_e$.
    Базису $e$ модуля $V$ соответствует базис $\ext^k e = \defset{e_I}{I \subset [n]}$.

    Изучим связь матрицы $[L]_e$ и матрицы $[\ext^k(L)]_{\ext^k(e)}$.
    \note{ Если $L$ обратим, то $\ext^k\left(L^{-1}\right) = (\ext^k L)^{-1}$. }

    Пусть $J \subset [n], |J| = k$.
    $L(e_{j_1}) = (e_1, \dots, e_n)([L]_e)_{*,j_1}$, таким образом $L(e_{j_1}, \cdots, e_{j_k}) = (e_1, \dots, e_n)([L]_e)_J$.
    \[L(e_{j_1}) \wedge \dots \wedge L(e_{j_k}) = \sum\limits_{I \subset [n],|I| = k}e_{I}\det([L]_e)^I_J\]
    Таким образом, мы получили следующий результат:
    \lemma{\label{elements-of-ext-matrix}
    Элемент матрицы $[\ext^k L]_{\ext^k e}$ в строке $I$ и столбце $J$ равен минору $\det\left([L]_e\right)^I_J$.
    }
    \newlection{5 октября 2023 г.}

    \subsection{Элементы обратной матрицы}
    Конечно, подобным образом можно записать некоторую формулу, выражающую элементы матрицы $\ext^k(L)^{-1}$.

    Например, элементы обратной к любой матрице над коммутативным кольцом равны соответствующим алгебраическим дополнениям, поделённым на определитель.
    Сейчас будет найдено более короткое выражение для этих элементов.
    \note{
        Всё, что мы собираемся доказать над полем --- полиномиальные равенства, поэтому они верны для всех колец (полиномиальные равенства сохраняются при взятии подколец и факторов) --- все кольца являются факторкольцом кольца многочленов (если кольцо очень большое, то и элементов очень много).
        Более того, можно доказать над $\R$, так как $\R$ содержит $\Z[t_i|i \in \N]$ --- всякое полиномиальное равенство содержит конечное число переменных.
    }
    Поэтому можно думать, что $L: V \map V$ --- автоморфизм векторного пространства.
    Выберем базис $V = \angles{e_1, \dots, e_n}$, в нём $A \coloneqq [L]_e$ --- матрица $L$.
    Обозначим за $\ext^k A$ матрицу оператора $\ext^k L$ в базисе $\ext^k e$.
    \theorem{
        Пусть $I, J \subset [n]$.
        Имеет место следующая формула для элементов матрицы $(\ext^k A)^{-1}$:
        \[\left((\ext^k A)^{-1}\right)_{I,J} = \det(A^{-1})^I_J = (-1)^{\eps_I + \eps_J}\frac{1}{\det A}A^{[n] \sm J}_{[n]\sm I}\]
        $\eps_I$ и $\eps_J$ определены здесь~(\cref{eps_def})
        \provehere{
            Помимо базиса $\ext^k e = (e_I)_{I \subset [n], |I| = k}$, имеется также двойственный к нему базис $(f^I)_{I \subset [n], |I| = k}$ --- здесь $f^I \coloneqq (-1)^{\eps_I}e_{[n] \sm I}$.
            Двойственность означает $f^I \cdot e_J = \delta_{I,J} \cdot e_{[n]}$, что можно так записать в матричном виде: пусть $f$ --- столбец из $f^I$, $\ext^k e$ --- строка из $e_I$, тогда \[f \cdot \ext^k e = e_{[n]} \cdot E\tag{$*$}\label{matrix-form}\]
            Это произведение матриц с элементами из алгебры $\ext(V)$, и $E$ --- единичная матрица, проиндексированная $I \subset [n], |I| = k$.

            \indentlemma[Функториальность $\ext$]{
                Для коммутативного кольца $R$ всякий гомоморфизм $R$-модулей $L: U \map V$ индуцирует гомоморфизм $R$-алгебр $\ext(L): \ext(U) \map \ext(V)$.
            }{
                Аналогично~(\cref{functoriality-of-extk}).
                % https://q.uiver.app/#q=WzAsNCxbMCwwLCJVIl0sWzEsMCwiXFxleHQoVSkiXSxbMSwxLCJcXGV4dChWKSJdLFswLDEsIlYiXSxbMCwzLCJMIl0sWzMsMl0sWzEsMiwiXFxleHQoTCkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbMCwxXSxbMCwyLCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
                \[\begin{tikzcd}[ampersand replacement=\&]
                      U \& {\ext(U)} \\
                      V \& {\ext(V)}
                      \arrow["L", from=1-1, to=2-1]
                      \arrow[from=2-1, to=2-2]
                      \arrow["{\ext(L)}", dotted, from=1-2, to=2-2]
                      \arrow[from=1-1, to=1-2]
                      \arrow[dashed, from=1-1, to=2-2]
                \end{tikzcd}\]
                Композиция $L$ и вложения $V \map \ext(V)$ бьёт в первую однородную компоненту $\ext(V)$, поэтому согласно универсальному свойству $\ext$: $\exists!$ гомоморфизм $\N_0$-градуированных антикоммутативных $R$-алгебр $\ext(L): \ext(U) \map \ext(V)$.
            }
            Таким образом $\ext(L)$ --- эндоморфизм алгебры $\ext(V)$, и также имеются эндоморфизмы модулей матриц над $\ext(V)$ (они обозначаются $M_{r,s}(\ext(V))$), сохраняющие произведение матриц.
            Применяя их к равенству~(\ref{matrix-form}) (иначе говоря, применяя $\ext(L)$ ко всем элементам матриц), получаем
            \[L(f) \cdot L(\ext^k e) = \underbrace{L(e_{[n]})}_{\det A \cdot e_{[n]}} \cdot E\]
            Обозначим $D \coloneqq [\ext^{n-k}(L)]_f, B \coloneqq [\ext^k L]_{\ext^k e} = \ext^k A$.
            Равенство выше говорит, что $D^t \cdot B = \det A$.
            В самом деле, $L(f) = D^t \cdot f$, и $L(\ext^k e) = \ext^k e \cdot B$.

            Получаем $B^{-1} = \frac{1}{\det A}D^t$, и осталось подставить
            \[D_{I,J} = ([\ext^{n-k}(L)]_f)_{I,J} = (-1)^{\eps_I+\eps_J}\left([\ext^{n-k}(L)]_{\ext^{n-k}(e)}\right)_{[n]\sm I,[n]\sm J} = (-1)^{\eps_I+\eps_J}\det A_{[n]\sm J}^{[n]\sm I}\qedhere\]
%            $L$ индуцирует эндоморфизм внешней алгебры
%            \[\ext^k(L): \ext^k(V) \map \ext^k(V)\]
%            В $\ext^k(V)$ имеется базис $\ext^k(e) \coloneqq \defset{e_J}{J \subset [n]}$.
%            Обозначим $\ext^k A \coloneqq (\ext^k L)_{\ext^k e} \in M(\binom{n}{k}, K)$.
%
%            В позиции $(I, J)$ матрицы $\ext^k A$ стоит минор $\det(A^I_J)$:
%            \[\ext^k(L)(e_{j_1} \wedge \dots \wedge e_{j_k}) = L(e_{j_1})\wedge \dots \wedge L(e_{j_k}) = \sum\limits_{I \subset [n], |I| = k}e_I A^I_J\]
%
%            Рассмотрим два подпространства $\ext^{n - k}(V) \cong (\ext^k V)^*$.
%
%            Построить изоморфизм $\phi: \ext^{n - k}(V) \cong (\ext^k V)^*$ можно так: пусть $x \in \ext^{n - k}(V), y \in \ext^k(V)$.
%            Посчитаем $x \wedge y = e_{[n]} \cdot \lambda$, и положим $\phi(x)(y) = \lambda$.
%            ($\phi(x)$ отображает $y$ в координату перед $e_{[n]}$ у $x \wedge y$).
%            Изоморфизм, увы, всё равно получился не канонический --- зависит от выбора базиса в $\ext^n(V)$.
%
%            Пусть $I \subset [n], |I| = n-k, J = [n] \sm I$.
%            Заметим, что изоморфизм $\phi$ переводит базисный элемент $e_I \in \ext^{n - k}(V)$ в базисный элемент $f^I \coloneqq e^J$
%            (определённый на базисе стандартно: $e^{I_1}(e_{I_2}) = \delta_{I_1,I_2}$)
%
%            Их размерности равны, можно ввести базисы, пронумерованные $I \subset [n], |I| = k$:
%            \gather{\ext^k(V) = \angles{e_I = e_{i_1} \wedge \dots \wedge e_{i_k}}\text{\quad и \quad}\angles{f^I = e_J = e_{j_1} \wedge \dots \wedge e_{j_{n-k}}},\\
%            \quad\text{где }I = \{i_1, \dots, i_k\} = [n] \sm J = [n] \sm \{j_1, \dots, j_{n-k}\}}
%            Иными словами, $f^I = (-1)^{\eps_I} \cdot e_{[n]\sm I}$, где $\eps_I$ определено здесь~(\cref{eps_def}).
%
%            Расположим базисные векторы $f^I$ в столбец, обозначим его $f \coloneqq (f^I)_{I \subset [n]}$.
%            Базисные векторы $e$ расположим в строку $e$, которую обозначим $e \coloneqq (e_I)_{I \subset [n]}$.
%
%            Тогда $f \cdot e = E \cdot e_{[n]}$.
%
%            Теперь рассмотрим $\ext(L): \ext(V) \map \ext(V)$.
%
%            На доске было написано
%            \[\ext L (\ext^k e) = \ext^k L (\ext^k e) = (\ext^k e)(\ext^k A)\]
%            \[\ext L(f) = \ext^{n - k}L(f) = f \cdot B\]
%            \[\ext^{n - k}L(f_I) = (-1)^{\eps_I}L(j_1)\wedge \dots \wedge L(e_{j_{n-k}}) = (-1)^{\eps_I}\sum\limits_{|J| = k}e_{[n]\sm J}A^{[n]\sm J}{[n]\sm I} =
%            \sum\limits_{|J| = k}(-1)^{\eps_I + \eps_J}A^{[n]\sm J}_{[n]\sm I}\]
%            $B_{(J,I)} = (-1)^{\eps_I + \eps_J}A^{[n]\sm J}_{[n]\sm I}$.

        % B^t \cdot f^t \cdot e \cdot \ext^k A = E \cdot e_{[n]}\cdot \det A
        % (B^t \ext^k A) = E \cdot \det A
        }
    }
    \note{Можно заметить, что в $\Z/2\Z: \eps_{[I]} + \eps_{[J]} = \sum\limits_{i \in I}i + \sum\limits_{j \in J}j = \sum\limits_{k \in I \triangle J}k$, где $I \triangle J$ --- симметрическая разность $I$ и $J$.}


    \section{Грассманиан}
    Зафиксируем некоторое поле $F$, и рассмотрим пространство $F^n$.

    У него имеется, например, проективизация $\P^n \bydef \defset{(x_0, \dots, x_n) \sm (0, \dots, 0)}{x_i \in F}/\sim$, где $(x_0, \dots, x_n) \sim (\lambda x_0, \dots, \lambda x_n)$ для $\lambda \in F$.
    Это множество прямых.

    \definition[Грассманиан]{
        $\Gr_k(V)$ --- множество $k$-мерных подпространств в пространстве $V$.
        $\Gr_k^n \coloneqq \Gr_k(F^n)$.
    }
    По определению получается $\Gr_1^n = \P^{n - 1}$.

    Чтобы задать алгебраическую топологию на грассманиане, введём систему полиномиальных уравнений --- соотношения Плюккера.

    Пусть $\dim V = n$, и выбрано $k$-мерное подпространство $U \le V, \dim U = k$.
    Выберем базис $(u_1, \dots, u_k) \in U$, и рассмотрим $u_{[k]} \in \ext^k(V)$.
    Согласно~(\cref{calculations_in_grassman}), при выборе другого базиса $U$, назовём его $(w_1, \dots, w_k)$, внешнее произведение домножается на элемент $F^*$: $w_{[k]} = u_{[k]}\det(u \rightsquigarrow w)$.

    Отфакторизовав по скалярам, получаем корректно определённое $\gamma: \Gr_k(V) \map \P(\ext^k(V))$, сопоставляющее подпространству внешнее произведение векторов произвольного базиса.

    \intfact{
        $\gamma$ инъективно.
    }
    Таким образом, грассманиан вкладывается в $\P(\ext^k(V))$, и имеется возможность задать на нём структуру алгебраического многообразия.
    Это многообразие является замкнутым --- множество корней некоторого набора однородных многочленов.

    Пусть $(e_1, \dots, e_n)$ --- базис $V$, тогда $\ext^k e$ --- базис $\ext^k V$.
    Рассмотрим $k$-мерное подпространство $U \le V$ с базисом $(u_1, \dots, u_k)$.
    Выразим этот базис через базис $e$: $\exists! A \in M(n, k, F)$ --- матрица ранга $k$, такая, что $u = e A$.

    Отображение $\gamma$ сопоставляет $U \mapsto \P(u_{[k]})$.
    Так как $u_{[k]} = \sum\limits_{I \subset [n], |I| = k}e_I\det A^I$, то координаты $u_{[k]} \in \ext^k(V)$ в базисе $\ext^k e$ равны $(\det A^I)_{I \subset [n], |I| = k}$, .
    Они называются \emph{однородными координатами} пространства $U$, и соотношения Плюккера --- набор условий на эти координаты.

    \intfact[Соотношения Плюккера]{
        Точка $x \in \P(\ext^k(V))$ лежит в образе $\gamma$ тогда и только тогда, когда $\forall L = (l_1, \dots, l_{k-1}) \subset [n], \forall M = (m_1, \dots, m_{k+1}) \subset [n]$ выполнено следующее уравнение:
        \[\sum\limits_{k \in M \sm L}(-1)^{\bigl(\bigl|\defset{l \in L}{l > k}\bigr| + \bigl|\defset{m \in M}{m < k}\bigr|\bigr)}[x]_{L \cup \{k\}} \cdot x_{M \sm \{k\}} = 0\]
        где $[x]_I$ --- $I$-я однородная координата $x$.
    }
    \emph{
        Мне кажется, на лекции и в конспекте лектора $-1$ возводился в разные степени.
        Конечно, есть много различных способов, так как в результате должен получится $0$ (и значит всё можно домножить на $-1$), и вообще имеет значение только чётность показателя степени.
    }

    \emph{Я считаю, что мой способ расстановки знаков эквивалентен способу на лекции, и согласуется с тем, что в википедии, но не согласуется с конспектом лектора.
    Будьте осторожны.
    }
%    Соотношения Плюккера: $\forall L, M: L = (l_1, \dots, l_{k - 1}) \subset [n], M = (m_1, \dots, m_{k + 1}) \subset [n]$.
%    \[\sum\limits_{i = 1}^{k + 1}(-1)^{i + \phi(L, m_i)}x_{l \cup \{m_i\}} \cdot x_{M \sm \{m_i\}} = 0\]
%    $m_i \in L \then x_{L \cup \{m_i\}} \coloneqq 0$.
%
%    $\phi(L, m_i)$ --- количество тех $l_j$, которые больше $m_i$.
%
%    Точки $x$ с такими однородными координатами лежат в $\Image(\gamma)$ $\iff$ выполнены соотношения Плюккера.


    \chapter{Теория представлений конечных групп}


    \newlection{12 октября 2023 г.}


    \section{Теорема Жордана --- Гёльдера}
    Рассмотрим ряд подмодулей $\{0\} = M_0 \le \dots \le M_m= M$.

    Теорема Жордана --- Гёльдера говорит о том, что такой ряд в некотором смысле единственный.
    Для начала, определим, в каком смысле понимать эту единственность.
    Для этого рассмотрим второй ряд $\{0\} = N_0 \le \dots \le N_n = M$.
    \definition[Ряды $\{M_i\}$ и $\{N_j\}$ эквивалентны]{
        Равны наборы факторов соседних подмодулей: $n = m$ и $\exists \sigma \in S_n: M_i /M_{i - 1} \cong N_{\sigma(i)}/N_{\sigma(i) - 1}$
    }
    \definition[Ряд $\{M_i\}$ без повторений]{
        $\forall i: M_{i - 1} \ne M_i$.
    }
    \definition[Простой модуль]{Модуль, в котором нет собственных подмодулей.}
    \definition[Неуплотняемый ряд $M_i$]{
        Все факторы простые: $\forall K: M_i \le K \le M_{i + 1} \iff \any{K = M_i \\ K = M_{i + 1}}$, то есть $M_{i + 1}/M_i$ прост.
    }
    \definition[Композиционный ряд]{Неуплотняемый ряд без повторений}
    \definition[Артинов модуль $M$]{
        Модуль $M$, удовлетворяющий условию обрыва убывающих цепей (для подмодулей), DCC.
        А именно, всякая убывающая цепочка $\dots \le M_2 \le M_1 \le M$ стабилизируется: $\exists N \in \N: \forall n \ge N: M_{n+1} = M_{n}$.
    }
    \definition[Нётеров модуль $M$]{
        Модуль $M$, удовлетворяющий условию обрыва возрастающих цепей (для подмодулей), ACC.
        Всякая возрастающая цепочка $\{0\} \le M_1 \le M_2 \le \dots \le M$ стабилизируется: $\exists N \in \N: \forall n \ge N: M_{n+1} = M_{n}$.
    }
    Согласно лемме Цорна в любом непустом наборе подмодулей артинова модуля есть минимальный элемент, в непустом наборе подмодулей нётерова модуля --- максимальный.
    \proposal{
        В модуле $M$ есть композиционный ряд $\iff$ модуль $M$ и артинов, и нётеров.
        \provewthen{
            Построим композиционный ряд по индукции. $\{0\} = M_0 \lneq M_1$, где $M_1$ выбирается, как минимальный элемент (существует из-за артиновости) в множестве $\defset{N \le M}{M_0 \le N}$.
            Таким образом, строится цепочка $M_0 \lneq M_1 \lneq \dots \lneq M_n \lneq \cdots$.
            Данная цепочка за счёт нётеровости обрывается, то есть $\exists n \in \N: M_n = M$
        }{
            Пусть модуль не артинов или не нётеров.
            Тогда существует сколь угодно длинная цепочка из подмодулей.
            Но длина любого ряда не превосходит длины композиционного~(\cref{length}).
        }
    }
    \theorem{
        У любых двух рядов существует их общее уплотнение.
        \provehere{
            Пусть даны два ряда $\{0\} = M_0 \le M_1 \le \dots \le M_m = M$ и $\{0\} = N_0 \le N_1 \le \dots \le N_n = M$.

            Определим $M'_{i,j} = (M_i + N_j) \cap M_{i + 1}$ для $0 \le i < m, 0 \le j \le n$.

            Определим $N'_{j,i} = (N_j + M_i) \cap N_{j + 1}$ для $0 \le j < n, 0 \le i \le m$.
            Тогда
            \[\frac{M'_{i,j+1}}{M'_{i,j}} = \frac{(M_i + N_{j+1}) \cap M_{i + 1}}{(M_i + N_j) \cap M_{i + 1}} \overset?\cong \frac{(N_j + M_{i + 1}) \cap N_{j + 1}}{(N_j + M_i) \cap N_{j + 1}} = \frac{N'_{j,i + 1}}{N'_{j,i}}\]
            \indentlemma{\label{plus_is_not_distributive_by_cap}
            Если $A \le B$, то $(A + X) \cap B = A + (X \cap B)$.
            }{
                Так как $A \le (A + X) \cap B$, и $X \cap B \le (A + X) \cap B$, то $A + (X \cap B) \le (A + X) \cap B$.

                В другую сторону, рассмотрим $a + x = b \in (A + X) \cap B$. Тогда $x = b - a$, то есть $x \in X \cap B$, и $a + x \in A + X \cap B$.
            }
            \indentlemma[О бабочке]{
                Пусть $A \le B \le M$ и $C \le D \le M$.
                Тогда утверждается, что
                \[\frac{(A + D) \cap B}{(A + C) \cap B} \cong \frac{B \cap D}{A \cap D + B \cap C} \cong\frac{(B + C) \cap D}{(A + C) \cap D}\]
            }{
                При замене $B \leftrightarrow D, A \leftrightarrow C$ среднее не меняется, а левое изменяется на правое.
                Значит, достаточно доказать первый знак изоморфности.

                \[\frac{A + D \cap B}{A + C \cap B} = \frac{(A + C \cap B) + D \cap B}{A + (C \cap B)} \underset{\text{теорема Нётер об изоморфизме}}\cong \frac{D \cap B}{(A + C \cap B) \cap D \cap B}\]
                Осталось показать, что $(A + C) \cap B \cap D = A \cap D + B \cap C$.
                Используя~(\cref{plus_is_not_distributive_by_cap}), получаем $((A + C) \cap B) \cap D = (A + C \cap B) \cap D = A \cap D + C \cap B$.
            }
            Применяя лемму о бабочке, получаем, что искомая изоморфность фактормодулей (отмеченная вопросиком) действительно имеет место.

            Таким образом, следующие последовательности --- уплотнения $\{M_i\}$ и $\{N_j\}$ соответственно, и они эквивалентны.
            \gather{
                \{0\} = M'_{0,0} \le \dots \le M'_{0,n} = M'_{1,0} \le \dots \le M'_{1,n} = M'_{2,0} \le \dots\le\dots \le M'_{m-1,0} \le \dots \le M'_{m-1,n}=M \\
                \{0\} = N'_{0,0} \le \dots \le N'_{0,m} = N'_{1,0} \le \dots \le N'_{1,m} = N'_{2,0} \le \dots\le\dots \le N'_{n-1,0} \le \dots \le N'_{n-1,m}=M
            }
        }
    }
    \theorem[Жордан --- Гёльдер]{
        Любые два композиционных ряда без повторений эквивалентны.
        \provehere{
            Построим общее уплотнение данных рядов.
            Так как ряды неуплотняемы, то уплотнение только добавляет нуль-факторы.
        }
    }
    \corollary{\label{length}
    Длина любого ряда без повторений не больше длины композиционного ряда.
    }
    \definition[Длина модуля]{
        Длина композиционного ряда данного модуля.
    }
    \corollary[Теорема Ремака --- Крулля --- Шмидта]{
        Если $M = \bigoplus\limits_{i = 1}^{n}M_i$, где $M_i$ --- простые, то $\{M_i\}$ определено однозначно с точностью до перестановки.
    }
    \note{
        Данная теорема также будет доказана в меньшей общности с использованием техники характеров:~(\cref{ksrth}).
    }
    \proposal{
        Пусть $M$ --- артинов модуль. Следующие условия эквивалентны:
        \bullets{
            \item Имеется разложение $M = \bigoplus\limits_{i = 1}^{n}M_i$, где $M_i$ --- простые.
            \item $\forall N \le M: \exists N'\le M: N \oplus N' = M$.
        }
        \provewthen{
            Разложим $M$ в прямую сумму.
            Рассматриваем модуль $M$. Если он не простой, то $\exists N, N': N \oplus N' = M$:
            Дальше ветвимся относительно $N, N'$:
        % https://q.uiver.app/#q=WzAsMyxbMSwwLCJNIl0sWzAsMSwiTiJdLFsyLDEsIk4nIl0sWzEsMCwiIiwwLHsiY3VydmUiOjJ9XSxbMiwwLCIiLDIseyJjdXJ2ZSI6LTJ9XSxbMyw0LCJcXGJpZ29wbHVzIiwxLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& M \\
                  N \&\& {N'}
                  \arrow[""{name=0, anchor=center, inner sep=0}, curve={height=12pt}, from=2-1, to=1-2]
                  \arrow[""{name=1, anchor=center, inner sep=0}, curve={height=-12pt}, from=2-3, to=1-2]
                  \arrow["\bigoplus"{description}, draw=none, from=0, to=1]
            \end{tikzcd}\]
            Действительно, $\forall L \le N$: $\exists L': L \oplus L' = M$, откуда $L \oplus (L' \cap N) = N$, то есть посылка теоремы верна и для каждого из $N,N'$.

            Из-за артиновости дерево ветвления конечно (в бесконечном дереве есть бесконечная ветвь).
        }{
            Выберем наибольшее $k \le n$, такое, что можно так перенумеровать $M_i$, что ${\left(\bigoplus\limits_{i = 1}^{k}M_i\right) \cap N = \{0\}}$.
            Положим $M' \coloneqq \bigoplus\limits_{i = 1}^k M_i$.
            Из максимальности $\forall j > k: \left(M' \oplus M_j\right) \cap N \ne \{0\}$.

            Докажем, что $M = M' \oplus N$.
            Достаточно доказать, что $\forall j > k: M_j \le M' \oplus N$. Зафиксируем какое-нибудь такое $j$, и докажем.

            В силу максимальности $k$: $N' \coloneqq N \cap (M' \oplus M_j) \ne \{0\}$.
            Выберем $x \in N' \sm \{0\}$.
            Он раскладывается в сумму $x = m' + y$, где $m' \in M', y \in M_j$.

            $y \ne 0$, так как $N \cap M' = \{0\}$.
            Устроим проекцию $\pi: M' \oplus M_j \map M_j$, заметим, что $\pi(x) = y \ne 0$, отсюда $\pi(N')$ нетривиально.
            Так как образ модуля --- подмодуль, то $\pi(N') \le M_j$. Из простоты $M_j: \pi(N') = M_j$.
        }
    }
    \newlection{17 октября 2023 г.}


    \section{Радикал Джекобсона и формулировка теоремы Веддербарна --- Артина}
    Кольца, как и модули, тоже бывают артиновы и нётеровы, в них ACC и DCC --- условия на цепочки идеалов.

    В самом деле, кольцо $R$ можно рассмотреть, как регулярный модуль $R$, кольцо действует на себе умножением слева (или справа).
    \precaution{
        Артиновость слева и справа --- разные вещи.
        Кольцо $\vect{\Q & \R \\ 0 & \R}$ справа артиново (в нём просто-напросто конечное число правых идеалов), слева --- не артиново и даже не нётерово.
    }
    Так как идеал в кольце является подмодулем, то для поля $F$, и конечной группы $G$: $F[G]$ является артиновым (хотя бы из соображений размерности).

    Пусть $R$ --- некоммутативное кольцо.
    \definition[Регулярный $R$-модуль]{$R$ как модуль над $R$.}
    Следует различать левый и правый регулярные $R$-модули.
    \intfact{
        Пусть $r \in R$.
        Следующие условия эквивалентны.
        \bullets{
            \item[(1L)] $r$ лежит во всяком максимальном левом идеале.
            \item[(1R)] $r$ лежит во всяком максимальном правом идеале.
            \item[(2L)] $r$ можно исключить из всякой системы образующих левого регулярного $R$-модуля.
            \item[(2R)] $r$ можно исключить из всякой системы образующих правого регулярного $R$-модуля.
            \item[(3L)] $\forall x \in R: 1 + xr$ обратимо слева.
            \item[(3R)] $\forall x \in R: 1 + rx$ обратимо справа.
            \item[(4L)] $\forall x \in R: 1 + xr$ двусторонне обратим.
            \item[(4R)] $\forall x \in R: 1 + rx$ двусторонне обратим.
            \item[(5)] $\forall x, y \in R: 1 + xry$ обратим.
        }
        \provehere{
            Как уверяет лектор, $3L \then 4L$ --- сложный трюк, остальное --- более простые упражнения.
        }
    }
    \definition[Радикал Джекобсона]{
        Множество $r \in R$, удовлетворяющих пунктам интересного факта выше. Обозначается $\Rad(R) = \text{JRad}(R)$.
    }
    $\Rad(R)$ --- двусторонний идеал, как пересечение левых идеалов, и как пересечение правых идеалов.
    \intfact[Радикальность радикала]{
        $\Rad(R/\Rad(R)) = \{0\}$.
    }
    \intfact{
        Если $R$ --- артиново кольцо, то $\exists n \in \N: \Rad(R)^n = 0$.
        Таким образом, в артиновых кольцах $\Rad(R)$ --- нильпотентный идеал.
    }
    \note{
        Напоминание: $A, B \normeq R \then AB \bydef \defset{\sum\limits_{i = 1}^{n}x_i y_i}{n \in \N, x_i \in A, y_i \in B} \normeq R$.

        Так, если $A = B = (2, x) \normeq \Z[x]$, то $AB = (x^2, 2x, 4) \normeq \Z[x]$.

        Видно, что $AB$ не совпадает с множеством попарных произведений (например, $x^2 + 4 \notin \defset{ab}{a \in A, b \in B}$), ни тем более с множеством квадратов элементов $A$.
    }
    \fact{
        Если $\Rad(R) \ne \{0\}$, то регулярный модуль не является вполне приводимым.
        \provehere{
            Предположим, что $R = \Rad(R) \oplus M$.
            Тогда $R = M$, так как все элементы радикала можно выкинуть из системы образующих.

            Таким образом, радикал никогда не выделяется прямым слагаемым.
        }
    }
    \definition[Полупростое кольцо]{$\Rad(R) = \{0\}$.}
    \intfact[Теорема Веддербарна --- Артина]{
        Если $R$ --- полупростое артиново кольцо (эквивалентно, классически полупростое), то $R = \bigoplus_{i = 1}^{n}M_{k_i}(D_i)$, где $D_i$ --- какие-то $R$-алгебры с делением (тела).
        \provenumbers[Схема доказательства]{
            \item $I$ --- нильпотентный правый идеал $\exists a, x \in I: (a^2 - a)x = 0, ax \ne 0$.
            \item Любой правый идеал содержит идемпотент.
            \item Любой двусторонний идеал содержит центральный идемпотент $\then$ выделяется прямым слагаемым.
            \item $R$ --- прямая сумма простых колец без двусторонних идеалов.
            \item $R$ --- простое, $I$ --- минимальный правый идеал $\then \exists n \in \N: R \cong I^{\oplus n}$, как $R$-модуль.
            \item $R \cong \End_R(I^{\oplus n}) \cong M(n, D)$, где $D = \End_R(I)$.
        }
    }
    Радикал Джекобсона позволяет установить, что если кольцо, как регулярный модуль, раскладывается в прямую сумму простых (например, левых) модулей, то оно полупросто, и, следовательно, раскладывается в прямую сумму идеалов (коими и являются матрицы над телами из теоремы Веддербарна --- Артина).
    \proposal{
        Если $R = \bigoplus\limits_{i = 1}^{n} R_i$, $M$ --- левый $R$-модуль, то $M = \bigoplus\limits_{i = 1}^{n}R_i \cdot M$.
        Если $M$ --- простой, то все слагаемые, кроме одного, равны нулю.
    }
    Таким образом, если $R$ --- полупростое артиново кольцо, то можно интересоваться только модулями над матричными кольцами над телами.

    Никаких конечных тел над алгебраически замкнутым полем нет~(\cref{division-ring-is-field})
    \proposal{
        Пусть $M$ --- простой левый модуль над $M(k, D)$, где $D$ --- тело.
        Тогда $M \cong D^k$.
    }
    Используя теорему Веддербарна --- Артина, легко увидеть, что $\sum\limits_{i = 1}^{n}k_i^2 = \dim F[G] = |G|$.
    Это мы также докажем впоследствии, используя технику характеров~(\cref{sum-of-squares-theorem}).

    \lemma{\label{division-ring-is-field}
    Если $D$ --- конечномерная алгебра без делителей нуля (например, тело) над алгебраически замкнутым полем $F$, то $D \cong F$.
    \provehere{
        Пусть $a \in D$. Устроим гомоморфизм колец \begin{align*}
                                                       \psi: F[t] \map D \\ t \mapsto a
        \end{align*} $\Ker(\psi) \ne \{0\}$, так как $\dim_F(F[t]) = \infty$, но $\dim_F(D) < \infty$.
        Тогда $F[t]/\Ker(\psi) \cong \Image(\psi)$ без делителей нуля.

        Таким образом, $\Ker(\psi)$ --- простой идеал, но кольцо многочленов евклидово, поэтому это максимальный идеал.

        $\Ker(\psi) = p \cdot F[t]$, где $p$ неприводим, тогда $p(t) = t - \alpha$ и $F[a] = F[t]/(p) \cong F$.

        Тогда если $a \in 1_A \cdot F$, то $D = 1_D \cdot F = F$.
    }
    }
    \newlection{7 сентября 2016 г.}
% Представления конечных групп, полилинейная алгебра, теория категорий, гомологическая алгебра.
    Чаще всего у нас будут иметься предположения о конечности группы $|G| < \infty$ и алгебраической замкнутости базового поля $\overline{K} = K$.

    Пусть $\chr(K) = p$.
    Случай $p \notdivs |G|$ более простой, о нём говорит \emph{теория обыкновенных представлений}.

    Другой случай $p \divs |G|$ изучает \emph{теория модулярных представлений}, и о нём мы говорить почти ничего не будем.


    \section{Три с половиной языка}
    Есть несколько эквивалентных языков, чтобы говорить о представлениях групп.
    \bullets{
        \item Линейные представления $G$ над $R$.
        \item Линейные действия $G$ на $R$-модулях.
        \item Модули над $R[G]$, где $R[G]$ --- групповая алгебра $G$ над $R$.
        \item Частный случай линейных представлений --- матричные представления (на свободных $R$-модулях с фиксированным базисом).
    }
    Эквивалентность данных языков установлена Эмми Нётер в 1926 году.

    \subsection{Линейные представления группы $G$}
    Пусть $R$ --- коммутативное ассоциативное кольцо с единицей (обычно поле).
    Коммутативность нужна для того, чтобы работать с матрицами было приятно.

    Пусть $V$ --- $R$-модуль (скоро станет векторным пространством, или по крайней мере свободным модулем конечного ранга).
    \definition[Линейное представление группы $G$ над $R$ с модулем представления $V$]{
        Гомоморфизм $\pi: G \map GL(V) = \Aut_R(V)$ --- в \emph{полную линейную группу модуля}.
    }
    Обычно образ $g$ при действии $\pi$ обозначается $\pi_g$, чтобы не плодить скобок.

    Здесь $\pi$ --- представление (representation), и $V$ --- модуль представления (presentation module).

    Свойствами гомоморфизма являются
    \bullets{
        \item $\pi_h \cdot \pi_g = \pi_{hg}$. В частности, $\pi_e = \id$ и $\pi_{g^{-1}} = \pi_g^{-1}$.
    }

    \subsection{Линейные действия}
    Если $G$ действует просто на $V$, как на множестве, то задано отображение
    \begin{align*}
        G \times V &\map V \\ g,x&\mapsto gx
    \end{align*}
    со свойством внешней ассоциативности $(hg)x = h(gx)$.

    Если дано представление, то действие можно определить так:
    \begin{align*}
        G \times V &\map V \\ g,v &\mapsto \pi_g(v) = gv
    \end{align*}
    Это действие, так как $\pi$ --- гомоморфизм.
    При этом, получилось не просто действие, а линейное действие: $\forall u, v \in V, \lambda \in R$:
    \bullets{
        \item $\pi_g(u + v) = \pi_g(u) + \pi_g(v)$ \quadили же\quad $g(u + v) = gu + gv$
        \item $\pi_g(\lambda u) = \lambda \pi_g(u)$ \quadили же\quad $g(\lambda u) = \lambda gu$.
    }
    Обратно, если задано действие $G \curvearrowright V$ то ему можно сопоставить представление
    \begin{align*}
        \pi: G &\map GL(V) \\ g &\mapsto (v \mapsto gv)
    \end{align*}
    \fact{Таким образом, линейные представления --- то же самое, что и линейное действие.}

    \subsection{Структура $R[G]$ модуля над каким-то $R$-модулем}
    Здесь будет существенно, что группа конечна.

    Вспомним, что групповая алгебра $R[G]$ --- это алгебра, элементы которой интерпретируются как $\sum\limits_{g \in G}a_g g$, $a_g \in R$.
    \precaution{
        Не стоит путать групповую алгебру с алгеброй функций $R^G$ --- двойственной к групповой алгебре.
        Элементы алгебры функций --- $\sum\limits_{g \in G}a_g \delta_g$, где функция \[\delta_g(h) = \delta_{g,h} = \all{1,&g = h \\ 0,&g \ne h}\]
        Имеется изоморфизм колец $R^G \cong R[G]$, но $G$ действует на них по-разному: $g \cdot g = g^2, g \cdot \delta_g = 1$.
    }
    Сумма и произведение элементов $R[G]$ определены в виде
    \gather{
        \sum\limits_{g \in G}a_g g + \sum\limits_{g \in G}b_g g = \sum\limits_{g \in G}(a_g + b_g)g \\
        \left(\sum\limits_{g \in G}a_g g\right) \cdot \left(\sum\limits_{h \in G}b_h h\right) = \sum\limits_{h, g \in G}(a_gb_h)g = \sum\limits_{f \in G}\left(\sum\limits_{h \in G}a_h b_{h^{-1}f}\right)f \\
    }
    Линейному действию $G \curvearrowright V$ сопоставим действие $R[G] \curvearrowright V$, определённое в виде
    \[\left(\sum\limits_{g \in G}a_g g\right) v = \sum\limits_{g \in G}a_g (gv)\]
    Можно проверить, что данная формула задаёт на $V$ структуру левого $R[G]$-модуля.

    Поскольку $G \hookrightarrow R[G]$, то верно и обратное --- структура $R[G]$-модуля на $V$ определяет линейное действие $G$ на $R$-модуле $V$.

    \subsection{Глоссарий терминов}
    \begin{tabular}{|c|c|}
        \hline
        Представление                               & Модуль                                              \\\hline
        Факторпредставление                         & Фактормодуль                                        \\\hline
        Сплетающий оператор (intertwining operator) & Гомоморфизм                                         \\\hline
        Неприводимое представление                  & Простой модуль (у которого ровно два подмодуля)     \\\hline
        Неразложимое представление                  & Неразложимый (в прямую сумму) модуль                \\\hline
        Эквивалентность                             & Изоморфизм                                          \\\hline
        Инвариантное подпространство                & Инвариантное подпространство                        \\\hline
        Полная приводимость                         & Полупростота (прямая сумма конечного числа простых) \\\hline
    \end{tabular}

    В дальнейшем мы будем предполагать, что $V = R^n$ --- свободный модуль конечного ранга.
    Над полем, очевидно, достаточно считать, что $\dim(V) < \infty$.
    \definition[Конечномерное линейное представление над $K$]{
        Представление, в котором модуль представления конечномерен.
    }
    Если зафиксировать $e_1, \dots, e_n$ --- базис $V$, то $V = R^n$ и $GL(R^n) = GL(n, R)$.

    Здесь линейные операторы --- матрицы.

    В этом случае можно определять $\pi: G \map GL(n, R)$.
    Это \emph{матричное представление}.

    \ok
    Матрица записывается $x = (x_{i,j})_{1 \le i,j \le n}$.
    В данной главе нас больше всего будет волновать след $\sum\limits_{i}x_{i,i}$.

    Работая в матрицах, придётся не забывать, что мы используем их с точностью до сопряжения.
    С другой стороны, считать что-то в матрицах легче.

    \definition[Степень представления]{
        Ранг модуля представления. Обозначают $\deg(\pi)$.
    }
    Пусть $n = \deg(\pi)$, где $\pi: G \map GL(n, R)$.
    Тогда $\pi_g = ((\pi_g)_{i,j})_{1 \le i,j \le n}$.

    Коэффициенты матрицы $\pi_g$ обозначают $\pi_{i,j}(g) \in R$, опять же чтобы не плодить скобок.
    $\pi_{i,j}$ здесь --- матричный элемент представления $\pi$ в позиции $(i,j)$.


    \section{Сплетающие операторы}
    Пусть $\pi:G \map GL(U), \rho: G \map GL(V)$ --- два представления.

    \definition[Сплетающий оператор (гомоморфизм) $\phi$ между $\pi$ и $\rho$]{
        Для любого $g \in G$ диаграмма коммутативна.
        % https://q.uiver.app/#q=WzAsNSxbMCwxLCJnIFxcaW4gRyJdLFsxLDIsIlxccmhvX2c6IFYiXSxbMSwwLCJcXHBpX2c6IFUiXSxbMiwwLCJVIl0sWzIsMiwiViJdLFswLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMCwyLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzIsMSwiXFxwaGkiLDAseyJvZmZzZXQiOi00fV0sWzMsNCwiXFxwaGkiLDJdLFsxLDRdLFsyLDNdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& {\pi_g: U} \& U \\
              {g \in G} \\
              \& {\rho_g: V} \& V
              \arrow[maps to, from=2-1, to=3-2]
              \arrow[maps to, from=2-1, to=1-2]
              \arrow["\phi", shift left=4, from=1-2, to=3-2]
              \arrow["\phi"', from=1-3, to=3-3]
              \arrow[from=3-2, to=3-3]
              \arrow[from=1-2, to=1-3]
        \end{tikzcd}\]
    }
    Иными словами (на языке действий, а не представлений) $\pi_g(u) \bydef gu, \rho_g(v) \bydef gv$ и коммутативность диаграммы значит $G$-\emph{эквивариантность}
    \[\phi(gu) = g\phi(u)\]
    Таким образом, сплетающий оператор --- в точности гомоморфизм $R[G]$-модулей:
    \[\phi\left(\sum\limits_{g \in G}a_g g\cdot  u\right) = \sum\limits_{g \in G}\phi(a_g g \cdot u) = \sum\limits_{g \in G}a_g\phi(g \cdot u) = \sum\limits_{g \in G}a_g g \phi(u) = \left(\sum\limits_{g \in G}a_g g\right) \phi(u)\]
    Мы определили то, что далее будет называться \emph{категорией представлений} --- объекты и морфизмы между ними.

    В случае, когда $\phi$ --- \emph{изоморфизм} модулей, оно называется \emph{эквивалентностью}.
    Далее всюду будем смотреть на представления с точностью до эквивалентности.
    \newlection{7 сентября 2016 г.}

    \subsection{Изоморфизм представлений}
    Пусть $\pi: G \map GL(U), \rho: G \map GL(V)$ --- два представления.

    Элементу $g$ соответствует левый квадрат, но так как $\phi$ обратимо, то его коммутативность равносильна коммутативности правого квадрата
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJVIl0sWzAsMSwiViJdLFsxLDAsIlUiXSxbMSwxLCJWIl0sWzMsMCwiVSJdLFszLDEsIlYiXSxbNCwxLCJWIl0sWzQsMCwiVSJdLFswLDEsIlxccGhpIl0sWzAsMiwiXFxwaV9nIl0sWzEsMywiXFxyaG9fZyJdLFsyLDMsIlxccGhpIiwyXSxbNSw2LCJcXHJob19nIl0sWzQsNywiXFxwaV9nIl0sWzUsNCwiXFxwaGleey0xfSIsMl0sWzcsNiwiXFxwaGkiLDJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          U \& U \&\& U \& U \\
          V \& V \&\& V \& V
          \arrow["\phi", from=1-1, to=2-1]
          \arrow["{\pi_g}", from=1-1, to=1-2]
          \arrow["{\rho_g}", from=2-1, to=2-2]
          \arrow["\phi"', from=1-2, to=2-2]
          \arrow["{\rho_g}", from=2-4, to=2-5]
          \arrow["{\pi_g}", from=1-4, to=1-5]
          \arrow["{\phi^{-1}}"', from=2-4, to=1-4]
          \arrow["\phi"', from=1-5, to=2-5]
    \end{tikzcd}\]
    Получаем соотношение сопряжения $\rho_g = \phi \circ \pi_g \circ \phi^{-1}$.

    Выбрав базисы в $U, V$ получаем два гомоморфизма $G \map GL(n, R)$, таких, что найдётся обратимая матрицы $x \in GL(n, R)$:
    \[\forall g \in G: x \pi_g x^{-1} = \rho_g\]
    Эти представления эквивалентны.


    \section{Подпредставление}
    Пусть $\pi: G \map GL(V)$, где $V$ --- $R$-модуль, $U \le V$.
    \definition[$U$ --- $G$-подмодуль]{
        $R[G]$-подмодуль в $V$, или же $G$-инвариантное подпространство.
    }
    Требование об отсутствии собственных $G$-подмодулей в случае кольца $R$ не выполняется практически никогда --- в кольце много идеалов.
    Далее предполагаем, что $R = K$ --- поле.

    \definition[Неприводимое представление $\pi: G \map GL(V)$]{
        $V \ne \{0\}$ и в $V$ нет нетривиальных $G$-инвариантных подпространств.
        В противном случае представление называется \emph{приводимым}.
    }
    Если представление приводимо ($U \le V$ --- $G$-инвариантное подпространство), то в $U$ найдётся базис $e_1, \dots, e_m$, он дополняется до базиса $V$.

    В этом базисе для любого $g$:
    \[\pi_g = \vect{\arr{c|c}{* & * \\\hline 0 & *}}\]
    Матрицы такого вида образуют \emph{стандартную параболическую подгруппу}.
    \definition[$m$-я стандартная параболическая подгруппа $P_m \le GL(n, K)$]{
        \[P_m \bydef \defset{\vect{\arr{c|c}{a & b \\\hline 0 & c}}}{a \in GL(m, K), c \in GL(n - m, K), M \in M(m, n - m, K)},\text{ где }1 \le m < n\]
    }
    \note{
        Неприводимость представления --- свойство не самого представления, а свойство образа $\Image(\pi) = \pi(G) = \defset{\pi_g}{g \in G} \subset GL(V)$.
    }
    Пусть $\pi: G \map GL(V)$ --- представление, $U \le V$ --- $G$-подмодуль.
    \definition[Подпредставление]{
        \begin{align*}
            \pi_U: G &\map GL(U)\\g &\mapsto (\pi_g)\Big|_U
        \end{align*}
    }
    \precaution{
        Не путать с \emph{ограничением} представления $\pi$ на подгруппу $H \le G$. Ограничение обозначается $\restricted_H^G(\pi) = \pi\Big|_H: H \map GL(V)$.
    }


    \section{Лемма Шура}
    Пока $G$ --- произвольная группа, $K$ --- любое поле.
    \lemma[Лемма Шура --- 1]{
        Пусть $U, V$ --- неприводимые $G$-модули, $\phi: U \map V$ --- гомоморфизм $G$-модулей.
        Тогда $\phi = 0$, либо $\phi: U \cong V$.
        \provehere{
            $\Ker(\phi)$ --- $G$-подмодуль в $U$:
            $\forall u \in U: \phi(u) = 0 \then \forall g \in G: \phi(gu) = g \phi(u) = 0$, то есть $gu \in \Ker(\phi)$.

            Но таких подмодулей только два.
            \bullets{
                \item Если $\Ker(\phi) = \{0\}$, то $\phi$ --- мономорфизм (инъекция).
                \item Если $\Ker(\phi) = U$, то $\phi \equiv 0$.
            }
            $\Image(\phi) \le V$ --- $G$-подмодуль. В самом деле, $v \in \Image(\phi) \then \exists u \in U: \phi(u) = v \then \forall g \in G: g\phi(u) = \phi(gu) \in \Image(\phi)$.

            Но таких подмодулей только два.
            \bullets{
                \item Если $\Image(\phi) = \{0\}$, то $\phi \equiv 0$.
                \item Если $\Image(\phi) = V$, то $\phi$ --- эпиморфизм (сюръекция).
            }
            Если $\phi \ne 0$, то $\phi$ --- одновременно мономорфизм и эпиморфизм, то есть изоморфизм.
        }
    }
    \corollary[Лемма Шура --- 2]{
        Пусть $K$ --- поле, $U, V$ --- неприводимые $G$-модули над $K$.
        Тогда если $U \ncong V$, то множество сплетающих операторов между $U$ и $V$ $\Hom_G(U, V) = \Hom_{K[G]}(U, V) = 0$.

        Если же $U = V$, то $\Aut_G(U)$ --- тело (любой автоморфизм либо равен нулю, либо обратим).
    }
    Теперь дополнительно предположим, что $K$ --- алгебраически замкнутое поле, и что $\dim U, \dim V < \infty$.
    \lemma[Лемма Шура --- 3]{
        Если $U, V$ --- неприводимые конечномерные $G$-модули над $K$, а $\phi \in \Hom_{K[G]}(U, V)$, то
        \bullets{
            \item Либо $\phi \equiv 0$.
            \item Либо $\phi: U \cong V$, и тогда $\phi = \lambda \id$ (где $\lambda \in K$) --- гомотетия.
        }
        \provehere{
            Любому скаляру $\lambda \in K$ можно сопоставить сплетающий оператор \begin{align*}
                                                                                     \lambda \id_U: U &\map U\\u & \mapsto \lambda u
            \end{align*}
            Из $G$-линейности $g(\lambda u) = \lambda (gu)$. При $\lambda \ne 0$: $\lambda \id$ --- автоморфизм.

            Если $\phi: U \map U$ --- $G$-эндоморфизм, то условие алгебраической замкнутости значит в точности то, что $\forall \phi: \exists \lambda \in K$ --- собственное число:
            \[\exists u \in U \sm \{0\}: \phi(u) = \lambda u\]
            Отсюда $(\phi - \lambda \id_U)(u) = 0$.
            Но тогда $\phi - \lambda \id_U$ --- $G$-эндоморфизм $U$ с ненулевым ядром. Тогда $\phi - \lambda \id_U = 0$.
        }
    }


    \section{Факторпредставление}
    Пусть $\pi: G \map GL(V)$ --- представление, $U$ --- $G$-подмодуль.
    Тогда в подходящем базисе всякое $\pi_g$ имеет вид
    \[\vect{\arr{c|c}{\pi_g\Big|_{U} & * \\\hline 0 & \pi_g\Big|_{V/U}}}\]
    $\pi_g\Big|_{V/U}: G \map GL(V/U)$.
    Фактормодуль $V/U = \defset{v + U}{v \in V}$ состоит из смежных классов, параллельных $U$.
    \[g(v + U) = gv + U\text{, так как $U$ --- $G$-подмодуль.}\]
    \definition[Факторпредставление $\pi$ по инвариантному подпространству $U \le V$]{
        Выше полученное $\pi\Big|_{V/U}$.
    }
    \fact{
        Матрица факторпредставления --- в точности правый нижний блок, натянутый на базисные векторы $e_{m + 1}, \dots, e_n$.
    }
    \ok
    Рассмотрим группу $P_m = \defset{\vect{a & b \\ 0 & c}}{a \in GL(m, R), c \in GL(n - m, R)}$.
    Это группа:
    \[\vect{a_1 & b_1 \\ 0 & c_1}\vect{a_2 & b_2 \\ 0 & c_2} = \vect{a_1 a_2 & a_1 b_2 + b_1 c_2 \\ 0 & c_1 c_2}\qquad\text{и}\qquad\vect{a & b \\ 0 & c}^{-1} = \vect{a^{-1} & -a^{-1}bc^{-1} \\ 0 & c^{-1}}\]
    $L_m = \defset{\vect{a & 0 \\ 0 & c}}{a \in GL(m, R), c \in GL(n - m, R)} \le P_m$ --- подгруппа Л$\acute{\text{е}}$ви.

    Здесь ещё полезно вспомнить
    $U_m = \defset{\vect{e & b \\ 0 & e}}{b \in M(m, n - m, R)}$. Несложно видеть, что $P_m = L_m \rightthreetimes U_m$

    Отображение \begin{align*}
                    P_m &\map L_m\\\vect{a & b \\ 0 & c} &\mapsto \vect{a & 0 \\ 0 & c}
    \end{align*}
    является гомоморфизмом, поэтому действительно можно взять левый верхний, или правый нижний диагональные блоки всех $\pi_g$, и полученные матрицы будут подпредставлением или факторпредставлением соответственно.


    \section{Прямая сумма представлений. Неразложимые представления}
    Пусть $\pi: G \map GL(U), \rho: G \map GL(V)$ --- два представления одной и той же группы на разных модулях.

    \definition[Прямая сумма представлений]{
        \begin{align*}
            \pi \oplus \rho: G &\map GL(U \oplus V)\\ g &\mapsto (\pi \oplus \rho)_g
        \end{align*}
        где $(\pi \oplus \rho)_g \bydef ((u,v)\mapsto(\pi_g(u), \rho_g(v)))$
    }
    Если $U, V$ --- свободные модули, то в качестве базиса прямой суммы можно взять объединение базисов $U$ и $V$.
    В этом базисе матрица $\pi \oplus \rho$ --- это прямая сумма матриц $\pi$ и $\rho$.

    \note{
        Если не только модули разные, но и группы разные, то двум представлениям $\pi: H \map GL(U), \rho: G \map GL(V)$ можно сопоставить наружную прямую сумму --- представление группы
        $H\times G$ --- прямого произведения групп.
        \begin{align*}
            \pi \boxplus \rho: H \times G \map GL(U \oplus V)\\(h,g)\mapsto \underbrace{(\pi \boxplus \rho)_{(h,g)}}_{\pi_h \oplus \rho_g}
        \end{align*}
    }
    Обычная прямая сумма $\pi \oplus \rho$ --- это ограничение $\restricted_{\Delta(G)}^{G \times G}(\pi \boxplus \rho)$, где $\Delta(G) \bydef \defset{(g,g)}{g \in G}$ --- диагональная подгруппа.
    \ok
    Если $U$ --- $G$-инвариантное подпространство в $V$, то когда $\pi$ раскладывается в прямую сумму?

    Если $R = K$ --- поле, то у любого подпространства $U$ найдётся дополняющее (необязательно $G$-инвариантное) подпространство $W: V = U \oplus W$.

    Если $W$ тоже $G$-инвариантно, то $\pi = \pi\Big|_U \oplus \pi\Big|_W$.
    \newlection{14 сентября 2016 г.}
    $G$ --- конечная группа, $K$ --- поле характеристики $p \notdivs |G|$.
    Позже даже будем предполагать $p = 0$.

    И, конечно, все представления конечномерны.


    \section{Усреднение по конечной группе}

    \subsection{Усреднение векторов}
    Пусть $\pi: G \map GL(V)$, $V = K^n$.
    Найдём инвариантные элементы.
    \definition[Инвариантные элементы]{
        \[V^G = \defset{v \in V}{\forall g \in G: \pi_g(v) = v} \le V\]
    }
    Построим (сюръективную) проекцию $V \map V^G$.

    Так как группа конечная, то по ней можно усреднять.
    Устроим \begin{align*}
                \phi: V & \map V^G \\ v &\mapsto \frac{1}{|G|}\sum\limits_{g \in G} gv
    \end{align*}
    Тогда $\forall v \in V: \phi(v) \in V^G$:
    \[h \phi(v) = h \frac{1}{|G|}\sum\limits_{g \in G}gv = \frac{1}{|G|}\sum\limits_{g \in G}(hg)v = \phi(v)\]
    Из-за усреднения, то есть деления на $|G|$, также верно, что $\forall v \in V^G: \phi(v) = v$, то есть $\phi$ --- проектор.

    \subsection{Усреднение линейных отображений}
    Пусть $\pi: G \map GL(U), \rho: G \map GL(V)$ --- представления.

    Тогда утверждается, что $\Hom_K(U, V)$ несёт структуру линейного представления группы $G$.
    Иными словами, сопоставим $\pi, \rho \rightsquigarrow \Hom(\pi, \rho)$.
    \begin{align*}
        \Hom(\pi, \rho): G & \map GL(\Hom(U, V)) \\ g &\mapsto (\phi \mapsto \rho_g \phi \pi_g^{-1})
    \end{align*}
    Здесь $\Hom(\pi, \rho)_g$ получается из коммутативного квадрата
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJVIl0sWzAsMSwiViJdLFsxLDAsIlUiXSxbMSwxLCJWIl0sWzAsMiwiXFxwaV9nIl0sWzEsMywiXFxyaG9fZyJdLFswLDEsIlxccGhpIl0sWzIsMywiXFxIb20oXFxwaSwgXFxyaG8pX2coXFxwaGkpIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          U \& U \\
          V \& V
          \arrow["{\pi_g}", from=1-1, to=1-2]
          \arrow["{\rho_g}", from=2-1, to=2-2]
          \arrow["\phi", from=1-1, to=2-1]
          \arrow["{\Hom(\pi, \rho)_g(\phi)}", dashed, from=1-2, to=2-2]
    \end{tikzcd}\]
    Таким образом, два представления дали новое представление, теперь уже на множестве не строк или столбцов, а на множестве матриц.

    Так как $\Hom$ по отношению к $U$ контравариантен, то $\pi_g$ возводится в степень $-1$.
    По отношению к $V$ же $\Hom$ ковариантен и для $\rho_g$ не берётся обратный.

    Теперь мы можем усреднять уже сами линейные отображения.
    \definition[Усреднение линейного отображение]{
        \begin{align*}
            \Hom_K(U, V) &\map \Hom_K(U, V)^G \\ \phi & \mapsto \frac{1}{|G|}\sum\limits_{g \in G}\rho_g \phi \pi_g^{-1}
        \end{align*}
    }
    Образ состоит из элементов $\defset{\phi \in \Hom_K(U, V)}{\forall g \in G: \rho_g \phi \pi_g^{-1} = \phi} = \Hom_{K[G]}(U, V)$.
    В дальнейшем вместо $\Hom_K(U, V)$ будем писать $\Hom(U, V)$, вместо $\Hom_{K[G]}(U, V)$ --- $\Hom_G(U, V)$.


    \section{Теорема Машке}
    $G$ --- конечная группа, $K$ --- поле характеристики $p \notdivs |G|$.
    Все представления конечномерны.
    \definition[Вполне приводимое представление]{
        Для любого $G$-инвариантного подпространства $U \le V$: $\exists G$-инвариантное дополнение $W$.
        Иными словами, кольцо $K[G]$ полупросто.
    }
    \theorem{
        В данных условиях все представления вполне приводимы.
        \provehere{
            Для $G$-инвариантного подпространства $U \le V: \exists W$ --- какое-то (необязательно $G$-инвариантное) дополняющее подпространство: $U \oplus W = V$.

            Мы не умеем усреднять подпространства, поэтому поступим так.
            Всякое подпространство --- образ или ядро какого-то линейного отображения.
            А линейные отображения усреднять мы только что научились.

            Положим в качестве $\phi: V \map V$ проектор $V$ на $U$ вдоль $W$.
            Усредним $\phi$:
            \[\phi_0 = \frac{1}{|G|}\sum\limits_{g \in G}\pi_g \phi \pi_g^{-1}\]
            Утверждается, что $\phi_0$ --- проектор на $U$:

            \bullets{
                \item Проверим, что $\Image(\phi) \le U$. $\forall v \in V$:
                \[\phi_0(v) = \frac{1}{|G|}\sum\limits_{g \in G}\pi_g \underbrace{\phi(\pi_g^{-1}(v))}_{\in U} \in U\]
                \item     Так как $\phi$ --- $U$-инвариантно, то $\forall u\in U$:
                \[\phi_0(u) = \frac{1}{|G|}\sum\limits_{g \in G}\pi_g \phi(\pi_g^{-1}(u)) = \pi_g \pi_g^{-1}u = u\]
            }

%            Осталось проверить, что $W_0 \coloneqq \Ker(\phi_0)$ --- $G$-инвариантное подпространство. $\forall h \in G, v \in W_0$:
%            \[\phi_0(\pi_h(v)) = \pi_h\phi_0(v) = \pi_h(0) = 0\text{, то есть $\pi_h(v) \in \Ker(\phi_0)$.}\]
%            Применяя теорему о размерности ядра и образа, и тот факт, что $\Ker(\phi)\cap \Image(\phi) = \{0\}$ (используем, что $\phi^2 = \phi$) получаем $V = U \oplus W_0$.

%            Также можно воспользоваться леммой, выбрав в качестве $\psi$ вложение
            \indentlemma{
                Предположим, что $M, N$ --- $R$-модули, и $\psi: M \map N, \phi: N \map M$ односторонне обращают друг друга:
            % https://q.uiver.app/#q=WzAsMyxbMCwwLCJNIl0sWzEsMCwiTiJdLFsyLDAsIk0iXSxbMCwxLCJcXHBzaSJdLFsxLDIsIlxccGhpIl0sWzAsMiwiXFxpZCIsMix7ImN1cnZlIjoyfV1d
                $\begin{tikzcd}[ampersand replacement=\&,cramped]
                     M \& N \& M
                     \arrow["\psi", from=1-1, to=1-2]
                     \arrow["\phi", from=1-2, to=1-3]
                     \arrow["\id"', curve={height=12pt}, from=1-1, to=1-3]
                \end{tikzcd}$.
                Тогда $N \cong M \oplus \Ker \phi$ (в группах в аналогичном случае прямая сумма заменится на полупрямое произведение).
            }{
                Докажем, что $N = \Image \psi \oplus \Ker \phi$. Так как $\psi$ инъективно, то $\Image \psi \cong M$.
                \bullets{
                    \item Проверим, что $\Image \psi \cap \Ker \phi = \{0\}$.
                    Рассмотрим $x \in \Image \psi \cap \Ker \phi$.
                    Так как он в образе $\psi$, то $\exists y \in M: x = \psi(y)$, тогда $\phi(\psi(y)) = 0$, откуда $y = 0$, и $x = 0$.
                    \item Проверим, что $\Image\psi + \Ker\phi = M$.
                    Рассмотрим $z \in N$, для него $t \coloneqq \psi(\phi(z))$ лежит в $\Image(\psi)$, причём $z - t \in \Ker(\phi)$: $\phi(z - t) = \phi(z) - \phi(\psi(\phi(z))) = 0$.\qedhere
                }
            }
            Выбрав в качестве $\psi$ вложение, и рассмотрев $R = K[G]$, получаем, что $\Image(\phi)$ выделяется прямым слагаемым.
        }
    }
    \note[Относительно разницы между проекцией и проектором]{
        Если $V = U \oplus W$, то $\phi: V \map U$ --- проекция на $U$ параллельно $W$, определена так: $\phi(u + w) = u$.

        Проектор --- это отображение $\phi: V \map V$, которое также переводит $\phi(u + w) = u$.
        Различие состоит в области значений.
    }
    \corollary{
        Пусть $\chr K \notdivs |G|$. Если все неприводимые представления одномерны, то группа абелева.
        \provehere{
            Рассмотрим регулярное представление $K[G]$, как $K[G]$-модуля: $\text{reg}: G \map \End(K[G])$.
            $K[G] = \bigoplus\limits_{k = 1}^{|G|}V_k$, где $V_k$ просты: $\dim_F(V_k) = 1$.
            Тогда получается, что $\Image(G) \subset \text{D}(|G|, K)$, здесь $\text{D}(n, K)$ --- диагональные матрицы порядка $n$.
        }
    }

    \corollary{
        В условиях теоремы Машке имеет место полная приводимость: неприводимые представления совпадают с неразложимыми представлениями.

        Любое конечномерное представление равняется прямой сумме неприводимых.
    }
    Таким образом, задачи теории обыкновенных представлений свелись
    \bullets{
        \item к классификации неприводимых представлений $G$ над $K$, и
        \item к разложению любого представления в прямую сумму неприводимых.
    }
%    \intfact[Теорема Ремака --- Крулля --- Шмидта]{
%        Если $V$ --- артинов и нётеров модуль, то разложение на неразложимые единственно (с точностью до порядка и изоморфизма).
%        \[V = M_1 \oplus \dots \oplus M_s = N_1 \oplus \dots \oplus N_t\]
%        влечёт $s = t$ и $\exists \sigma \in S_t: M_i \cong N_{\sigma(i)}$.
%    }

    \subsection{Унитаризуемость}
    Пусть $K = \C, V = \C^n$.
    \theorem[Теорема Машке над $\C$]{\label{uni}
    Для любого представления конечной группы $G$ над $\C: \exists G$-инвариантное положительно определённое эрмитово скалярное произведение.
    \provehere[Доказательство теоремы Машке над $\C$]{
        Вспомним про эрмитово скалярное произведение $B: V \times V \map \C$ --- полуторалинейное и эрмитовски симметричное ($B(u,v) = \overline{B(v, u)}$).

        Дополнительно можно считать, что $\forall v \in V: B(v, v)\ge 0$, причём $B(v,v) = 0 \iff v = 0$.
        Это классическое эрмитово (унитарное) скалярное произведение, превращающее $V$ в гильбертово пространство:
        \[B\left(\vect{u_1 \\ \vdots \\ u_n},\vect{v_1, \\ \vdots \\ v_n}\right) = \overline{u_1}v_1 + \dots + \overline{u_n}v_n\]

        Пусть $\pi: G \map GL(\C^n) = GL(n, \C)$.
        Научимся усреднять $B$, чтобы действие элементов группы сохраняло скалярное произведение.
        Скалярное произведение $B$ \emph{унитарно}, если $\forall u, v \in V: B(gu, gv) = B(u, v)$.

        Будем придерживаться обозначений $x^* = \overline{x}^t$ --- эрмитовски сопряжённая матрица к $x$.

        Переписав унитарность в терминах матрицы Грама: $\forall u, v \in \C^n, g \in G: u^* v = u^* \pi_g^* \pi_g v$, получаем именно, что образ $\pi$ должен лежать в $U(n, \C)$.
        Здесь $U(n, \C) \bydef \defset{x \in GL(n, \C)}{\overline{x}^t x = e = x \overline{x}^t}$ --- \emph{классическая унитарная группа}.
        Кстати, $U(n, \C)$ --- компактная группа относительно комплексной топологии, <<а компактная группа --- это почти что конечная группа>>.

        \[B_0(u, v) \coloneqq \frac{1}{|G|}\sum\limits_{g \in G}B(\pi_g (u), \pi_g (v))\]
        $B_0$ --- полуторалинейная эрмитова положительно полуопределённая форма.

        Теперь относительно $B_0$ все операторы $\pi_h$ ($h \in G$) унитарны:
        \[B_0(\pi_h(u),\pi_h(v)) = \frac{1}{|G|}\sum\limits_{g \in G}B(\pi_{gh}(u), \pi_{gh}(v)) = B_0(\pi_h(u), \pi_h(v))\qedhere\]
    }
    }
    Вообще, для всякой эрмитовской полуторалинейной формы $B: V \times V \map \C$, определена унитарная группа.
    \definition[Унитарная группа]{ $U(B) \bydef \defset{a \in GL(V)}{\forall x, y: B(ax, ay) = B(x, y)}$.}
    \corollary{
        Любое представление конечной группы над $\C$ унитаризуемо, то есть эквивалентно унитарному: $\rho: G \map U(n, \C)$.

        В унитарном представлении ортогональное дополнение к $G$-инвариантному подпространству само $G$-инвариантно.
        В частности, отсюда вытекает теорема Машке предыдущего параграфа над $\C$.
        \provehere{
            Если $U$ --- $G$-инвариантное подпространство в $V$, $B$ --- $G$-инвариантное положительно определённое эрмитово скалярное произведение на $V$, то $U^\perp$ тоже $G$-инвариантно и $U \oplus U^\perp = V$.
            В самом деле $\forall u \in U, v \in U^\perp$:
            \[B(u, \pi_g(v)) = B(\underbrace{\pi_g^{-1}(u)}_{\in U}, v) = 0\]
        }
    }
    \newlection{14 сентября 2016 г.}
    Всё, касающееся усреднения, можно обобщить на компактные группы с усреднением по мере Хаара --- вместо суммирования и взятия среднего берётся интеграл.
    Это называется \emph{гармонический анализ}.


    \section{Характеры Фробениуса}
    В дальнейшем все характеры будут именно характерами Фробениуса.

    Пусть $\pi: G \map GL(V)$ --- конечномерное представление конечной группы над полем $K$, которое вскоре будет характеристики 0.

    Выберем базис $e_1, \dots, e_n$.
    При фиксированном базисе представление на самом деле является матричным.
    \[\tr(x) = x_{1,1} + \dots + x_{n,n} = \lambda_1 + \dots + \lambda_n\]
    где $\lambda_1, \dots, \lambda_n$ --- собственные числа $x$.
    Они, вообще говоря, могут не лежать в базовом поле, но их сумма лежит.

    Сопоставим представлению $\pi: G \map GL(n, K)$ \emph{характер Фробениуса представления} $\pi$.
    \begin{align*}
        \chi_\pi: G \map K \\ g \mapsto \tr(\pi_g)
    \end{align*}
    \numbers{
        \item Характер зависит только от класса эквивалентности $\pi$.
        Два эквивалентных представления имеют равные характеры.
        \item Характер не обязательно является гомоморфизмом!
        \item Для двух представлений $\pi: G \map GL(U); \quad \rho: G \map GL(V)$ можно определить $\pi \oplus \rho: G \map GL(U \oplus V)$.
        \[(\pi \oplus \rho)_g(u, v) = (\pi_g(u), \rho_g(v))\]
        $\chi_{\pi \oplus \rho} = \chi_\pi + \chi_\rho$, так как $\tr\vect{\arr{c|c}{x & 0 \\\hline 0 & y}} = \tr(x) + \tr(y)$.
        \item $\chi_{\pi \otimes \rho} = \chi_\pi \cdot \chi_\rho$, так как $\tr(x \otimes y) = \tr(x)\cdot\tr(y)$, об этом см.~(\cref{further-constructions}).
        \item Пусть $\pi \equiv 1$ --- главное представление. $\chi(\pi) = \dim(V) = \deg(\pi)$, так как $\tr\vect{1 & & 0 \\ & \ddots & \\ 0 & & 1} = n$.
        \item Характер является \emph{центральной функцией} на $G$.
        \definition[Центральная функция (функция класса)]{
            Функция, постоянная на классах сопряжённых элементов.
        }
        Иными словами, $h \sim_G g \then \chi_{\pi}(h) = \chi_{\pi}(g)$.
        Так как $\exists f \in G: h = f^{-1}gf$, то $\pi_h = \pi_f^{-1}\pi_g \pi_f$.
        \item Пусть $g \in G, |G| = m < \infty$.
        Тогда $(\pi_g)^m = e$. Значит, все собственные числа любой матрицы $\pi_g$ являются корнями $m$-й степени из единицы.
        \[\chi_\pi(g) \in F\left(\!\!\sqrt[m]{1}\right)\text{, где $F$ --- простое подполе в $K$, то есть }\all{\Ff_p,&\chr(K) = p > 0 \\ \Q,&\chr(K) = 0}\]
        Если $\chr(K) = 0$, то $\chi_{\pi}(g) \in \A$, где $\A$ --- целые алгебраические числа (сумма корней из единицы лежит там, так как каждый корень из единицы лежит там, и $\A$ --- кольцо).

        Над полем же комплексных чисел $\frac1\omega = \overline{\omega}$. Если $K \le \C$, то $\chi_\pi(g^{-1}) = \overline{\chi_\pi(g)}$.

        С другой стороны, $\chi_{\pi}(g^{-1})$ --- характер \emph{двойственного представления}.
        \definition[Двойственное к $\pi: G \map GL(V)$ представление]{
            Левое представление $\pi^*: G \map GL(V^*)$. Для $\eta \in V^*, v \in V$:
            \[((\eta)\pi_g^*)(v) = \eta(\pi_g(v))\]
        }
        Чтобы писать операторы слева, то $\pi$ сопоставляем
        \begin{align*}
            \pi^*: G &\map GL(n, K) \\ g & \mapsto \pi_g^{-t}
        \end{align*}
        $\tr(x^t) = \tr(x)$, поэтому $\chi_{\pi^*}(g) = \chi_\pi(g^{-1})$.
        \corollary{
            Над $K \le \C: \chi_{\pi^*} = \overline{\chi_\pi}$.
        }
        Таким образом, если построено над $\C$ представление, у которого не все характеры вещественные, сразу строится сопряжённое --- другое неприводимое (двойственное и обычное представления неприводимы одновременно) --- представление.
        \item Пусть $K \le \C$. Тогда $\forall g \in G: \abs{\chi_\pi(g)} \le n = \chi_\pi\left(1_G\right)$, так как характер --- сумма корней из единицы.
        \item $\chi_{\Hom(\pi,\rho)} = ?$
        \item $\chi_{\ext^m(\pi)} = \dots$. В частности, $\chi_{\ext^2}(\pi) = \frac12(\chi_\pi(g)^2 - \chi_{\pi}(g^2))$. Дискретная теория вероятностей --- применение теории представлений конечных групп, поэтому эта штука похожа на дисперсию.
        \item $\chi_{S^m(\pi)} = ?$. В частности, $\chi_{S^2}(\pi) = \frac12(\chi_\pi(g)^2 + \chi_{\pi}(g^2))$.
        Можно удостовериться, что так как в характеристике нуль $S^2(\pi) \oplus \ext^2(V) \cong V \otimes V$, то $\chi_{\ext^m(\pi)} + \chi_{S^m(\pi)} = \chi(\pi\otimes\pi)$.
    }
    \intfact[Теорема Фробениуса]{
        Пусть $\chr K = 0$. Тогда $\pi \sim \rho \iff \chi_\pi = \chi_\rho$.
        \provehere{Будет доказана с использованием соотношения Шура (соотношения ортогональности)~(\cref{frobenius-theorem}).}
    }
    \counterexample[В теореме Фробениуса важна нулевая характеристика]{
        Пусть $\chr(K) = p > 0$.
        Существует главное представление $1_G: \arr{ccc}{G & \map & K^* \\ g & \mapsto & 1}$.

        Но если взять $\pi = \underbrace{1_G \oplus \dots \oplus 1_G}_{p + 1}$, то $\chi_{\pi} = \chi(1_G)$.
    }


    \section{Представления абелевых групп. Лемма Шура}
    Пусть группа $G$ --- конечная абелева группа ($[G, G] = \{1\}, |G| < \infty$).

    Пусть $K$ --- алгебраически замкнутое поле, $\chr(K) = 0$.
    Так как все характеры лежат в $\A$, то достаточно считать, например, что $K = \C$.
    \lemma[Лемма Шура]{
        Любое неприводимое представление конечной абелевой группы над алгебраически замкнутым полем одномерно.
        \provehere{
            Пусть $h, g \in G$. Тогда $\pi_h \cdot \pi_g = \pi_{gh} = \pi_{hg} = \pi_g \cdot \pi_h$.
            Таким образом, $\forall h \in G: \pi_h$ --- сплетающий оператор для $\pi$.

            Но $\pi$ неприводимо, тогда $\forall h \in G: \pi_h$ --- гомотетия.
            Но тогда все одномерные подпространства $G$-инвариантны, и из неприводимости $\deg(\pi) = 1$.
        }
    }
    \corollary{
        Если $\pi$ --- неприводимое представление $G$ над $K$, то одномерный характер --- в точности само представление: $\pi = \chi_{\pi}: G \map K^* = GL(1, K)$.
    }
    \counterexample{
        Если поле не замкнуто, то лемма Шура, конечно, неверна.
        Не существует точного одномерного представления $C_4$ над $\R$, так как над $\R$ нет первообразного корня четвёртой степени из 1.
    }

    \subsection{Классификация циклических групп}
    Пусть $C_n = \angles{g} = \{g^0, g^1, \dots, g^{n - 1}\}$.
    Построим таблицу, где столбцы отвечают элементам группы, строки --- характерам.

    Рассмотрим для примера $C_2, C_3, C_4$.
    \[\begin{array}{c|cc}
          C_2    & 1 & -1 \\\hline
          \chi_0 & 1 & 1  \\
          \chi_1 & 1 & -1
    \end{array} \qquad
    \begin{array}{c|ccc}
        C_3    & 1 & g        & g^2      \\\hline
        \chi_0 & 1 & 1        & 1        \\
        \chi_1 & 1 & \omega   & \omega^2 \\
        \chi_2 & 1 & \omega^2 & \omega   \\
    \end{array} \qquad
    \begin{array}{c|cccc}
        C_4    & 1 & g  & g^2 & g^3 \\\hline
        \chi_0 & 1 & 1  & 1   & 1   \\
        \chi_1 & 1 & i  & -1  & -i  \\
        \chi_2 & 1 & -1 & 1   & -1  \\
        \chi_3 & 1 & -i & -1  & i   \\
    \end{array}\]
    Так как в $C_n$: $g^n = 1$, то для всякого представления $\pi$: $(\chi_\pi(g))^n = \pi(g)^n = \pi(g^n) = 1$.
    Отсюда сразу восстанавливаются остальные элементы, и получается, что $\chi_i(g^j) = \omega^{ij}$, где $\omega$ --- произвольный фиксированный первообразный корень $n$-й степени из единицы.

    Полученная матрица --- \emph{матрицы дискретного преобразования Фурье}.

    \subsection{Классификация представлений произвольных конечных абелевых групп}
    Расклассифицировав таким образом представления всех циклических абелевых группы, мы, на самом деле, классифицировали вообще представления всех конечных абелевых групп.

    Воспользуемся теоремой о классификации всех конечнопорождённых абелевых групп, всякая конечная абелева группа --- прямая сумма циклических групп.

    Ссылаясь на
    \intfact{
        Групповая алгебра $K[H \times G]$ есть $K[H] \otimes_K K[G]$~(\cref{khtimesg}).
    }
    мы можем получить следующее.
    Пусть \[\arr{c}{\chi: H \map K^* \\ \theta: G \map K^*} \text{ --- два характера. Тогда }\chi\otimes \theta \underset{\text{у нас всё одномерно}}= \chi\theta: \arr{ccc}{H \times G &\map& K^*\\(h,g)&\mapsto&\chi(h)\theta(g)}\]
    Таким образом, все характеры абелевой группы получаются перемножением всевозможных характеров циклических слагаемых из прямой суммы.

    \example{
        \item Рассмотрим простейшую нециклическую группу $V = \underset{= \angles{h}}{C_2} \oplus \underset{= \angles{g}}{C_2} = \{1, h, g, hg\}$.
        Для неё таблица характеров
        \[\begin{array}{c|c}
              & \arr{cccc}{1 & h & g & hg} \\\hline
              \arr{c}{\chi_0 \\ \chi_1 \\\chi_2 \\\chi_3} & \arr{cc|cc}{1 & 1 & 1 & 1 \\ 1 & -1 & 1 & -1 \\\hline 1 & 1 & -1 & -1 \\ 1 & -1 & -1 & 1}
        \end{array} = \vect{1 & 1 \\ 1 & -1} \otimes \vect{1 & 1 \\ 1 & -1}\]
    }

    \subsection{Одномерные представления любых конечных групп}
    Разумеется, все одномерные представления неприводимы.

    Таким образом, описать одномерные представления --- часть задачи.

    Мы умеем описывать представления абелевых групп.
    Для произвольной группы имеется функтор абелианизации $G \rightsquigarrow G^{\ab} \bydef G/[G,G]$.

    Чтобы для группы получить представление, исходя из факторгруппы, надо воспользоваться \emph{инфляцией}:
    пусть $H \normeq G$.
    \gather{\pi: G/H \map GL(V) \\ \downarrow \\ \arr{cccc}{\tilde{\pi}: &G &\map& GL(V)\\&g &\mapsto& \pi(g + H)}}
    Поскольку приводимость зависит только от образа, то инфляция неприводимого представления неприводима.

    Если абелианизация нетривиальна, то таким образом получаются какие-то нетривиальные представления.
    \theorem{
        Пусть $K$ --- алгебраически замкнутое поле, $\chr(K) = 0$. Тогда у конечной группы $G$ имеется $\abs{G/[G,G]}$ различных (не эквивалентных) одномерных представлений (и они являются инфляциями неприводимых одномерных представлений $G/[G,G]$).
        \provehere{
            Только что было предъявлено $|G/[G,G]|$ таких представлений.
            Обратно, если $\tilde{\pi}: G \map GL(1, K) = K^*$ --- какое-то представление, то $[G, G] \le \Ker(\tilde{\pi})$ --- это отображение в абелеву группу.

            Тогда $\tilde{\pi}$ соответствует его дефляция $\pi: G/H \map GL(1, K) = K^*$.
        }
    }
    \newlection{21 сентября 2016 г.}


    \section{Формулировка теоремы Бёрнсайда --- Фробениуса, первые примеры}
    $G$ --- конечная группа, $K$ --- алгебраически замкнутое поле, $\chr(K) = 0$.
    На самом деле, результаты верны для поля разложения группы $G$, такого, что $\chr(K) \notdivs |G|$).

    Пусть $\pi_1, \dots, \pi_s$ --- все различные (неэквивалентные) неприводимые представления $G$ над $K$.
    Пусть $n_1, \dots, n_s$ и $\chi_1, \dots, \chi_s$ --- степени и характеры $\pi_1, \dots, \pi_s$ соответственно.
    \intfact[Теорема Бёрнсайда --- Фробениуса]{\down
    \numbers{
        \item $s$ --- количество классов сопряжённых элементов группы $G$.
        \item $|G| = n_1^2 + \dots + n_s^2$ (sum of squares formula)
        \item $n_i \divs |G|$, что может быть усилено до $n_i \divs |G : C(G)|$, или даже до $n_i \divs |G : A|$, где $A \normeq G$ --- произвольная нормальная подгруппа.
        Более того, $n_i \le |G : A|$, где $A \le G$ --- произвольная абелева подгруппа (но уже не факт, что есть делимость).
    }
    }

    \subsection{Таблицы характеров. Конечные расширения колец}
    Пусть $\chi_1, \dots, \chi_t$ --- характеры неприводимых представлений, $C_1, \dots, C_s$ --- классы сопряжённых.
    Таблица характеров --- таблица следующего вида, где в ячейке $\chi_i, C_j$ стоит значение $\chi_i(C_j)$.
    \[\begin{array}{c|ccc}
          & C_1 = \{1\} & \cdots & C_s         \\\hline
          \chi_1 = 1 & 1           & \cdots & 1           \\
          \chi_2     & \deg \pi_2  & \cdots & \chi_2(C_s) \\
          \vdots     & \vdots      & \ddots & \vdots      \\
          \chi_s     & \deg \pi_s  & \cdots & \chi_s(C_s) \\
    \end{array}\]
    Разумеется, у всякой группы есть тривиальное представление, его характер обычно пишут первой строчкой; $\chi_\pi(1) = \deg \pi$, и помимо этих свойств, уже указанных в таблице, есть ещё множество других~(\cref{schur-orthogonality},\cref{sum-of-squares-theorem},\cref{integrality-properties} и прочие).

    Пусть $R \le A$ --- коммутативные кольца с единицей.
    \definition[$a \in A$ --- целое над $R$]{
        $a$ --- корень унитального многочлена с коэффициентами из $R$: $\exists p \in R[t]: \lc(p) = 1, \ev_a(p) = 0$.
        Множество элементов $A$, целых над $R$, обозначается $\Int_A(R)$.
    }
    В частности, целые алгебраические числа $\A$ --- те комплексные числа, которые целы над $\Z$.
    \definition[$A$ целое над $R$]{
        $\forall a \in A: a$ --- целый над $R$.
    }
    \definition[$A$ --- конечное над $R$]{
        $A$ --- конечно порождено, как модуль над $R$.
    }
    \lemma{
        Пусть $A \subset B \subset R$ --- цепочка конечных расширений. Тогда $A$ конечно над $R$.
    }
    \lemma{
        Пусть $A = R[a_1, \dots, a_n]$, где $a_i$ --- целые над $R$.
        Тогда $A$ конечно над $R$.
        \provehere{
            Пусть $k$ --- степень $a_i$, то есть $a_i$ --- корень унитального многочлена с коэффициентами из $R$ степени $k$.
            Тогда $a_i^k \in \angles{a_i^0, \dots, a_i^{k-1}}$.

            Далее индукция с применением предыдущей леммы.
        }
    }
    \theorem{\label{integral-over}
    Если $R \subset A$ --- конечное расширение, и $a \in A$, то $a$ --- целый над $R$.
    \provehere{
        Пусть $m_a: A \map A$ --- гомоморфизм $R$-модулей умножения на $a$. $m_a \in \End_R(A)$.

        Пусть $x_1, \dots, x_n$ порождают $A$ над $R$. $x_i \cdot a = \sum\limits_{j = 1}^{n}c_{i,j}x_j$
        Обозначим $С = (c_{i,j})$, тогда $xa = Cx$.

        $\chi_C(C) = 0$ по теореме Гамильтона --- Кэли (это, кстати, полиномиальное равенство, можно использовать, что оно было доказано над алгебраически замкнутым полем).

        $0 = \chi_C(C)x = \chi_C(a\id)x$.
        Так как $1 \in \Lin(x_1, \dots, x_n)$, то $\chi_C(a) \cdot 1 = 0$, откуда $\chi_C(a) = 0$, и $a \in \Int_A(R)$.
    }
    }
    \corollary{
        $R \subset A$ --- конечно $\iff A$ порождено как $R$-алгебра конечным числом целых элементов.
    }
    Возвращаясь к таблице характеров, получаем, что $\chi_\pi(g) \in \A$ (почему?\ можно сослаться на то, что $\tr(\pi_g)$ --- сумма собственных чисел, но это можно было сделать и раньше).

    \subsection{Представления неабелевых групп}
    Маленькими неабелевыми группами являются $S_3 = D_3$, $D_4$, $Q_8$.

    Все представления $D_n$ одномерны или двумерны, а с представлениями $S_n$ всё совсем не так просто, на сегодняшний день про них известно всё, но это очень большая непростая история.

    Пусть имеется перестановочное действие $G \curvearrowright X$.
    Тогда ему соответствуют линейное действие на функциях $X \map K$: $G \curvearrowright K^X = \left\{\sum\limits_{x \in X}a_x \delta_x\right\}$, или на формальных комбинациях: $G \curvearrowright \left\{\sum\limits_{\substack{x \in X\\\text{почти все $a_x$ нули}}}a_x x\right\}$.

    Несмотря на то, что эти записи вылядят идентичными (в случае конечного $X$), они различаются --- различаются действием $G$.

    На функции $f: X \map K$ элементы $g \in G$ действуют так: $(fg)(x) = f(gx)$.
    Но так как речь о левых действиях, то $(g^{-1}f)(x) = f(gx)$.

    Обозначим $\bigoplus\limits_{x \in X}Kx = K[X]$ за множество формальных комбинаций $X$ с коэффициентами из $K$.

    Действие $G$ переставляет базис данного векторного пространства над $K$, и перестановке базиса отвечает линейное действие на $\bigoplus\limits_{x \in X}Kx$.

    Оказывается, из примера действия группы самой на себе сдвигами (трансляциями) получаются все представления групп.

    Рассмотрим левое регулярное представление $G \curvearrowright G$:
    \begin{align*}
        G \times G &\map G \\ g,x &\mapsto gx
    \end{align*}
    Ему соответствует линейное действие $G \curvearrowright K[G]$.

    Действие $S_n$, переставляющее базисные элементы $V$ ($\dim V = n$) не является неприводимым.
    \examples[Представления неабелевых групп]{
        \item $S_n \curvearrowright [n]$. Если $(e_1, \dots, e_n)$ --- базис $K^n$, то имеется естественное линейное действие $S_n \curvearrowright K^n$, $\sigma e_i = e_{\sigma(i)}$.

        Действие не неприводимо: здесь есть одномерное инвариантное подпространство $U = K(e_1 + \dots + e_n)$.
        Согласно теореме Машке, у данного подпространства есть инвариантное дополнение $W$.
        Если подумать, то окажется, что $W = K(e_1 - e_2) + \dots + K(e_{n - 1} - e_n) = \defset{\sum\limits a_i e_i}{\sum\limits a_i = 0}$.

        $S_n$ действует на $W$, это \emph{стандартное представление} $\sigma$.
        \intfact{В характеристике нуль $\sigma$ неприводимо.
        }
        \item Конкретизируем: рассмотрим $S_3$.
        $[S_3, S_3] = A_3$. $|S_3 / [S_3, S_3]| = 2$. Таким образом, у $S_3$ два одномерных представления --- главное (единица $1_{S_3}$) и ещё одно (знак $\sgn: S_3 \map K^*$).

        Сопряжённых классов у $S_3$ три --- тип единицы (1,1,1), тип транспозиции (1,2), тип 3-цикла (3).
        Порядки классов оттуда --- 1, 3, 2 соответственно.

        Неприводимых представлений будет столько же, сколько и классов --- три. Используя sum of squares theorem, можно узнать степень третьего представления. $6 = n_1^2 + n_2^2 + n_3^2 = 1^2 + 1^2 + x^2 \then x = 2$ (ещё можно использовать, что $x \in \N$ --- число, делящее индекс центра).

        $K(e_1 - e_2) + K(e_2 - e_3)$ под действием $S_3 = \angles{(12), (23)}$ преобразуется в себя под действием матриц $(12) \mapsto \vect{-1 & 1 \\ 0 & 1}; (23) \mapsto \vect{1 & 0 \\ 1 & -1}$.
        Это ещё одно неприводимое представление $S_3$.
        При нём 3-цикл $(123)$ переходит в $\vect{0 & -1 \\ 1 & -1}$, и считая следы этих матриц, мы можем построить таблицу характеров.
        \[\begin{array}{c|ccc}
              & 1 & (13) & (123) \\\hline 1 & 1 & 1 & 1 \\ \sgn & 1 & -1 & 1 \\ \chi_{\sigma} & 2 & 0 & 1
        \end{array}\]
        У этой таблицы есть множество замечательных свойств, но они будут выведены позднее.
        \item Группа $Q_8$ задаётся копредставлением $\angles{i,j,k\middle| i^2 = j^2 = k^2 = ijk = -1} = \{\pm 1, \pm i, \pm j, \pm k\}$ (при условии $(-1)^2 = 1$).
        $|Q_8| = 8 = 2^3$, то есть $Q_8$ --- 2-группа. $C(Q) = \{\pm 1\}$.
        Таким образом, у неё четыре одномерных представления.
        Классов сопряжённых элементов в данной группе пять: $Q_8 = \{1\} \sqcup \{-1\} \sqcup \{\pm i\} \sqcup \{\pm j\} \sqcup \{\pm k\}$.
        \[\begin{array}{c|ccccc}
              & 1 ~(1) & -1 ~(1) & \pm i ~(2) & \pm j ~(2) & \pm k ~(2) \\\hline 1 & 1      & 1       & 1         & 1         & 1          \\
              \chi_1 & 1      & 1       & -1         & -1          & 1         \\
              \chi_2 & 1      & 1       & -1          & 1         & -1         \\
              \chi_3 & 1      & 1      & 1          & -1          & -1          \\
              \chi_4 & 2      & -2      & 0          & 0          & 0
        \end{array}\]
        В скобках в первой строке пишется количество элементов в соответствующем классе сопряжённых.

        Последнему представлению соответствуют матрицы Паули, которые построил Кэли: $\H = \defset{\vect{z & w \\ -\overline{w} & \overline{z}}}{z, w \in \C}$ при выборе базиса $\{1, i\}$ в $\C$ получает базис
        \[\vect{1 & 0 \\ 0 & 1} \quad \vect{i & 0 \\ 0 & -i} \quad \vect{0 & 1 \\ -1 & 0} \quad \vect{0 & i \\ i & 0}\]
        (Данное представление точное, поэтому неприводимое --- у всех одномерных представлений $-1$ лежит в ядре).
        Это и есть образы $1, i, j, k$ при неком двумерном представлении $Q_8$.
        \definition[Точное представление (faithful representation) $\pi: G \map GL(n, K)$]{$\Ker(\pi) = 1$.}
        \item Теперь посмотрим на диэдральную группу $D_n= \angles{x, y\middle|x^2 = y^2 = (xy)^n = 1}$ при $n = 4$.

        $D_4 = \{1, x, y, xy, yx, xyx, yxy, xyxy = yxyx\}$.
        Образующие отвечают симметриям квадрата относительно диагонали и серединного перпендикуляра к стороне.

        $C(D_4) = \{1, xyxy = yxyx\}$. Снова $D_4/C(D_4) = V$. Здесь таблица характеров такая
        \[\begin{array}{c|ccccc}
              & 1 ~(1) & xyxy = yxyx ~(1) & \{x, yxy\} ~(2) & \{y, xyx\} ~(2) & \{xy, yx\} ~(2) \\\hline
              1      & 1      & 1                & 1               & 1               & 1               \\
              \chi_1 & 1      & 1                & -1              & -1              & 1               \\
              \chi_2 & 1      & 1                & -1              & 1               & -1              \\
              \chi_3 & 1      & 1                & 1               & -1              & -1              \\
              \chi_4 & 2      & -2               & 0               & 0               & 0
        \end{array}\]
        Последняя строка получена, как точное представление --- симметрии квадрата в $\R^2$.
        \[x \mapsto \vect{1 & 0 \\ 0 & -1} \quad y \mapsto \vect{0 & 1 \\ 1 & 0}\]
        И хотя таблицы характеров $D_4$ и $Q_8$ одинаковы, но группы неизоморфны, и различие заключается, например, в том, что у $D_4$ есть двумерное представление над $\R$, а у $Q_8$ нет.
    }


    \section{Соотношения ортогональности Шура (лемма Шура в матричной форме)}
    Пусть $\pi: G \map GL(U), \rho: G \map GL(V)$ --- два неприводимых представления группы $G$ над одним и тем же полем $K$.

    Пусть $\phi: U \map V$ --- произвольное $K$-линейное отображение.
    Сопоставим ему усреднение \[\phi_0 = \frac{1}{|G|}\sum\limits_{g \in G}\rho_g \phi \pi_g^{-1}\] это уже $K[G]$-линейное отображение, или сплетающий оператор.

    Пусть теперь $K$ алгебраически замкнуто, $\chr(K) = 0$ (на самом деле достаточно, чтобы характеристика не делила порядок группы).
    \lemma[Лемма Шура]{\down
    \bullets{
        \item Если $U \ncong V$, то $\phi_0 = 0$.
        \item Если же $\pi = \rho$ (в частности, $U = V$), то тогда $\phi_0$ --- гомотетия с коэффициентом $\frac{\tr(\phi_0)}{\dim V} = \frac{\tr(\phi)}{\dim V}$.}
    \provehere{
        $\phi_0 = \vect{\lambda & \cdots & 0 \\ \vdots&\ddots &\vdots \\ 0 & \cdots & \lambda}$, а при $\pi = \rho$ матрица сопрягается (и след не меняется).
    }
    }
    Выберем в $U$ базис $u_1, \dots, u_m$ и в $V$ базис $v_1, \dots, v_n$.
    Базисом линейных отображений $U \map V$ являются $\phi_{i,j}: \arr{ccc}{U &\map& V\\u_h &\mapsto& \all{v_i,&h = j \\ 0,&h \ne j}}$.
    Матрица $\phi_{i,j}$ в данных базисах равна $e_{i,j}$.
    \newlection{21 сентября 2016 г.}

    \theorem[Соотношения ортогональности Шура]{\label{schur-orthogonality}
    Пусть $B: K^G \times K^G \map K$ --- симметрическое скалярное произведение: $B(\chi,\theta) = \frac{1}{|G|}\sum\limits_{g \in G}\chi(g)\theta(g^{-1})$.
    \numbers{
        \item Если $\pi \nsim \rho$, то $\forall i,j,k,l: B(\pi_{i,j}, \rho_{k,l}) = 0$.
        \item Если $\pi = \rho$, то $B(\pi_{i,j},\pi_{k,l}) = \frac{1}{\deg(\pi)}\delta_{i,l}\delta_{j,k}$.
    }
    \provehere{
        Подставим в качестве $\phi = e_{i,j} \in M(n, m, K)$ --- линейный оператор $K^n \map K^m$.

        Для представлений $\pi$ и $\rho$ в фиксированных базисах определены \emph{матричные элементы}:
        \begin{align*}
            \pi_{i,j}: G \map K \\ g \mapsto \pi(g)_{i,j}
        \end{align*}
        и аналогично для $\rho$:
        \begin{align*}
            \rho_{k,l}: G \map K \\ g \mapsto \rho(g)_{k,l}
        \end{align*}

        Усредним $\phi = e_{i,j}$, получится некое $\phi_0$.
        В случае $\pi \nsim \rho$: $\phi_0$ равно нулю, откуда $B(\pi, \rho) = 0$.

        Иначе, если $\pi = \rho$, то $\exists \lambda \in K: \phi_0 = \lambda \id$, то есть $(\phi_0)_{k,l} = \lambda\delta_{k,l}$.
        Посчитаем $\lambda$: $\tr(\phi_0) = \frac{1}{|G|}\sum\limits_{g \in G}\tr(\pi_g e_{i,j} \pi_g^{-1}) = \frac{1}{|G|}\sum\limits_{g \in G}\tr(e_{i,j}) = \delta_{i,j}$.
        Отсюда $\deg(\pi)\cdot \lambda = \delta_{i,j}$.
    }
    }
    \note{
        Для поля $\C$ можно устроить эрмитово скалярное произведение $C: K^G \times K^G \map \C$
        \[C(\chi, \theta) = \frac{1}{|G|}\sum\limits_{g \in G}\chi(g)\overline{\theta(g)}\]
        Чаще всего мы будем вычислять скалярное произведение от характеров.

        Тогда теорема говорит о том, что все матричные элементы $\pi_{i,j}$ для всех неприводимых представлений $\pi$ образуют ортогональный базис пространства $\C^G$ относительно скалярного произведения $C$.
        Для компактных групп это называется теоремой Петера --- Вейля.
    }

    \corollary{
        Пусть $\pi^{(1)}, \dots, \pi^{(m)}$ --- все неэквивалентные неприводимые представления $G$.
        Тогда набор функций $\defset{\pi^{(i)}_{k,l}}{1 \le i \le m, 1 \le k, l \le \deg(\pi^{(i)})}$ линейно независим.
        \provehere{
            Рассмотрим матрицу $B\left(\pi^{(i)}_{k,l}, \pi^{(j)}_{k',l'}\right)$, она невырождена: это ортогональная прямая сумма $\sum\limits_{j = 1}^{m}\deg(\pi^{(j)})$ одномерных подпространств (отвечающих диагональным матричным элементам) и $\sum\limits_{j = 1}^{m}\frac{\deg\left(\pi^{(j)}\right)(\deg\left(\pi^{(j)}\right)-1)}{2}$ гиперболических плоскостей.
        }
    }
    Заметим, что $\dim K^G = |G|$.
    В этом пространстве нашлись $n_1^2 + \cdots + n_s^2$ линейно независимых функций (здесь $n_i = \deg(\pi^{(i)})$.

    Из теоремы Веддербарна --- Артина сразу следует, что они ещё и являются системой образующих (для замкнутого поля хорошей характеристики).

    Мы же это докажем используя технику характеров для замкнутого поля характеристики нуль.


    \section{Первое соотношение ортогональности}
    \lemma{
        Оказывается, что если $\chi, \theta$ --- \textbf{характеры} конечномерных представлений над $\C$, то $C(\chi, \theta) = B(\chi, \theta)$.
        Тем не менее, это разные скалярные произведения (одно эрмитово, другое симметрическое).
        \provehere{
            В самом деле, если $\pi$ --- унитарное представление, то $\pi_g^{-1} = \overline{\pi_g}^t$.
            Любое представление эквивалентно унитарному (теорема Машке над $\C$).

            Пусть $\Image(\pi) \in U(n, \C)$.
            Тогда $B(\pi_{i,j}, \pi_{k,l}) = \frac{1}{|G|}\sum\limits_{g \in G}\pi_{i,j}(g)\pi_{k,l}(g^{-1}) = \frac{1}{|G|}\sum\limits_{g \in G}\pi_{i,j}(g)\overline{\pi_{l,k}(g)} = C(\pi_{i,j}, \pi_{l,k})$.
            В частности, пусть $(\pi^{(m)})_{1 \le m \le s}$ --- все неприводимые представления.
            Тогда набор \[\defset{\pi_{i,j}^{(m)} \cdot \sqrt{\deg (\pi^{(m)})}}{1 \le m \le s, 1 \le i, j \le \deg \pi^{(m)}}\] ортонормирован.

            Осталось заметить, что характер --- сумма собственных чисел (которые корни из единицы), стоящих на диагонали, а для корней из единицы $\omega: \overline{\omega} = \omega^{-1}$.
        }}
    \theorem[Первое соотношение ортогональности]{
        Если $\chi, \theta$ --- характеры неприводимых представлений, то $B(\chi, \theta) = \delta_{\chi,\theta}$.
        \provehere{
            Используем~(\cref{schur-orthogonality}). Положим $\chi = \pi_{1,1} + \dots + \pi_{n,n}$ и $\theta = \rho_{1,1} + \dots + \rho_{n,n}$.

            Если $\pi \nsim \rho$, то всегда $B(\pi_{i,i}, \rho_{j,j}) = 0$.

            Если же $\pi \sim \rho$, то можно сопрячь матрицу не меняя след, считаем, что $\pi = \rho$.
            Тогда \[B(\chi, \theta) = \underbrace{\frac{1}{\deg(\pi)} + \cdots + \frac{1}{\deg(\pi)}}_{\deg(\pi)} = 1\qedhere\]
        }
    }
    Вспомним, что характеры постоянны на классах сопряжённости, иначе говоря, \emph{центральные функции} на $G$.
    \corollary{
        Характеры неприводимых представлений линейно независимы.

        \provehere{
            Напишем линейную зависимость $\lambda_1 \chi_1 + \cdots + \lambda_t \chi_t$.
            По очереди скалярно перемножая с $\chi_i$, получаем $\lambda_iB(\chi_i, \chi_i) = 0$, откуда все коэффициенты в зависимости нулевые.
        }
    }
    \corollary{
        Количество различных неприводимых характеров не превосходит количество классов сопряжённых элементов.
        \provehere{
            Прямо следует из линейной независимости.
        }
    }

    Дальше уже мы считаем $\chr(K) = 0$, в последующих следствиях не подойдёт не делящая порядок группы.

    \corollary{
        Пусть $\pi$ --- любое представление $G$.
        Тогда кратность вхождения неприводимого $\pi_i$ в $\pi$ равна $B(\chi_{\pi}, \chi_i)$ (где $\chi_i \coloneqq \chi_{\pi_i}$).
        \provehere{
            По теореме Машке $\pi$ есть сумма неприводимых представлений:
            \[\pi = \pi_1^{\oplus m_1} \oplus \dots \oplus \pi_t^{\oplus m_t}\]
            Следовательно, $\chi_\pi = m_1 \chi_1 + \dots + m_t \chi_t$, и $B(\chi_\pi, \chi_i) = m_i$.
        }
    }
    \corollary[Теорема Ремака --- Крулля --- Шмидта]{\label{ksrth}
    Разложение представления на неприводимые определено однозначно с точностью до изоморфизма.
    }
    \note{
        Теорема доказывается в гораздо меньшей общности, чем она верна, и используются гораздо более сильные средства, чем те, которые нужны, но что поделать.
    }
    \corollary[Теорема Фробениуса]{\label{frobenius-theorem}
        $\pi \sim \rho$, если $\chi_\pi = \chi_\rho$. Ещё раз отметим, что это верно \textbf{только в характеристике нуль}.
        \provehere{Всякое неприводимое представление входит в $\pi$ и $\rho$ с равной кратностью.}
    }
    \corollary{\label{irreducibility-criterion}
        $\forall$ представления $\pi: B(\chi_\pi, \chi_\pi) = 1 \iff \pi$ неприводимо.
        \provehere{
            Пусть $\pi = \pi_1^{\oplus m_1} \oplus \dots \oplus \pi_t^{\oplus m_t}$.
            Отсюда следует, что $B(\chi_\pi, \chi_\pi) = m_1^2 + \dots + m_t^2$.
        }
    }
    \corollary[Ортогональность первой строке таблицы характеров]{
        Если $\chi \ne 1$ --- характер неприводимого представления, то $\sum\limits_{g \in G}\chi(g) = 0$.
    }

    \precaution{Основной ошибкой начинающих является то, что при подсчёте $B(\chi, \theta) = \sum\limits_{g \in G}\chi(g)\theta(g^{-1})$ взятие обратного забывается.
    Всякому классу сопряжённых элементов $C \subset G$ можно сопоставить другой класс $C^{-1} \subset G$, и в общем случае совсем необязательно, что $C = C^{-1}$.
    }


    \section{Разложение представление на неприводимые. Sum of squares formula}

    Рассмотрим регулярное представление $G$ --- действие $G$ слева на групповой алгебре.
    \begin{align*}
        \text{reg}: G \curvearrowright K[G] &\map K[G]\\ g, \sum\limits_{h \in G}a_h h &\mapsto a_h gh
    \end{align*}
    Посчитаем характер данного представления.

    Пусть $G \curvearrowright X$ --- действие.
    С ним связано линейное представление на пространстве с базисом $X$ $\pi: G \curvearrowright K[X]$.
    \theorem[Fixed points formula]{
        $\chi_\pi(g) = |\Fix_X g|$ (где $\Fix_X g = \defset{x \in X}{gx = x}$).
        \provehere{
            Матрицы, в которые отправляются элементы $G$ --- матрицы-перестановки.
            След такой матрицы равен количеству единичек на диагонали, то есть количеству неподвижных точек.
        }
    }
    \corollary{
        $\chi_{\text{reg}} = |G| \cdot \delta_{g,1_G}$.
        \provehere{
            Только единица оставляет какие-то элементы на месте, и для неё все точки неподвижны.
        }
    }
    Пусть $K$ --- алгебраически замкнутое поле, $\chr(K) = 0$.
    \theorem{
        Каждое неприводимое представление $\pi_i$ группы $G$ входит в разложение регулярного с кратностью $n_i \coloneqq \deg(\pi_i)$.
        \[\text{reg} = \pi_1^{\oplus n_1} \oplus \dots \oplus \pi_s^{n_s}\]
        \provehere{
            Вычислим $B(\chi_{\text{reg}, \chi_i}) = \sum\limits_{g \in G}\chi_{\text{reg}}(g)\chi_i(g^{-1}) = \frac{1}{|G|}\cdot |G| \cdot \chi_i(1) = n_i$.
        }
    }
    \note{
        Это же следует и из теоремы Веддербарна --- Артина, причём даже не в характеристике нуль.
        Матричное кольцо $M(n, K)$ раскладывается в прямую сумму ровно $n$ неприводимых левых идеалов --- в качестве слагаемых подойдут столбцы $\defset{x \in M(n, K)}{\forall j \ne i: x_{*,j} = 0}$.
    }
    \corollary{\label{sum-of-squares-theorem}
        $|G| = n_1^2 + \cdots + n_t^2$.
        \provehere{
            Регулярное представление раскладывается в сумму $n_1$ неприводимых степени $n_1$, $n_2$ неприводимых степени $n_2$, \ldots
        }
    }
    \corollary{
        Функции $\pi^{(i)}_{j,k}$ образуют базис пространства $K^G$ (здесь $\pi^{(i)}_{j,k}$ --- матричный элемент $i$-го неприводимого представления в клетке в строке $j$ и столбце $k$).
        \provehere{
            Они линейно независимы, и их количество равно $|G| = \dim_K(K^G)$.
        }
    }


    \section{Второе соотношение ортогональности (для столбцов)}
    Будем рассматривать представления $G$ над $\C$.

    Пусть $\chi_1, \dots, \chi_t$ --- характеры неприводимых представлений.

    В первой соотношении были фиксированы две строки таблицы характеров, и суммирование было по столбцам.
    Сейчас сделаем наоборот.

    \theorem{
        Пусть $h, g \in G$, предположим, что нам уже известно, что количество классов сопряжённости $s = t$~(\cref{s-equals-t}). \[\sum\limits_{i = 1}^{t}\chi_i(h)\overline{\chi_i(g)} = \all{|C_G(g)|,&g \sim h \\ 0,& g \nsim h}\]
        \provehere{
            Пусть $1, g_2, \dots, g_s$ --- представители классов сопряжённых элементов, $\chi_1, \dots, \chi_s$ -- различные неприводимые характеры.

            Составим матрицу $A = (a_{i,j})_{1 \le i,j \le s}$, где $a_{i,j} = \sqrt{\left|g_j^G\right|}\cdot \chi_i(g_j)$.

            Обозначим $m_h \coloneqq |g_h^G|$.
            Первое соотношение ортогональности выглядит так: $\frac{1}{|G|}\sum\limits_{h = 1}^{s}m_h\chi_i(g_h)\overline{\chi_j(g_h)} = \delta_{i,j}$

            Если для матрицы $A \in M(n, \C)$ обозначить за $A^*$ её эрмитовски сопряжённую $A^* \bydef \overline{A}^t$, то видно, что из первого соотношения ортогональности $\frac{1}{|G|}A \cdot A^* = E$.
            Отсюда сразу получается $\frac{1}{|G|}A^* A = E$:
            \[\frac{1}{|G|}\sum\limits_{h = 1}^{s}\sqrt{\abs{g_i^G}\cdot\abs{g_j^G}}\cdot \overline{\chi_h(g_i)}\chi_h(g_j) = \frac{1}{|G|}\sqrt{\abs{g_i^G}\cdot\abs{g_j^G}}\sum\limits_{h = 1}^{s}\overline{\chi_h(g_i)}\chi_h(g_j) = \delta_{i,j}\]
            При $i \ne j$ получаем $\sum\limits_{h = 1}^{s}\overline{\chi_h(g_i)}\chi_h(g_j) = 0$, иначе $i = j$, и так как $|g_i^G| = |G : C_G(g_i)|$, то $\frac{|g_i^G|}{|G|} = \frac{1}{|C_G(g^G)|}$, то получается искомая формула.
        }
    }
    \newlection{28 сентября 2016 г.}


    \section{Усреднение с весом (averaging with weight)}
    Раньше все усреднения использовали меру Хаара --- все элементы группы имели одинаковый вес $\forall g \in G: \mu(g) = \frac{1}{|G|}$.

    Оказывается, можно проделать то же самое для гораздо более широкого класса мер.

    Пусть $\phi \in \Hom(U, V)$.
    Усредним его с помощью $f$, получив $G$-инвариантное $\phi_f$.
    В качестве $f$ здесь могут выступать центральные функции, поясним это ниже.

    Рассмотрим пространство центральных функций на $G$: $cf_K(G) \bydef \defset{f \in K^G}{ \forall g, h \in G: f(h^g) = f(h)}$.

    Также рассмотрим представление $\pi: G \map GL(V)$.
    Пусть $f \in cf_K(G)$.

    Определим усреднение $\pi_{(f)} = \frac{1}{|G|}\sum\limits_{g \in G}f(g)\pi_g$.
    \note{
        Если $f$ --- необязательно центральная функция, то при отождествлении $G^K$ и $K[G]$ ($\delta_g \leftrightarrow g$) получаем, что $\pi_{(g)} = \pi_g$.
        В общем случае $\pi_{(f)} = \pi(f)$, если $\pi$ рассматривается, как отображение $K[G] \map \End(V)$.
    }
    \lemma{Утверждается, что $\pi_{(f)}\in \End_{K[G]}(V)$, то есть $\pi_{(f)}$ коммутирует со всеми $\pi_g$.
    \provehere{
        Проверим, что $\forall g \in G: \pi_g \pi_{(f)} = \pi_{(f)}\pi_g$.
        \[\forall x \in G, u \in V: \pi_{(f)}(xu) = \frac{1}{|G|}\sum\limits_{g \in G}f(g)\underset{\overbrace{xx^{-1}}^{}}{}g(xu) = x\frac{1}{|G|}\sum\limits_{g \in G}f(xgx^{-1})(x^{-1}gx)u = x \pi_{(f)}(u)\qedhere\]
    }}
    \note{
        Обратное тоже верно в таком смысле: если для любого представления усреднение по функции $f$ --- $G$-инвариантно, то усреднение производится по центральной функции.
    }
    \lemma{
        Пусть $f \in cf_K(G)$, пусть $\pi$ --- неприводимое представление $G$ над алгебраически замкнутым полем $K$, $\chr K = 0$.
        Положим $\deg \pi = n$.

        Тогда $\pi_{(f)}$ --- гомотетия с коэффициентом $\frac{1}{n}B(f, \chi_{\pi^*})$.
        \provehere{
            $\pi_{(f)}$ --- гомотетия по лемме Шура. Посчитаем коэффициент $\lambda = \frac{\tr\left(\pi_{(f)}\right)}{n}$ гомотетии.
            \[\lambda = \frac{1}{n}\frac{1}{|G|}\sum\limits_{g \in G}f(g)\underbrace{\tr(\pi_g)}_{\chi_{\pi}(g)} = \frac{1}{n}\frac{1}{|G|}\sum\limits_{g \in G}f(g)\cdot\chi_{\pi^*}(g^{-1})\qedhere\]
        }
    }


    \section{Количество неприводимых представлений конечной группы}
    Как обычно, $K$ алгебраически замкнуто, $\chr(K) = 0$ (на самом деле верно и для поля разложения, $\chr(K)\notdivs|G|$).
    \theorem{\label{s-equals-t}
    Количество неприводимых различных (неэквивалентных) представлений $G$ над $K$ равно количеству классов сопряжённых элементов в $G$.
    \provehere{
        Пусть $c_1, \dots, c_s$ --- классы сопряжённых элементов, $\pi_1, \dots, \pi_t, \chi_1, \dots, \chi_t$ --- неприводимые представления и их характеры соответственно.
        Характеры --- ортонормированная система функций, по отношению к билинейной форме $B$, и они являются центральными функциями.

        Базис $cf_K(G)$ --- характеристические функции классов сопряжённости $\delta_{c_i}: x \mapsto \all{1,&x \in c_i \\ 0,&x \notin c_i}$.

        Так как $\chi_1, \dots, \chi_t$ линейно независимы, то $t \le s$.

        Чтобы доказать, что $t = s$, надо убедиться, что $\chi_1, \dots, \chi_t$ --- полная ортонормированная система, то есть нет никакой ненулевой центральной функции, ортогональной всем $\chi_t$.
        \[\forall f \in cf_K(G): B(f, \chi_i) = 0 \overset{?}\then f = 0\]
        Пусть $\forall i: B(f, \chi_i) = 0$. Тогда при усреднении получаем $\forall i: (\pi_i)_{(f)} = 0$.

        Так как каждое представление раскладывается в прямую сумму неприводимых, то вообще любое представление усредняется в ноль, например, регулярное $\text{reg}: G \map GL(K[G])$.
        Пусть $(e_g)_{g \in G}$ --- базис $K[G]$.
        Таким образом, $\text{reg}_{(f)}(e_1) = \frac{1}{|G|}\sum\limits_{g \in G}f(g)\text{reg}_g(e_1) = \frac{1}{|G|}\sum\limits_{g \in G}f(g)e_g$.
        Но так как $e_g$ --- базис, то все коэффициенты равны нулю.

        Действительно, $f$ оказалась равна нулю, откуда $\chi_i$ --- полная система, и $s = t$.
    }
    }
    \newlection{19 октября 2016 г.}


    \section{Дальнейшие конструкции над представлениями}
    \bullets{\label{further-constructions}
    \item Тензорное произведение представлений

    Пусть $\pi: G \map GL(U), \rho: G \map GL(V)$ --- два представления одной группы.
        \[(\pi, \rho)\rightsquigarrow\pi \otimes\rho: \arr{ccc}{G &\map& GL(U \otimes V)\\g&\mapsto&\pi_g \otimes_{K} \rho_g}\]
        \note{
            Это совсем не сермяжная истина, это эквивалентно тому, что диагональ определена так: $\Delta: \arr{ccc}{K[G]&\map&K[G]\\g &\mapsto& g \otimes g}$.
            Для алгебр Ли будет всё совсем иначе.
        }
        Если ввести базис, то окажется, что $(\pi \otimes \rho)_g = \pi_g \otimes \rho_g$, где $\otimes$ --- кронекеровское произведение матриц.
        А мы знаем, что $\tr(x \otimes y) = \tr(x) \cdot \tr(y)$, то есть если перемножить характеры двух каких-то представлений, то получится тоже характер какого-то представления: $\chi_\pi \cdot \chi_\rho = \chi_{\pi \otimes \rho}$.

        Конечно, $\pi \otimes \rho$ необязательно неприводимо, но если одно из $\pi$ и $\rho$ одномерно, а другое неприводимо, то результат --- тоже неприводимое произведение (какое-то другое).

        Именно так в общем случае строятся представления --- берутся все представления, которые можно построить, дальше их тензорные произведения (например, степени), они снова раскладываются на неприводимые, и так теоретически может найтись всё, но это надо доказывать.
        \item Наружное тензорное произведение (outward tensor product).

        Пусть $\pi: H \map GL(U), \rho: G \map GL(V)$ --- два представления \textbf{разных групп}.

        Сопоставим им представление $\pi \boxtimes \rho: \arr{ccc}{H \times G &\map& GL(U \otimes V)\\(h,g)&\mapsto&\pi_h \otimes \rho_g}$.
        В матрицах это опять же кронекеровское произведение матриц.
        \note{
            В сравнении с предыдущим пунктом получаем $\pi \otimes \rho = \restricted^{G \times G}_{G}(\pi \boxtimes \rho)$.

            Их не надо путать, произведение неприводимых непременно неприводимо только если произведение наружное, а иначе --- как правило приводимо.
        }
        \item $m$-я внешняя степень.

        Пусть $\pi: G \map GL(V)$. Сопоставим ему $\ext^m(\pi): \arr{ccc}{G&\map&GL(\ext^m(V))\\g&\mapsto&\ext^m(\pi_g)}$.
        По линейности определяется \[\ext^m(\pi)_g(u_1 \wedge \dots \wedge u_m) = \pi_g(u_1) \wedge \cdots \wedge \pi_g(u_m)\]
        то есть $\ext^m(\pi)_g = \ext^m(\pi_g)$.
        Можно посчитать $\chi_{\ext^2(\pi)}(g) = \frac{1}{2}(\chi_\pi(g)^2 - \chi_\pi(g^2))$.
        \item Точно так же определяется $m$-я симметрическая степень.

        Пусть $\pi: G \map GL(V)$. Сопоставим ему $S^m(\pi): \arr{ccc}{G&\map&GL(S^m(V))\\g&\mapsto&S^m(\pi_g)}$.
        По линейности определяется \[S^m(\pi)_g(u_1 \wedge \dots \wedge u_m) = \pi_g(u_1) \proddots \pi_g(u_m)\]
        то есть $S^m(\pi)_g = S^m(\pi_g)$.

        Полезно помнить формулу для симметрического квадрата $\chi_{\ext^2(\pi)}(g) = \frac{1}{2}(\chi_\pi(g)^2 + \chi_\pi(g^2))$.

        Видно, что $\ext^2(\pi)\oplus S^2(\pi) = \pi \otimes \pi$, и действительно $\chi_{\ext^2(\pi)} + \chi_{S^2(\pi)} = \chi_{\pi \otimes \pi}$.

    }


    \section{Представления прямого произведения групп}
    \label{khtimesg}
    В данном разделе на самом деле говорится, что $K[H \times G] = K[H] \otimes_K K[G]$.
    \note{На модуле $A \otimes B$ умножение достаточно вводить на разложимых тензорах, и обычно его определяют по формуле $(a_1 \otimes b_1)(a_2 \otimes b_2) = (a_1a_2 \otimes b_1b_2)$. Таким образом, тензорное произведение алгебр --- алгебра.
    Но мы докажем не это.}
    \theorem{
        Любое неприводимое представление группы $H \times G$ над алгебраически замкнутым полем характеристики нуль $K$ имеет вид $\pi \boxtimes \rho$, где $\pi, \rho$ --- неприводимые представления $H$ и $G$ соответственно. Обратно, любое такое $\pi \boxtimes \rho$ неприводимо.
        \provehere{
            Сначала докажем, что $\pi \boxtimes \rho$ неприводимо для неприводимых $\pi,\rho$.

            Ранее была определена билинейная форма $B_G: K^G \times K^G \map K$, $B_G(\chi,\theta) = \frac{1}{|G|}\sum\limits_{g \in G}\chi(g)\theta(g^{-1})$, и доказано, что характер $\chi$ --- характер неприводимого представления, если $B(\chi,\chi) = 1$~(\cref{irreducibility-criterion}).

            Посчитаем $B_{H \times G}(\chi_{\pi \boxtimes \rho},\chi_{\pi \boxtimes \rho})$.
            Так как $\chi_{\pi \boxtimes \rho}(h, g) = \chi_\pi(h)\otimes \chi_\rho(g)$, то
            \multline{B_{H \times G}(\chi_{\pi \boxtimes \rho},\chi_{\pi \boxtimes \rho}) = \frac{1}{|H \times G|}\sum\limits_{h \in H, g \in G}\chi_\pi(h)\chi_\rho(g)\chi_\pi(h^{-1})\chi_\rho(g^{-1}) =\\= \frac{1}{|H|}\sum\limits_{h \in H}\chi_\pi(h)\chi_\pi(h^{-1})\cdot\frac{1}{|G|}\sum\limits_{g \in G}\chi_\rho(g)\chi_\rho(g^{-1}) = B_H(\chi_\pi,\chi_\pi)B_G(\chi_\rho,\chi_\rho) = 1}

            Но так как получено ровно столько представлений, сколько и есть классов сопряжённых элементов, то из соображений количества больше представлений нет.
            Та же выкладка показывает, что получены неэквивалентные представления:
            \multline{B_{H \times G}(\chi_{\pi \boxtimes \rho},\chi_{\pi' \boxtimes \rho'}) = \frac{1}{|H \times G|}\sum\limits_{h \in H, g \in G}\chi_\pi(h)\chi_{\rho'}(g)\chi_{\pi'}(h^{-1})\chi_\rho(g^{-1}) =\\= \frac{1}{|H|}\sum\limits_{h \in H}\chi_\pi(h)\chi_{\pi'}(h^{-1})\cdot\frac{1}{|G|}\sum\limits_{g \in G}\chi_\rho(g)\chi_{\rho'}(g^{-1}) = B_H(\chi_\pi,\chi_{\pi'})B_G(\chi_\rho,\chi_{\rho'}) = \delta_{\pi,\pi'}\cdot\delta_{\rho,\rho'}}
        }
    }
    \note{Теорема верна и при $K$, являющимся полем разложения, $\chr K \notdivs |G|$.}
    \newlection{24 октября 2016 г.}


    \section{Свойства целочисленности представлений}
    Пусть $\pi: G \map GL(n, \C)$ --- неприводимое представление ($\deg \pi = n$).
    Для любого $g \in G: g^m = 1 \then \pi_g^m = \pi_{g^m} = \pi_1 = \id$, то есть все собственные числа $\pi_g$ --- корни степени $m$ из единицы.
    В частности, $\chi_\pi(g) \in \Z\left[\sqrt[m]{1}\right] \le \A$.

    Пусть $C \subset G$ --- класс сопряжённых элементов.
    \lemma{\label{integrality-properties}
        $\sum\limits_{g \in C}\frac{\chi_\pi(g)}{\deg(\pi)} \in \A$.
        \provehere{
            $\sum\limits_{g \in C}\pi_g$ является центральным элементом:
            \[\sum\limits_{g \in C}\pi_g \cdot \pi_x = \pi_x \cdot \sum\limits_{g \in C}\pi_g\]
            Тем самым (лемма Шура), $\exists \lambda \in \C: \sum\limits_{g \in C}\pi_g = \lambda \id$.
            Посчитаем след: $\tr\left(\sum\limits_{g \in C}\pi_g\right) = n \lambda$, но на самом деле $\lambda \in \A$, например, так как это корень характеристического многочлена ${\sum\limits_{g \in C}\pi_g}$ (а $\sum\limits_{g \in C}g \in K[G]$ --- целый элемент над $K$~(\cref{integral-over})).
        }
    }

    \corollary{
        Над $\C$ степень любого неприводимого представления делит порядок группы.
        \provehere{
            Пусть $\pi$ --- неприводимое представление. Пусть $\chi = \chi_\pi$. Тогда $B(\chi,\chi) = 1\iff\sum\limits_{g \in G}\chi(g)\chi(G^{-1}) = |G|$.
            Теперь поделим обе части равенства на $n$.
            \[\underbrace{\sum\limits_{C \subset G}\chi(C)}_{\in \A}\underbrace{\sum\limits_{h \in C}\frac{\chi(h)}{n}}_{\in \A} = \frac{|G|}{n}\]
            Отсюда $\frac{|G|}{n} \in \A$, но по лемме Гаусса $\A \cap \Q = \Z$.
        }
    }

    \theorem[Следствие из предыдущей]{
        Над $\C$ степень $n$ любого неприводимого представления $\pi: G \map GL(V)$ делит индекс центра.
        \provehere{
            Рассмотрим $\pi^{\boxtimes m}: G^m = \underbrace{G \times \dots \times G}_{m} \map GL(V^{\otimes m})$.
            Оно неприводимо, но точным не является.
            Пусть $H \coloneqq \defset{(h_1, \dots, h_m) \in C(G)^m}{h_1 \proddots h_m = 1}\normeq G^m$.

            Можно рассмотреть дефляцию представления $\pi^{\boxtimes m}: G/H \map GL(V ^{\otimes m})$.
            Она всё ещё неприводима --- образ остался прежним.

            Порядок факторгруппы равен $\frac{|G|^m}{|C(G)|^{m-1}} = |G| \cdot |G : C(G)|^{m-1}$, степень представления равна $\deg(\pi)^{m}$.
            Тогда \[(\deg(\pi))^m \bigdivs |G| \cdot |G : C(G)|^{m-1}\]и так как это верно для любого $m \in \N$, то $\deg(\pi)\bigdivs |G : C(G)|$.
        }
    }

    \intfact{
        Пусть $K = \C$, $A \le G$ --- абелева подгруппа. Тогда степень неприводимого представления не больше $|G : A|$, а если $A \normeq G$, то $\deg(\pi)\bigdivs |G : A|$.
    }


    \section{Индуцированные представления}
    Пусть $H \normeq G$.
    Тогда можно построить инфляцию представления $\pi: G/H \map GL(V)$, это будет представление \begin{align*}
                                                                                                    \tilde{\pi}: G &\map GL(V)g \mapsto \pi_{gH}
    \end{align*}
    Обратно, если $\pi: G \map GL(V)$ и $H \le \Ker(\pi)$, то есть дефляция \begin{align*}
                                                                                \tilde{\pi}: G/H &\map GL(V)gH \mapsto \pi_{g}
    \end{align*}

    Теперь пусть $H \le G$ --- просто подгруппа.
    По представлению $\pi: G \map GL(V)$ можно построить ограничение $\restricted^G_H(\pi)$.
    Однако совсем необязательно ограничение неприводимого представления неприводимо.

    Чтобы пройти в обратную сторону, построим по представлению подгруппы представление группы. $\pi: H \map GL(V)$.
    Построим \emph{индуцированное представление} $\induced_H^G(\pi): G \map ?$
    В конструкции индуцированного представления участвует не только само представление $\pi$, но и действие $G \curvearrowright G/H$.

    \subsection{Расширение скаляров}
    Пусть $K/F$ --- расширение полей ($F \le K$).
    Пусть $V$ --- векторное пространство над $K$, его можно рассматривать, как векторное пространство над $F$ --- надо забыть про умножение на элементы $K$, не лежащие в $F$.

    Можно сделать наоборот.
    Если $U$ --- векторное пространство над $F$, то можно сделать векторное пространство над $K$:
    о $K \otimes_F U$ можно мыслить, как о векторном пространстве над $K$: действие устроено так:
    \[\alpha(\beta \otimes x) = (\alpha \beta)\otimes x \text{, при }\alpha,\beta \in K, x \in U\]
    $\dim_K(K \otimes_F U) = \dim_F(U)$, конструкция называется \emph{расширением скаляров}.

    Дальше будем действовать по аналогии с этим при определении индуцированного представления.

    \subsection{Компактная индукция (compact induction)}
    Если дано представление $\pi: H \map V$, то $V$ является $K[H]$ модулем.
    Чтобы превратить его в $K[G]$ модуль, можно взять тензорное произведение
    \[K[G] \otimes_{K[H]} V\]
    Тут стоит остановиться и пояснить, что есть тензорное произведение над некоммутативным кольцом.
    \definition[Сбалансированное отображение $\phi$]{$\phi(u\lambda, v) = \phi(u, \lambda v)$.}
    \definition[Биадддитивное отображение $\phi$]{$\phi(u, v_1 + v_2) = \phi(u, v_1) + \phi(u, v_2)$ и $\phi(u_1 + u_2, v) = \phi(u_1, v) + \phi(u_2, v)$.}

    Пусть $R$ --- необязательно коммутативное кольцо, $U$ --- правый $R$-модуль, $V$ --- левый $R$-модуль.
    Тогда $U \otimes_R V$ --- абелева группа со сбалансированным биаддитивным отображением $\phi: U \times V \map U \otimes_R V$, удовлетворяющая следующему универсальному свойству:

    Для любой абелевой группы $A$, любого сбалансированного биаддитивного $\psi: U \times V \map A$: $\exists! \theta : U \otimes_R V \map A$ --- гомоморфизм абелевых групп.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJVIFxcdGltZXMgViJdLFsxLDEsIkEiXSxbMiwwLCJVIFxcb3RpbWVzX1IgViJdLFswLDEsIlxccHNpIl0sWzAsMiwiXFxwaGkiXSxbMiwxLCJcXHRoZXRhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
    \[\begin{tikzcd}[ampersand replacement=\&]
    {U \times V}
          \&\& {U \otimes_R V} \\
          \& A
          \arrow["\psi", from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-3]
          \arrow["\theta"', dashed, from=1-3, to=2-2]
    \end{tikzcd}\]

    Пусть $M$ --- правый модуль над $R$, $N$ --- левый модуль над $R$, $R$ --- необязательно коммутативное кольцо.
    Тогда $M \otimes_R N$ --- абелева группа, которую можно представить в виде
    \[M \otimes_R N = M \otimes_\Z N/ \angles{m \otimes \alpha n - m \alpha \otimes n \middle|m \in M, n \in N, \alpha \in R}\]
    Если $M$ является $S-R$-бимодулем, то $M \otimes_R N$ является левым $S$-модулем (структура вводится естественным образом).
    Надо всё-таки проверить корректность: например, модуль, по которому происходит факторизация, должен быть $S$-инвариантным.

    Пусть $\phi: R \map S$ --- гомоморфизм колец.
    Ему сопоставляется функтор $\phi^{\#}: \Lmod{S} \map \Lmod{R}$.
    $S$-модуль $M$ превращается в $R$-модуль так: $r \cdot m = \phi(r) \cdot m$.
    Если $\phi$ --- вложение колец, то функтор $\phi^{\#}$ --- забывающий, $S$-модуль превращается в $R$-модуль.

    Также можно сопоставить $\phi_{\#}: \Lmod{R} \map \Lmod{S}$ --- расширение скаляров.
    Получаем левый $S$-модуль $\phi_{\#}(M) = S \otimes_R M$, где $S$ рассматривается, как $S-R$-бимодуль.

    Теперь пусть $\phi: H \map G$ --- гомоморфизм групп.
    Тогда его можно продолжить до гомоморфизма групповых алгебр $\phi: F[H] \map F[G]$.

    Если $U$ --- $F[H]$-модуль, соответствующий представлению $\pi$, то $\phi_{\#}(U)$ --- $F[G]$-модуль.
    Если $H \le G$ и $\phi$ --- вложение, то соответствующее представление --- \emph{индуцированное с представления} $\pi$, обозначим его $\induced_H^G(\pi)$.

    Наоборот, если $\rho$ --- представление группы $G$, $V$ --- соответствующий $F[G]$-модуль, то $\phi^{\#}(V)$ --- $F[H]$-модуль.
    Если $H \le G$ и $\phi$ --- вложение, то соответствующее представление --- \emph{сужение представления} $\pi$, обозначается $\restricted_H^G(\pi)$.

    В частности, если $G$ --- абелианизация $H$, то $\phi: H \twoheadrightarrow G$ сюръективно.
    Его можно продолжить до $\phi: F[G] \twoheadrightarrow F[G^{\ab}]$.
    Тогда ограничение представления $\phi^{\#}$ --- инфляция, индуцированное представление $\phi_{\#}$ --- дефляция.

    Заметим, что $K[G] \otimes_{K[H]} V$ --- фактормодуль модуля $K[G] \otimes_K V$:

    Если $v_1, \dots, v_n$ --- базис $V$ над $K$, то над $K$ базисом $K[G] \otimes_K V$ является система $g \otimes v_i$.
    При появлении дополнительных соотношений стало возможным переносить элементы из $H$ по другую сторону $\otimes$: $gh \otimes v = g \otimes hv$.

    Пусть $T = \{x_1, \dots, x_t\}$ --- правая трансверсаль к $H$ в $G$, то есть $\forall g \in G: \exists! i = 1..t, h \in H: g = x_i h$.
    \[G = x_1 H \sqcup \dots \sqcup x_t H\]
    \lemma{
        Базисом $K[G] \otimes_{K[H]} V$ при фиксированной трансверсали $T = (x_1, \dots, x_t)$ и базисе $(v_1, \dots, v_n)$ являются $x_i \otimes v_j$.

        В частности, $\dim_K(\induced^G_H(V)) = |G : H| \dim_K(V)$.
    }
    \newlection{26 октября 2016 г.}
    Построение индуцированного модуля выглядело так: строится $G$-модуль $V = \induced_H^G(U)$, такой, что
    \numbers{
        \item $U \le V$.
        \item $V = x_1 U\oplus \dots \oplus x_t U$.
        \item Вводится линейное действие $G \curvearrowright V$.
    }
    Без упоминания тензорного произведения весьма утомительно проверять, что данная конструкция не зависит от выбора представителей.

    \subsection{Полная индукция (complete induction)}
    В то время как компактная индукция является аналогом прямой суммы, полная индукция является аналогом прямого произведения, то есть для бесконечных групп конструкция --- куда больше.
    Для конечных групп же конструкции изоморфны, что вскоре будет показано.

    Рассмотрим множество $H$-инвариантных функций, покамест обозначим его с большой буквы
    \[\text{Ind}_H^G(U) = \defset{f: G \map U}{\forall h \in H, x \in G: f(hx) = \pi_h(f(x))}\]
    Теперь устроим действие $G \curvearrowright \text{Ind}^G_H(U)$ следующим образом:
    \[\forall x, g \in G, f \in \text{Ind}_H^G(U): (gf)(x) = f\left(xg\right)\]
    Так как действия на $x$ слева и справа независимы, то определение корректно.
    Это действительно действие:
    \[g_1(g_2f(x)) = g_2f(xg_1) = f((x g_1)g_2) = f(x (g_1 g_2))\]

    $\text{Ind}_H^G(U)$ можно рассматривать, как $K[G]$-модуль, найдём базис данного пространства функций.

    В отличие от компактной индукции, где элементы $H$ действовали на $G$ справа, здесь всё наоборот, поэтому нам пригодится левая трансверсаль к $H$ в $G$.
    Чтобы всё было согласовано, построим её по правой трансверсали, взяв обратные: $T^{-1} = \{x_1^{-1}, \dots, x_t^{-1}\}$.
    \[G = H x_1^{-1} \sqcup \dots \sqcup H x_t^{-1}\]
    Введём функции \begin{align*}
                       f_{x_i, u}: G &\map U \\g &\mapsto \all{\pi_h(u),&g = hx_i^{-1} \in Hx_i^{-1} \\ 0,& g \notin Hx_i^{-1}}
    \end{align*}
    Если $(u_1, \dots, u_n)$ --- базис $U$, то набор функций $f_{x_i,u_j}$ является базисом $\text{Ind}_H^G(U)$.

    Видим, что базисы $\induced_H^G$ и $\text{Ind}_H^G$ равномощны.
    Векторные пространства $\induced_H^G(U)$ и $\text{Ind}_H^G(U)$ изоморфны, но \textbf{для конечных групп} они ещё и являются эквивалентными представлениями.

    \theorem{
        Если $|G| < \infty, H \le G$, $U$ --- $H$-модуль, то $\induced_H^G(U) \cong \text{Ind}_H^G(U)$, как $G$-модули.
        \provehere{
            Изоморфизм можно устроить на базисе так: $x_i \otimes u_j \leftrightarrow f_{x_i,u_j}$.
            $G$ действует на $x_i \otimes u$ так: пусть $gx_i = x_j h$ для $x_j \in T, h \in H$. Тогда
            \[g(x_i \otimes u) = (gx_i) \otimes u = (x_j h) \otimes u = x_j \otimes\pi_h(u)\]
            С другой стороны, если подействовать тем же элементом $g$ на $f_{x_i,u}$, то получится вот что:
            \[gf_{x_i,u}(x) = f_{x_i, u}(x g) = \all{\pi_{b}(u), &xg = b x_i^{-1} \in H x_i^{-1}\\0,&\text{иначе}}\]
            Таким образом, $g f_{x_i, u}$ отправляет не в ноль элементы $x$, такие, что $x \in H x_i^{-1} g^{-1}$.
            Мы уже ранее сказали, что $x_i^{-1}g^{-1} = h^{-1}x_j^{-1}$. Видим, что
            \[gf_{x_i,u}(x) = \all{\pi_{b}(u) = \pi_{bh^{-1}}(\pi_{h}(u)), &x = bh^{-1}x_j^{-1} \in H x_j^{-1}\\0,&\text{иначе}}\]
            Действительно, это совпадает с определением $f_{x_j, \pi_{h}(u)}$, действия на базисах сошлись.
        }
    }
    Матрица индуцированного представления выглядит так
    \[\pi_g = \vect{\pi_{x_1^{-1}gx_1} & \cdots & \pi_{x_1^{-1}gx_t} \\ \vdots & \ddots & \vdots \\ \pi_{x_t^{-1}g x_1} & \cdots & \pi_{x_t^{-1}gx_t}}\]
    где запись означает ненулевое значение $\pi_{x_i^{-1} g x_j}$ только если $x_i^{-1}g x_j \in H$.

    Таким образом, матрица индуцированного представления --- блочно-мономиальная, и $\induced^G_H(U) = x_1 U \oplus \dots \oplus x_t U$.
    Операторы $\pi_g$ сначала переставляют эти слагаемые, а потом на каждом действуют оператором $\pi_h$ для некоторого $h$ (для каждого $U$ --- $h$ --- своё).


    \section{Индуцированные характеры}
    Пусть $\pi: H \map GL(U)$ --- представление, $\chi = \chi_\pi$.
    Мы построили $\induced_H^G(\pi) \eqqcolon \pi^G: G \map GL(V = U^G)$.

    Посчитаем характер $\chi^G: G \map K$.
    Для этого сначала продолжим характер $\chi$ до функции на $G$:
    \begin{align*}
        \chi^0(G): G &\map K\\g &\mapsto \all{\chi(g),&g \in H \\ 0,& g \notin H}
    \end{align*}
    $\chi^0$ --- совсем необязательно центральная функция на $G$.
    \theorem{
        $\chi^G(g) = \sum\limits_{\substack{x_i \in T \\ x_i^{-1}g x_i \in H}}\chi(x_i^{-1}gx_i)$.
        \provehere{
            Характер --- сумма диагональных элементов, и так как матрица $\pi^G$ блочно-мономиальная, то суммировать надо характеры ровно тех $\pi_{x_i^{-1}g x_i}$, где $x_i^{-1}g x_i \in H$.
        }
    }
    \corollary{
        $\chi^G(g) = \sum\limits_{x_i \in T}\chi^0(x_i^{-1}gx_i)$.
    }
    \corollary{\label{best-so-far}
    Чтобы суммировать не по $x_i \in T$, а по $y \in G$, надо просто заменить $y = x_i h$. $\chi$ --- центральная на $H$ функция, поэтому всё сойдётся:
        \[\chi^G(g) = \frac{1}{|H|}\sum\limits_{\substack{y \in G\\y^{-1}gy \in H}}\chi(y^{-1}gy)\]
    }
    \corollary{
        Объединяя предыдущие два, получаем
        \[\chi^G(g) = \frac{1}{|H|}\sum\limits_{y \in G}\chi^0(y^{-1}gy)\]
    }

    \subsection{Формула слияния (fusion formula)}
    Пусть $H \le G, g \in G$.
    Посмотрим на $g^G \cap H$, это объединение некоторых классов сопряжённости в $H$:
    \[g^G \cap H = h_1^H \sqcup \dots \sqcup h_m^H\]
    Эти элементы $h_1, \dots, h_m$ называются \emph{представителями классов сопряжённых с $g$ в $H$}.

    \theorem{
        Если $\chi$ --- характер $H \le G$, $g \in G, h_1, \dots, h_m$ --- представители классов сопряжённых с $g$ в $H$, то
        \[\chi^G(g) = |C_G(g)| \sum\limits_{i = 1}^{m}\frac{\chi(h_i)}{|C_H(h_i)|}\]
        Поскольку $g \sim_G h_i$, то $C_G(g) \sim C_G(h_i)$ и, значит, формулу можно переписать в виде
        \[\chi^G(g) = \sum\limits_{i = 1}^{m}|C_G(h_i) : C_H(h_i)|\cdot \chi(h_i)\]
        \provehere{
            Введём $Y_i \coloneqq \defset{y \in G}{y^{-1}g y \sim_H h_i}$, положим $Y \coloneqq Y_1 \sqcup \dots \sqcup Y_m$.
            Запишем найденную ранее формулу~(\cref{best-so-far}) и будем её преобразовывать:
            \[\chi^G(g) = \frac{1}{|H|}\sum\limits_{\substack{y \in G\\y^{-1}gy \in H}}\chi(y^{-1}gy) = \frac{1}{|H|}\sum\limits_{y \in Y}\chi(y^{-1}gy) = \frac{1}{|H|}\sum\limits_{i = 1}^{m}\sum\limits_{y \in Y_i}\chi(y^{-1}g y) = \frac{1}{|H|}\sum\limits_{i = 1}^{m}|Y_i|\chi(h_i)\]
            Осталось доказать, что $\frac{|Y_i|}{|H|}= \frac{|C_G(g)|}{|C_H(h_i)|}$.

            Для этого заметим, что $Y_i = C_G(g) y_i H$: $\subset$ очевидно, $\supset$ показывается так: \multline{y^{-1} g y \sim_H h_i \then \exists h \in H: hy^{-1}gyh^{-1} = h_i,\quad\text{ и далее }\\ \all{y_i^{-1}g y_i = h_i \\ h y^{-1}g y h^{-1} = h_i} \then y_i h y^{-1} \in C_G(g) \then y \in C_G(g)y_i h}
            Далее для подсчёта количества элементов в двойном смежном классе можно воспользоваться формулой Фробениуса, учитывая, что $C_G(g) \cap H = C_H(h_i)$.
        }
    }
    В нормальной подгруппе $H \normeq G$ видно, что при $g \notin H$ сумма пустая, то есть характеры, индуцированные с нормальной подгруппы, сконцентрированы на $H$.

    \newlection{26 октября 2023 г.}
    \intfact{
        Индуцирование транзитивно:
        пусть $F \le H \le G$. Тогда $\induced^G_F(\chi) = \induced_H^G(\induced_F^H(\chi))$.
    }

    \subsection{Закон взаимности Фробениуса}
    Пусть $H \le G$, $\pi: H \map GL(U)$, $\rho: G \map GL(V)$ --- неприводимые представления.

    Рассмотрим $\pi^G \coloneqq \induced^G_H(\pi)$ и $\rho_H \coloneqq \restricted_H^G(\rho)$.
    Закон взаимности Фробениуса говорит, что $\pi^G$ содержит $\rho$ с той же кратностью, что $\rho_H$ содержит $\pi$.
    \theorem{
        Пусть $\chi \in cf_K(H), \rho \in cf_K(G)$.
        Тогда $B_G(\chi^G, \rho) = B_H(\chi, \rho_H)$. Здесь $\chi^G$ --- индуцирование центральной функции по формулам, полученным ранее (они все дадут одинаковый результат, так как выведены одна из другой), $\rho_H$ --- ограничение $\rho\Big|_H$.
        \provehere{
            \[B_G(\chi^G, \rho) = \frac{1}{|G|}\sum\limits_{g \in G}\chi^G(g)\rho(g^{-1}) = \frac{1}{|G|}\frac{1}{|H|}\sum\limits_{g \in G}\sum\limits_{y \in G}\chi(y^{-1}gy)\rho(g^{-1})\circlesign{$=$}\]
            Заменим порядок суммирования: пусть $h = y^{-1}gy$.
            \[\circlesign{$=$} \frac{1}{|G|}\frac{1}{|H|}\sum\limits_{h \in H}\sum\limits_{y \in G}\chi(h)\rho(y h^{-1}y^{-1}) = \frac{1}{|G|}\sum\limits_{y \in G}\underbrace{\sum\limits_{h \in H}\chi(h)\rho(h^{-1})}_{B_H(\chi, \rho_H)}\]
        }
    }
    \corollary{
        Если $A \le G$ --- абелева подгруппа, $\rho: G \map GL(U)$ неприводимо, то $\deg(\rho) \le |G : A|$.
        \provehere{
            Все неприводимые представления $A$ одномерны.
            $\rho\Big|_A$ --- прямая сумма неприводимых представлений $A$.

            Пусть $\pi$ --- какое-то из них. Тогда $\rho$ входит в $\induced^G_A(\pi)$, но $\deg(\induced^G_A(\pi)) = |G : A|$.
        }
    }

    \subsection{Альтернативное доказательство закона взаимности Фробениуса}
    В абстрактной ситуации пусть $\phi: R \map S$ -- гомоморфизм необязательно коммутативных колец.
    \begin{align*}
        \phi_{\#}: \Lmod{R} &\map \Lmod{S}\\M &\mapsto S \otimes_R M\text{ --- задали на $M$ структуру $S$-модуля}
    \end{align*}
    \begin{align*}
        \phi^{\#}: \Lmod{S} &\map \Lmod{R}\\M &\mapsto M\text{ --- забывающий функтор}
    \end{align*}

    Пусть $M$ --- $R$-модуль, $N$ --- $S$-модуль.
    \proposal{Имеет место следующее универсальное свойство:

    Для любого гомоморфизма $R$-модулей $\phi$: $\exists!$ гомоморфизм $S$-модулей $\psi: S \otimes_R M \map N$.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJNIl0sWzIsMCwiQSBcXG90aW1lc19SIE0iXSxbMSwxLCJOIl0sWzAsMiwiXFxwaGkiXSxbMCwxLCJpIl0sWzEsMiwiXFxwc2kiLDJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              M \&\& {S \otimes_R M} \\
              \& N
              \arrow["\phi", from=1-1, to=2-2]
              \arrow["i", from=1-1, to=1-3]
              \arrow["\psi"', from=1-3, to=2-2]
        \end{tikzcd}\]
        \provehere{
            Элементы $\defset{1 \otimes m}{m \in M}$ порождают $S \otimes M$. Чтобы диаграмма была коммутативной, необходимо равенство $\psi(i(m)) = \psi(1 \otimes m) = \phi(m)$.
            Значит, $\psi$ единственно, если уж существует.

            Зададим на разложимых тензорах $\psi(s \otimes m) = s \cdot \phi(m)$.
            Оно билинейно и распространяется по линейности на $S \otimes_R M$.
        }
    }
    \corollary{
        Имеет место естественный изоморфизм $\Hom_R(M, \phi^{\#}(N)) \cong \Hom_S(\phi_{\#}(M), N)$.

        В теории категорий такие два функтора $\phi^{\#}$ и $\phi_{\#}$ называются \emph{сопряжёнными}.
    }

    \theorem[Закон взаимности Фробениуса]{
        Предположим, что $H \le G$, $\chr(F) = 0$ (на самом деле достаточно $\chr(F)\notdivs|G|$), $F$ алгебраически замкнуто.
        Пусть даны два представления $\pi: H \map GL(V)$, $\rho: G \map GL(U)$.

        Тогда $\Mor(\induced^G_H(\pi), \rho) \cong \Mor(\pi, \restricted^G_H\rho)$.

        Отсюда следует $B_H(\chi_\pi, \chi_{\restricted_H^G\rho}) = B_G(\chi_{\induced_H^G \pi}, \chi_\rho)$. Обычно пишут $B_H(\chi_\pi, {\restricted_H^G\chi_\rho}) = B_G(\induced_H^G \pi_\chi, \chi_\rho)$
        \provehere{
            Рассмотрим следующую ситуацию.

            Пусть $\phi: H \hookrightarrow G$ --- вложение.
            Пусть $V$ --- $F[H]$-модуль, $U$ --- $F[G]$-модуль.

            Тогда $\Hom_{F[G]}(\phi_{\#}(V), U) \cong \Hom_{F[H]}(V, \phi^{\#}(U))$.

            Это $F$-линейный изоморфизм (проверить), то есть изоморфизм векторных пространств над $F$.

            Пусть $U, V$ --- простые модули, поле алгебраически замкнуто и характеристики, не делящей порядок группы.
            Пусть $\phi^{\#}(U) = \bigoplus\limits_{i = 1}^{k}V_i$ --- разложение в сумму простых $F[H]$-модулей.
            \[\dim_F\Hom\left(V, \bigoplus\limits_{i = 1}^{k}V_i\right) = \text{количество $V_i \cong V$ (лемма Шура)}\]
            Аналогично пусть $\phi_{\#}(V) = \bigoplus\limits_{i = 1}^{k}U_i$ --- разложение в сумму простых $F[G]$-модулей.
            \[\dim_F\Hom\left(\phi_{\#}(V), U\right) = \text{количество $U_i \cong U$}\]
            Но тогда получается, что количество вхождений $V$ в $\phi^{\#}(U)$ равно количеству вхождений $U$ в $\phi_{\#}(V)$

            Теперь пусть $\pi = \bigoplus \pi_i$, $\rho = \bigoplus \rho_j$ --- разложение в прямую сумму неприводимых.
            $\induced^G_H(\pi) = \bigoplus\induced^G_H(\pi_i)$ так как тензорное произведение дистрибутивно относительно прямого произведения:
            $F[G] \otimes (\bigoplus V_i) = \bigoplus (F[G] \otimes V_i)$.

            Также $\restricted^G_H(\rho) = \bigoplus \restricted\rho_i$, так как $\restricted$ --- просто сужение.

            Из билинейности $B$ и того, что $\chi_\pi = \sum\induced^G_H\chi_{\pi_i}, \chi_\rho = \sum\restricted^G_H\chi_{\rho_j}$ следует равенство скалярных произведений в общем случае.
        }
    }


    \chapter{Теория категорий}
    \newlection{14 ноября 2023 г.}
    До сих пор в повествовании использовались объекты, которые представлялись в системе аксиом ZFC, как множества.

    Теория категорий изучает подчас настолько большие \emph{классы} объектов-множеств, что в множество их не поместить.
    Так, банальным примером является категория всех множеств, и, как широко известно, множество всех множеств образовать нельзя.

    Ввиду этого в теории категорий используются \emph{классы}.
    Для наших потребностей достаточно думать, что классы ведут себя похоже на множество, но лишь могут содержать больше объектов, чем способно множество.
    C классами надо обращаться осторожно: например, нельзя создать класс всех подклассов данного класса.

    В дальнейшем повествовании данные теоретико-множественные тонкости будут опущены.
    \definition[Категория $\cat{C}$]{Совокупность следующих объектов:
    \bullets{
        \item Класс объектов $\Obj\cat{C}$.
        \item Для каждых $A, B \in \Obj\cat{C}$ множество морфизмов (стрелок) $\Mor_\catC(A, B)$.

        Если $(A, B) \ne (A', B')$ (где $A,B,A',B'\in\Obj\cat{C}$), то $\Mor_\catC(A, B) \cap \Mor_\catC(A', B') = \o$.

        Таким образом, по морфизму $\alpha \in \Mor_\catC(A, B)$ однозначно восстанавливаются $A, B$, их обозначают $A \coloneqq \source(\alpha), B \coloneqq \target(\alpha)$
        \item Закон композиции морфизмов: $\forall A, B, C \in \Obj\cat{C}$ определено
        \begin{align*}
            \Mor_\catC(B, C) \times \Mor_\catC(A, B) &\map \Mor_\catC(A, C)\\(\alpha,\beta)&\mapsto \alpha \beta
        \end{align*}
        \note{Иногда композицию записывают в обратном порядке: $\Mor_\catC(A,B) \times \Mor_\catC(B,C) \map \Mor_\catC(A, C)$.}
        \item $\forall A \in \Obj\cat{C}$ определён тождественный морфизм $\id_A \in \Mor_\catC(A, A)$, такой, что
        \[\forall B, C \in \Obj\cat{C}: \forall \beta \in \Mor_\catC(A, B), \gamma \in \Mor_\catC(C, A): \beta \id_A = \beta \text{ и }\id_A \gamma = \gamma\]
        \item Композиция ассоциативна, как только определена:
        \[\forall A, B, C, D \in \Obj\cat{C}: \forall \alpha \in \Mor_\catC(A, B), \beta \in \Mor_\catC(B, C), \gamma \in \Mor_\catC(C, D): (\gamma \beta)\alpha = \gamma(\beta\alpha)\]
    }
    }
    Далее будем пользоваться сокращёнными обозначениями:
    \bullets{
        \item Вместо $A \in \Obj\cat{C}$ можно писать $A \in \cat{C}$.
        \item Вместо $\alpha \in \Mor_\catC(A, B)$ можно писать $\alpha \in \Mor(A, B)$ или даже $\alpha: A \map B$, если категория ясна из контекста.
        В общем случае морфизм --- необязательно отображение, но в \emph{конкретных категориях} это так, поэтому удобно мыслить о морфизмах, как о отображениях.
        \item Также определим класс всех морфизмов данной категории $\Mor\cat{C} = \bigsqcup\limits_{A, B \in \cat{C}}\Mor(A, B)$.
    }
    \examples[Категории]{
        \item Категория $\cat{C}$ с одним объектом: $\Obj\cat{C} = \{A\}$. Аксиомы категории говорят, что $\Mor(A, A)$ --- моноид с нейтральным объектом $\id_A$.
        \item Конкретные категории --- неформально говоря, объекты со структурой, где морфизмы сохраняют данную структуру).
        \bullets{
            \item $\cat{Set}$. Объектами являются множества, морфизмами --- отображения.
            \item $\cat{Set}_*$. Объектами являются множества с отмеченной точкой $(X, x)$, $x \in X$, морфизмами --- отображения, сохраняющие отмеченную точку.
            \item $\cat{Group}$ --- категория групп с гомоморфизмами групп.
            \item $\cat{Ring}$ --- категория ассоциативных (необязательно коммутативных) колец с единицей с унитальными гомоморфизмами (сохраняющими единицу).
            \item $\cat{Rng}$ --- категория ассоциативных (необязательно коммутативных) колец с гомоморфизмами колец.
            \item $\cat{CRing}$ --- коммутативные кольца с единицей и унитальными гомоморфизмами.
            \item $\cat{CRng}$ --- коммутативные кольца с гомоморфизмами колец.
            \item $\cat{Ab}$ --- абелевы группы и аддитивные отображения.
            \item $\Lmod{R}$ --- левые $R$-модули и $R$-линейные отображения.
            \item $\modR{R}$ --- правые $R$-модули и $R$-линейные отображения.
            \item $\cat{Vect}_F$ --- конечномерные векторные пространства и $F$-линейные отображения.
            \item $\cat{Top}$ --- топологические пространства и непрерывные отображения.
            \item $\cat{Top}_*$ --- базированные топологические пространства (с отмеченной точкой) и непрерывные отображения, сохраняющие эту точку.
        }
    }
    \definition[Изоморфизм (изо) $\alpha: A \map B$]{
        Двусторонне обратимый морфизм: $\exists \beta: B \map A: \alpha \beta = \id_B, \beta\alpha = \id_A$.
    }
    \note{
        Как и в теории групп, если $\exists \beta, \beta': B \map A: \alpha\beta = \id_B, \beta'\alpha = \id_A$, то из ассоциативности $\beta = \beta'$.
    }
    \definition[Малая категория $\cat{C}$]{
        $\Obj\cat{C}$ --- множество.
    }
    \examples[Ещё категории]{
        \item \up \definition[Группоид]{Малая категория, в которой всякий морфизм --- изоморфизм.}
        Например, в топологическом пространстве можно ввести аналог фундаментальной группы --- \emph{фундаментальный группоид}, в котором объекты --- некоторые точки пространства, стрелки --- пути из начала стрелки в её конец (отфакторизованные по связанной на концах гомотопности, естественно).
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф.
        \bullets{
            \item $\cat{P}_\Gamma$ --- категория путей в $\Gamma$, для $x, y \in V: \Mor_{\cat{P}_\Gamma}(x, y)$ --- пути из $x$ в $y$.
            Композиция путей --- конкатенация.
            \item Категория достижимости $\cat{C}_\Gamma$. Для $x, y \in V: |\Mor_{\cat{C}_\Gamma}(x, y)| = \all{1,&x \rightarrow \cdots \rightarrow y \\ 0,& y\text{ недостижим из }x}$.
        }
        \item Пусть $(X, \le)$ --- частично упорядоченное множество, poset.
        Определим $\cat{C}_X$. $\Obj\cat{C}_X = X, |\Mor_{\cat{C}_X}(x, y)| = \all{1,&x \le  y \\ 0,& \text{иначе}}$, она часто используется, как \emph{индексирующая категория}.
        \item Категория матриц $\cat{M}$ (над кольцом $R$ с единицей).
        $\Obj\cat{M} = \N$. $\Mor_{\cat{M}}(m, n) = M_{n \times m}(R)$.
        Композиция в данной категории --- умножение матриц:
        \begin{align*}
            \Mor(m, n) \times \Mor(k, m) &\map \Mor(k, n) \\ M_{n \times m}(R) \times M_{m \times k}(R) &\map M_{n \times k}(R)\\x, y &\mapsto xy
        \end{align*}
        Как будет видно позже~(\cref{matrices-and-vector-spaces}), эта категория эквивалентна категории конечномерных векторных пространств.
        \item Категория стрелок. Пусть $\cat{C}$ --- категория, тогда $\cat{Arr}_{\cat{C}}$ --- тоже категория.
        $\Obj\cat{Arr}_{\cat{C}} = \Mor\cat{C}$. Пусть $\alpha: A \map B, \beta: C \map D$.
        Тогда $\Mor_{\cat{Arr}_{\cat{C}}}(\alpha, \beta) = \defset{(\phi, \psi)}{\phi: A \map C, \psi: B \map D, \psi\alpha = \beta\phi}$
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzAsMiwiXFxwaGkiXSxbMSwzLCJcXHBzaSJdLFswLDEsIlxcYWxwaGEiXSxbMiwzLCJcXGJldGEiXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D
              \arrow["\phi", from=1-1, to=2-1]
              \arrow["\psi", from=1-2, to=2-2]
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\beta", from=2-1, to=2-2]
        \end{tikzcd}\]
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф, $\cat{C}$ --- категория.

        Определим категорию диаграмм в типе $\Gamma$ в категории $\cat{C}$, назовём её $\cat{D}_\catC^\Gamma$.

        Предыдущий пример --- данный пример для графа $\Gamma$ следующего вида: $\begin{tikzcd}[ampersand replacement=\&]
                                                                                     \bullet \& \bullet\arrow[from=1-1, to=1-2]
        \end{tikzcd}$

        Формально $\Obj \cat{D}_\catC^\Gamma = \defset{(f_o, f_m)}{f_o: V \map \Obj\cat{C}, f_m: E \map \Mor\cat{C}}$, причём стрелки согласованы: $\forall x \in E: f_o(\source(x)) = \source(f_m(x))$ и $f_o(\target(x)) = \target(f_m(x))$.

        $\Mor\cat{D}_\catC^\Gamma\Big((f_o, f_m), (g_o, g_m)\Big) = \defset{\phi: V \map \Mor\cat{C}}{\phi(x) \in \Mor_\catC(f_o(x), g_o(x))}$, причём морфизмами являются только те $\phi$, что $\forall (x, y) \in E$ диаграмма ниже коммутативна:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJmX28oeCkiXSxbMSwwLCJmX28oeSkiXSxbMCwxLCJnX28oeCkiXSxbMSwxLCJnX28oeSkiXSxbMCwyLCJcXHBoaSh4KSJdLFsxLDMsIlxccGhpKHkpIl0sWzAsMSwiZl9tKCh4LCB5KSkiXSxbMiwzLCJnX20oKHgsIHkpKSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=large,row sep=large]
        {f_o(x)}
              \& {f_o(y)} \\
              {g_o(x)} \& {g_o(y)}
              \arrow["{\phi(x)}", from=1-1, to=2-1]
              \arrow["{\phi(y)}", from=1-2, to=2-2]
              \arrow["{f_m((x, y))}", from=1-1, to=1-2]
              \arrow["{g_m((x, y))}", from=2-1, to=2-2]
        \end{tikzcd}\]

        Например, для графа $\begin{tikzcd}[ampersand replacement=\&]
                                 \bullet \& \bullet \\
                                 \bullet \& \bullet
                                 \arrow[from=1-1, to=1-2]
                                 \arrow[from=1-2, to=2-2]
                                 \arrow[from=1-1, to=2-1]
                                 \arrow[from=2-1, to=2-2]
        \end{tikzcd}$ объекты --- это диаграммы вида $\begin{tikzcd}[ampersand replacement=\&]
                                                          A \& B \\
                                                          C \& D
                                                          \arrow["\alpha", from=1-1, to=1-2]
                                                          \arrow["\delta"', from=2-1, to=2-2]
                                                          \arrow["\gamma"', from=1-1, to=2-1]
                                                          \arrow["\beta", from=1-2, to=2-2]
        \end{tikzcd}$, а морфизмы --- это диаграммы вида
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzIsMSwiQSciXSxbMiwyLCJDJyJdLFszLDEsIkInIl0sWzMsMiwiRCciXSxbMCwxLCJcXGFscGhhIl0sWzIsMywiXFxkZWx0YSIsMl0sWzAsMiwiXFxnYW1tYSIsMl0sWzEsMywiXFxiZXRhIl0sWzQsNSwiXFxnYW1tYSciLDJdLFs0LDYsIlxcYWxwaGEnIl0sWzUsNywiXFxkZWx0YSciLDJdLFs2LDcsIlxcYmV0YSciXSxbMCw0LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSw2LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiw1LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMyw3LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D \& {A'} \& {B'} \\
              \&\& {C'} \& {D'}
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\delta"', from=2-1, to=2-2]
              \arrow["\gamma"', from=1-1, to=2-1]
              \arrow["\beta", from=1-2, to=2-2]
              \arrow["{\gamma'}"', from=2-3, to=3-3]
              \arrow["{\alpha'}", from=2-3, to=2-4]
              \arrow["{\delta'}"', from=3-3, to=3-4]
              \arrow["{\beta'}", from=2-4, to=3-4]
              \arrow[dashed, from=1-1, to=2-3]
              \arrow[dashed, from=1-2, to=2-4]
              \arrow[dashed, from=2-1, to=3-3]
              \arrow[dashed, from=2-2, to=3-4]
        \end{tikzcd}\]
        Стоит обратить внимание, что так как $\cat{D}_{\cat{C}}^\Gamma$ --- категория всех диаграмм, а не только коммутативных, то не весь параллелепипед выше коммутативен.
        В связи с этим удобнее рассматривать категорию коммутативных диаграмм, где объектами являются не просто диаграммы, а коммутативные диаграммы.
    }
    \newlection{16 ноября 2023 г.}


    \section{Универсальные объекты}
    Пусть $\cat{C}$ --- категория, $I, F \in \cat{C}$.
    \definition[$I$ --- инициальный (начальный) объект]{
        Для любого $A \in \cat{C}: \abs{\Mor(I, A)} = 1$.
    }
    \definition[$F$ --- финальный (терминальный) объект]{
        Для любого $A \in \cat{C}: {\abs{\Mor(A, F)} = 1}$.
    }
    \examples{
        \item В множествах инициальный объект --- пустое множество, финальный --- одноэлементное.
        \item В $\cat{Group}$ тривиальная группа одновременно является и инициальным, и терминальным объектом.
        \definition[Нулевой объект]{Одновременно финальный и инициальный объект.}
        \item В категории полей таких объектов нет (гомоморфизм полей сохраняет характеристику, и вообще всякий гомоморфизм полей инъективен).
        \item В $\cat{CRing}$ и в $\cat{Ring}$ инициальный объект --- $\Z$, финальный объект --- нулевое кольцо (кольцо, в котором 0 = 1).
        \item В категории $F$-алгебр с отмеченной точкой финальный объект --- $(\{0\}, 0)$, а инициальный объект побольше --- $(F[x], x)$.
        В самом деле, из инициального объекта должна вести (единственная) стрелка в любой другой объект, и данная стрелка должна однозначно определяться образами отмеченной точки и единицы.
    }
    Вспомним универсальное свойство локализации:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiU157LTF9UiJdLFsxLDEsIkEiXSxbMCwyLCJcXGZvcmFsbCBcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGV4aXN0cyAhXFx0aGV0YSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& {S^{-1}R} \\
          \& A
          \arrow["{\forall \psi}"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["{\exists !\theta}", from=1-2, to=2-2]
    \end{tikzcd}\]
    $\forall \psi: R \map A$, такого, что $\psi(S) \subset A^*: \exists ! \theta: S^{-1}R \map A$, такой, что диаграмма коммутативна.

    Этому соответствует инициальный объект в категории $\cat{C}$, такой, что $\Obj\cat{C} = \defset{\phi: R \map A}{\phi(S) \subset A^*}$ и $\Mor_\catC(\phi, \psi) = \defset{\alpha: \target(\phi) \map \target(\psi)}{\alpha \phi = \psi}$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiQSJdLFsxLDEsIkIiXSxbMCwyLCJcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGFscGhhIl1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& A \\
          \& B
          \arrow["\psi"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["\alpha", from=1-2, to=2-2]
    \end{tikzcd}\]
    Вообще, всякий объект с универсальным свойством --- инициальный или финальный в некоторой категории, но для этого именно нужна \textbf{уни}версальность --- так, у алгебраического замыкания есть нетривиальные изоморфизмы, оно единственно с точностью до не единственного изоморфизма.

    Будем говорить, что объект \emph{единственен}, если он определён единственным образом с точностью до единственного изоморфизма.
    \proposal{
        Инициальный объект единственен (если существует).
        \provehere{
            Пусть $I, I'$ --- два инициальных объекта. $\Mor(I, I') = \{\alpha\}, \Mor(I', I) = \{\beta\}$, $\alpha\beta \in \Mor(I', I')$, и из инициальности $I': \alpha\beta = \id_{I'}$.

            Аналогично $\beta\alpha = \id_I$.
        }
    }


    \section{Функторы и не только}

    \subsection{Противоположная категория}
    Пусть $\cat{C}$ --- категория, тогда $\cat{C}^{\text{op}}$ --- \emph{противоположная категория}:
    \gather{\Obj\cat{C}^{\text{op}} = \Obj\cat{C}\qquad\forall A, B \in \cat{C}^{\text{op}}: \Mor_{\cat{C}^{\text{op}}}(A, B) = \Mor_{\cat{C}}(B, A)\\\alpha \underset{\cat{C}}\cdot \beta = \beta \underset{\cat{C}^{\text{op}}}\cdot \alpha}
    Неформально говоря, это категория с развёрнутыми стрелками.

    Всякому утверждению соответствует двойственное, и, например, доказав, что инициальный объект единственен, мы автоматически доказали единственность и финального объекта --- принцип <<два по цене одного>>.

    \subsection{Декартово произведение категорий}
    Пусть $\cat{B}, \cat{C}$ --- категории.

    \definition[Декартово произведение категорий $\cat{B}\times\cat{C}$]{
        $\Obj(\cat{B}\times\cat{C}) = \Obj(\cat{B})\times\Obj(\cat{C})$, $\Mor_{\cat{B}\times\cat{C}}((B, C), (B', C')) = \Mor_\catB(B, B') \times \Mor_\catC(C, C')$.
        $(\alpha, \beta)(\alpha', \beta') = (\alpha\alpha', \beta\beta')$.
    }

    \subsection{Мономорфизмы и эпиморфизмы}
    Определим аналоги инъекции и сюръекции.
    Инъекция не склеивает точки, но в категориях у объектов нет точек, поэтому надо пойти другим путём.
    \definition[Мономорфизм (моно)]{Морфизм $\alpha$, такой, что его можно сокращать слева: $\forall \phi, \psi: \alpha\phi = \alpha \psi \then \phi = \psi$.
    Имеется в виду, что данное свойство выполняется для всех $\phi, \psi$, таких, что $\alpha\phi$ и $\alpha\psi$ определены.}
    Иными словами, мономорфность $\alpha$ означает, что коммутативность диаграммы ниже влечёт $\phi = \psi$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzIsMCwiXFxidWxsZXQiXSxbMCwxLCJcXHBoaSIsMCx7Im9mZnNldCI6LTF9XSxbMCwxLCJcXHBzaSIsMix7Im9mZnNldCI6MX1dLFsxLDIsIlxcYWxwaGEiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          \bullet \& \bullet \& \bullet
          \arrow["\phi", shift left, from=1-1, to=1-2]
          \arrow["\psi"', shift right, from=1-1, to=1-2]
          \arrow["\alpha", from=1-2, to=1-3]
    \end{tikzcd}\]
    \note{
        Диаграмма с кратными стрелками называется коммутативной, если композиция любых двух (или более) стрелок совпадает, но кратные стрелки не обязаны быть равны друг другу.
    }
    Двойственно, морфизм называется \emph{эпиморфизмом (эпи)}, если на него можно сокращать справа.

    В конкретных категориях совсем не обязательно мономорфизмы --- инъективны (хотя это довольно часто), эпиморфимзы --- сюръективны (что уже видно из примеров ниже).

    Однако всегда инъекции --- моно, сюръекции --- эпи.
    \examples{
        \item В $\cat{Set}$ мономорфизмы и инъекции совпадают, также как и эпиморфизмы и сюръекции.
        \item В категории $\cat{Group}$ мономорфизмы и инъекции тоже совпадают:
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXFoiXSxbMCwwLCJHIl0sWzEsMCwiSCJdLFsxLDIsIlxcYWxwaGEiXSxbMCwxLCIxIFxcbWFwc3RvIHgiLDAseyJvZmZzZXQiOi0yfV0sWzAsMSwiMSBcXG1hcHN0byB5IiwyLHsib2Zmc2V0IjoyfV0sWzAsMiwiXFxhbHBoYSh4KSA9IFxcYWxwaGEoeSkiLDIseyJjdXJ2ZSI6Mn1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \& H \\
              \Z
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["{1 \mapsto x}", shift left=2, from=2-1, to=1-1]
              \arrow["{1 \mapsto y}"', shift right=2, from=2-1, to=1-1]
              \arrow["{\alpha(x) = \alpha(y)}"', curve={height=12pt}, from=2-1, to=1-2]
        \end{tikzcd}\]
        Чтобы проверить, что $\alpha$ --- инъекция, рассмотрим две стрелки $\Z \map G$, отправляющие $1$ в два разных элемента $x, y \in G$.
        Если $\alpha$ уравнивает все такие стрелки, то есть $\alpha(x) = \alpha(y)$ всегда влечёт $x = y$, то $\alpha$ --- правда инъекция.
        \item В $\cat{CRing}$ вложение $\Z \hookrightarrow \Q$ --- очевидно, не сюръекция, хотя и эпиморфизм: в композиции $\begin{tikzcd}[ampersand replacement=\&]
                                                                                                                                \Z \& \Q \& R
                                                                                                                                \arrow[hook, from=1-1, to=1-2]
                                                                                                                                \arrow[shift left, from=1-2, to=1-3]
                                                                                                                                \arrow[shift right, from=1-2, to=1-3]
                                                                                                                                \arrow[curve={height=18pt}, from=1-1, to=1-3]
        \end{tikzcd}$ всякий морфизм из $\Z$ или из $\Q$ однозначно определяется образом единицы.

        Любая локализация --- эпиморфизм, и вообще бывают ещё эпиморфизмы, не являющиеся композицией сюръекции и локализации, но построить их непросто.
        \item В $\cat{Group}$ эпиморфизмы --- сюръекции.
        \provehere[Идея доказательства]{
            Всякий морфизм в $\cat{Group}$ разложим в композицию эпиморфизма (морфизма на образ) и мономорфизма (вложения образа).
            Тогда если нашёлся несюръективный эпиморфизм, то найдётся вложение $H \hookrightarrow G$, являющееся эпиморфизмом (при $H \lneq G$).

            Рассмотрим амальгамированное произведение $G \underset{H}* G$, оно определено в следующем абзаце.

            Рассмотрим две изомрфные копии $G: \hat{G} \cong \overline{G} \cong G$, такие, что $\hat{G} \cap \overline{G} = H$.
            Амальгамированное произведение $\hat{G} \underset{H}* \overline{G}$ состоит из всевозможных слов $\hat{g}_1 \overline{g}_1 \hat{g}_2 \overline{g}_2 \proddots \hat{g}_n \overline{g}_n$, где $\hat{g}_i \in \hat{G}, \overline{g}_i \in \overline{G}$.
            Ещё надо добавить соотношения $\all{(\hat{g}h) \cdot (h^{-1}\overline{g}) \sim \hat{g}\cdot\overline{g}\\\hat{g}_1 \cdot 1_{\overline{G}}\cdot \hat{g}_2 = \hat{g}_1\cdot \hat{g}_2 \\ \overline{g}_1 \cdot1_{\hat{G}} \cdot\overline{g}_2 = \overline{g}_1\cdot \overline{g}_2}$, где $\hat{g}, \hat{g}_1, \hat{g}_2 \in \hat{G}, \overline{g}, \overline{g}_1, \overline{g}_2 \in \overline{G}, h \in H$ и отфакторизовать по их нормальному замыканию.
            Если $H = \{1\}$, то $\hat{G} \underset{H}* \overline{G}$ --- свободное произведение.
            Далее надо доказать, что если $\hat{g} \in \hat{G} \sm H, \overline{g} \in \overline{G} \sm H$, то элементы $\hat{g}, \overline{g} \in \hat{G} \underset{H}* \overline{G}$ не равны.
            Если это доказано, то далее видим, что при $H \lneq G$ нарушается определение эпиморфизма:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJIIl0sWzEsMCwiRyJdLFsyLDAsIkdfMSBcXHVuZGVyc2V0e0h9KiBHXzIiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsImcgXFxtYXBzdG8gXFxvdmVybGluZXtnfSIsMix7Im9mZnNldCI6MX1dLFsxLDIsImcgXFxtYXBzdG8gXFxoYXR7Z30iLDAseyJvZmZzZXQiOi0xfV0sWzAsMiwiIiwyLHsiY3VydmUiOjN9XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  H \& G \& {G_1 \underset{H}* G_2}
                  \arrow[hook, from=1-1, to=1-2]
                  \arrow["{g \mapsto \overline{g}}"', shift right, from=1-2, to=1-3]
                  \arrow["{g \mapsto \hat{g}}", shift left, from=1-2, to=1-3]
                  \arrow[curve={height=18pt}, from=1-1, to=1-3]
            \end{tikzcd}\]
        }
        \item В категории метрических пространств отображения с плотным образом --- эпиморфизмы.
        В любом хаусдорфовом пространстве это тоже так (но только первой аксиомы отделимости недостаточно).
    }

    \subsection{(Ковариантные) функторы}
    \definition[(Ковариантный) функтор между категориями $\cat{B}$ и $\cat{C}$] {\label{functor}Класс отображений
    \bullets{
        \item $\cat{F}: \Obj\cat{B} \map \Obj\cat{C}$.
        \item $\forall X, Y \in \cat{B}$: $\cat{F}_{X,Y}: \Mor_{\catB}(X, Y) \map \Mor_{\cat{C}}(\cat{F}(X), \cat{F}(Y))$.
    }
    причём отображения должны сохранять композицию и единицу (второе условие обязательно, например, в категории из одного элемента --- моноиде --- очевидно недостаточно требовать только сохранения композиции, единица априори не сохранится).
    Функтор обозначают записью  $\cat{F}: \cat{B} \map \cat{C}$.
    }
    \definition[Строгий функтор $\cat{F}$]{
        $\forall X, Y \in \cat{B}: \cat{F}_{X,Y}$ инъективно.
    }
    \definition[Полный функтор $\cat{F}$]{
        $\forall X, Y \in \cat{B}: \cat{F}_{X,Y}$ сюръективно.
    }
    \note{
        Теория категорий --- не об объектах, а о морфизмах между ними (хотя часто, допуская вольность речи, говорят только про объекты, считая, что поведение на морфизмах очевидно).

        Важно, как функторы ведут себя на морфизмах, изоморфные объекты могут склеиваться, или наоборот, у объекта может возникнуть изоморфная копия, и это не должно менять строгость или полноту функтора.
    }
    \examples[Функторы]{
        \item Забывающие функторы --- забывают часть структуры.
        \bullets{
            \item Любая конкретная категория отображается в $\cat{Set}$.
            Например, $\cat{Group} \map \cat{Set}$ --- строгий функтор.
            \item $\cat{Rng} \map \cat{Ab}$ --- сопоставляем кольцу его аддитивную группу, строгий функтор.
            \item $\cat{Rng} \map \cat{Mon}$ --- сопоставляем кольцу его мультипликативный моноид, строгий функтор.
        }
        \item $GL_n: \cat{Ring} \map \cat{Group}, R \mapsto GL_n(R)$. Это опять задание функтора на объектах, но морфизмах его надо продолжить интуитивным образом.

        Формально, для $\phi: R \map S$ надо задать $(GL_n)_{R, S}(\phi): GL_n(R) \map GL_n(S)$. $\forall a \in GL_n(R): (GL_n)_{R,S}(a)_{i,j} = \phi(a_{i,j})$. Далее надо проверить, что $(GL_n)_{R,S}(\phi)$ (часто его обозначают той же буквой $\phi$) --- гомоморфизм групп.
    }

    \subsection{Контравариантные функторы}
    Контравариантный функтор обращает стрелки.
    \definition[Контравариантный функтор $\cat{F}: \cat{B} \map \cat{C}$]{Функтор $\cat{B}^\text{op} \map \cat{C}$.}
    Несложно проверить, что такие функторы взаимно однозначно соответствуют функторам $\cat{B} \map \cat{C}^\text{op}$.

    В частности, $\forall X, Y \in \cat{B}: \cat{F}_{X,Y}: \Mor(Y, X) \map \Mor(\cat{F}(X), \cat{F}(Y))$.

    Согласно этому определению, контравариантный функтор не является функтором.
    \example[Контравариантный функтор]{
        Пусть $\cat{C}$ --- категория с объектом $X \in \cat{C}$.
        Зададим функтор $\Mor(\_, X): \catC \map \cat{Set}$.
        Пусть на объектах он действует по правилу $Y \mapsto \Mor(Y, X)$, а на морфизмах --- по правилу $\phi \mapsto \Mor(\phi, X)$.
        Осталось определить $\Mor(\phi, X)$. Это должен быть морфизм в $\cat{Set}$ вида $\Mor(\target(\phi), X) \map \Mor(\source(\phi), X)$.
        Подойдёт морфизм $\_ \cdot \phi: \alpha \mapsto \alpha \cdot \phi$.

        % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiXFxjYXRDIl0sWzIsMCwiXFxjYXR7U2V0fSJdLFswLDAsIlxcTW9yKFxcXywgWCk6ICJdLFsxLDEsIlkiXSxbMiwxLCJcXE1vcihZLCBYKSJdLFsxLDIsIlxccGhpIl0sWzIsMiwiXFxNb3IoXFxwaGksIFgpOiAiXSxbMywyLCJcXGFycntjfXtcXE1vcihZJywgWCkgXFxtYXAgXFxNb3IoWSwgWCkgXFxcXCBcXGFscGhhIFxcbWFwc3RvIFxcYWxwaGEgXFxwaGl9Il0sWzQsMSwiXFx0ZXh0e9C00LvRjyAkWSBcXGluIFxcT2JqXFxjYXRDJH0iXSxbNCwyLCJcXHRleHR70LTQu9GPICRcXHBoaSBcXGluIFxcTW9yX1xcY2F0QyhZLCBZJykkfSJdLFswLDFdLFszLDQsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d
%        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
%        {\Mor(\_, X): }
%              \& \cat{C} \& {\cat{Set}} \\
%              \& Y \& {\Mor(Y, X)} \&\& {\text{для $Y \in \Obj\cat{C}$}} \\
%              \& \phi \& {\Mor(\phi, X): } \& {\arr{c}{\Mor(Y', X) \map \Mor(Y, X) \\ \alpha \mapsto \alpha \phi}} \& {\text{для $\phi \in \Mor_{\cat{C}}(Y, Y')$}}
%              \arrow[from=1-2, to=1-3]
%              \arrow[maps to, from=2-2, to=2-3]
%              \arrow[maps to, from=3-2, to=3-3]
%        \end{tikzcd}\]
        С контравариантным функтором $\Mor(\_, X)$ стоит обращаться с чрезвычайной осторожностью.
    }
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJZIl0sWzAsMSwiWSciXSxbMSwwLCJcXE1vcl9cXGNhdHtDfShZLCBYKSJdLFsxLDEsIlxcTW9yX1xcY2F0e0N9KFknLCBYKSJdLFswLDEsIlxccGhpIiwyXSxbMSwzXSxbMCwyXSxbMywyLCJcXF8gXFxjZG90IFxccGhpIiwyXSxbNCw3LCIiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MTAsInRhcmdldCI6MTB9LCJsZXZlbCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          Y \& {\Mor_{\cat{C}}(Y, X)} \\
          {Y'} \& {\Mor_{\cat{C}}(Y', X)}
          \arrow[""{name=0, anchor=center, inner sep=0}, "\phi"', from=1-1, to=2-1]
          \arrow[from=2-1, to=2-2]
          \arrow[from=1-1, to=1-2]
          \arrow[""{name=1, anchor=center, inner sep=0}, "{\_ \cdot \phi}"', from=2-2, to=1-2]
          \arrow[shorten <=5pt, shorten >=5pt, maps to, from=0, to=1]
    \end{tikzcd}\]
    \newlection{21 ноября 2023 г.}
    Можно рассмотреть ковариантную версию: функтор $\Mor_{\cat{C}}(X, \_)$.
    \[\Mor_{\cat{C}}(X, \_): \phi \mapsto [\alpha \mapsto \phi\alpha]\]
    Наконец, можно рассмотреть функтор $\Mor(\_, \_): \cat{C}^\text{op} \times \cat{C} \map \cat{Set}$.
    \examples[Не функторы]{
        \item Рассмотрим отображение $\cat{Center}: \cat{Group} \map \cat{Group}$, сопоставляющее группе её центр.
        Это не функтор, так как при гомоморфизмах центр необязательно отображается в центр.

        Например, рассмотрим полупрямое произведение $C_2 \rightthreetimes C_3 \cong S_3$. Ему соответствует композиция
        \[C_2 \hookrightarrow S_3 \twoheadrightarrow C_2\]
        Функтор взятия центра отобразит эту цепочку в $C_2 \map \{1\} \map C_2$, причём композиция --- $\id$, но $\id$ не может пропускаться через $\{1\}$
        \item $\Aut: \cat{C} \map \cat{Group}, A \mapsto \Aut(A)$ --- снова не функтор, просто непонятно, как определить его на морфизмах.
        Нет разумного способа сопоставить морфизмам $A \map B$ и $ A\map A$ морфизм $B \map B$.
    }
    \examples{
        \item Сопоставление группе коммутанта --- функтор.
        \[\cat{D}: \cat{Group} \map \cat{Group}\]
        Пусть $\phi: G \map H$. Функтор определён так:
        $\cat{D}(G) = [G, G], \cat{D}(\phi): [G, G] \map [H, H]$ --- сужение.
        \item Абелианизация тоже является функтором. $\ab: \cat{Group} \map \cat{Group}, \ab(G) = G^{\ab} = G/[G,G]$.
    %https://q.uiver.app/#q=WzAsNCxbMCwwLCJHIl0sWzEsMCwiSCJdLFsyLDAsIkheXFxhYiJdLFsxLDEsIkdee1xcYWJ9Il0sWzAsM10sWzMsMiwiXFxhYihcXHBoaSkiLDJdLFswLDEsIlxccGhpIl0sWzEsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \& H \& {H^{\ab}} \\
              \& {G^{\ab}}
              \arrow[from=1-1, to=2-2]
              \arrow["{\ab(\phi)}"', from=2-2, to=1-3]
              \arrow["\phi", from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
        \end{tikzcd}\]
        Отображение в абелеву группу содержит коммутант в ядре, поэтому $\phi: G \map H$ можно пропустить через фактор, и назвать $\ab(\phi)$
        \item \textbf{Категория всех категорий}.

        Категорию совсем всех категорий рассмотреть не получится, так как класс всех классов не определён.

        Вместо этого рассмотрим категорию всех малых категорий $\cat{Cat}$.
        Морфизмами в ней являются функторы.

        \item Категория диаграмм в $\cat{C}$ типа $\Gamma$, которая была рассмотрена ранее --- это функторы из путей $\mathscr{P}_\Gamma$ в графе в $\cat{C}$:
        \[\cat{D}_\Gamma(\cat{C}) = \Func(\mathscr{P}_\Gamma, \cat{C})\]
        \item Функторы $\Func(\mathscr{C}_\Gamma, \cat{C})$ из категории достижимости в $\cat{C}$ --- класс коммутативных диаграмм в $\cat{C}$.
        Например, если $\Gamma$ --- такой граф $\begin{tikzcd}[ampersand replacement=\&]
                                                    A \& B \\
                                                    C \& D
                                                    \arrow[from=1-1, to=2-1]
                                                    \arrow[from=1-1, to=1-2]
                                                    \arrow[from=1-2, to=2-2]
                                                    \arrow[from=2-1, to=2-2]
        \end{tikzcd}$, то $|\Mor(A, D)| = 1$, поэтому функтор должен перевести стрелки $A \map B \map D$ и $A \map C \map D$ с равной композицией в стрелки с равной композицией.

        Превратим её в категорию коммутативных диаграмм.
        Для этого надо ввести морфизмы между коммутативными диаграммами, об этом ниже.
    }


    \section{Естественные преобразования}
    \begin{flushright}{<<Всё естественно, что не безобразно>>}\end{flushright}
    Пусть $\cat{F}, \cat{G}: \cat{B} \map \cat{C}$ --- два функтора.
    Категорию $\cat{B}$ здесь стоит воспринимать, как \emph{индексирующую категорию}, как граф, по которому строится категория диаграмм.

    \emph{Естественное преобразование} $\eta: \cat{F} \map \cat{G}$ --- класс морфизмов $\defset{\eta_B: \cat{F}(B) \map \cat{G}(B)}{B \in \catB}$, такой, что $\forall \phi \in \Mor_{\cat{B}}(A, B)$ диаграмма коммутирует.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdHtGfShBKSJdLFsxLDAsIlxcY2F0e0Z9KEIpIl0sWzAsMSwiXFxjYXR7R30oQSkiXSxbMSwxLCJcXGNhdHtHfShCKSJdLFswLDEsIlxcY2F0e0Z9KFxccGhpKSJdLFsyLDMsIlxcY2F0e0d9KFxccGhpKSJdLFswLDIsIlxcZXRhX0EiLDJdLFsxLDMsIlxcZXRhX0IiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\cat{F}(A)}
          \& {\cat{F}(B)} \\
          {\cat{G}(A)} \& {\cat{G}(B)}
          \arrow["{\cat{F}(\phi)}", from=1-1, to=1-2]
          \arrow["{\cat{G}(\phi)}", from=2-1, to=2-2]
          \arrow["{\eta_A}"', from=1-1, to=2-1]
          \arrow["{\eta_B}", from=1-2, to=2-2]
    \end{tikzcd}\]

    \examples[Естественные преобразования]{
        \item Определитель $\det_n: GL_n \map GL_1$. ($GL_1(R) \cong R^*$.)
        В данном случае $GL_n, GL_1: \cat{CRing} \map \cat{Group}$, проверим, что $\forall A, B \in \cat{CRing}$.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJHTF9uKEEpIl0sWzEsMCwiR0xfbihCKSJdLFswLDEsIkdMXzEoQSkiXSxbMSwxLCJHTF8xKEIpIl0sWzAsMSwiXFxwaGkiXSxbMiwzLCJcXHBoaSJdLFswLDIsIlxcZGV0IiwyXSxbMSwzLCJcXGRldCJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {GL_n(A)}
              \& {GL_n(B)} \\
              {GL_1(A)} \& {GL_1(B)}
              \arrow["\phi", from=1-1, to=1-2]
              \arrow["\phi", from=2-1, to=2-2]
              \arrow["\det"', from=1-1, to=2-1]
              \arrow["\det", from=1-2, to=2-2]
        \end{tikzcd}\]
        Естественность означает $\phi(\det(a)) = \det(\phi(a))$, что верно, так как $\det$ --- многочлен от коэффициентов, а $\phi$ --- гомоморфизм коэффициентов.
        \item Рассмотрим два функтора $\cat{M}$ и ${}^{*}: \cat{CRing} \map \cat{Mon}$, отображающие кольцо в моноид его элементов по умножению, и группу обратимых элементов (являющуюся моноидом) соответственно.
        $\eta: R^* \hookrightarrow \cat{M}(R)$.
        \item Вложение --- естественное преобразование между коммутантом и тождественным отображением $\cat{D}, \cat{id}: \cat{Group}\map\cat{Group}$:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJbRyxHXSJdLFsxLDAsIltILCBIXSJdLFswLDEsIkciXSxbMSwxLCJIIl0sWzAsMSwiXFxwaGlcXGJpZ3xfe1tHLEddfSJdLFswLDIsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMiwzLCJcXHBoaSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {[G,G]}
              \& {[H, H]} \\
              G \& H
              \arrow["{\phi\big|_{[G,G]}}", from=1-1, to=1-2]
              \arrow[hook, from=1-1, to=2-1]
              \arrow[hook, from=1-2, to=2-2]
              \arrow["\phi", from=2-1, to=2-2]
        \end{tikzcd}\]
        \item\up\definition[Естественный изоморфизм]{Естественное преобразование, состоящее из изоморфизмов.}
        В категории множеств $\cat{Set}$: $\Mor(X, \Mor(Y, Z)) \leftrightarrow \Mor(X \times Y, Z)$: $g(x)(y) = f(x, y)$.

        Это стоит читать, как естественное преобразование между функторами $\Mor(\_, \Mor(\_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$ и $\Mor(\_ \times \_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$.
        \item Под естественным преобразованием $V \map V^{**}$ подразумевается естественное преобразование между функторам $\cat{id}$ и ${}^{**}$ действующих $\Lmod{F} \map \Lmod{F}$.

        Промежуточный функтор ${}^{*}$ --- контравариантен.

        $V^* \coloneqq \Mor_{\Lmod{F}}(V, F)$, значит, $V^{**} = \Mor_{\Lmod{F}}(\Mor_{\Lmod{F}}(V, F), F)$.
        Естественное преобразование сопоставляет функционалу $\phi \in V^*$ и вектору $x \in V$ их каноническое спаривание $\eps_x(\phi) = \phi(x) = \angles{\phi|x}$.

        Это преобразование не является изоморфизмом даже для счётномерных векторных пространств --- для конечных полей легко проверить различие мощностей.

        Естественное преобразование $\eps: \cat{id} \map {}^{**}$ можно сузить на категорию $\cat{Vect}_F$ конечномерных векторных пространств, там оно является изоморфизмом в силу подсчёта размерностей.
    }
    \counterexample[Неестественное преобразование]{
        Изоморфизм конечномерного векторного пространства, и двойственного к нему.
    }
    Неформально, всякое преобразование, в котором не задействованы какие-то выборы, является естественным.

    Рассмотрим два функтора $\cat{F}, \cat{G}: \cat{B} \map \cat{C}$.
    Пусть имеется также функтор $\cat{H}: \cat{C} \map \cat A$, и естественное преобразование $\eta: \cat{F} \map \cat{G}$.

    Беря композицию функтора и естественного преобразования, получаем естественное преобразование $\cat{H}\eta = \cat{H}\circ \eta: \cat{H}\circ\cat{F} \map \cat{H} \circ \cat{G}$.

    Для объекта $B \in \cat{B}: (\cat{H}\eta)_B = \cat{H}(\eta_B): \cat{H}(\cat{F}(B)) \map \cat{H}(\cat{G}(B))$.

    Если же функтор определён так $\cat{H}: \cat A \map \cat{B}$, то можно задать естественное преобразование $\eta \cat{H}: \cat{F} \circ \cat H \map \cat{G} \circ \cat{H}$.
    Аналогично, $(\eta\cat H)_B = \eta_{\cat{H}(B)}$.
    \example{
        Рассмотрим естественные по $X$ и по $Y$ преобразования в категории $\Lmod{R}$, где $R$ --- коммутативное кольцо.
        \begin{align*}
            X^* \otimes Y &\map \Mor(X, Y) \\ \phi \otimes y_i &\mapsto [x \mapsto \phi(x)y_i]
        \end{align*}
        Иными словами, имеется естественное преобразование между функторами $\cat{F}(X, Y) = X^* \otimes Y$ и $\Mor$, которые действуют $\Lmod{R}^{\op} \times \Lmod{R} \map \Lmod{R}$.
        Если $R$ --- поле, и пространства --- конечномерны, то это естественный изоморфизм, назовём его $\eta$.

        Тогда если \[{\cat H: \cat{Vect}_F \map \cat{Vect}_F, W \mapsto \Mor(X, W)}\] то мы получаем новый естественный изоморфизм $\cat{H}\eta: \Mor(X, Y^* \otimes Z) \cong \Mor(X, \Mor(Y, Z))$.

        Совмещая с уже ранее полученным изоморфизмом $\Mor(X \otimes Y, Z) \cong \Mor(X, Y^* \otimes Z)$, получаем ещё один изоморфизм $\Mor(X \otimes Y, Z) \cong \Mor(X, \Mor(Y, Z))$, как композицию.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXE1vcihYIFxcb3RpbWVzIFksIFopIl0sWzIsMCwiXFxNb3IoWCwgWV4qIFxcb3RpbWVzIFopIl0sWzEsMSwiXFxNb3IoWCwgXFxNb3IoWSwgWikpIl0sWzEsMiwiXFxjYXQgSFxcZXRhIl0sWzIsMCwiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwyLCJcXHNpbSIsMyx7Im9mZnNldCI6LTMsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor(X \otimes Y, Z)}
              \&\& {\Mor(X, Y^* \otimes Z)} \\
              \& {\Mor(X, \Mor(Y, Z))}
              \arrow["{\cat H\eta}", from=1-3, to=2-2]
              \arrow[Rightarrow, no head, from=2-2, to=1-1]
              \arrow["\sim"{marking, allow upside down}, shift left=3, draw=none, from=1-1, to=2-2]
              \arrow[tail reversed, no head, from=1-1, to=1-3]
        \end{tikzcd}\]

    }
    \examples[Ещё естественные преобразования]{
        \item Естественное преобразование между функторами $\Lmod{R} \map \Lmod{R}$: $R \underset{R}{\otimes} \_ \cong \cat{id}$, или иначе пишут $R \otimes_R M \cong M$ естественно по $M$.

        Элемент $\sum r_i \otimes m_i$ равен $1 \otimes \sum r_i m_i$, и отображается в $\sum r_i m_i$.
        \item $\Mor_{\Lmod{R}}(X, \Mor_{\Lmod{R}}(Y, Z)) \cong \text{Bi}_{\Lmod{R}}(X, Y; Z)\cong \Mor_{\Lmod{R}}(X \otimes_R Y, Z)$.
        \item Естественный изоморфизм в категории конечномерных векторных пространств $\cat{Vect}_F$: $\Mor(X, Y \otimes Z) \cong \Mor(X \otimes Y^*, Z)$.
    }

    \subsection{Эквивалентность категорий}
    Изоморфизм категорий помнит слишком много, мы не хотим следить за кратностью изоморфных объектов.

    \definition[Категории $\cat{B}$ и $\cat{C}$ эквивалентны]{
        Существуют функторы $\cat{F}: \cat{B} \map \cat{C}$ и $\cat{G}: \cat{C} \map \cat{B}$, такие, что $\cat{F}\circ\cat{G} \cong \cat{id}_{\cat{C}}$ и $\cat{G}\circ\cat{F} \cong \cat{id}_{\cat{B}}$, здесь $\cong$ --- естественный изоморфизм.
    }
    Ранее мы фактически доказали, что категории $\cat{Vect}_F$ и $\cat{Vect}_F^{\op}$ эквивалентны (но они не изоморфны).

    \newlection{23 ноября 2023 г.}
    \example{\label{matrices-and-vector-spaces}
    Рассмотрим категорию конечномерных векторных пространств $\cat{Vect}_F$ и категорию матриц $\cat{M}_F$.
    Идеологически правильнее рассматривать $\Obj \cat{M}_F$ не как натуральные числа, а как пространства столбцов.
    Определим \begin{align*}
                  \cat{F}: \cat{M}_F &\map \cat{Vect}_F\\ \N = \Obj\cat{M}_F \ni n & \mapsto F^n \\ \Mor(n, m) \ni A &\mapsto \text{оператор умножения на матрицу $A$}
    \end{align*}

        Далее чтобы доказать эквивалентность категорий, то надо либо уметь пользоваться аксиомой выбора для классов, либо каким-то образом сделать категорию $\cat{Vect}_F$ малой (которая пока не является множеством, но её объекты при фиксированном поле имеют фиксированную мощность, то есть идеологически не очень большие)
        Отображение в обратную сторону устроим так.
        В каждом векторном пространстве $V$ выберем базис $\angles{v_1, \dots, v_n}$, причём в каждом $F^n$ --- выберем стандартный базис, и обратное отображение устроим так:
        \begin{align*}
            \cat{G}: \cat{Vect}_F &\map \cat{M}_F \\ \cat{G}(V) &= \dim V \\ \cat{G}(\alpha) &= \text{матрица $\alpha$ в выбранном базисе}
        \end{align*}
        Композиция $\cat{G} \circ \cat{F}$ тождественна, а композиция $\cat{F} \circ \cat{G}$ не инъективна на объектах, но, тем не менее, естественно изоморфна тождественному.}
    \note{
        Ещё одним способом не пользоваться аксиомой выбора будет рассматривать вместо $\cat{Vect}_F$ категорию базированных векторных пространств --- векторных пространств, в которых заранее выбран базис.
    }
    \proposal{
        Рассмотрим функтор $\cat{F}: \cat{B} \map \cat{C}$. $\cat{F}$ является эквивалентностью категорий $\iff \cat{F}$ --- строгий, полный, \emph{квазиинъективный} (неизоморфные объекты отображаются в неизоморфные), и, наконец, \emph{квазисюръективный} ($\forall C \in \cat{C}: \exists B \in \cat{B}: \cat{F}(B) \cong C$).
    }


    \section{(Ко)эквалайзеры и (ко)пределы}
    Пусть $\phi, \psi: A \map B$
    \definition[Эквалайзер или уравнитель морфизмов $\phi, \psi$]{
        Морфизм $\eps: E \map A$, уравнивающий $\phi$ и $\psi$: $\phi\eps = \psi\eps$, причём такой, что $\forall \eps': E' \map A$ (такого, что $\phi\eps' = \psi\eps'$) $\exists! \alpha: E' \map E$, такая, что диаграмма коммутативна
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMX1dLFsxLDIsIlxccHNpIiwyLHsib2Zmc2V0IjoxfV0sWzAsMSwiXFxlcHMiXSxbMywxLCJcXGVwcyciLDJdLFszLDAsIlxcYWxwaGEiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, from=1-2, to=1-3]
              \arrow["\psi"', shift right, from=1-2, to=1-3]
              \arrow["\eps", from=1-1, to=1-2]
              \arrow["{\eps'}"', from=2-1, to=1-2]
              \arrow["\alpha", dashed, from=2-1, to=1-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ эквалайзер $\phi, \psi: A \map B$ --- это вложение $E \hookrightarrow A$, где $E = \defset{a \in A}{\phi(a) = \psi(a)}$.

    В категории $\cat{D}$, такой, что $\Obj\cat{D} = \defset{(E, \eps)}{\phi\eps = \psi\eps}$, и $\Mor_{\cat{D}}((E', \eps'), (E, \eps)) = \defset{\alpha: E' \map E}{ \eps' = \eps\alpha}$ эквалайзер --- финальный объект в $\cat{D}(\phi, \psi)$.
    Это сразу показывает, что если уж эквалайзер сущестует, то он единственнен.

    Для определения коэквалайзера надо развернуть все стрелки:

    Пусть $\phi,\psi: B \map A$.
    \definition[Коэквалайзер]{
        Морфизм $\eps: A \map E$, уравнивающий $\phi$ и $\psi$: $\eps\phi = \eps\psi$, причём такой, что $\forall \eps': A \map E'$ (такого, что $\eps'\phi = \eps'\psi$) $\exists! \alpha: E \map E'$, такая, что диаграмма коммутативна
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyLCJcXHBzaSIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwzLCJcXGFscGhhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsMCwiXFxlcHMiLDJdLFsxLDMsIlxcZXBzJyJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\psi"', shift right, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\alpha"', dashed, from=1-1, to=2-1]
              \arrow["\eps"', from=1-2, to=1-1]
              \arrow["{\eps'}", from=1-2, to=2-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ коэквалайзер $\phi, \psi: B \map A$ --- это факторизация $\eps: A \map A/_\sim$, где $\sim$ --- отношение эквивалентности, порождённое $\phi(b) \sim \psi(b)$.

    В $\cat{Group}$ коэквалайзер $\phi, \psi: G \map H$ --- это факторизация по нормальному замыканию $\{\phi(g)\psi(g^{-1})\}$.

    \proposal{
        Эквалайзеры --- мономорфизмы, коэквалайзеры --- эпиморфизмы.
        \provehere{
            Докажем, что эквалайзер --- мономорфизм, второе утверждение следует из двойственности.

            Рассмотрим $\eps$ --- эквалайзер $\phi$ и $\psi$, и пусть $\alpha, \beta: X \map E$ --- два отображения, таких, что $\eps\alpha = \eps\beta = \theta$.
            Чтобы проверить, что $\eps$ --- моно, по определению достаточно проверить, что тогда $\alpha = \beta$.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJYIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDAsIlxcYWxwaGEiLDAseyJvZmZzZXQiOi0xfV0sWzMsMSwiXFx0aGV0YSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDAsIlxcYmV0YSIsMix7Im9mZnNldCI6MX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  E \& A \& B \\
                  X
                  \arrow["\phi", shift left, from=1-2, to=1-3]
                  \arrow["\psi"', shift right, from=1-2, to=1-3]
                  \arrow["\eps", from=1-1, to=1-2]
                  \arrow["\alpha", shift left, from=2-1, to=1-1]
                  \arrow["\theta"', dashed, from=2-1, to=1-2]
                  \arrow["\beta"', shift right, from=2-1, to=1-1]
            \end{tikzcd}\]
            Заметим, что $\phi\theta = \phi\eps\alpha = \psi\eps\alpha = \psi\theta$, то есть $\theta$ --- тоже уравнивает стрелки $\phi$ и $\psi$.

            Но по определению эквалайзера $\eps$ \textbf{уни}версален: существует и единственная стрелка $X \map E$ (оставляющая диаграмму коммутативной), значит, $\alpha = \beta$, то есть $\eps$ --- мономорфизм.
        }
    }
    \proposal{
        Эквалайзер, являющийся эпиморфизмом --- изоморфизм.
        \provehere{
            Пусть $\eps$ --- эквалайзер.
            Так как $\phi\eps = \psi\eps$, и $\eps$ --- эпиморфизм, то $\phi = \psi$. Но тогда $\id: A \map A$ --- тоже эквалайзер, и два эквалайзера отличаются на изоморфизм:
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJBIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDEsIlxcaWQiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywwLCJcXGVwcyIsMCx7Im9mZnNldCI6LTEsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMywiXFxleGlzdHMhIiwwLHsib2Zmc2V0IjotMSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  E \& A \& B \\
                  A
                  \arrow["\phi", shift left, from=1-2, to=1-3]
                  \arrow["\psi"', shift right, from=1-2, to=1-3]
                  \arrow["\eps", from=1-1, to=1-2]
                  \arrow["\id"', dashed, from=2-1, to=1-2]
                  \arrow["\eps", shift left, tail reversed, no head, from=2-1, to=1-1]
                  \arrow["{\exists!}", shift left, dotted, tail reversed, no head, from=1-1, to=2-1]
            \end{tikzcd}\]
        }
    }


    \section{Произведения и копроизведения}
    Зафиксируем $B, C \in \cat{C}$.
    \definition[Произведение $B$ и $C$]{
        Финальный объект в категории диаграмм $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                                   A \& B \\
                                                   C
                                                   \arrow[from=1-1, to=2-1]
                                                   \arrow[from=1-1, to=1-2]
        \end{tikzcd}$.
        Морфизмы в данной категории --- это стрелка $\phi$:
        % https://q.uiver.app/#q=WzAsNCxbMSwxLCJBIl0sWzIsMSwiQiJdLFsxLDIsIkMiXSxbMCwwLCJBJyJdLFswLDIsIlxcZ2FtbWEiXSxbMCwxLCJcXGJldGEiLDJdLFszLDAsIlxccGhpIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fV0sWzMsMSwiXFxiZXRhJyIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDIsIlxcZ2FtbWEnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {A'}
              \\
              \& A \& B \\
              \& C
              \arrow["\gamma", from=2-2, to=3-2]
              \arrow["\beta"', from=2-2, to=2-3]
              \arrow["\phi"{description}, dotted, from=1-1, to=2-2]
              \arrow["{\beta'}", dashed, from=1-1, to=2-3]
              \arrow["{\gamma'}"', dashed, from=1-1, to=3-2]
        \end{tikzcd}\]
        Произведение обозначается $B \times C$.
    }
    Иными словами, произведение $B \times C$ --- это объект $A$ \textbf{и} морфизмы $\beta: A \map B, \gamma: A \map C$, такие, что $\forall A' \in \Obj \cat{C}, \beta': A' \map B, \gamma': A' \map C$ $\exists! \phi: A' \map A: \beta\phi = \beta'$ и $\gamma\phi = \gamma'$.
    Часто допускают вольность речи, и говорят о произведении, как об объекте.

    Это такой объект, что $\forall A \in \cat C$: функторы $\cat{F}(A) \coloneqq \Mor(A, B) \times \Mor(A, C)$ и $\Mor(\_, B \times C)$ естественно изоморфны.

    Практически всегда в конкретных категориях произведение --- декартово произведение вместе с отображениями --- проекциями.

    Копроизведение --- двойственный объект к произведению, копроизведение обозначается $A \sqcup B$.
    \examples[Копроизведение]{
        \item В $\cat{Set}$ копроизведение непересекающихся множеств --- это действительно дизъюнктное объединение.
        \item В $\cat{Group}$ копроизведение --- это свободное произведение групп.
        \item В $\cat{CRing}$ копроизведение --- это тензорное произведение над $\Z$.
        Умножение на разложимых тензорах задано в виде $(b \otimes c)(b' \otimes c') = bb' \otimes cc'$.
    }
    \newlection{28 ноября 2023 г.}


    \section{Универсальные и коуниверсальные квадраты}
    Зафиксируем морфизмы $\beta: B \map D$ и $\gamma: C \map D$, и рассмотрим коммутативные квадраты в категории $\cat{C}$.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzAsMl0sWzAsMV0sWzEsMywiXFxiZXRhIl0sWzIsMywiXFxnYW1tYSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& B \\
          C \& D
          \arrow[from=1-1, to=2-1]
          \arrow[from=1-1, to=1-2]
          \arrow["\beta", from=1-2, to=2-2]
          \arrow["\gamma", from=2-1, to=2-2]
    \end{tikzcd}\]
    \definition[Pullback (пулбэк)]{
        Коммутативный квадрат выше, такой, что $\forall \begin{tikzcd}[ampersand replacement=\&]
                                                            A' \& B \\C \& D\arrow[from=1-1, to=2-1]\arrow[from=1-1, to=1-2]\arrow["\beta", from=1-2, to=2-2]\arrow["\gamma", from=2-1, to=2-2]
        \end{tikzcd}$: $\exists! A' \map A$, делающий диаграмму коммутативной:
        % https://q.uiver.app/#q=WzAsNSxbMSwxLCJBIl0sWzIsMSwiQiJdLFsxLDIsIkMiXSxbMiwyLCJEIl0sWzAsMCwiQSciXSxbMCwyXSxbMCwxXSxbMSwzLCJcXGJldGEiXSxbMiwzLCJcXGdhbW1hIl0sWzQsMiwiXFxmb3JhbGwiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNCwxLCJcXGZvcmFsbCIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs0LDAsIlxcZXhpc3RzISIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {A'}
              \\
              \& A \& B \\
              \& C \& D
              \arrow[from=2-2, to=3-2]
              \arrow[from=2-2, to=2-3]
              \arrow["\beta", from=2-3, to=3-3]
              \arrow["\gamma", from=3-2, to=3-3]
              \arrow["\forall"', dashed, from=1-1, to=3-2]
              \arrow["\forall", dashed, from=1-1, to=2-3]
              \arrow["{\exists!}"{description}, dotted, from=1-1, to=2-2]
        \end{tikzcd}\]
    }
    Иными словами, это финальный объект в категории квадратов с фиксированными стрелками $\beta: B \map D, \gamma: C \map D$.
    Неформально (при зажёванных морфизмах) пишут $A = B \times_D C$.

    Объект $A$ (вместе со стрелками $A \map B, A \map C$) --- \emph{pullback} диаграммы $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                                                                             C \& D \& B\arrow["\gamma", from=1-1, to=1-2]\arrow["\beta"', from=1-3, to=1-2]
    \end{tikzcd}$.

    \proposal{
        Пусть в категории $\cat{C}$ существуют все произведения и эквалайзеры (или как минимум те, о которых речь ниже).

        Тогда $A$ --- pullback $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                    C \& D \& B\arrow["\gamma", from=1-1, to=1-2]\arrow["\beta"', from=1-3, to=1-2]
        \end{tikzcd}$ $\iff A$ --- эквалайзер пунктирных отображений.
    % https://q.uiver.app/#q=WzAsNixbMCwxLCJCXFx0aW1lcyBDIl0sWzEsMCwiQiJdLFsyLDEsIkQiXSxbMCwyLCJCIFxcdGltZXMgQyJdLFsyLDIsIkQiXSxbMSwzLCJDIl0sWzAsMSwiXFxwaV9CIl0sWzEsMiwiXFxiZXRhIl0sWzAsMiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNSwiXFxwaV9DIiwyXSxbNSw0LCJcXGdhbW1hIiwyXSxbMyw0LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
              \& B \\
              {B\times C} \&\& D \\
              {B \times C} \&\& D \\
              \& C
              \arrow["{\pi_B}", from=2-1, to=1-2]
              \arrow["\beta", from=1-2, to=2-3]
              \arrow[dashed, from=2-1, to=2-3]
              \arrow["{\pi_C}"', from=3-1, to=4-2]
              \arrow["\gamma"', from=4-2, to=3-3]
              \arrow[dashed, from=3-1, to=3-3]
        \end{tikzcd}\]
        \provehere{
            Pullback --- финальный объект в некоторой категории, поэтому единственность доказывать не надо.
            Рассмотрим квадрат $\begin{tikzcd}[ampersand replacement=\&]
                                    A' \& B \\C \& D\arrow[from=1-1, to=2-1]\arrow[from=1-1, to=1-2]\arrow["\beta", from=1-2, to=2-2]\arrow["\gamma", from=2-1, to=2-2]
            \end{tikzcd}$.
            По универсальному свойству произведения % https://q.uiver.app/#q=WzAsNCxbMiwxLCJCIFxcdGltZXMgQyJdLFszLDAsIkIiXSxbMywyLCJDIl0sWzAsMSwiQSciXSxbMCwxLCJcXHBpX0IiLDJdLFswLDIsIlxccGlfQyJdLFszLDFdLFszLDJdLFszLDAsIlxcZXhpc3RzIVxccGhpIiwxLHsibGFiZWxfcG9zaXRpb24iOjcwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \&\&\& B \\
                  {A'} \&\& {B \times C} \\
                  \&\&\& C
                  \arrow["{\pi_B}"', from=2-3, to=1-4]
                  \arrow["{\pi_C}", from=2-3, to=3-4]
                  \arrow[from=2-1, to=1-4]
                  \arrow[from=2-1, to=3-4]
                  \arrow["{\exists!\phi}"{description, pos=0.7}, dashed, from=2-1, to=2-3]
            \end{tikzcd}\]
            Таким образом, имеется две композиции и уравнивающая стрелка:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJBJyJdLFsxLDAsIkIgXFx0aW1lcyBDIl0sWzIsMCwiRCJdLFsxLDIsIlxcYmV0YVxccGlfQiIsMCx7Im9mZnNldCI6LTF9XSxbMSwyLCJcXGdhbW1hIFxccGlfQyIsMix7Im9mZnNldCI6MX1dLFswLDEsIlxccGhpIl1d
            \[\begin{tikzcd}[ampersand replacement=\&]
            {A'}
                  \& {B \times C} \& D
                  \arrow["{\beta\pi_B}", shift left, from=1-2, to=1-3]
                  \arrow["{\gamma \pi_C}"', shift right, from=1-2, to=1-3]
                  \arrow["\phi", from=1-1, to=1-2]
            \end{tikzcd}\]
            Нетрудно видеть, что действительно $\beta \pi_B \phi = \gamma \pi_C \phi$. Но тогда уравнивающий морфизм $\phi$ пропускается через эквалайзер.
        }
    }

    \examples{
        \item Практически во всех конкретных категориях $B \times C$ --- просто декартово произведение.

        Например, рассмотрим $\cat{Set}$.
        Тогда pullback --- это эквалайзер двух отображений \begin{align*}
                                                               B \times C &\map D \\ (b, c)& \mapsto \beta(b) \\ (b, c) & \mapsto \gamma(c)
        \end{align*}
        Таким образом, pullback $\beta$ и $\gamma$ --- это стрелки % https://q.uiver.app/#q=WzAsNCxbMCwxLCJcXGRlZnNldHsoYiwgYyl9e1xcYmV0YShiKSA9IFxcZ2FtbWEoYyl9Il0sWzEsMSwiQiBcXHRpbWVzIEMiXSxbMiwwLCJCIl0sWzIsMiwiQyJdLFswLDEsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMiwiXFxwaV9CIiwyXSxbMSwzLCJcXHBpX0MiXV0=
        $\begin{tikzcd}[ampersand replacement=\&,cramped,row sep=tiny,baseline=-3]
             \&\& B \\
             {\defset{(b, c)}{\beta(b) = \gamma(c)}} \& {B \times C} \\
             \&\& C
             \arrow[hook, from=2-1, to=2-2]
             \arrow["{\pi_B}"', from=2-2, to=1-3]
             \arrow["{\pi_C}", from=2-2, to=3-3]
        \end{tikzcd}$
        \item В $\cat{Ring}$ можно взять \emph{удвоение кольца $R$ вдоль идеала $I$}.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJSIFxcbHRpbWVzIEkiXSxbMSwwLCJSIl0sWzAsMSwiUiJdLFsxLDEsIlIvSSJdLFswLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDMsIlxccGkiXSxbMCwxLCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXHBpIiwyXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {R \ltimes I}
              \& R \\
              R \& {R/I}
              \arrow[dashed, from=1-1, to=2-1]
              \arrow["\pi", from=2-1, to=2-2]
              \arrow[dashed, from=1-1, to=1-2]
              \arrow["\pi"', from=1-2, to=2-2]
        \end{tikzcd}\]
        $R \ltimes I = \defset{(a, b)}{a, b \in R, a \equiv b \pmod{I}} = \defset{(a, a + i)}{a \in R, i \in I}$.
        Таким образом, по универсальному свойству pullback'а, для сечения $R \map R \ltimes I$ существуют две ретракции
    % https://q.uiver.app/#q=WzAsNSxbMSwxLCJSIFxcbHRpbWVzIEkiXSxbMiwxLCJSIl0sWzEsMiwiUiJdLFsyLDIsIlIvSSJdLFswLDAsIlIiXSxbMCwyXSxbMiwzLCJcXHBpIl0sWzAsMV0sWzEsMywiXFxwaSIsMl0sWzQsMCwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzQsMSwiXFxpZCJdLFs0LDIsIlxcaWQiLDJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              R \\
              \& {R \ltimes I} \& R \\
              \& R \& {R/I}
              \arrow[from=2-2, to=3-2]
              \arrow["\pi", from=3-2, to=3-3]
              \arrow[from=2-2, to=2-3]
              \arrow["\pi"', from=2-3, to=3-3]
              \arrow[dashed, from=1-1, to=2-2]
              \arrow["\id", from=1-1, to=2-3]
              \arrow["\id"', from=1-1, to=3-2]
        \end{tikzcd}\]
        Теперь, у нас имеется композиция в категории $\cat{CRing}$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiUiBcXGx0aW1lcyBJIl0sWzIsMCwiUiJdLFswLDFdLFsxLDJdLFswLDIsIlxcaWQiLDAseyJjdXJ2ZSI6LTJ9XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              R \& {R \ltimes I} \& R
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow["\id", curve={height=-12pt}, from=1-1, to=1-3]
        \end{tikzcd}\]
        Применяя какой-нибудь функтор $\cat{F}: \cat{Ring} \map \cat{Group}$ (например, $GL_n$), получим
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGNhdHtGfShSKSJdLFsxLDAsIlxcY2F0e0Z9KFIgXFxsdGltZXMgSSkiXSxbMiwwLCJcXGNhdHtGfShSKSJdLFswLDEsIlxcYWxwaGEiLDJdLFsxLDIsIlxcYmV0YSIsMl0sWzAsMiwiXFxpZCIsMCx7ImN1cnZlIjotMn1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\cat{F}(R)}
              \& {\cat{F}(R \ltimes I)} \& {\cat{F}(R)}
              \arrow["\alpha"', from=1-1, to=1-2]
              \arrow["\beta"', from=1-2, to=1-3]
              \arrow["\id", curve={height=-12pt}, from=1-1, to=1-3]
        \end{tikzcd}\]
        Средняя группа --- полупрямое произведение ядра $\beta$ и образа $\alpha$.

        В таком стиле определяются некоторые базовые объекты K-теории.
        \item Точно так же можно удваивать группу вдоль нормальной подгруппы, результат будет изоморфен полупрямому произведению.
        \exercise{Проверить самостоятельно.} % exercise
        \item Пусть в $\cat{C}$ имеется инициальный объект $*$.
        Тогда (например, в $\cat{Rng}$, $\cat{Group}$, $\modR{R}$) ядро можно определить, как pullback:
    % https://q.uiver.app/#q=WzAsNCxbMCwxLCIqIl0sWzEsMSwiRCJdLFsxLDAsIkIiXSxbMCwwLCJcXEtlcihcXHBoaSkiXSxbMiwxLCJcXHBoaSJdLFswLDFdLFszLDAsIiIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Ker(\phi)}
              \& B \\
              {*} \& D
              \arrow["\phi", from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
              \arrow[dashed, from=1-1, to=2-1]
              \arrow[dashed, from=1-1, to=1-2]
        \end{tikzcd}\]
        Но в $\cat{CRing}$ пулбэк этой диаграммы --- что-то странное.

        Поэтому можно считать $*$ не инициальным, а нулевым объектом --- если нулевой объект существует, то так определённое ядро будет совпадать со стандартным представлением о нём (почему?).
    }
    \definition[Pushout (пушаут)]{
        Двойственный объект к pullback'у.
        Инициальный объект в категории коммутативных квадратов с фиксированными морфизмами $\beta, \gamma$:
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzAsMiwiXFxnYW1tYSJdLFswLDEsIlxcYmV0YSIsMl0sWzEsM10sWzIsM11d
        \[\begin{tikzcd}[ampersand replacement=\&]
              D \& B \\
              C \& A
              \arrow["\gamma", from=1-1, to=2-1]
              \arrow["\beta"', from=1-1, to=1-2]
              \arrow[from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
    }
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzIsMiwiQSciXSxbMCwyLCJcXGdhbW1hIl0sWzAsMSwiXFxiZXRhIiwyXSxbMSwzXSxbMiwzXSxbMyw0LCJcXGV4aXN0cyEiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbMSw0LCJcXGZvcmFsbCIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDQsIlxcZm9yYWxsIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          D \& B \\
          C \& A \\
          \&\& {A'}
          \arrow["\gamma", from=1-1, to=2-1]
          \arrow["\beta"', from=1-1, to=1-2]
          \arrow[from=1-2, to=2-2]
          \arrow[from=2-1, to=2-2]
          \arrow["{\exists!}"{description}, dotted, from=2-2, to=3-3]
          \arrow["\forall", dashed, from=1-2, to=3-3]
          \arrow["\forall"', dashed, from=2-1, to=3-3]
    \end{tikzcd}\]
    Если $D$ --- инициальный объект, то пушаут --- просто копроизведение (и если $D$ --- финальный, то pullback --- произведение).

    Сформулируем двойственное к доказанному утверждению про пулбэки.
    \proposal{
        Пусть в категории $\cat{C}$ существуют все копроизведения и коэквалайзеры (или как минимум те, о которых речь ниже).

        Тогда $A$ --- pushout $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                   B \& D \& C\arrow["\beta", from=1-1, to=1-2]\arrow["\gamma"', from=1-3, to=1-2]
        \end{tikzcd}$ $\iff A$ --- коэквалайзер отображений
    % https://q.uiver.app/#q=WzAsNixbMCwxLCJEIl0sWzEsMCwiQiJdLFsyLDEsIkJcXHNxY3VwIEMiXSxbMCwyLCJEIl0sWzIsMiwiQlxcc3FjdXAgQyJdLFsxLDMsIkMiXSxbMCwxLCJcXGJldGEiXSxbMSwyLCJcXHBpX0IiXSxbMCwyLCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMyw1LCJcXGdhbW1hIiwyXSxbNSw0LCJcXHBpX0MiLDJdLFszLDQsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
              \& B \\
              D \&\& {B\sqcup C} \\
              D \&\& {B\sqcup C} \\
              \& C
              \arrow["\beta", from=2-1, to=1-2]
              \arrow["{\pi_B}", from=1-2, to=2-3]
              \arrow[dashed, from=2-1, to=2-3]
              \arrow["\gamma"', from=3-1, to=4-2]
              \arrow["{\pi_C}"', from=4-2, to=3-3]
              \arrow[dashed, from=3-1, to=3-3]
        \end{tikzcd}\]
    }
    Пушауты неформально обозначают $B \sqcup_D C$.

    \examples{
        \item
        Пусть имеется коммутативный квадрат в $\cat{CRing}$:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzAsMiwiXFxnYW1tYSJdLFswLDEsIlxcYmV0YSIsMl0sWzIsMywiXFxnYW1tYSciLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXGJldGEnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              D \& B \\
              C \& A
              \arrow["\gamma", from=1-1, to=2-1]
              \arrow["\beta"', from=1-1, to=1-2]
              \arrow["{\gamma'}", dashed, from=2-1, to=2-2]
              \arrow["{\beta'}"', dashed, from=1-2, to=2-2]
        \end{tikzcd}\]
        Тогда $A, B, C$ --- $D$-алгебры. Отображение $B \times C \map A, (b, c) \mapsto \beta'(b) \cdot \gamma'(c)$ --- $D$-билинейно, как отображение модулей.

        Тогда по универсальному свойству тензорного произведения $B \times C \map A$ пропускается через тензорное произведение $B \otimes_D C$ со вложениями $b \mapsto b \otimes 1_C, c \mapsto 1_B \otimes c$, и с умножением, определённым покомпонентно: $(b\otimes c) \cdot(b' \otimes c') = bb' \otimes cc'$.

        Но если единицы нет, то пушаут построить не получится.
        Наоборот, в $\cat{CRing}$ не существует пулбэков.

        \item В $\cat{Group}$ pushout --- \emph{амальгамированное свободное произведение} (такой термин употребляют, если $A \hookrightarrow B, C$, то есть $\beta, \gamma$ --- моно).
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCIoQiAqIEMpL19OIl0sWzAsMSwiXFxiZXRhIl0sWzEsM10sWzAsMiwiXFxnYW1tYSIsMl0sWzIsM11d
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& {(B * C)/_N}
              \arrow["\beta", from=1-1, to=1-2]
              \arrow[from=1-2, to=2-2]
              \arrow["\gamma"', from=1-1, to=2-1]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        где $N$ --- наименьшая нормальная подгруппа, содержащая $\defset{\beta(a)\gamma(a)^{-1}}{a \in A}$.

        Обозначается $B \underset{A}* C$.

        По-другому, данная конструкция называется HNN (?).
        \item В категории модулей или абелевых групп всё проще, там вместо свободного произведения обычное декартово (а именно, прямая сумма --- разница появляется, если объектов бесконечное число, пусть мы и не определяли счётные пушауты).
    }
    \exercise{
        Дан pushout в произвольной категории:% https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkIiXSxbMSwxLCJDIl0sWzAsMiwiXFx0aGV0YSJdLFswLDEsIlxcdGhldGEiLDJdLFsxLDMsIlxccGhpIiwyXSxbMiwzLCJcXHBzaSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              B \& C
              \arrow["\theta", from=1-1, to=2-1]
              \arrow["\theta"', from=1-1, to=1-2]
              \arrow["\phi"', from=1-2, to=2-2]
              \arrow["\psi", from=2-1, to=2-2]
        \end{tikzcd}\]
        Следующие условия эквивалентны
        \bullets{
            \item $\theta$ --- эпи.
            \item $\phi$ --- изо.
            \item $\psi$ --- изо.
            \item $\phi = \psi$.
        }
    }


    \section{Сопряжённые функторы}
    \label{comma-category}
    Рассмотрим следующую конструкцию:
    пусть имеется функтор $\cat{F}: \cat{B} \map \cat{C}$, пусть $X \in \cat{C}$.
    Построим категорию $(X \downarrow \cat{F})$.

    Её объекты --- это $\defset{(B, \phi) \in \catB \times \Mor\cat C}{\phi: X \map \cat F(\cat B)}$.

    Морфизмы определены так: $(B, \phi) \map (B', \phi')$ --- это $\defset{\alpha \in \Mor_{\cat{B}}(B, B')}{% https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXR7Rn0oQikiXSxbMSwxLCJcXGNhdHtGfShCJykiXSxbMSwyLCJcXGNhdHtGfShcXGFscGhhKSJdLFswLDEsIlxccGhpIl0sWzAsMiwiXFxwaGknIl1d
        \begin{tikzcd}[ampersand replacement=\&]
            X \\
            {\cat{F}(B)} \& {\cat{F}(B')}
            \arrow["{\cat{F}(\alpha)}", from=2-1, to=2-2]
            \arrow["\phi", from=1-1, to=2-1]
            \arrow["{\phi'}", from=1-1, to=2-2]
        \end{tikzcd}}$.

    По-английски эта категория почему-то называется comma category, категория запятой.

    Аналогично $(\cat F \downarrow X)$ --- это категория стрелок $\cat F(B) \map X$ с такими морфизмами $\alpha \in \Mor_{\catB}(B, B')$:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGNhdCBGKEIpIl0sWzEsMCwiXFxjYXQgRihCJykiXSxbMSwxLCJYIl0sWzAsMiwiXFxwaGkiLDJdLFsxLDIsIlxccGhpJyJdLFswLDEsIlxcY2F0IEYoXFxhbHBoYSkiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\cat F(B)}
          \& {\cat F(B')} \\
          \& X
          \arrow["\phi"', from=1-1, to=2-2]
          \arrow["{\phi'}", from=1-2, to=2-2]
          \arrow["{\cat F(\alpha)}", from=1-1, to=1-2]
    \end{tikzcd}\]
    Заинтересуемся инициальными объектами в категории $(X \downarrow \cat{F})$.
    \examples{
        \item Пусть $\cat{F}: \cat{Group} \map \cat{Set}$ --- забывающий функтор, и зафиксируем $X \in \cat{Set}$.

        Тогда инициальный объект -- это свободная группа $F_X$ вместе с вложением множеств $X \hookrightarrow \cat{F}(F_X)$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXR7Rn0oRl9YKSJdLFsxLDEsIlxcY2F0e0Z9KEcpIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyXSxbMSwyXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat{F}(F_X)} \& {\cat{F}(G)}
              \arrow[hook, from=1-1, to=2-1]
              \arrow[from=1-1, to=2-2]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        В самом деле, для любого гомоморфизма множеств $X \map \cat F(G)$ должен найтись единственный гомоморфизм групп $F_X \map \cat G$, такой, что диаграмма коммутирует, то есть гомоморфизм определяется заданием на элементах $X$, и никаких соотношений нет.
        \item    Возьмём функтор вложения $\cat{F}: \cat{Ab} \map \cat{Group}$.
        Пусть $G \in \cat{Group}$. Тогда инициальный объект в $(G \downarrow \cat{F})$ --- это такой объект, что из него есть единственный морфизм в другую абелеву группу:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJHIl0sWzAsMSwiR157XFxhYn0iXSxbMSwxLCJBIl0sWzAsMl0sWzAsMV0sWzEsMiwiXFxleGlzdHMhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \\
              {G^{\ab}} \& A
              \arrow[from=1-1, to=2-2]
              \arrow[from=1-1, to=2-1]
              \arrow["{\exists!}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
        Универсальный функтор $\cat{Group} \map \cat{Ab}$ --- это абелианизация.
    }
    Пусть $\cat{B}, \cat{C}$ --- категории.
    Рассмотрим два функтора % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGNhdHtCfSJdLFsxLDAsIlxcY2F0e0N9Il0sWzAsMSwiXFxjYXR7Rn0iLDAseyJvZmZzZXQiOi0xfV0sWzEsMCwiXFxjYXR7R30iLDAseyJvZmZzZXQiOi0xfV1d
    $\begin{tikzcd}[ampersand replacement=\&]
    {\cat{B}}
         \& {\cat{C}}
         \arrow["{\cat{F}}", shift left, from=1-1, to=1-2]
         \arrow["{\cat{G}}", shift left, from=1-2, to=1-1]
    \end{tikzcd}$.
    \definition[$\cat F$ правый сопряжённый к $\cat G$, $\cat G$ --- левый сопряжённый к $\cat F$]{
        $\forall B \in \cat{B}, C \in \cat{C}$: существует биекция между множествами морфизмов $\Mor_{\cat{C}}(C, \cat{F}(B))$ и $\Mor_{\cat{B}}(\cat{G}(C), B)$, причём биекция --- естественна и по $B$, и по $C$.
        То есть имеется естественная биекция между функторами $\cat{C}^{\text{op}} \times \cat{B} \map \cat{Set}$.

        Чтобы понять, какой функтор левый сопряжённый, а какой --- правый, надо посмотреть на то, где они стоят внутри $\Mor$. Иногда пишут $\cat G \dashv \cat F$
    }
    Далее мы проверим, что инициальные объекты в категории $X \downarrow \cat{F}$ имеют самое непосредственное отношение к сопряжённым функторам.
    \newlection{30 ноября 2023 г.}
%    Пусть функторы $\cat F$ и $\cat G$ сопряжены, то есть имеется естественная биекция $\eta: \Mor_{\catB}(\cat G (X), Y) \cong \Mor_\catC(X, \cat F(Y))$.
%    Наверно, это записывается так:% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGNhdCBCIl0sWzIsMCwiXFxjYXQgQyJdLFswLDEsIlxcY2F0IEYiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwxLCJcXGNhdCBHIiwyLHsiY3VydmUiOjIsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsMywiXFxldGEiLDAseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dXQ==
%    \[\begin{tikzcd}[ampersand replacement=\&]
%    {\cat B} \&\& {\cat C}
%    \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat F}", curve={height=-12pt}, from=1-1, to=1-3]
%    \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G}"', curve={height=12pt}, tail reversed, no head, from=1-1, to=1-3]
%    \arrow["\eta", "\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=1]
%    \end{tikzcd}\]

    \subsection{Связь сопряжённых функторов и категории запятой}
    Пусть $\cat F: \cat B \map \cat C$ --- какой-то функтор.

    Рассмотрим $X \in \cat C$, и вместе с ним категорию $(X \downarrow \cat F)$~(\cref{comma-category}).

    Пусть для всех $X \in \cat C$ в соответствующих категориях нашлось по инициальному объекту, обозначим их соответственно $(\cat G(X), f_X)$.
    Далее мы хотим показать, что $\cat{G}: \cat C \map \cat B$ --- функтор.
    Для этого сперва определим его на морфизмах следующим образом:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzEsMCwiWCciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMCwyLCJmX1giXSxbMSwzLCJmX3tYJ30iXSxbMCwxLCJcXGJldGEiXSxbMiwzLCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& {X'} \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))}
          \arrow["{f_X}", from=1-1, to=2-1]
          \arrow["{f_{X'}}", from=1-2, to=2-2]
          \arrow["\beta", from=1-1, to=1-2]
          \arrow["{\cat F(\cat G(\beta))}", dashed, from=2-1, to=2-2]
    \end{tikzcd}\]
    А именно, $(\cat G(X'), f_{X'}\beta) \in (X \downarrow \cat F)$, и из инициальности $(\cat G(X), f_X)$ найдётся единственный морфизм $(\cat G(X), f_X) \map (\cat G(X'), f_{X'}\beta)$, то есть найдётся единственная стрелка $\cat G(X) \map \cat G(X')$, и мы эту стрелку назовём $\cat G(\beta)$.

    Далее надо проверить, что функтор сохраняет композицию.
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJYIl0sWzEsMCwiWCciXSxbMiwwLCJYJyciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMiwxLCJcXGNhdCBGKFxcY2F0IEcoWCcnKSkiXSxbMCwzLCJmX1giXSxbMSw0LCJmX3tYJ30iXSxbMiw1LCJmX3tYJyd9Il0sWzAsMSwiXFxiZXRhIl0sWzEsMiwiXFxnYW1tYSJdLFswLDIsIlxcZ2FtbWFcXGJldGEiLDAseyJjdXJ2ZSI6LTR9XSxbMyw0LCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiLDJdLFs0LDUsIlxcY2F0IEYoXFxjYXQgRyhcXGdhbW1hKSkiLDJdLFszLDUsIlxcY2F0IEYoXFxjYXQgRyhcXGdhbW1hXFxiZXRhKSkiLDIseyJjdXJ2ZSI6NH1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& {X'} \& {X''} \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))} \& {\cat F(\cat G(X''))}
          \arrow["{f_X}", from=1-1, to=2-1]
          \arrow["{f_{X'}}", from=1-2, to=2-2]
          \arrow["{f_{X''}}", from=1-3, to=2-3]
          \arrow["\beta", from=1-1, to=1-2]
          \arrow["\gamma", from=1-2, to=1-3]
          \arrow["\gamma\beta", curve={height=-24pt}, from=1-1, to=1-3]
          \arrow["{\cat F(\cat G(\beta))}"', from=2-1, to=2-2]
          \arrow["{\cat F(\cat G(\gamma))}"', from=2-2, to=2-3]
          \arrow["{\cat F(\cat G(\gamma\beta))}"', curve={height=24pt}, from=2-1, to=2-3]
    \end{tikzcd}\]
    По определению $\cat G(\gamma\beta)$ --- это та единственная стрелка $(\cat G(X), f_X) \map (\cat G(X''), f_{X''}\gamma\beta)$, которая делает диаграмму коммутативной, и можно заметить, что в качестве этой стрелки подходит $\cat G(\gamma)\cat G(\beta)$ (в проверке используется то, что $\cat F$ сохраняет композицию).

    Наконец, осталось проверить, что $\cat G$ сохраняет единицу, то есть фактически надо проверить, что диаграмма ниже --- коммутативна.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzAsMSwiXFxjYXQgRihcXGNhdCBHKFgpKSJdLFsxLDAsIlgiXSxbMSwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzAsMiwiXFxpZF9YIl0sWzAsMSwiZl9YIiwyXSxbMiwzLCJmX1giXSxbMSwzLCJcXGNhdCBGKFxcaWRfe1xcY2F0IEcoWCl9KSIsMl1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& X \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X))}
          \arrow["{\id_X}", from=1-1, to=1-2]
          \arrow["{f_X}"', from=1-1, to=2-1]
          \arrow["{f_X}", from=1-2, to=2-2]
          \arrow["{\cat F(\id_{\cat G(X)})}"', from=2-1, to=2-2]
    \end{tikzcd}\]
    Так как $\cat F$ --- сохраняет $\id$, то это действительно правда.
    \theorem{\label{comma-and-conjugate}
    Так построенный функтор $\cat G: \cat C \map \cat B$ --- левый сопряжённый к $\cat F$.
    \provehere{
        Определим биекцию $\eta_{X,Y}: \Mor_\catC(X, \cat F(Y)) \map \Mor_{\catB}(\cat G(X), Y)$ следующим образом: морфизму $f: X \map \cat F(Y)$ сопоставим такой морфизм $\eta_{X,Y}(f)$, что диаграмма коммутативна:
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzAsMCwiWCJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMSwwLCJmX1giLDJdLFsxLDIsImYiXSxbMCwyLCJcXGNhdCBGKFxcZXRhX3tYLFl9KGYpKSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat F(\cat G(X))} \& {\cat F(Y)}
              \arrow["{f_X}"', from=1-1, to=2-1]
              \arrow["f", from=1-1, to=2-2]
              \arrow["{\cat F(\eta_{X,Y}(f))}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
        Очевидно, что тогда в качестве обратного отображения $\eta^{-1}_{X,Y}$ надо выбрать $g \mapsto \cat F(g)f_X$.

        Теперь докажем, что $\eta$ --- \emph{естественное} преобразование между функторами $[X, Y \mapsto \Mor_\catC(X, \cat F(Y))] \map [X, Y \mapsto \Mor_{\catB}(\cat G(X), Y)]$.
        По определению это значит, что $\forall \alpha: X'\map X, \beta: Y \map Y'$ диаграмма ниже коммутативна.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcl9cXGNhdEMoWCwgXFxjYXQgRihZKSkiXSxbMSwwLCJcXE1vcl9cXGNhdEMoWCcsIFxcY2F0IEYoWScpKSJdLFswLDEsIlxcTW9yX1xcY2F0QihcXGNhdCBHKFgpLCBZKSJdLFsxLDEsIlxcTW9yX1xcY2F0QihcXGNhdCBHKFgnKSwgWScpIl0sWzAsMSwiXFxNb3JfXFxjYXRDKFxcYWxwaGEsIFxcY2F0IEYoXFxiZXRhKSkiXSxbMiwzLCJcXE1vcl9cXGNhdEIoXFxjYXQgRyhcXGFscGhhKSwgXFxiZXRhKSJdLFswLDIsIlxcZXRhX3tYLFl9XnstMX0iLDIseyJvZmZzZXQiOjIsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiXFxldGFfe1gnLFknfV57LTF9IiwyLHsib2Zmc2V0IjoyLCJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDIsIlxcZXRhX3tYLFl9IiwwLHsib2Zmc2V0IjotMn1dLFsxLDMsIlxcZXRhX3tYJyxZJ30iLDAseyJvZmZzZXQiOi0yfV1d
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=huge]
        {\Mor_\catC(X, \cat F(Y))}
              \& {\Mor_\catC(X', \cat F(Y'))} \\
              {\Mor_{\catB}(\cat G(X), Y)} \& {\Mor_{\catB}(\cat G(X'), Y')}
              \arrow["{\Mor_\catC(\alpha, \cat F(\beta))}", from=1-1, to=1-2]
              \arrow["{\Mor_{\catB}(\cat G(\alpha), \beta)}", from=2-1, to=2-2]
              \arrow["{\eta_{X,Y}^{-1}}"', shift right=2, tail reversed, no head, from=1-1, to=2-1]
              \arrow["{\eta_{X',Y'}^{-1}}"', shift right=2, tail reversed, no head, from=1-2, to=2-2]
              \arrow["{\eta_{X,Y}}", shift left=2, from=1-1, to=2-1]
              \arrow["{\eta_{X',Y'}}", shift left=2, from=1-2, to=2-2]
        \end{tikzcd}\]
        Это всё морфизмы в $\cat{Set}$, проверим коммутативность на элементах.
        \indent{
            Для этого будет полезно вспомнить/понять, что такое $\Mor_{\catA}(\alpha, \beta)$ (пусть $\alpha, \beta \in \Mor(\cat A)$).
            Так как $\Mor_{\catA}(\_, \_): \cat A^{\op} \times \catA \map \cat{Set}$, то $\Mor_{\catA}(\alpha, \beta)$ --- некое отображение множеств.
            Пусть $\alpha: A' \map A, \beta: B \map B'$. Тогда $\alpha,\beta:(A,B) \map (A',B')$ --- морфизм в $\catA^{\op} \times \catA$.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBLCBCIl0sWzEsMCwiQScsQiciXSxbMCwxLCJcXE1vcihBLEIpIl0sWzEsMSwiXFxNb3IoQScsQicpIl0sWzAsMSwiXFxhbHBoYSwgXFxiZXRhIl0sWzAsMiwiXFxNb3IoXFxfLFxcXykiLDJdLFsxLDMsIlxcTW9yKFxcXyxcXF8pIl0sWzIsMywiPyJdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {A, B}
                  \& {A',B'} \\
                  {\Mor(A,B)} \& {\Mor(A',B')}
                  \arrow["{\alpha, \beta}", from=1-1, to=1-2]
                  \arrow["{\Mor(\_,\_)}"', from=1-1, to=2-1]
                  \arrow["{\Mor(\_,\_)}", from=1-2, to=2-2]
                  \arrow["{?}", from=2-1, to=2-2]
            \end{tikzcd}\]
            Значит, $\Mor(\alpha, \beta)$ как-то сопоставляет отображению $\Mor(A, B)$ отображение $\Mor(A', B')$.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQSciXSxbMCwxLCJCIl0sWzEsMSwiQiciXSxbMSwwLCJcXGFscGhhIiwyXSxbMiwzLCJcXGJldGEiXSxbMCwyXSxbMSwzLCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  A \& {A'} \\
                  B \& {B'}
                  \arrow["\alpha"', from=1-2, to=1-1]
                  \arrow["\beta", from=2-1, to=2-2]
                  \arrow[from=1-1, to=2-1]
                  \arrow[dotted, from=1-2, to=2-2]
            \end{tikzcd}\]
            Изобразив, какие отображения у нас есть, очевидно, что $\Mor(\alpha,\beta) = \beta \cdot \_ \cdot \alpha$.
        }
        Рассмотрим $\psi \in \Mor_{\catB}(\cat G(X), Y)$, она уходит вправо в $\beta \psi\cat G(\alpha)$, далее наверх в $\cat F(\beta \psi\cat G(\alpha))f_{X'}$.

        Если же сначала пойти наверх в $\cat F(\psi)f_X$, то потом эта штука уйдёт вправо в $\cat F(\beta)\cat F(\psi)\alpha f_X$

        Эти две штуки равны в точности по определению действия $\cat G$ на морфизмах.
%    Рассмотрим естественное преобразование $f = \defset{f_X}{X \in \cat C}: \id_\catC \map \cat F \circ \cat G$.
%        То, что это действительно естественное преобразование $\id_\catC \map \cat F \circ \cat G$ следует из диаграммы, уже рисовавшейся выше:
%     https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzEsMCwiWCciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMCwyLCJmX1giXSxbMSwzLCJmX3tYJ30iXSxbMCwxLCJcXGJldGEiXSxbMiwzLCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiXV0=
%        \[\begin{tikzcd}[ampersand replacement=\&]
%              X \& {X'} \\
%              {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))}
%              \arrow["{f_X}", from=1-1, to=2-1]
%              \arrow["{f_{X'}}", from=1-2, to=2-2]
%              \arrow["\beta", from=1-1, to=1-2]
%              \arrow["{\cat F(\cat G(\beta))}", from=2-1, to=2-2]
%        \end{tikzcd}\]
%    Для сопряжённых функторов $\cat F$ и $\cat G$ такое преобразование $\id_\catC \map \cat F \circ \cat G$ называется \emph{единицей сопряжения}.
    }
    }
    Верно и обратное утверждение~(\cref{conjugate-and-comma}), для этого нам потребуется по сопряжённым функторам восстанавливать $f_X \in \Mor_\catC(X, \cat F(\cat G(X)))$.

    Заметим, что $\eta_{X,\cat G(X)}(f_X) = \id_{\cat G(X)}$, то есть имея $\eta: \Mor_\catC(X, \cat F(Y)) \cong \Mor(\cat G(X), Y)$, мы можем восстановить $f_X$, подставив $Y = \cat G(X)$, и рассмотрев прообраз $\id_{\cat G(X)}$ из правой части.
    Данный морфизм $f_X$ (а точнее естественное преобразование $f: \cat{id} \map \cat F \cat G$) называется \emph{единицей сопряжения}.
    \theorem{\label{conjugate-and-comma}
    Для сопряжённых функторов $\begin{tikzcd}[ampersand replacement=\&,cramped]
    {\cat B}
                                   \&\& {\cat C}
                                   \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat F}", curve={height=-12pt}, from=1-1, to=1-3]
                                   \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G}"', curve={height=12pt}, tail reversed, no head, from=1-1, to=1-3]
                                   \arrow["\eta", "\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
    \end{tikzcd}$ ($\eta$ --- естественное преобразование $\Mor_\catC(\_, \cat F(\_)) \cong \Mor_{\catB}(\cat G(\_), \_)$), и для любого $X \in \cat C$, категория запятой $(X \downarrow \cat F)$ имеет инициальный объект, причём он равен $(\cat G(X), f_X)$, где $f_X$ ---   единица сопряжения.
    \provehere{
        Рассмотрим какой-нибудь другой объект $(Y, f) \in (X \downarrow \cat F)$ (иными словами $Y \in \cat B, f \in \Mor_\catC(X, \cat F(Y))$).
        Надо проверить, что существует и единственна $g: \cat G(X) \map Y$, делающая диаграмму коммутативной.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXQgRihcXGNhdCBHKFgpKSJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMCwxLCJmX1giLDJdLFswLDIsImYiXSxbMSwyLCJcXGNhdCBGKGcpIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat F(\cat G(X))} \& {\cat F(Y)}
              \arrow["{f_X}"', from=1-1, to=2-1]
              \arrow["f", from=1-1, to=2-2]
              \arrow["{\cat F(g)}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
        Так как по стрелке $f: X \map \cat F(Y)$ хочется получить стрелку $g: \cat G(X) \map Y$, то логично предположить, что $g = \eta_{X,Y}(f)$.
        Здесь, конечно, надо использовать естественность преобразования $\eta: \Mor_\catC(X, \cat F(Y)) \cong \Mor_{\catB}(\cat G(X), Y)$.
        Изобразим диаграмму этой естественности для морфизма $(\id_X, g) \in \Mor_{\catC^{\op} \times \catB}((X, \cat G(X)), (X, Y))$ (где $g \coloneqq \eta_{X,Y}(f)$):
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcl9cXGNhdEMoWCxcXGNhdCBGKFxcY2F0IEcoWCkpKSJdLFsxLDAsIlxcTW9yX1xcY2F0QyhYLFxcY2F0IEYoWSkpIl0sWzAsMSwiXFxNb3JfXFxjYXRDKFxcY2F0IEcoWCksXFxjYXQgRyhYKSkiXSxbMSwxLCJcXE1vcl9cXGNhdEMoXFxjYXQgRyhYKSwgWSkiXSxbMCwxLCJcXGNhdCBGKGcpIFxcY2RvdCBcXF8iXSxbMiwwLCJcXGV0YV97WCxcXGNhdCBHKFgpfV57LTF9Il0sWzMsMSwiXFxldGFfe1gsWX1eey0xfSIsMl0sWzIsMywiZyBcXGNkb3QgXFxfIiwyXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor_\catC(X,\cat F(\cat G(X)))}
              \& {\Mor_\catC(X,\cat F(Y))} \\
              {\Mor_\catC(\cat G(X),\cat G(X))} \& {\Mor_\catC(\cat G(X), Y)}
              \arrow["{\cat F(g) \cdot \_}", from=1-1, to=1-2]
              \arrow["{\eta_{X,\cat G(X)}^{-1}}", from=2-1, to=1-1]
              \arrow["{\eta_{X,Y}^{-1}}"', from=2-2, to=1-2]
              \arrow["{g \cdot \_}"', from=2-1, to=2-2]
        \end{tikzcd}\]
        Выберем $\id_{\cat G}(X) \in \Mor_\catC(\cat G(X),\cat G(X))$, тогда условие коммутативности диаграммы выглядит так:
        \[\cat F(g)\eta_{X,\cat G(X)}^{-1}(\id_{\cat G}(X)) = \eta_{X,Y}^{-1}(g)\]
        Действительно, это в точности значит $\cat F(g) f_X = f$, то есть $g = \eta_{X,Y}(f)$ делает диаграмму коммутативной.

        Теперь проверим единственность.
        Пусть $g'$ --- другой морфизм $(\cat G(X), f_X) \map (Y, f)$ в категории запятой.
        Заменив $g$ на $g'$ в диаграмме выше, получим $\cat F(g')f_X = \eta_{X,Y}^{-1}(g')$. Так как $g'$ --- морфизм в категории запятой, то $\cat F(g')f_X = f$, откуда $g' = g$.
    }
    }
    \examples{
        \item Пусть $\cat F: \cat{Top} \map \cat{Set}$ --- забывающий функтор.
        Рассмотрим какой-нибудь $X \in \cat{Set}$, найдём инициальный объект в категории запятой $(X \downarrow \cat F)$.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXQgRihcXGNhdCBHKFgpKSJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMCwxLCJmX1giLDJdLFswLDIsIlxcZm9yYWxsIl0sWzEsMiwiXFxjYXQgRihcXGV4aXN0cyEpIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat F(\cat G(X))} \& {\cat F(Y)}
              \arrow["{f_X}"', from=1-1, to=2-1]
              \arrow["\forall", from=1-1, to=2-2]
              \arrow["{\cat F(\exists!)}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
        Так как хочется, чтобы любому отображению множеств соответствовало единственное непрерывное отображение, делающее диаграмму коммутативной, то в качестве $\cat G(X)$ подойдёт $X$ с дискретной топологией.

        Согласно~(\cref{comma-and-conjugate}) этот $\cat G$ --- левый сопряжённый к $\cat F$.
        \item Аналогично можно получить правый сопряжённый к $\cat F$.
        Здесь, двойственно, надо рассмотреть категорию $(\cat F \downarrow X)$, и в ней найти терминальный объект.
    % https://q.uiver.app/#q=WzAsMyxbMSwxLCJYIl0sWzAsMCwiXFxjYXQgRihZKSJdLFsxLDAsIlxcY2F0IEYoXFxjYXQgRyhYKSkiXSxbMiwwLCJmX1giXSxbMSwyLCJcXGNhdCBGKFxcZXhpc3RzISkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwwLCJcXGZvcmFsbCIsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\cat F(Y)}
              \& {\cat F(\cat G(X))} \\
              \& X
              \arrow["{f_X}", from=1-2, to=2-2]
              \arrow["{\cat F(\exists!)}", dashed, from=1-1, to=1-2]
              \arrow["\forall"', from=1-1, to=2-2]
        \end{tikzcd}\]
        Так как теперь отображение множеств должно получить непрерывность, а мы контролируем топологию на образе, то на $\cat G(X)$ надо определить антидискретную топологию.
    }
    \newlection{5 декабря 2023 г.}

    \subsection{Левые сопряжённые к функторам типа забывающих}
    \bullets{
        \item Свободные объекты
        \bullets{
            \item Левый сопряжённый к забывающему $\cat{Group} \map \cat{Set}$ --- это свободная группа на данном множестве.
            \item Левый сопряжённый к забывающему $\cat{Mon} \map \cat{Set}$ --- это свободный моноид на данном множестве, слова над данным алфавитом.

            \item Здесь и ниже $R$ --- коммутативное кольцо с единицей.

            Левый сопряжённый к забывающему $R\text{-}\cat{Alg} \map \cat{Mon}$ --- это полугрупповая алгебра $M \mapsto R[M]$.
            Моноид $M$ вкладывается в мультипликативный моноид $R[M]$.
            \item Левый сопряжённый к забывающему $R\text{-}\cat{Alg} \map \cat{Set}$ --- это свободная алгебра на данном множестве ($R\text{-}\cat{Alg}$ --- необязательно коммутативные алгебры с единицей).

            Если представить забывающий функтор $R\text{-}\cat{Alg} \map \cat{Set}$, как композицию двух забывающих, и назвать сопряжённые к ним $\cat G_1$ и $\cat G_2$ соответственно, то окажется, что $\Mor(X, \cat F_2(\cat F_1(Y))) \cong \Mor(\cat G_2(X), \cat F_1(Y)) \cong \Mor(\cat G_1(\cat G_2(X)), Y)$.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSXFx0ZXh0LVxcY2F0e0FsZ30iXSxbMSwwLCJcXGNhdHtNb259Il0sWzIsMCwiXFxjYXR7U2V0fSJdLFswLDEsIlxcY2F0e0Z9XzEiLDAseyJjdXJ2ZSI6LTJ9XSxbMSwwLCJcXGNhdCBHXzEiLDAseyJjdXJ2ZSI6LTJ9XSxbMSwyLCJcXGNhdCBHXzIiLDIseyJjdXJ2ZSI6Miwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyLCJcXGNhdCBGXzIiLDAseyJjdXJ2ZSI6LTJ9XSxbMyw0LCIiLDAseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dLFs2LDUsIiIsMCx7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
            {R\text-\cat{Alg}}
                  \& {\cat{Mon}} \& {\cat{Set}}
                  \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat{F}_1}", curve={height=-12pt}, from=1-1, to=1-2]
                  \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G_1}", curve={height=-12pt}, from=1-2, to=1-1]
                  \arrow[""{name=2, anchor=center, inner sep=0}, "{\cat G_2}"', curve={height=12pt}, tail reversed, no head, from=1-2, to=1-3]
                  \arrow[""{name=3, anchor=center, inner sep=0}, "{\cat F_2}", curve={height=-12pt}, from=1-2, to=1-3]
                  \arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
                  \arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=3, to=2]
            \end{tikzcd}\]
            Иными словами, чтобы построить свободную алгебру на множестве $S$, можно сначала построить свободный моноид $F_S$, а потом на нём ввести структуру полугрупповой алгебры $R[F_S]$.
        }
        \item Левый сопряжённый к функтору $*: \cat{Ring} \map \cat{Group}$, сопоставляющему кольцу группу его обратимых элементов --- это $G \mapsto \Z[G]$, групповая алгебра.
        \item Левый сопряжённый к забывающему функтору $R\text{-}\cat{Alg} \map \Lmod{R}$ --- это $T$, тензорная алгебра.
        \item Левый сопряжённый к забывающему функтору $R\text{-}\cat{CAlg} \map \Lmod{R}$ --- это $S$, симметрическая алгебра (здесь $R\text{-}\cat{CAlg}$ --- коммутативные алгебры над $R$).
        \item Внешняя степень $\ext$ --- это левый сопряжённый к функтору из $\Z$-градуированных $R$-алгебр в $R$-модули, сопоставляющий $A_0 \oplus A_1 \oplus \dots \mapsto A_1$.
        \item Пусть $\phi: R \map A$.
        Тогда $\phi^\#: \Lmod{A} \map \Lmod{R}$ (что является забывающим функтором, если $\phi$ инъективно)--- левый сопряжённый к $\phi_\#: \Lmod{R} \map \Lmod{A}, \phi_\#(M) = A \otimes_R M$.
        \item Рассмотрим функтор $\cat{Cat} \map \cat{Graph}$, забывающий про композицию морфизмов.
        Левый сопряжённый к данному функтору --- категория путей в графе.
        \item \up \exercise{
            Какие левый и правый сопряжённый к забывающему $G\text{-}\cat{Set} \map \cat{Set}$?
        }
    }

    \subsection{Левые сопряжённые к вложениям}
    \bullets{
        \item Левый сопряжённый к функтору вложения $\cat{Ab} \map \cat{Group}$ --- это абелианизация.
        % Единица --- не мономорфизм?
        Правого сопряжённого, наверно, нет --- внутри группы нет никакой абелевой подгруппы, сохраняющейся при морфизмах.
        Можно доказать это строго, увидев, что $\cat{Ab} \map \cat{Group}$ не сохраняет пределы~(\cref{save-limit})
        \item Левый сопряжённый к функтору вложения $\cat{CRing} \map \cat{Ring}$ --- это $R \mapsto R/[R, R]$, где $[R, R]$ --- двусторонний идеал, порождённый аддитивными коммутаторами.
        \item Левый сопряжённый к функтору вложения $\phi^\#: R\text{-}\cat{Alg} \map \cat{Ring}$ --- это $\phi_\#$, если $\phi: \Z \map R$ --- гомоморфизм колец с единицей.
        \item Левый сопряжённый к функтору вложения $\cat{Ring} \map \cat{Rng}$ --- это функтор $\cat{Rng} \map \cat{Ring}, I \mapsto \Z \oplus I$ (в результате $I$ стало идеалом). Умножение определено понятным образом: $(n + i)(m + j) = nm + mi + nj + ij$, здесь $nm \in \Z$ и $mi, nj$ --- умножение на целые, полученное из сложения в $I$.
        \item Рассмотрим функтор вложения $\cat{F}: \cat{Group} \map \cat{Mon}$.
        Какие к нему сопряжённые?

        Если $\cat{G}$ --- правый сопряжённый к $\cat{F}$, то коединица сопряжения --- естественное преобразование $\cat{F}\cat{G} \map \cat{id}$.
        \[\Mor(\cat{F}(X), Y) \map \Mor(X, \cat{G}(Y))\]

        $\cat{G}(M) = M^*$ --- сопоставляет моноиду группу его обратимых элементов.

        Если $\cat{G}$ --- левый сопряжённый к $\cat{F}$, то единица сопряжения $\cat{id} \map \cat{F}\cat{G}$.
        Надо по моноиду построить группу $M \mapsto \cat{G}(M)$, такую, что $M \hookrightarrow \cat{G}(M)$.

        Есть две конструкции построить по моноиду универсальную группу.
        \bullets{
            \item Пусть $N$ --- наименьшая нормальная подгруппа в $F_M$, содержащая все элементы вида $xyz^{-1}$, где $z = xy$ в $M$.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJNIl0sWzEsMCwiRl9NIl0sWzIsMCwiRl9NL04iXSxbMCwxLCJcXHRleHR70LIgfVxcY2F0e1NldH0iLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFswLDIsIlxcdGV4dHvQsiB9XFxjYXR7TW9ufSIsMix7ImN1cnZlIjo0fV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  M \& {F_M} \& {F_M/N}
                  \arrow["{\text{в }\cat{Set}}", hook, from=1-1, to=1-2]
                  \arrow[two heads, from=1-2, to=1-3]
                  \arrow["{\text{в }\cat{Mon}}"', curve={height=24pt}, from=1-1, to=1-3]
            \end{tikzcd}\]
            \item В коммутативном случае ($(M, +)$ --- абелев моноид) группу можно составить из формальных разностей $\defset{[A] - [B]}{A, B \in M}$, где $[A]$ --- класс эквивалентности элемента $A$ по отношению $\sim: A \sim C \iff A + D = C + D$.
        }
        \item Левый сопряжённый к $\Mor(Y, \_)$:
        \bullets{
            \item В $\cat{Set}$: $\Mor(X, \Mor(Y, Z)) \cong \Mor(X \times Y, Z)$, поэтому левый сопряжённый к $\Mor(Y, \_)$ --- это $\_ \times Y$.
            \item В $\Lmod{R}$ функтор $\Mor(Y, \_)$ можно воспринимать, как функтор $\Lmod{R} \map \Lmod{R}$.
            Левый сопряжённый к нему --- это $\_ \otimes_R Y$.
            \item С контравариантными функторами так просто не понять, сопряжённый левый, или правый, это зависит от того, где навесить $\text{op}$.
            \exercise{Найти какой-то сопряжённый к $\Mor(\_, Y)$.}
            \item Пусть $\cat{C}$ --- категория с произведением.
            Рассмотрим функтор произведения $\times: \cat{C} \times \cat{C} \map \cat{C}$.

            Левый сопряжённый к этому функтору --- это $\Delta: \cat{C} \map \cat{C} \times \cat{C}, C \mapsto (C, C)$.
        }
    }
    \newlection{12 декабря 2023 г.}


    \section{Пределы}
    \label{limits}
    Пусть есть последовательность отображений $A_1 \map A_2 \map \dots ?$
    Что естественно считать пределом?

    Если отображения --- вложения, то естественно пределом считать $\bigcup A_i$:
    \[A_1 \hookrightarrow A_2 \hookrightarrow \dots \map \bigcup A_i\]

    Мы уже встречали такие объекты: коэквалайзер, копроизведение, поэтому структуру выше естественно называть не пределом, а копределом.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFsyLDEsIkUiXSxbMywyLCJDIl0sWzAsMSwiIiwwLHsib2Zmc2V0IjotMX1dLFswLDEsIiIsMix7Im9mZnNldCI6MX1dLFsxLDJdLFswLDJdLFswLDMsIiIsMix7ImN1cnZlIjoyfV0sWzIsMywiXFxleGlzdHMgISIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDMsIiIsMix7ImN1cnZlIjotMn1dXQ==
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzAsMiwiQiJdLFsxLDEsIkFcXHNxY3VwIEIiXSxbMiwxLCJDIl0sWzIsMywiXFxleGlzdHMhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMl0sWzEsMl0sWzEsMywiIiwyLHsiY3VydmUiOjJ9XSxbMCwzLCIiLDIseyJjdXJ2ZSI6LTJ9XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& B \\
          \&\& E \\
          \&\&\& C
          \arrow[shift left, from=1-1, to=1-2]
          \arrow[shift right, from=1-1, to=1-2]
          \arrow[from=1-2, to=2-3]
          \arrow[from=1-1, to=2-3]
          \arrow[curve={height=12pt}, from=1-1, to=3-4]
          \arrow["{\exists !}"', dashed, from=2-3, to=3-4]
          \arrow[curve={height=-12pt}, from=1-2, to=3-4]
    \end{tikzcd}\qquad\begin{tikzcd}[ampersand replacement=\&]
                          A \\
                          \& {A\sqcup B} \& C \\
                          B
                          \arrow["{\exists!}", dashed, from=2-2, to=2-3]
                          \arrow[from=1-1, to=2-2]
                          \arrow[from=3-1, to=2-2]
                          \arrow[curve={height=12pt}, from=3-1, to=2-3]
                          \arrow[curve={height=-12pt}, from=1-1, to=2-3]
    \end{tikzcd}\]
    Эти диаграммы соответствуют графам ниже
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzAsMSwiIiwwLHsib2Zmc2V0IjoxfV0sWzAsMSwiIiwyLHsib2Zmc2V0IjotMX1dXQ==
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGJ1bGxldCJdLFswLDEsIlxcYnVsbGV0Il1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          \bullet \& \bullet
          \arrow[shift right, from=1-1, to=1-2]
          \arrow[shift left, from=1-1, to=1-2]
    \end{tikzcd}\begin{tikzcd}[ampersand replacement=\&]
    {}
                    \\
                    \\
                    {}
                    \arrow[dashed, no head, from=1-1, to=3-1]
    \end{tikzcd}\begin{tikzcd}[ampersand replacement=\&]
                    \bullet \\
                    \bullet
    \end{tikzcd}\]
    \ok
    Пусть $\cat J$ --- какая-то категория, она будет играть роль индексирующей.
    Функтор $\cat F: \cat J \map \cat C$ --- \emph{диаграмма}.
    \definition[Конус $\eta$ над диаграммой $\cat F$]{\down
    \numbers{
        \item Объект $C \in \cat C$.
        \item $\forall J \in \cat J$: морфизм $\eta_J: C \map \cat F(\cat J)$.
        \item $\forall \alpha: J \map J'$: соответствующий треугольник коммутативен.
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJDIl0sWzAsMSwiXFxjYXQgRihKKSJdLFsyLDEsIlxcY2F0IEYoSicpIl0sWzEsMiwiXFxjYXQgRihcXGFscGhhKSJdLFswLDEsIlxcZXRhX0oiLDJdLFswLDIsIlxcZXRhX3tKJ30iXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& C \\
              {\cat F(J)} \&\& {\cat F(J')}
              \arrow["{\cat F(\alpha)}", from=2-1, to=2-3]
              \arrow["{\eta_J}"', from=1-2, to=2-1]
              \arrow["{\eta_{J'}}", from=1-2, to=2-3]
        \end{tikzcd}\]
    }
    }
    Это может напомнить естественное преобразование функторов, вот другой взгляд:

    Пусть $\Delta_{\cat{J}}C = \Delta C$ --- функтор из $\cat J$ в $\cat C$, определённый так: $\Delta C(J) = C, \Delta C(\alpha) = \id_C$.
    Тогда конус --- естественное преобразование $\Delta C \map \cat F$, а \emph{коконус} --- естественное преобразование $\cat F \map \Delta C$.

    Теперь из этих конусов надо создать категорию, чтобы определить предел и копредел, как финальные объекты в данной категории.

    Морфизм конусов $\Delta C \map\cat F$ и $\Delta C' \map \cat F$ --- это такой морфизм $\phi: C \map C'$, такой, что все появившиеся диаграммы коммутативны:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJDIl0sWzEsMCwiQyciXSxbMSwxLCJcXGNhdCBGKEopIl0sWzAsMSwiXFxwaGkiXSxbMCwyLCJcXGV0YV9KIiwyXSxbMSwyLCJcXGV0YSdfSiJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          C \& {C'} \\
          \& {\cat F(J)}
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["{\eta_J}"', from=1-1, to=2-2]
          \arrow["{\eta'_J}", from=1-2, to=2-2]
    \end{tikzcd}\]
    Другими словами, это такой морфизм $\phi: C \map C'$, что диаграмма естественных преобразований ниже коммутативна:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIEMnIl0sWzEsMSwiXFxjYXQgRiJdLFsxLDJdLFswLDJdLFswLDEsIlxcRGVsdGEgXFxwaGkiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\Delta C}
          \& {\Delta C'} \\
          \& {\cat F}
          \arrow[from=1-2, to=2-2]
          \arrow[from=1-1, to=2-2]
          \arrow["{\Delta \phi}", from=1-1, to=1-2]
    \end{tikzcd}\]
    Полученная категория конусов --- действительно категория, так как морфизмов $(\Delta C \map \cat F) \map (\Delta C' \map \cat F)$ не больше, чем $\Mor_{\cat{C}}(C, C')$.
    \definition[Предел диаграммы $\cat F$]{
        Финальный объект в категории конусов над $\cat F$.
        Обозначают пределы $\varprojlim \cat F$.
    }
    Двойственно, \emph{копредел} $\cat F$ --- инициальный объект в категории коконусов над $\cat F$.

    Копределы пишутся $\varinjlim \cat F$.
    \examples[Пределы]{
        \item % https://q.uiver.app/#q=WzAsNyxbMSwxLCJcXGNkb3RzIl0sWzIsMSwiRlt0XS8odF5uKSJdLFszLDFdLFs1LDEsIkZbdF0vKHReMikiXSxbNiwxLCJGW3RdLyh0KSJdLFs0LDFdLFswLDAsIlxcdmFycHJvamxpbSJdLFswLDFdLFsxLDJdLFszLDRdLFs1LDNdLFsyLDUsIlxcY2RvdHMiLDFdLFsxLDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDAseyJjdXJ2ZSI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \varprojlim \\
              \& \cdots \& {F[t]/(t^n)} \& {} \& {} \& {F[t]/(t^2)} \& {F[t]/(t)}
              \arrow[from=2-2, to=2-3]
              \arrow[from=2-3, to=2-4]
              \arrow[from=2-6, to=2-7]
              \arrow[from=2-5, to=2-6]
              \arrow["\cdots"{description}, from=2-4, to=2-5]
              \arrow[tail reversed, no head, from=2-3, to=1-1]
              \arrow[tail reversed, no head, from=2-6, to=1-1]
              \arrow[curve={height=6pt}, tail reversed, no head, from=2-7, to=1-1]
        \end{tikzcd}\]
        Предел факторизаций $F[t]/(t^{n+1}) \map F[t]/(t^{n})$ --- это формальные степенные ряды $F[[t]]$.
        Это можно обосновать с топологической точки зрения: например, если взять в качестве открытых множеств $(t), (t^2), \dots$, то пополнением $F[t]$ по данной топологии будет $F[[t]]$.
        \item Аналогично, в
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGNkb3RzIl0sWzEsMCwiXFxaLyhwXm4pIl0sWzIsMF0sWzQsMCwiXFxaLyhwXjIpIl0sWzUsMCwiXFxaLyhwKSJdLFszLDBdLFswLDFdLFsxLDJdLFszLDRdLFs1LDNdLFsyLDUsIlxcY2RvdHMiLDFdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {\Z/(p^n)} \& {} \& {} \& {\Z/(p^2)} \& {\Z/(p)}
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-5, to=1-6]
              \arrow[from=1-4, to=1-5]
              \arrow["\cdots"{description}, from=1-3, to=1-4]
        \end{tikzcd}\]
        $\varprojlim = \hat{\Z}_p$.
        \item В общем случае для идеала $I \normeq R$ определяется \emph{пополнение} $R$ в $I$: $\varprojlim\limits_{n \to \infty}R/I^n = \hat{R}_I$
    }
    \examples[Копределы]{
        \item Пусть $S \subset R$ --- мультипликативное подмножество коммутативного кольца.
        Рассмотрим предпорядок на $S: a \preceq b \iff a \divs b$, и возьмём категорию $\cat J$, соответствующую данному предпорядку: $\Obj \cat J = S; |\Mor_{\cat J}(a, b)| = \all{1,& a \divs b \\ 0,&\text{иначе}}$.

        Заведём $\cat F: \cat J \map \cat{CRing}$, $\cat F(s) = R_s$.
        Функтор действует на морфизмах так: если $b = ac$, то образ морфизма $a \map b$ --- это локализация по частному $c$ % https://q.uiver.app/#q=WzAsMixbMCwwLCJSX2EiXSxbMSwwLCIoUl9hKV9jPVJfYiJdLFswLDEsIlxcbGFtYmRhX2MiXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {R_a}
              \& {(R_a)_c=R_b}
              \arrow["{\lambda_c}", from=1-1, to=1-2]
        \end{tikzcd}\]
        Здесь копредел $\varinjlim\cat F = \varinjlim\limits_{s \in S} = S^{-1}R$.

        Это бывает удобно использовать: если какое-то свойство выполнено для конечнопорождённых $R$-алгебр, и сохраняется при копределах, то оно выполнено и в локализации.
    }
    \examples{
        \item Если $\cat J = \o$ --- пустая категория, то конус над $\cat J \map \cat C$ --- это объект $C \in \cat C$, и его предел --- финальный объект.
        \item Если $\cat J = \{*\}$ --- категория с одним объектом, то конус над $\cat J \map \cat C$ --- это стрелка $* \map C$, и предел этого конуса --- сам объект $C$.
        \item Если $\cat J = \{a, b\}$ с двумя морфизмами --- только тождественными --- то для функтора $\cat F: \arr{c}{a \mapsto A \\ b \mapsto B}$: $\varprojlim \cat F = A \times B, \varinjlim \cat F = A \sqcup B$.
        \item Эквалайзер и пулбэк --- тоже пределы.
    }
    Определим категорию функторов $\Func(\cat J, \cat C)$, объекты которой --- функторы, морфизмы --- естественные преобразования.
    Здесь стоит сказать либо что $\cat J$ --- малая категория, либо рассматривать \emph{большие категории} (стрелки могут не образовывать множество), либо ещё как-то обойтись с теорией множеств.

    Теперь $\Delta$ --- функтор $\cat C \map \Func(\cat J, \cat C)$.
    Зафиксируем функтор $\cat F: \cat J \map \cat C$, и посмотрим на категорию запятой $(\Delta \downarrow \cat F)$ (здесь $\Delta$ рассматривается, как функтор, а $\cat F$ --- как объект).
    В ней объекты --- рассматриваемые конусы над $\cat F$, морфизмы --- морфизмы конусов.

    Если рассмотреть предел, как функтор $\Func(\cat J, \cat C) \map \cat C$ (то есть забыть про стрелки в конусе), то это действительно будет функтор, определённый так на морфизмах: $\varprojlim(\phi) \coloneqq \psi$, оно берётся из диаграммы ниже:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbSBcXGNhdCBGIl0sWzEsMSwiXFxjYXQgRiJdLFsxLDJdLFswLDIsIlxcZm9yYWxsIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMSwiXFxEZWx0YShcXGV4aXN0cyEpIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fV1d
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEYiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEciXSxbMCwxLCJcXGNhdCBGIl0sWzEsMSwiXFxjYXQgRyJdLFsyLDMsIlxccGhpIl0sWzAsMl0sWzEsM10sWzAsMSwiXFxEZWx0YShcXGV4aXN0cyAhIFxccHNpKSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\Delta C}
          \& {\Delta \varprojlim \cat F} \\
          \& {\cat F}
          \arrow[from=1-2, to=2-2]
          \arrow["\forall"', dashed, from=1-1, to=2-2]
          \arrow["{\Delta(\exists!)}", dotted, from=1-1, to=1-2]
    \end{tikzcd}\qquad\begin{tikzcd}[ampersand replacement=\&]
    {\Delta \varprojlim\cat F}
                          \& {\Delta \varprojlim\cat G} \\
                          {\cat F} \& {\cat G}
                          \arrow["\phi", from=2-1, to=2-2]
                          \arrow[from=1-1, to=2-1]
                          \arrow[from=1-2, to=2-2]
                          \arrow["{\Delta(\exists ! \psi)}", dashed, from=1-1, to=1-2]
    \end{tikzcd}\]
    \proposal{
        Функтор $\varprojlim$ является правым сопряжённым к $\Delta$, то есть \[\Mor_{\Func(\cat J, \cat C)}(\Delta C, \cat F) \cong \Mor_{\catC}(C, \varprojlim \cat F)\] естественно по $C$ (естественность по $\cat F$ получается автоматически (это как?)).
        \provehere{
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEYiXSxbMSwxLCJcXGNhdCBGIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMl0sWzEsMl1d
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\Delta C}
                  \& {\Delta \varprojlim\cat F} \\
                  \& {\cat F}
                  \arrow[dashed, from=1-1, to=1-2]
                  \arrow[from=1-1, to=2-2]
                  \arrow[from=1-2, to=2-2]
            \end{tikzcd}\]
            Естественное преобразование $\Delta \circ \varprojlim \map \cat{id}$, полученное из определения предела --- коединица сопряжения.
        }
    }
    Двойственно, $\varinjlim$ --- левый сопряжённый к $\Delta$.

    \subsection{Правый сопряжённый сохраняет пределы}
    \theorem{\label{save-limit}
    Пусть имеются сопряжённые функторы $\begin{tikzcd}[ampersand replacement=\&,cramped]
    {\cat B}
                                            \&\& {\cat C}
                                            \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat F}", curve={height=-12pt}, from=1-1, to=1-3]
                                            \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G}"', curve={height=12pt}, tail reversed, no head, from=1-1, to=1-3]
                                            \arrow["\eta", "\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
    \end{tikzcd}$.

    Пусть $\cat H: \cat J \map \cat B$. Тогда правый сопряжённый сохраняет пределы: $\cat F\left(\varprojlim \cat H\right) = \varprojlim \cat F \cat H$.
    \provehere{
        \indent{\lemma{Пусть $\cat F, \cat G, \cat H$ как в теореме, $\cat K: \cat J \map \cat C$ --- функтор. Тогда \[\Mor_{\Func(\cat J, \cat C)}(\cat K, \cat F \circ \cat H) \cong \Mor_{\Func(\cat J, \cat B)}(\cat G\circ\cat K, \cat H)\] естественно по $\cat K, \cat H$.
        \provehere[Доказательство леммы]{
            Возьмём естественное преобразование $\eta: \cat K \map \cat F \circ \cat H$. Пусть (гипотетическая) биекция сопоставляет ему преобразование $\theta: \cat G \circ \cat K \map \cat H$.

            Определим $\theta$, и проверим, что $\forall X, Y \in \cat J$ диаграмма ниже коммутативна.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdCBHXFxjYXQgSyhYKSJdLFsxLDAsIlxcY2F0IEgoWCkiXSxbMCwxLCJcXGNhdCBHXFxjYXQgSyhZKSJdLFsxLDEsIlxcY2F0IEgoWSkiXSxbMCwxLCJcXHRoZXRhX1giXSxbMSwzLCJcXGNhdCBIKFxccGhpKSJdLFswLDIsIlxcY2F0IEdcXGNhdCBLKFxccGhpKSIsMl0sWzIsMywiXFx0aGV0YV9ZIiwyXV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat G\cat K(X)}
                  \& {\cat H(X)} \\
                  {\cat G\cat K(Y)} \& {\cat H(Y)}
                  \arrow["{\theta_X}", from=1-1, to=1-2]
                  \arrow["{\cat H(\phi)}", from=1-2, to=2-2]
                  \arrow["{\cat G\cat K(\phi)}"', from=1-1, to=2-1]
                  \arrow["{\theta_Y}"', from=2-1, to=2-2]
            \end{tikzcd}\]
            Для $\eta$ эта диаграмма выглядит так:% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdCBLKFgpIl0sWzEsMCwiXFxjYXQgRlxcY2F0IEgoWCkiXSxbMCwxLCJcXGNhdCBLKFkpIl0sWzEsMSwiXFxjYXQgRlxcY2F0IEgoWSkiXSxbMiwzLCJcXGV0YV9ZIl0sWzAsMSwiXFxldGFfWCJdLFswLDIsIlxcY2F0IEsoXFxwaGkpIiwyXSxbMSwzLCJcXGNhdCBGXFxjYXQgSChcXHBoaSkiXV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat K(X)}
                  \& {\cat F\cat H(X)} \\
                  {\cat K(Y)} \& {\cat F\cat H(Y)}
                  \arrow["{\eta_Y}", from=2-1, to=2-2]
                  \arrow["{\eta_X}", from=1-1, to=1-2]
                  \arrow["{\cat K(\phi)}"', from=1-1, to=2-1]
                  \arrow["{\cat F\cat H(\phi)}", from=1-2, to=2-2]
            \end{tikzcd}\]
            Применяя $\cat G$ к диаграмме, получаем следующее (обозначим за $f$ коединицу сопряжения $\cat F$ и $\cat G$)
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGNhdCBHXFxjYXQgSyhYKSJdLFsxLDAsIlxcY2F0IEdcXGNhdCBGXFxjYXQgSChYKSJdLFswLDEsIlxcY2F0IEdcXGNhdCBLKFkpIl0sWzEsMSwiXFxjYXQgR1xcY2F0IEZcXGNhdCBIKFkpIl0sWzIsMCwiXFxjYXQgSChYKSJdLFsyLDEsIlxcY2F0IEgoWSkiXSxbMiwzLCJcXGNhdCBHKFxcZXRhX1kpIl0sWzAsMSwiXFxjYXQgRyhcXGV0YV9YKSJdLFswLDIsIlxcY2F0IEdcXGNhdCBLKFxccGhpKSIsMl0sWzEsMywiXFxjYXQgR1xcY2F0IEZcXGNhdCBIKFxccGhpKSJdLFsxLDQsImZfe1xcY2F0IEgoWCl9Il0sWzMsNSwiZl97XFxjYXQgSChZKX0iXSxbNCw1LCJcXGNhdCBIKFxccGhpKSJdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat G\cat K(X)}
                  \& {\cat G\cat F\cat H(X)} \& {\cat H(X)} \\
                  {\cat G\cat K(Y)} \& {\cat G\cat F\cat H(Y)} \& {\cat H(Y)}
                  \arrow["{\cat G(\eta_Y)}", from=2-1, to=2-2]
                  \arrow["{\cat G(\eta_X)}", from=1-1, to=1-2]
                  \arrow["{\cat G\cat K(\phi)}"', from=1-1, to=2-1]
                  \arrow["{\cat G\cat F\cat H(\phi)}", from=1-2, to=2-2]
                  \arrow["{f_{\cat H(X)}}", from=1-2, to=1-3]
                  \arrow["{f_{\cat H(Y)}}", from=2-2, to=2-3]
                  \arrow["{\cat H(\phi)}", from=1-3, to=2-3]
            \end{tikzcd}\]
            Определим $\theta_X \coloneqq f_{\cat H(X)} \cdot \cat G(\eta_X)$, диаграмма выше показывает, что это действительно естественное преобразование.

            Осталось проверить, что композиция $\eta_X \rightsquigarrow \theta_X \rightsquigarrow \eta_X$, и обратно --- тождественна.
        }}}
        Ниже в зависимости от аргумента, $\Delta: \cat B \map \Func(\cat J, \cat B)$, или $\Delta: \cat C \map \Func(\cat J, \cat C)$, оно определено выше~(\cref{limits}).
        \multline{\Mor_{\Func}\left(\Delta C, \cat F\circ\cat H\right) \cong \Mor_{\Func}\left(\cat G \Delta C, \cat H\right) \cong \Mor_{\Func}\left(\Delta \cat G(C), \cat H\right) \cong\\\cong \Mor_{\catB}\left(\cat G(C), \varprojlim\cat H\right) \cong \Mor_\catC\left(C, \cat F\left(\varprojlim \cat H\right)\right)}
        Отсюда (по определению предела) следует, что $\cat F\left(\varprojlim \cat H\right) = \varprojlim\cat F \circ \cat H$.
    }
    }
    \newlection{14 декабря 2023 г.}
    В зависимости от количества морфизмов в индексирующей категории предел называется \emph{конечным}, \emph{счётным} или \emph{малым}.
    \proposal{
        Пусть $\cat C$ --- категория, следующие условия эквивалентны.
        \numbers{
            \item В $\cat C$ существуют финальный объект, все произведения и все эквалайзеры.
            \item В $\cat C$ существуют финальный объект и все пулбэки.
            \item В $\cat C$ существуют все конечные пределы.
        }
        \provehere[Схема доказательства]{
            Понятно, что достаточно доказать $1 \then 3$, так как $3 \then 2 \then 1$ очевидно.
            Это доказывается индукцией по количеству морфизмов.

            \underline{База:} если морфизмов нуль, то предел функтора $\cat F: \cat J \map \cat C$ --- произведение объектов $\cat F(J)$ по всем $J \in \cat J$.

            \underline{Переход:} При добавлении стрелки $J_1 \map J_2$ в $\cat J$ обозначим $A = \cat F(J_1), B = \cat F(J_2)$.
            Чтобы получить предел новой диаграммы, надо взять эквалайзер каких-то стрелок.
        }
    }
    \note{
        В случае счётного предела надо добавить условие существования счётного обратного предела, то есть предела вида
% https://q.uiver.app/#q=WzAsNixbNCwyLCJcXGJ1bGxldCJdLFszLDIsIlxcYnVsbGV0Il0sWzIsMiwiXFxidWxsZXQiXSxbMSwyLCJcXGJ1bGxldCJdLFswLDIsIlxcY2RvdHMiXSxbMCwwLCJcXHZhcnByb2psaW0iXSxbNCwzXSxbMywyXSxbMiwxXSxbMSwwXSxbNSw0LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDMsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs1LDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs1LDEsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs1LDAsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              \varprojlim \\
              \\
              \cdots \& \bullet \& \bullet \& \bullet \& \bullet
              \arrow[from=3-1, to=3-2]
              \arrow[from=3-2, to=3-3]
              \arrow[from=3-3, to=3-4]
              \arrow[from=3-4, to=3-5]
              \arrow[dashed, no head, from=1-1, to=3-1]
              \arrow[dashed, from=1-1, to=3-2]
              \arrow[dashed, from=1-1, to=3-3]
              \arrow[dashed, from=1-1, to=3-4]
              \arrow[dashed, from=1-1, to=3-5]
        \end{tikzcd}\]
    }

    \subsection{Схема построения алгебраического замыкания}
    Пусть имеется поле $F$. Как построить алгебраическое замыкание?

    Пусть $P$ --- множество всех унитальных многочленов над $F$.
    Введём частичный порядок на $F: f \preceq g \iff f \divs g$.
    Далее рассматриваем категорию $\cat P$, построенную по данному частично упорядоченному множеству.

    Рассмотрим функтор $\cat P \map \cat{Field}, f \mapsto F_f$, сопоставляющий многочлену $f$ \emph{поле разложения} $f$ --- наименьшее (по включению) поле, в котором $f$ раскладывается на линейные множители.
    Оно существует, но его изоморфизм может быть не единственен.
    В частности, чтобы выбрать какое-то одно поле, в которое будет бить функтор, нужна какая-то версия аксиомы выбора.

    В частности (при $q = p^n$), $\Ff_q$ --- поле разложения $x^q - x \in \Ff_p[x]$.

    Так вот, тогда копредел этого функтора $\varinjlim\limits_{f \in P}F_f$ --- это некоторое кольцо.
    В этом кольце выбирается произвольный максимальный идеал $\mathfrak{m} \normeq \varinjlim\limits_{f \in P}F_f$.
    Он есть всегда, если $\varinjlim\limits_{f \in P}F_f \ne \{0\}$ (и надо как-то доказать, что это кольцо --- ненулевое), и факторполе $\varinjlim\limits_{f \in P}F_f/\mathfrak{m}$ называется \emph{алгебраическим замыканием} $F$


    \section{Лемма Йонеды}

    \subsection{Примеры представимых функторов}
    \definition[Представимый функтор]{
        Ковариантный функтор $\catC \map \cat{Set}$, естественно изоморфный $\Mor_\catC(A, \_)$ для некоторого $ A\in \cat C$.

        Любой данный объект $A$ --- \emph{представляющий} объект.
    }
    Оказывается, это весьма частая ситуация.

    \examples[Представимые функторы]{
        \item    Возьмём аффинное $n$-мерное пространство $\mathbb{A}^n$.
        С одной стороны, это функтор \begin{align*}
                                         \mathbb{A}^n: \cat{CRing} &\map \cat{Set} \\ R &\mapsto \mathbb{A}^n_R \bydef \defset{(r_1, \dots, r_n)}{r_i \in R}
        \end{align*}
        На морфизмах функтор задан понятным образом.

        С другой стороны, в классической алгебраической геометрии фиксируют какое-то алгебраически замкнутое поле, и рассматривают значения этого функтора на данном поле.

        Нам это $\mathbb{A}^n$ интересно именно как функтор, и он является представимым: $\mathbb{A}^n\cong\Mor(\Z[t_1, \dots, t_n], \_)$.
        Если заменить $\cat{CRing}$ на $F\text{-}\cat{Alg}$, то $\mathbb{A}^n\cong\Mor(F[t_1, \dots, t_n], \_)$.

        Зафиксируем $f_1, \dots, f_m \in F[t_1, \dots, t_n]$.
        Пусть $X_R \subset \mathbb{A}^n_R: X_R \coloneqq \defset{x \in \A^n_R}{f_1(x) = \cdots = f_m(x) = 0}$.
        Это тоже функтор, причём он тоже представим: $X \cong \Mor_{F\text{-}\cat{Alg}}\left(F[t_1, \dots, t_n]/_{(f_1, \dots, f_m)}, \_\right)$.
        \item Рассмотрим представимый функтор $SL_n \cong \Mor(A, \_)$, где $A = F\left[g_{i,j}\right]_{i,j =1}^{n}/_{(\det g - 1)}$.
        Для точности стоит заметить, что здесь $SL_n$ бьёт в $\cat{Set}$, композиция с забывающим функтором.
        Эквивалентно, можно задать какую-то структуру на морфизмах (в данном случае --- структуры алгебры Хопфа).

        Эта матрица удовлетворяет универсальному свойству $\forall R, \forall a \in SL_n(R): \exists ! A \map R: \phi(g) = a$.

        В частности, $g \in SL_n(A)$ --- общий элемент, $g \map \id_A \in \Mor(A, A)$.
    }

    \subsection{Формулировка и доказательство леммы}
    Пусть $\cat F, \cat G: \cat B \map \cat C$ --- два функтора.
    Обозначим множество естественных преобразований $\cat F \map \cat G$ за $\Nat(\cat F, \cat G)$.

    Лемма Йонеды говорит об описании множества $\Nat(\Mor(A, \_), \cat F)$ для некоего фиксированного объекта $A$.
    Всякому естественному преобразованию $\eta: \Mor(A, \_) \map \cat F$ отвечает её \emph{универсальная компонента} $\eta_A: \Mor(A, A) \map \cat F(A)$.

    Оказывается, универсальные компоненты хранят в себе всю информацию о естественном преобразовании $\eta$.
    Более того, по элементу $\eta_A(\id_A)$, который называется \emph{универсальным (или общим) элементом}, преобразование $\eta$ однозначно восстанавливается.
    \lemma[Йонеда]{
        Пусть $\cat F: \catC \map \cat{Set}$, $\cat C$ --- малая категория.
        Пусть $A \in \catC$.

        Тогда $\Nat(\Mor(A, \_), \cat F) \cong \cat F(A)$ естественно по $A$ и по $\cat F$.
        \provebullets{
            \item Пусть $\eta: \Mor(A, \_) \map \cat F$.
            Сопоставим этому преобразованию его общий элемент: $\eta \rightsquigarrow \eta_A(\id_A) \in \cat F(A)$.

            \item Обратно, попытаемся сопоставить элементу $a \in \cat F(A)$ естественное преобразование с таким общим элементом.
            Пусть это некое $\eta^{(a)} \in \Nat(\Mor(A, \_), \cat F)$.

            Так как $\eta^{(a)}$ должно быть естественным преобразованием, то должна быть коммутативна диаграмма~(\ref{common-case}) (при $\phi: X \map Y$). В частности для $\phi: A \map B$, должна быть коммутативна диаграмма~(\ref{particular-case})
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcihBLCBYKSJdLFsxLDAsIlxcY2F0IEYoWCkiXSxbMCwxLCJcXE1vcihBLCBZKSJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMCwxLCJcXGV0YV57KGEpfV9YIl0sWzIsMywiXFxldGFeeyhhKX1fWSJdLFswLDIsIlxccGhpXFxjZG90XFxfIl0sWzEsMywiXFxjYXQgRihcXHBoaSkiXV0=
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcihBLCBBKSJdLFsxLDAsIlxcY2F0IEYoQSkiXSxbMCwxLCJcXHBoaSBcXGluIFxcTW9yKEEsIEIpIl0sWzEsMSwiXFxjYXQgRihCKSJdLFswLDEsIlxcZXRhXnsoYSl9X0EiXSxbMiwzLCJcXGV0YV57KGEpfV9CIl0sWzAsMiwiXFxwaGkgXFxjZG90IFxcXyJdLFsxLDMsIlxcY2F0IEYoXFxwaGkpIl1d
            \begin{figure}[!ht]
                \begin{minipage}{0.5\textwidth}
                    \centering\begin{tikzcd}[ampersand replacement=\&]
                    {\Mor(A, X)}
                                  \& {\cat F(X)} \\
                                  {\Mor(A, Y)} \& {\cat F(Y)}
                                  \arrow["{\eta^{(a)}_X}", from=1-1, to=1-2]
                                  \arrow["{\eta^{(a)}_Y}", from=2-1, to=2-2]
                                  \arrow["{\phi\cdot\_}", from=1-1, to=2-1]
                                  \arrow["{\cat F(\phi)}", from=1-2, to=2-2]
                    \end{tikzcd}
                    \caption{Общий случай\label{common-case}}
                \end{minipage}
                \begin{minipage}{0.5\textwidth}
                    \centering\begin{tikzcd}[ampersand replacement=\&]
                    {\Mor(A, A)}
                                  \& {\cat F(A)} \\
                                  {\phi \in \Mor(A, B)} \& {\cat F(B)}
                                  \arrow["{\eta^{(a)}_A}", from=1-1, to=1-2]
                                  \arrow["{\eta^{(a)}_B}", from=2-1, to=2-2]
                                  \arrow["{\phi \cdot \_}", from=1-1, to=2-1]
                                  \arrow["{\cat F(\phi)}", from=1-2, to=2-2]
                    \end{tikzcd}
                    \caption{Частный случай $X = A$\label{particular-case}}
                \end{minipage}
            \end{figure}

            Проверим коммутативность~(\ref{particular-case}) на элементе $\id_A$. Вниз он уходит в $\phi$, далее вправо --- в $\eta^{(a)}_B(\phi)$, что мы и хотим определить.

            Если же сначала пойти вправо, то будет $\eta_A^{(a)}(\id_A)$, и так как мы хотим, чтобы общий элемент $\eta^{(a)}$ был равен $a$, то надо положить $\eta_A^{(a)}(\id_A) = a$.
            Отсюда получаем \[\eta^{(a)}_B(\phi) \coloneqq \cat F(\phi)(a)\tag{$*$}\label{eta-a-def}\]

            Это размышление показывает, что при заданном общем элементе $\eta_A^{(a)}(\id_A) = a$ само преобразование $\eta^{(a)}$ задаётся единственным образом.

            \item Так определённое $\eta^{(a)}$~(\ref{eta-a-def}) является естественным преобразованием: коммутативность~(\ref{common-case}) на элементе $\psi: A \map X$ сводится к $\underbrace{\cat F(\phi)(\eta^{(a)}_X(\psi))}_{\cat F(\phi)(\cat F(\psi)(a))} = \underbrace{\eta^{(a)}_Y(\phi\psi)}_{\cat F(\phi\psi)(a)}$, что верно, так как $\cat F$ --- функтор.

            \item Теперь надо показать естественность биекции.
            Она, конечно выполняется, так как построение не зависит ни от каких выборов, но давайте убедимся.

            Пусть $f: A \map B$ --- морфизм, $\theta: \cat F \map \cat G$ --- естественное преобразование.
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXE5hdChcXE1vcihBLCBcXF8pLCBcXGNhdCBGKSJdLFswLDEsIlxcY2F0IEYoQSkiXSxbMSwwLCJcXE5hdChcXE1vcihBLCBcXF8pLCBcXGNhdCBHKSJdLFsxLDEsIlxcY2F0IEcoQSkiXSxbMiwwLCJcXE5hdChcXE1vcihCLCBcXF8pLCBcXGNhdCBHKSJdLFsyLDEsIlxcY2F0IEcoQikiXSxbMCwyLCJcXHRoZXRhIFxcY2RvdFxcXyJdLFswLDEsIlxcZXRhIFxcbWFwc3RvIFxcZXRhX0EoXFxpZF9BKSJdLFsyLDMsIlxcZXRhIFxcbWFwc3RvIFxcZXRhX0EoXFxpZF9BKSJdLFsxLDMsIlxcdGhldGFfQSJdLFsyLDQsIj8iXSxbNCw1LCJcXGV0YSBcXG1hcHN0byBcXGV0YV9CKFxcaWRfQikiXSxbMyw1LCJcXGNhdCBHKGYpIl1d
            \begin{figure}[ht!]
                \centering
                \begin{tikzcd}[ampersand replacement=\&]
                {\Nat(\Mor(A, \_), \cat F)}
                    \& {\Nat(\Mor(A, \_), \cat G)} \& {\Nat(\Mor(B, \_), \cat G)} \\
                    {\cat F(A)} \& {\cat G(A)} \& {\cat G(B)}
                    \arrow["{\theta \cdot\_}", from=1-1, to=1-2]
                    \arrow["{\eta \mapsto \eta_A(\id_A)}", from=1-1, to=2-1]
                    \arrow["{\eta \mapsto \eta_A(\id_A)}", from=1-2, to=2-2]
                    \arrow["{\theta_A}", from=2-1, to=2-2]
                    \arrow["{?}", from=1-2, to=1-3]
                    \arrow["{\eta \mapsto \eta_B(\id_B)}", from=1-3, to=2-3]
                    \arrow["{\cat G(f)}", from=2-2, to=2-3]
                \end{tikzcd}
                \caption{\label{yoneda}Естественность биекции}
            \end{figure}
            \item Во-первых, надо проверить коммутативность левого квадратика.
            $\eta: \Mor(A, \_) \map \cat F$ отправляется вниз в $\eta_A(\id_A)$, после чего вправо уходит в $\theta_A(\eta_A(\id_A))$.
            Надо проверить, что это равно $(\theta \cdot \eta)_A(\id_A)$, но это просто определение композиции естественных преобразований.

            \item Во-вторых, надо проверить коммутативность правого квадрата, для этого сначала поймём, что за стрелка $\Nat(\Mor(A, \_), \cat G) \map \Nat(\Mor(B, \_), \cat G)$.
            $\Mor(B, \_) \overset{\_ \cdot f}\Map \Mor(A, \_)$.
            Далее, на естественных преобразованиях действие устроено так:
            $\begin{tikzcd}[ampersand replacement=\&,cramped,row sep=small]
            {\lambda: \Mor(A, \_) \map \cat G}
                 \\
                 {\mu: \Mor(B, \_) \map \cat G}
                 \arrow[shift right=14, maps to, from=1-1, to=2-1]
            \end{tikzcd}$
            Для $g \in \Mor(B, X): \mu_X(g) = \lambda_X(g \cdot f)$.

            Теперь проверим коммутативность: $\lambda: \Mor(A, \_) \map \cat G$ отправляется вниз в $\lambda_A(\id_A)$, дальше вправо в $\cat G(f)(\lambda_A(\id_A))$.
            Если же пойти сначала вправо, потом вниз, то будет $\mu_B(\id_B)$, где $\mu$ определено выше; а именно, $\mu_B(\id_B) = \lambda_B(f)$.

            Нарисовав диаграмму~(\ref{particular-case}) для случая $\eta=\lambda$, получаем, что $\id_A$ вниз и вправо уходит в $\lambda_B(f)$, а вправо и вниз --- в $\cat G(f)(\lambda_A(\id_A))$, то есть правый квадрат~(\ref{yoneda}) тоже коммутативен:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcihBLCBBKSJdLFsxLDAsIlxcY2F0IEcoQSkiXSxbMCwxLCJcXE1vcihBLCBCKSJdLFsxLDEsIlxcY2F0IEcoQikiXSxbMCwxLCJcXGxhbWJkYV9BIl0sWzIsMywiXFxsYW1iZGFfQiJdLFswLDIsImYgXFxjZG90IFxcXyJdLFsxLDMsIlxcY2F0IEcoXFxwaGkpIl1d
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\Mor(A, A)}
                  \& {\cat G(A)} \\
                  {\Mor(A, B)} \& {\cat G(B)}
                  \arrow["{\lambda_A}", from=1-1, to=1-2]
                  \arrow["{\lambda_B}", from=2-1, to=2-2]
                  \arrow["{f \cdot \_}", from=1-1, to=2-1]
                  \arrow["{\cat G(\phi)}", from=1-2, to=2-2]
            \end{tikzcd}\]
            Таким образом, оба квадрата коммутативны, и вся диаграмма~\eqref{yoneda} коммутативна, то есть преобразование естественно и по $A$, и по $\cat F$ (это иллюстрирует, что чтобы проверить естественность преобразования по нескольким аргументам, достаточно проверять по каждому в отдельности, а далее воспользоваться коммутативностью диаграмм).
        }
    }
    \corollary{
        Множество естественных преобразований $\Nat(\Mor(A, \_), \Mor(B, \_)) \cong \Mor(B, A)$.
        Категория представимых функторов антиэквивалентна категории $\cat C$.
    }
    \newlection{19 декабря 2023 г.}


    \section{Абелевы категории}
    \definition[Предаддитивная категория $\catC$]{
        $\forall A, B \in \catC: \Mor_\catC(A, B)$ образует абелеву группу, и выполнена дистрибутивность \[\alpha(\beta+\gamma) = \alpha\beta + \alpha\gamma \qquad (\beta + \gamma)\alpha = \beta\alpha + \gamma\alpha\]
    }
    Нулевой объект может и не существовать в абелевой категории, а нулевой морфизм --- нуль абелевой группы --- существует, и из дистрибутивности действительно $0\cdot\alpha = 0$ и $\alpha\cdot0 = 0$.
    \lemma{
        Пусть $\cat C$ --- предаддитивная категория, $A \in \cat C$. Тогда следующие условия эквивалентны.
        \numbers{
            \item $A$ инициальный.
            \item $A$ финальный.
            \item $\id_A = 0_A$.
            \item $|\Mor_\catC(A, A)| = 1$.
        }
        \provehere{
            Тривиально $1 \then 4$ и $4 \then 3$.
            Докажем $3 \then 1$; $2\!\!\! \iff\!\!\! 3$ будет следовать из двойственности.

            Пусть $\alpha: A \map B$.
            Тогда $\alpha = \alpha\cdot \id_A = \alpha\cdot 0_A = 0$, то есть $A$ --- инициальный.
        }
    }
    Рассмотрим следующую диаграмму в предаддитивной категории $\catC$.
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJDIl0sWzAsMCwiQSJdLFsyLDAsIkIiXSxbMSwwLCJcXGlvdGFfMSIsMix7Im9mZnNldCI6MX1dLFswLDEsIlxccGlfMSIsMix7Im9mZnNldCI6MX1dLFswLDIsIlxccGlfMiIsMCx7Im9mZnNldCI6LTF9XSxbMiwwLCJcXGlvdGFfMiIsMCx7Im9mZnNldCI6LTF9XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& C \& B
          \arrow["{\iota_1}"', shift right, from=1-1, to=1-2]
          \arrow["{\pi_1}"', shift right, from=1-2, to=1-1]
          \arrow["{\pi_2}", shift left, from=1-2, to=1-3]
          \arrow["{\iota_2}", shift left, from=1-3, to=1-2]
    \end{tikzcd}\]
    \singlepage{\definition[Диаграмма выше --- бипроизведение]{\down
    \numbers{
        \item $\pi_1\iota_1 = \id_A$.
        \item $\pi_2\iota_2 = \id_B$.
        \item $ \iota_2 \pi_2+ \iota_1\pi_1  = \id_C$.
    }
    }}
    \lemma{
        В предаддитивной категории следующие условия на данную диаграмму эквивалентны:
        \numbers{
            \item $\begin{tikzcd}[ampersand replacement=\&,cramped]
                       A \& C \& B
                       \arrow["{\iota_1}"', shift right, from=1-1, to=1-2]
                       \arrow["{\pi_1}"', shift right, from=1-2, to=1-1]
                       \arrow["{\pi_2}", shift left, from=1-2, to=1-3]
                       \arrow["{\iota_2}", shift left, from=1-3, to=1-2]
            \end{tikzcd}$ --- бипроизведение.
            \item $\begin{tikzcd}[ampersand replacement=\&]
                       A \& C \& B
                       \arrow["{\pi_1}"', from=1-2, to=1-1]
                       \arrow["{\pi_2}", from=1-2, to=1-3]
            \end{tikzcd}$ --- произведение.
            \item $\begin{tikzcd}[ampersand replacement=\&,cramped]
                       A \& C \& B
                       \arrow["{\iota_1}"', from=1-1, to=1-2]
                       \arrow["{\iota_2}", from=1-3, to=1-2]
            \end{tikzcd}$ --- копроизведение.
            \provehere{
                \indentlemma{
                    В бипроизведении $\pi_1 \iota_2 = 0$ и $\pi_2 \iota_1 = 0$.
                }{
                    Домножая $\iota_1 \pi_1 + \iota_2 \pi_2 = \id_C$ слева на $\pi_2$, получаем $\pi_2 \iota_1 \pi_1 + \pi_2 = \pi_2$, то есть $\pi_2 \iota_1\pi_1 = 0$.
                    Домножая справа на $\iota_1$, получаем искомое.
                }
                Докажем $1 \iff 3$, $2 \iff 3$ следует из двойственности.
                \bullets{
                    \item[$1 \then 3$] % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzEsMSwiQyJdLFsxLDIsIkEiXSxbMiwxLCJCIl0sWzAsMSwiXFxwaGkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwzLCJcXHBoaV8yIiwwLHsiY3VydmUiOi0yfV0sWzAsMiwiXFxwaGlfMSIsMix7ImN1cnZlIjoyfV0sWzEsMiwiXFxwaV8xIiwwLHsib2Zmc2V0IjotMX1dLFsyLDEsIlxcaW90YV8xIiwwLHsib2Zmc2V0IjotMX1dLFsxLDMsIlxccGlfMiIsMix7Im9mZnNldCI6MX1dLFszLDEsIlxcaW90YV8yIiwyLHsib2Zmc2V0IjoxfV1d
                    \[\begin{tikzcd}[ampersand replacement=\&]
                          D \\
                          \& C \& B \\
                          \& A
                          \arrow["\phi", dashed, from=1-1, to=2-2]
                          \arrow["{\phi_2}", curve={height=-12pt}, from=1-1, to=2-3]
                          \arrow["{\phi_1}"', curve={height=12pt}, from=1-1, to=3-2]
                          \arrow["{\pi_1}", shift left, from=2-2, to=3-2]
                          \arrow["{\iota_1}", shift left, from=3-2, to=2-2]
                          \arrow["{\pi_2}"', shift right, from=2-2, to=2-3]
                          \arrow["{\iota_2}"', shift right, from=2-3, to=2-2]
                    \end{tikzcd}\]
                    Определим $\phi\coloneqq \iota_1 \phi_1 + \iota_2 \phi_2$, тогда $\pi_2 \phi = \underbrace{\pi_2 \iota_1}_{0} \phi_1 + \underbrace{\pi_2 \iota_2}_{\id} \phi_2 = \phi_2$, то есть диаграмма коммутативна.

                    Если же $\pi_1 \phi = \phi_1$ и $\pi_2 \phi = \phi_2$, то $\underbrace{(\iota_1 \pi_1 + \iota_2 \pi_2)}_{\id} \phi = \iota_1 \phi_1 + \iota_2 \phi_2$, то есть никак по другому задать $\phi$ нельзя.
                    \item[$3 \then 1$] Построим $\iota_1$ согласно универсальному свойству:% https://q.uiver.app/#q=WzAsNCxbMCwxLCJBIl0sWzEsMSwiQyJdLFsyLDEsIkIiXSxbMSwwLCJBIl0sWzAsMSwiXFxwaV8xIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiwxLCJcXHBpXzIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDEsIlxcaW90YV8xIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsMCwiXFxpZF9BIiwyXSxbMywyLCIwIl1d
                    \[\begin{tikzcd}[ampersand replacement=\&]
                          \& A \\
                          A \& C \& B
                          \arrow["{\pi_1}"', tail reversed, no head, from=2-1, to=2-2]
                          \arrow["{\pi_2}"', tail reversed, no head, from=2-3, to=2-2]
                          \arrow["{\iota_1}", dashed, from=1-2, to=2-2]
                          \arrow["{\id_A}"', from=1-2, to=2-1]
                          \arrow["0", from=1-2, to=2-3]
                    \end{tikzcd}\]
                    Аналогично $\exists! \iota_2: B \map C: \pi_2 \iota_2 = \id_B, \pi_1 \iota_2 = 0$.

                    Отсюда получаем $\all{\pi_1(\iota_1 \pi_1 + \iota_2 \pi_2) = \pi_1 \\ \pi_2(\iota_1 \pi_1 + \iota_2 \pi_2) = \pi_2}$, а по универсальному свойству такое отображение только одно --- $\id_C$:
                % https://q.uiver.app/#q=WzAsNCxbMCwwLCJDIl0sWzEsMSwiQyJdLFsxLDIsIkEiXSxbMiwxLCJCIl0sWzAsMSwiXFxpZCIsMix7Im9mZnNldCI6MX1dLFsxLDIsIlxccGlfMSJdLFsxLDMsIlxccGlfMiIsMl0sWzAsMywiXFxwaV8yIiwwLHsiY3VydmUiOi01fV0sWzAsMiwiXFxwaV8xIiwyLHsiY3VydmUiOjN9XSxbMCwxLCJcXGlvdGFfMSBcXHBpXzEgKyBcXGlvdGFfMiBcXHBpXzIiLDAseyJsYWJlbF9wb3NpdGlvbiI6NzAsIm9mZnNldCI6LTF9XV0=
                    \[\begin{tikzcd}[ampersand replacement=\&]
                          C \\
                          \& C \& B \\
                          \& A
                          \arrow["\id"', shift right, from=1-1, to=2-2]
                          \arrow["{\pi_1}", from=2-2, to=3-2]
                          \arrow["{\pi_2}"', from=2-2, to=2-3]
                          \arrow["{\pi_2}", curve={height=-30pt}, from=1-1, to=2-3]
                          \arrow["{\pi_1}"', curve={height=18pt}, from=1-1, to=3-2]
                          \arrow["{\iota_1 \pi_1 + \iota_2 \pi_2}"{pos=0.7}, shift left, from=1-1, to=2-2]
                    \end{tikzcd}\]
                }    }
        }
    }
    \definition[Аддитивная категория]{
        Предаддитивная категория с финальным объектом и произведениями (любых двух объектов).
    }
    Из лемм ясно, что это эквивалентно, например, предаддитивной категории с нулевым объектом и бипроизведениями.
    \definition[Ядро стрелки $\phi: A \map B$]{Эквалайзер $\phi$ и $0$.}
    \lemma{
        Если $\cat C$ --- предаддитивная категория, то (ко)эквалайзер $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                                                           A \& B
                                                                           \arrow["\psi"', shift right, from=1-1, to=1-2]
                                                                           \arrow["\phi", shift left, from=1-1, to=1-2]
        \end{tikzcd}$ равен (ко)ядру $\phi - \psi$.
        \provehere{
            $\phi\eps = \psi\eps \iff (\phi - \psi)\eps = 0$. Эквалайзер --- универсальная стрелка с левым свойством, а ядро --- универсальная стрелка с правым свойством.
        }
    }
    \intfact{
        Если произведение совпадает с копроизведением, то операцию сложения на множестве морфизмов можно ввести следующим образом
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJBIl0sWzIsMCwiQiJdLFswLDIsIkIiXSxbMiwyLCJCIl0sWzEsMSwiQSBcXG9wbHVzIEIiXSxbMiwzLCJcXGlkIl0sWzEsMywiXFxpZCIsMl0sWzAsMiwiXFxhbHBoYSJdLFswLDEsIlxcYmV0YSIsMl0sWzAsNCwiKFxcYWxwaGEsXFxiZXRhKSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDQsIlxcaW90YSIsMix7Im9mZnNldCI6MX1dLFs0LDIsIlxccGkiLDIseyJvZmZzZXQiOjF9XSxbNCwxLCJcXHBpIiwwLHsib2Zmc2V0IjotMX1dLFsxLDQsIlxcaW90YSIsMCx7Im9mZnNldCI6LTF9XSxbNCwzLCJcXGlkK1xcaWQiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=small]
              A \&\& B \\
              \& {A \oplus B} \\
              B \&\& B
              \arrow["\id", from=3-1, to=3-3]
              \arrow["\id"', from=1-3, to=3-3]
              \arrow["\alpha", from=1-1, to=3-1]
              \arrow["\beta"', from=1-1, to=1-3]
              \arrow["{(\alpha,\beta)}"{description}, dashed, from=1-1, to=2-2]
              \arrow["\iota"', shift right, from=3-1, to=2-2]
              \arrow["\pi"', shift right, from=2-2, to=3-1]
              \arrow["\pi", shift left, from=2-2, to=1-3]
              \arrow["\iota", shift left, from=1-3, to=2-2]
              \arrow["{\id+\id}"{description}, dashed, from=2-2, to=3-3]
        \end{tikzcd}\quad \then \quad \alpha + \beta \coloneqq (\id + \id)(\alpha,\beta)\]

        Можно проверить, что (если существует нулевой объект) данная операция сложения обладает всеми требуемыми свойствами, и это --- единственный способ её ввести.
    }
    Это любопытно, но вроде бы не имеет практических применений --- всегда удобнее сначала естественным образом ввести сложение на стрелках, а потом проверять, что произведение совпадает с копроизведением.
    \definition[Предабелева категория]{
        Аддитивная категория, в которой у всех морфизмов есть ядро и коядро.
    }
    Понятно, что можно требовать существование эквалайзера и коэквалайзера у всех пар морфизмов с одинаковыми началом и концом.

    Ещё можно требовать существование всех конечных пределов и копределов, так как категория аддитивна, то это опять же эквивалентно.
    \definition[(Ко)нормальный мономорфизм (эпиморфизм)]{
        Он является (ко)эквалайзером (какой-то, неважно какой, пары стрелок).
    }
    \definition[Абелева категория]{
        Предабелева категория, в которой все мономорфизмы нормальны.
    }
    \theorem{\label{epi-mono}
    В абелевой категории любой морфизм $\phi$ представляется в виде $\phi = \mu\eps$, где $\mu$ --- моно, $\eps$ --- эпи, и эпи-моно представление функториально:
    если в левой диаграмме для $\phi$ и $\phi'$ нашли какие-то эпи-моно разложения, то в получившейся правой диаграмме $\exists!$ стрелка посередине.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkEnIl0sWzEsMSwiQiciXSxbMCwxLCJcXHBoaSJdLFsyLDMsIlxccGhpJyJdLFswLDIsIlxcYWxwaGEiLDJdLFsxLDMsIlxcYmV0YSJdXQ==
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJBIl0sWzEsMCwiXFxidWxsZXQiXSxbMCwxLCJBJyJdLFsxLDEsIlxcYnVsbGV0Il0sWzIsMCwiQiJdLFsyLDEsIkIiXSxbMCwxLCJcXGVwcyJdLFsyLDMsIlxcZXBzJyIsMl0sWzAsMiwiXFxhbHBoYSJdLFszLDUsIlxcbXUnIiwyXSxbMSw0LCJcXG11Il0sWzQsNSwiXFxiZXRhIl0sWzEsMywiXFxleGlzdHMhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              {A'} \& {B'}
              \arrow["\phi", from=1-1, to=1-2]
              \arrow["{\phi'}", from=2-1, to=2-2]
              \arrow["\alpha"', from=1-1, to=2-1]
              \arrow["\beta", from=1-2, to=2-2]
        \end{tikzcd}\quad \then \quad\begin{tikzcd}[ampersand replacement=\&]
                                         A \& \bullet \& B \\
                                         {A'} \& \bullet \& B
                                         \arrow["\eps", from=1-1, to=1-2]
                                         \arrow["{\eps'}"', from=2-1, to=2-2]
                                         \arrow["\alpha", from=1-1, to=2-1]
                                         \arrow["{\mu'}"', from=2-2, to=2-3]
                                         \arrow["\mu", from=1-2, to=1-3]
                                         \arrow["\beta", from=1-3, to=2-3]
                                         \arrow["{\exists!}", dashed, from=1-2, to=2-2]
        \end{tikzcd}\]

        \provehere[Доказательство]{
            \indentlemma{\label{kercokerker}
                Для всякой стрелки $\phi$: $\Ker\Coker\Ker\phi = \Ker\phi$.
            }{
            % https://q.uiver.app/#q=WzAsNSxbMCwxLCJcXGJ1bGxldCJdLFswLDAsIlxcYnVsbGV0Il0sWzAsMiwiXFxidWxsZXQiXSxbMSwyLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzEsMCwiXFxLZXJcXHBoaSIsMl0sWzAsMiwiXFxwaGkiLDJdLFswLDMsIlxcQ29rZXJcXEtlclxccGhpIl0sWzQsMCwiXFxLZXJcXENva2VyXFxLZXJcXHBoaSJdLFszLDIsIlxcZXRhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsNCwiXFxlcHNfMiIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzQsMSwiXFxlcHNfMSIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
                \[\begin{tikzcd}[ampersand replacement=\&]
                      \bullet \& \bullet \\
                      \bullet \\
                      \bullet \& \bullet
                      \arrow["\Ker\phi"', from=1-1, to=2-1]
                      \arrow["\phi"', from=2-1, to=3-1]
                      \arrow["\Coker\Ker\phi", from=2-1, to=3-2]
                      \arrow["\Ker\Coker\Ker\phi", from=1-2, to=2-1]
                      \arrow["\eta", dashed, from=3-2, to=3-1]
                      \arrow["{\eps_2}"', shift right, dashed, from=1-1, to=1-2]
                      \arrow["{\eps_1}"', shift right, dashed, from=1-2, to=1-1]
                \end{tikzcd}\]
                \numbers{
                    \item Разместим на диаграмме стрелки $\phi, \Ker\phi, \Coker\Ker\phi$ и $\Ker\Coker\Ker\phi$.
                    \item $\phi \cdot \Ker\phi = 0$, значит, $\phi$ пропускается через $\Coker\Ker\phi$: $\exists! \eta$.
                    \item $\Coker\Ker\phi\cdot\Ker\Coker\Ker\phi = 0$, тогда и $\eta \cdot \Coker\Ker \phi\cdot \Ker\Coker\Ker \phi = 0$, то есть ${\phi \cdot \Ker\Coker\Ker \phi = 0}$.
                    А значит, $\Ker\Coker\Ker\phi$ пропускается через $\Ker\phi$: $\exists! \eps_1$.
                    \item $\Coker\Ker\phi\cdot \Ker\phi = 0$, тогда и $\Ker\phi$ пропускается через $\Ker\Coker\Ker\phi$: $\exists!\eps_2$.
                    \item $\Ker\phi\cdot\eps_1 = \Ker\Coker\Ker\phi \then \Ker \phi \cdot\eps_1 \cdot\eps_2 = \Ker\phi$, и так как ядра определены с точностью до единственного изоморфизма, то $\eps_1\cdot\eps_2 = \id$.
                    \item    Аналогично $\eps_2\cdot\eps_1 = \id$\qedhere
                }
            }
            Для каждой стрелки $\phi$ определим $\mu$ --- моно и $\varepsilon$ --- эпи, такие, что $\phi = \mu\varepsilon$. Положим $\mu \coloneqq \Ker\Coker\phi$, $\varepsilon$ --- то, каким образом пропускается $\phi$:

        % https://q.uiver.app/#q=WzAsNCxbMSwwLCJCIl0sWzIsMCwiXFxidWxsZXQiXSxbMCwwLCJBIl0sWzEsMSwiXFxidWxsZXQiXSxbMCwxLCJcXENva2VyXFxwaGkiXSxbMiwwLCJcXHBoaSJdLFsyLDMsIlxcZXhpc3RzIVxcdmFyZXBzaWxvbiIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDAsIlxcbXUiLDJdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  A \& B \& \bullet \\
                  \& \bullet
                  \arrow["\Coker\phi", from=1-2, to=1-3]
                  \arrow["\phi", from=1-1, to=1-2]
                  \arrow["{\exists!\varepsilon}"', dashed, from=1-1, to=2-2]
                  \arrow["\mu"', from=2-2, to=1-2]
            \end{tikzcd}\]
            $\mu$, как ядро стрелки --- моно. $\varepsilon$ --- эпи (упражнение).

            Теперь проверим функториальность.
            Пусть имеются два произвольных эпи-моно разложения двух произвольных стрелок, докажем, что $\exists!\psi$, делающая диаграмму коммутативной.
% https://q.uiver.app/#q=WzAsOCxbMiwwLCJcXGJ1bGxldCJdLFs0LDEsIkInIl0sWzAsMSwiQSciXSxbMCwwLCJBIl0sWzQsMCwiQiJdLFsyLDEsIlxcYnVsbGV0Il0sWzUsMCwiXFxidWxsZXQiXSxbNSwxLCJcXGJ1bGxldCJdLFsyLDUsIlxcdmFyZXBzaWxvbiciLDJdLFs1LDEsIlxcbXUnIiwyXSxbMywwLCJcXHZhcmVwc2lsb24iXSxbMCw0LCJcXG11Il0sWzMsMiwiXFxhbHBoYSIsMl0sWzQsMSwiXFxiZXRhIl0sWzQsNiwiXFxDb2tlclxccGhpIiwwLHsibGFiZWxfcG9zaXRpb24iOjQwfV0sWzEsNywiXFxDb2tlclxcbXUnIiwyLHsibGFiZWxfcG9zaXRpb24iOjQwfV0sWzYsNywiXFxldGEiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCw1LCJcXGV4aXN0cyFcXHBzaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dLFszLDQsIlxccGhpIiwwLHsiY3VydmUiOi0zfV0sWzIsMSwiXFxwaGknIiwyLHsiY3VydmUiOjN9XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  A \&\& \bullet \&\& B \& \bullet \\
                  {A'} \&\& \bullet \&\& {B'} \& \bullet
                  \arrow["{\varepsilon'}"', from=2-1, to=2-3]
                  \arrow["{\mu'}"', from=2-3, to=2-5]
                  \arrow["\varepsilon", from=1-1, to=1-3]
                  \arrow["\mu", from=1-3, to=1-5]
                  \arrow["\alpha"', from=1-1, to=2-1]
                  \arrow["\beta", from=1-5, to=2-5]
                  \arrow["\Coker\phi"{pos=0.4}, from=1-5, to=1-6]
                  \arrow["{\Coker\mu'}"'{pos=0.4}, from=2-5, to=2-6]
                  \arrow["\eta", dashed, from=1-6, to=2-6]
                  \arrow["{\exists!\psi}", dotted, from=1-3, to=2-3]
                  \arrow["\phi", curve={height=-18pt}, from=1-1, to=1-5]
                  \arrow["{\phi'}"', curve={height=18pt}, from=2-1, to=2-5]
            \end{tikzcd}\]
        \numbers{
            \item $\Coker\mu'\cdot\mu'\cdot\eps'\cdot\alpha = 0$, так как уже $\Coker\mu'\cdot\mu' = 0$.
            Значит, $\Coker\mu' \cdot\beta\cdot\phi = 0$, тогда $\Coker\mu' \cdot \beta$ пропускается (единственным образом) через $\Coker\phi$ --- получаем $\eta$.
            \item Так как $\mu'$ --- моно, а категория абелева, то он --- чьё-то ядро. Cогласно~(\cref{kercokerker}) $\mu' = \Ker\Coker \mu'$.
            \item $\eps$ --- эпи, $0\cdot\eps = (\Coker\phi \cdot \mu)\cdot \eps \then 0 = \Coker\phi \cdot \mu$.
            \item Тогда $\eta \cdot \Coker\phi\cdot \mu = 0$, то есть $\Coker\mu' \cdot \beta\mu = 0$, и $\beta\mu$ единственным образом пропускается через $\Ker\Coker\mu' = \mu'$ --- получается $\psi$.
        \item По построению $\psi$: $\beta\mu = \mu'\psi$, надо ещё проверить коммутативность левого квадрата.
            Действительно, так как $\mu'$ --- моно, то $\mu'(\psi\eps) = \mu'(\eps'\alpha) \then \psi\eps = \eps'\alpha$.
        }
        }
    }
    \fact{
        Функториальность, заявленная в~(\cref{epi-mono}), в частности говорит, что такое разложение стрелки единственно с точностью до единственного изоморфизма.
        \provehere{
            Пусть $\phi = \mu\eps = \mu'\eps'$ для разных мономорфизмов $\mu, \mu'$ и эпиморфизмов $\eps, \eps'$.
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJBIl0sWzEsMCwiQyJdLFswLDEsIkEnIl0sWzEsMSwiQyciXSxbMiwwLCJCIl0sWzIsMSwiQiJdLFswLDEsIlxcZXBzIl0sWzIsMywiXFxlcHMnIiwyXSxbMCwyLCJcXGlkX0EiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifX19XSxbMyw1LCJcXG11JyIsMl0sWzEsNCwiXFxtdSJdLFs0LDUsIlxcaWRfQiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFsxLDMsIlxcZXhpc3RzIVxccHNpIiwwLHsib2Zmc2V0IjotMiwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsMSwiXFxleGlzdHMhXFxwaGkiLDAseyJvZmZzZXQiOi0yLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  A \& C \& B \\
                  {A'} \& {C'} \& B
                  \arrow["\eps", from=1-1, to=1-2]
                  \arrow["{\eps'}"', from=2-1, to=2-2]
                  \arrow["{\id_A}"', tail reversed, from=1-1, to=2-1]
                  \arrow["{\mu'}"', from=2-2, to=2-3]
                  \arrow["\mu", from=1-2, to=1-3]
                  \arrow["{\id_B}", tail reversed, from=1-3, to=2-3]
                  \arrow["{\exists!\psi}", shift left=2, dashed, from=1-2, to=2-2]
                  \arrow["{\exists!\phi}", shift left=2, dashed, from=2-2, to=1-2]
            \end{tikzcd}\]
            Согласно функториальности, найдутся $\phi$ и $\psi$, такие, что диаграмма выше коммутативна.
            Но тогда $\phi\psi = \id_C$, так как они оба удовлетворяют универсальному свойству~(\cref{epi-mono}): по отношению к двум одинаковым разложениям $\phi = \eps\mu$.
            Аналогично $\psi\phi = \id_{C'}$.
        }
    }
\end{document}
