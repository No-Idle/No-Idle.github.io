\documentclass[a4paper]{report}

\usepackage{../mathstemplate}

\date{IV семестр, весна 2024 г.}
\title{Алгебра. Неофициальный конспект}
\author{Лектор: Алексей Владимирович Степанов\\ Конспектировал Леонид Данилевич}

\begin{document}
    \shorthandoff{"}
    \maketitle
    \tableofcontents
    \newpage
    \setcounter{lection}{0}


    \chapter{Гомологическая алгебра}
    \newlection{12 февраля 2024 г.}


    \section{Абелевы категории}
    Напомним некоторые определения из предыдущей лекции.
    \definition[Предаддитивная категория $\cat{A}$]{
        $\forall A, B \in \cat{A}: \Mor_{\cat{A}}(A, B)$ образует абелеву группу, и везде, где определена, выполнена дистрибутивность: \[\alpha(\beta+\gamma) = \alpha\beta + \alpha\gamma \qquad (\beta + \gamma)\alpha = \beta\alpha + \gamma\alpha\]
    }
    \definition[Бипроизведение $A, B \in \cat A$]{ Такая диаграмма $\begin{tikzcd}[ampersand replacement=\&]
                                                                        A \& C \& B
                                                                        \arrow["{i_1}"', shift right, from=1-1, to=1-2]
                                                                        \arrow["{\pi_1}"', shift right, from=1-2, to=1-1]
                                                                        \arrow["{\pi_2}", shift left, from=1-2, to=1-3]
                                                                        \arrow["{i_2}", shift left, from=1-3, to=1-2]
    \end{tikzcd}$, что
    \numbers{
        \item $\pi_1i_1 = \id_A$.
        \item $\pi_2i_2 = \id_B$.
        \item $ i_2 \pi_2+ i_1\pi_1  = \id_C$.
        \item $\pi_2i_1 = 0$.
        \item $\pi_1i_2 = 0$.
    }
    }
    \definition[Аддитивная категория]{
        Предаддитивная категория с финальным объектом и произведениями (любых двух объектов).
    }
    Эквивалентно, существуют инициальный объект и копроизведения, эквивалентно существуют нулевой объект и бипроизведения.
    \definition[Предабелева категория]{
        Аддитивная категория, в которой у всех морфизмов есть ядро и коядро.
    }
    \definition[(Ко)нормальный мономорфизм (эпиморфизм)]{
        Он является (ко)эквалайзером (какой-то, неважно какой, пары стрелок).
    }
    \definition[Абелева категория]{
        Предабелева категория, в которой все мономорфизмы нормальны.
    }
    Пусть $\cat C$ --- категория.
    Вспомним про категорию стрелок $\cat{Arr}\cat{C}$, в которой объекты --- стрелки из $\Mor(\cat C)$, множество морфизмов между $\phi, \psi$ --- это\[\Mor_{\cat{Arr}_{\cat{C}}}(\phi, \psi) = \defset{(\alpha, \beta)}{\alpha: \source(\phi) \map \source(\psi), \beta: \target(\phi) \map \target(\psi), \beta \phi = \psi \alpha}\]
    то есть множество коммутативных диаграмм следующего вида:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzAsMSwiXFxidWxsZXQiXSxbMSwxLCJcXGJ1bGxldCJdLFswLDEsIlxccGhpIl0sWzIsMywiXFxwc2kiXSxbMCwyLCJcXGFscGhhIl0sWzEsMywiXFxiZXRhIl1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          \bullet \& \bullet \\
          \bullet \& \bullet
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["\psi", from=2-1, to=2-2]
          \arrow["\alpha", from=1-1, to=2-1]
          \arrow["\beta", from=1-2, to=2-2]
    \end{tikzcd}\]
    Далее будем обозначать за $\ker f$ ядро стрелки, как уравнитель стрелки и нуля, а за $\Ker f \coloneqq \source(\ker f)$ --- объект (в конкретных категориях типа $\modR{R}$ это докатегорное понятие ядра --- подмодуль без стрелки-вложения).
    \lemma{\label{ker-is-functor}
        $\ker, \coker$ --- функторы $\cat{Arr} \cat A \map \cat{Arr} \cat A$ (то есть лемма утверждает, что можно определить действие не только на объектах, но и на морфизмах).
        \provehere{
            Достаточно доказать для ядер, для коядер двойственно.

            Определим действие $\ker$ на морфизмах.
            Пусть $(\alpha, \beta)$ --- морфизм между $f, f' \in \cat{Arr}\cat A$:
        % https://q.uiver.app/#q=WzAsNixbMSwwLCJBIl0sWzEsMSwiQSciXSxbMiwwLCJCIl0sWzIsMSwiQiciXSxbMCwwLCJcXEtlciBmIl0sWzAsMSwiXFxLZXIgZiciXSxbMCwyLCJmIl0sWzEsMywiZiciXSxbMCwxLCJcXGFscGhhIl0sWzIsMywiXFxiZXRhIl0sWzQsMCwiXFxrZXIgZiJdLFs1LDEsIlxca2VyIGYnIl0sWzQsNSwiXFxleGlzdHMhXFxwaGkiLDAseyJsYWJlbF9wb3NpdGlvbiI6NDAsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\Ker f}
                  \& A \& B \\
                  {\Ker f'} \& {A'} \& {B'}
                  \arrow["f", from=1-2, to=1-3]
                  \arrow["{f'}", from=2-2, to=2-3]
                  \arrow["\alpha", from=1-2, to=2-2]
                  \arrow["\beta", from=1-3, to=2-3]
                  \arrow["{\ker f}", from=1-1, to=1-2]
                  \arrow["{\ker f'}", from=2-1, to=2-2]
                  \arrow["{\exists!\phi}"{pos=0.4}, dashed, from=1-1, to=2-1]
            \end{tikzcd}\]
            Тогда $f \cdot \ker f = 0$, откуда $\beta \cdot f \cdot \ker f = 0$, а из коммутативности $f' \cdot \alpha \cdot \ker f = 0$.
            По универсальному свойству ядра $\exists !\phi: \ker f' \cdot \phi = \alpha \cdot \ker f$, положим $\ker(\alpha, \beta) = (\phi, \alpha)$.

            Далее несложно проверить, что данное определение сохраняет композицию и $\id$.
        }
    }
    \definition[Точный функтор]{Функтор, сохраняющий ядра и коядра.}
    \intfact[Теорема Фрейда --- Митчелла (Freyd --- Mitchell)] {\label{mitchell}
    Для любой малой абелевой категории $\cat{A}$: $\exists R \in \cat{Ring}$ (необязательно коммутативное кольцо с единицей) и строгий, полный, точный функтор $\cat{A} \map \modR{R}$.
    }
    Иными словами, всякую абелеву категорию можно себе мыслить, как \emph{полную подкатегорию} в категории $\modR{R}$ (то есть категорию $\cat C$, в которой $\Obj \cat C \subset \Obj \modR{R}$, и $\forall A, B \in \Obj\cat C: \Mor_{\cat C}(A, B) = \Mor_{\modR{R}}(A, B)$) для некоторого кольца $R$.
    Неформально это означает, что все факты, которые можно доказать для категории модулей, будут верны и для данной абелевой категории.
    Мы часто будем использовать теорему Фрейда --- Митчелла, чтобы доказать какой-то факт про все абелевы категории, используя конкретность категории модулей.
    \proposal{
        Для всякого морфизма $f: A \map B$ найдётся пунктирная стрелка, делающая диаграмму коммутативной.
% https://q.uiver.app/#q=WzAsNixbMCwwLCJcXEtlciBmIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMywwLCJcXENvS2VyIGYiXSxbMSwxLCJcXENvS2VyIFxca2VyIGYiXSxbMiwxLCJcXEtlciBcXGNva2VyIGYiXSxbMSwyLCJmIl0sWzAsMSwiXFxrZXIgZiJdLFsyLDMsIlxcY29rZXIgZiJdLFsxLDQsIlxcY29rZXJcXGtlciBmIiwyXSxbNSwyLCJcXGtlciBcXGNva2VyIGYiLDJdLFs0LDUsIlxcZXhpc3RzISIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Ker f}
              \& A \& B \& {\CoKer f} \\
              \& {\CoKer \ker f} \& {\Ker \coker f}
              \arrow["f", from=1-2, to=1-3]
              \arrow["{\ker f}", from=1-1, to=1-2]
              \arrow["{\coker f}", from=1-3, to=1-4]
              \arrow["{\coker\ker f}"', from=1-2, to=2-2]
              \arrow["{\ker \coker f}"', from=2-3, to=1-3]
              \arrow["{\exists!}", dashed, from=2-2, to=2-3]
        \end{tikzcd}\]
        Более того, в абелевой категории эта стрелка --- изоморфизм.
        \provehere{
            Само построение пунктирной стрелки легко получается из универсальных свойств ядра и коядра, а доказательство того, что это --- изо --- непростое.

            Из теоремы Фрейда --- Митчелла это очевидно: для $f: A \map B$: с одной стороны, $\CoKer \ker f = A/\Image(\ker f) = A/\Ker f$, а с другой стороны $\Ker \coker f = \Ker(\coker f) = \Image(A)$, и, конечно, $\Image(A) \cong A/\Ker(f)$.

            Также это можно обосновать, исходя из эпи-моно разложения, полученного на прошлой лекции.
            Там было построено, что $f = \eps \cdot \ker \coker f$ (для какого-то эпиморфизма $\eps$) --- эпи-моно разложение.
        Двойственно $f = \mu \cdot \coker\ker f$ (для какого-то мономорфизма $\mu$) --- тоже эпи-моно разложение, и дальше можно воспользоваться функториальностью эпи-моно разложения:
        % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGJ1bGxldCJdLFsyLDAsIlxcYnVsbGV0Il0sWzAsMSwiXFxidWxsZXQiXSxbMiwxLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzEsMSwiXFxidWxsZXQiXSxbMCw0LCJcXHZhcmVwc2lsb24iXSxbNCwxLCJcXGtlclxcY29rZXIgZiJdLFsyLDUsIlxcY29rZXJcXGtlciBmIl0sWzUsMywiXFxtdSJdLFs0LDUsIlxceGkiLDIseyJvZmZzZXQiOjEsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDQsIlxcemV0YSIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiXFxpZCIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFsxLDMsIlxcaWQiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \bullet \& \bullet \& \bullet \\
                  \bullet \& \bullet \& \bullet
                  \arrow["\varepsilon", from=1-1, to=1-2]
                  \arrow["\id"', tail reversed, from=1-1, to=2-1]
                  \arrow["{\ker\coker f}", from=1-2, to=1-3]
                  \arrow["\xi"', shift right, dashed, tail reversed, no head, from=1-2, to=2-2]
                  \arrow["\id", tail reversed, from=1-3, to=2-3]
                  \arrow["{\coker\ker f}", from=2-1, to=2-2]
                  \arrow["\zeta"', shift right, dashed, tail reversed, no head, from=2-2, to=1-2]
                  \arrow["\mu", from=2-2, to=2-3]
            \end{tikzcd}\]
            В его силу найдутся такие стрелки $\xi$ и $\zeta$, что все квадраты коммутативны.
            Значит, $\xi$ подходит в качестве пунктирной стрелки в утверждении предложения.
            При этом $\xi$ --- изо, так как $\xi\zeta = \id$ (из коммутативности квадратов $\xi \cdot \coker\ker f = \eps$ и $\zeta \cdot \xi \cdot \coker \ker f = \zeta \cdot \eps = \coker\ker f$, но $\coker \ker f$ --- эпиморфизм, поэтому $\zeta \cdot \xi = \id$) и $\zeta\xi = \id$ (аналогично)
        }
    }
    \lemma{\label{when-ab} Пусть $\cat C$ --- полная подкатегория в абелевой категории $\cat A$. Следующие условия равносильны
    \bullets{
        \item $\cat C$ является абелевой.
        \item \bullets{
            \item $0_{\cat A} \in \cat C$, здесь, как обычно, $0_{\cat A}$ --- нулевой объект категории $\cat A$.
            \item $\cat C$ содержит бипроизведение любых двух своих объектов.
            \item Ядра и коядра (взятые в $\cat A$) любых морфизмов из $\cat C$ лежат в $\cat C$.
        }
    }
    \provewthen{
        Достаточно проверить все свойства определения абелевой категории.
        Они все сразу следуют, в частности, любой мономорфизм $\mu$ в $\cat C$ нормален, так как он является ядром $\coker \mu$ (что следует либо из леммы, доказанной при построении эпи-моно разложения, либо из теоремы Фрейда --- Митчелла).
    }{
        Чуть сложнее, доказывать не будем (и использовать тоже).
    }
    }
    \section{Компл$\acute{\text{е}}$ксы}
    Если противное не оговорено, то всё происходит в абелевой категории $\cat A$, большими буквами обозначены объекты данной категории, маленькими --- морфизмы.
    \definition[Компл$\acute{\text{е}}$кс]{
        Такая диаграмма, что $\forall k \in \Z: d_k \cdot d_{k+1} = 0$.
        % https://q.uiver.app/#q=WzAsNSxbMSwwLCJDX3tuKzF9Il0sWzIsMCwiQ19uIl0sWzMsMCwiQ197bi0xfSJdLFswLDAsIlxcY2RvdHMiXSxbNCwwLCJcXGNkb3RzIl0sWzMsMCwiZF97bisxfSJdLFswLDEsImRfbiJdLFsxLDIsImRfe24tMX0iXSxbMiw0LCJkX3tuLTJ9Il1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {C_{n+1}} \& {C_n} \& {C_{n-1}} \& \cdots
              \arrow["{d_{n+1}}", from=1-1, to=1-2]
              \arrow["{d_n}", from=1-2, to=1-3]
              \arrow["{d_{n-1}}", from=1-3, to=1-4]
              \arrow["{d_{n-2}}", from=1-4, to=1-5]
        \end{tikzcd}\]
    }
    Альтернативно, комплекс можно рассматривать, как функтор из категории $(\Z, \ge)$ (полученной из частично упорядоченного множества) в $\cat A$ (при котором образ композиции любых двух нетождественных морфизмов нулевой).
    Таким образом, комплексы --- полная подкатегория в категории этих функторов.

    Ещё один, следующий, взгляд на комплексы работает только для конкретной категории, уже вложенной в $R$-модули: в абстрактной категории объекты не сравнимы на $\subset$.
    \definition[Градуированный объект]{
        $C_{\bullet} = \bigoplus\limits_{n \in \Z}C_n$ с морфизмом $d: C_\bullet \map C_\bullet$, таким, что $d(C_n) \subset C_{n+p}$ для некоторой фиксированной \emph{степени объекта} $p$ (чаще всего она равна $\pm1$).
    }
    Так же, как видно из определения, в данной категории должны быть счётные бипроизведения (прямые суммы), иначе градуированного объекта может не быть.
    \definition[Дифференциальный модуль]{
        Градуированный объект $(C_\bullet, d)$ со свойством $d^2 = 0$.
    }
    \definition[Комплекс]{ Дифференциальный модуль степени $-1$. }
    При развороте стрелок получается дифференциальный модуль степени $+1$, также известный, как \emph{кокомплекс}:
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiQ157bisxfSJdLFsyLDAsIkNee259Il0sWzMsMCwiQ157bi0xfSJdLFs0LDAsIlxcY2RvdHMiXSxbMSwwLCJkXntuKzJ9IiwyXSxbMiwxLCJkXntuKzF9IiwyXSxbMywyLCJkXm4iLDJdLFs0LDMsImRee24tMX0iLDJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          \cdots \& {C^{n+1}} \& {C^{n}} \& {C^{n-1}} \& \cdots
          \arrow["{d^{n+2}}"', from=1-2, to=1-1]
          \arrow["{d^{n+1}}"', from=1-3, to=1-2]
          \arrow["{d^n}"', from=1-4, to=1-3]
          \arrow["{d^{n-1}}"', from=1-5, to=1-4]
    \end{tikzcd}\]
    \precaution{
        У кокомплекса несколько другая нумерация стрелок, но мы их практически не будем использовать.
    }
    \definition[Сдвиг комплекса $(C_\bullet, d)$ на $p \in \Z$]{
        Комплекс $(C[p]_\bullet, d[p])$, где $C[p]_n = C_{n+p}$ и $d[p]_n = d_{n+p}$.
    }
    Иногда при сдвиге комплекса определяют $d[p]_n = (-1)^p d_{n+p}$, но мы так делать не будем.
    \newlection{19 февраля 2024 г.}
    \subsection{Морфизмы комплексов}
    \definition[Морфизм дифференциальных модулей $\bigoplus A_n \map \bigoplus B_n$]{
        Такое $f: \bigoplus A_n \map \bigoplus B_n$, что $f(A_n) \subset B_n$, и диаграммы коммутативны:
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBX3tuKzF9Il0sWzEsMCwiQV9uIl0sWzAsMSwiQl97bisxfSJdLFsxLDEsIkJfbiJdLFswLDEsImRfbl5BIl0sWzIsMywiZF9uXkIiXSxbMCwyLCJmIl0sWzEsMywiZiJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {A_{n+1}}
              \& {A_n} \\
              {B_{n+1}} \& {B_n}
              \arrow["{d_n^A}", from=1-1, to=1-2]
              \arrow["{d_n^B}", from=2-1, to=2-2]
              \arrow["f", from=1-1, to=2-1]
              \arrow["f", from=1-2, to=2-2]
        \end{tikzcd}\]
        На языке абелевых категорий, надо рассматривать не одно отображение $f$, так как отношение $f(A_n) \subset B_n$ не выражается, а серию морфизмов $\{f_n: A_n \map B_n\}_{n\in\Z}$.
    }
    Для всякого морфизма $f$ коммутативна диаграмма в категории комплексов:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBWzFdIl0sWzEsMCwiQSJdLFswLDEsIkJbMV0iXSxbMSwxLCJCIl0sWzAsMSwiZF5BIl0sWzIsMywiZF5CIl0sWzAsMiwiZlsxXSJdLFsxLDMsImYiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {A[1]}
          \& A \\
          {B[1]} \& B
          \arrow["{d^A}", from=1-1, to=1-2]
          \arrow["{d^B}", from=2-1, to=2-2]
          \arrow["{f[1]}", from=1-1, to=2-1]
          \arrow["f", from=1-2, to=2-2]
    \end{tikzcd}\]
    Если рассматривать комплексы, как функторы из категории $(\Z, \ge)$, то морфизмы между комплексами --- естественные преобразования между функторами.
    \theorem{
        Категория комплексов абелева.
        \provehere{
            \indentlemma{
                Если $\cat C$ --- малая категория, $\cat A$ --- абелева, то $\Func(\cat C, \cat A)$ --- тоже абелева категория.
            }{
                Морфизмы в данной категории --- естественные преобразования между функторами, и их сложение устроено поточечно: $\forall \eta, \zeta: \cat F \map \cat G, \forall A \in \cat A: (\eta + \zeta)_A = \eta_A + \zeta_A$.

                Нулевой объект --- функтор $\0$, сопоставляющий каждому объекту $0_{\cat A}$, и каждой стрелке --- нуль-стрелку.

                Для двух функторов $\cat F, \cat G$ имеется их бипроизведение: $(\cat F \oplus \cat G)(C) = \cat F(C) \oplus \cat G(C)$.

                Если $\eta \in \Mor_{\Func(\cat C, \cat A)}(\cat F, \cat G)$ (то есть $\eta$ --- естественное преобразование $\cat F \map \cat G$), то $(\Ker \eta)(C) = \Ker (\eta_C)$.

                $\ker$ определяется аналогично лемме~(\cref{ker-is-functor}).
                Аналогично с коядрами.

                Далее по-хорошему надо проверить, что выполняются все универсальные свойства, и что любой мономорфизм нормален, но мы этого делать не будем.
            }
            Ссылаемся на~(\cref{when-ab}), рассматривая категорию комплексов, как полную подкатегорию в категории функторов.
            Нулевой объект --- комплекс, состоящий из нулей --- в категории комплексов имеется.
            Бипроизведением комплексов $A_\bullet$ и $B_\bullet$ является комплекс $(A \oplus B)_\bullet$, у которого $(A \oplus B)_n = A_n \oplus B_n$, и $d^{A \oplus B}_n = d^A_n \oplus d^B_n$:
        % https://q.uiver.app/#q=WzAsMTUsWzEsMCwiQV97bisxfSJdLFsyLDAsIkFfbiJdLFszLDAsIkFfe24tMX0iXSxbMCwwLCJcXGNkb3RzIl0sWzQsMCwiXFxjZG90cyJdLFswLDEsIlxcY2RvdHMiXSxbMSwxLCJCX3tuKzF9Il0sWzIsMSwiQl9uIl0sWzMsMSwiQl97bi0xfSJdLFs0LDEsIlxcY2RvdHMiXSxbMSwyLCJBX3tuKzF9XFxvcGx1cyBCX3tuKzF9Il0sWzIsMiwiQV9uIFxcb3BsdXMgQl9uIl0sWzMsMiwiQV97bi0xfSBcXG9wbHVzIEJfe24tMX0iXSxbMCwyLCJcXGNkb3RzIl0sWzQsMiwiXFxjZG90cyJdLFszLDBdLFswLDEsImReQV9uIl0sWzEsMiwiZF5BX3tuLTF9Il0sWzIsNF0sWzUsNl0sWzYsNywiZF5CX24iXSxbNyw4LCJkXkJfe24tMX0iXSxbOCw5XSxbMTAsMTEsImRee0EgXFxvcGx1cyBCfV9uIl0sWzExLDEyLCJkXntBIFxcb3BsdXMgQn1fe24tMX0iXSxbMTMsMTBdLFsxMiwxNF1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \cdots \& {A_{n+1}} \& {A_n} \& {A_{n-1}} \& \cdots \\
                  \cdots \& {B_{n+1}} \& {B_n} \& {B_{n-1}} \& \cdots \\
                  \cdots \& {A_{n+1}\oplus B_{n+1}} \& {A_n \oplus B_n} \& {A_{n-1} \oplus B_{n-1}} \& \cdots
                  \arrow[from=1-1, to=1-2]
                  \arrow["{d^A_n}", from=1-2, to=1-3]
                  \arrow["{d^A_{n-1}}", from=1-3, to=1-4]
                  \arrow[from=1-4, to=1-5]
                  \arrow[from=2-1, to=2-2]
                  \arrow["{d^B_n}", from=2-2, to=2-3]
                  \arrow["{d^B_{n-1}}", from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
                  \arrow["{d^{A \oplus B}_n}", from=3-2, to=3-3]
                  \arrow["{d^{A \oplus B}_{n-1}}", from=3-3, to=3-4]
                  \arrow[from=3-1, to=3-2]
                  \arrow[from=3-4, to=3-5]
            \end{tikzcd}\]
            Если $d_{n-1}^A \cdot d_n^A = 0$, и $d_{n-1}^B \cdot d_n^B = 0$, то (из теоремы Митчелла уж точно очевидно) $d_{n-1}^{A \oplus B} \cdot d_n^{A \oplus B} = 0$.

            Ядра тоже являются комплексами, так как на языке конкретных категорий это просто подмодули.
            Двойственно с коядрами.
        }
    }


    \section{Гомологии}
    Дифференциал $d$ по совместительству является морфизмом комплексов $d: C[1] \map C$ (по-хорошему, $C[1]_\bullet \map C_\bullet$, но точку будем опускать):
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiQ197bisxfSJdLFsyLDAsIkNfbiJdLFszLDAsIlxcY2RvdHMiXSxbMCwxLCJcXGNkb3RzIl0sWzEsMSwiQ19uIl0sWzIsMSwiQ197bi0xfSJdLFszLDEsIlxcY2RvdHMiXSxbMCwxXSxbMSwyLCJkX24iXSxbMiwzXSxbNiw3XSxbNSw2LCJkX3tuLTF9Il0sWzQsNV0sWzEsNSwiZF9uIl0sWzIsNiwiZF97bi0xfSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          \cdots \& {C_{n+1}} \& {C_n} \& \cdots \\
          \cdots \& {C_n} \& {C_{n-1}} \& \cdots
          \arrow[from=1-1, to=1-2]
          \arrow["{d_n}", from=1-2, to=1-3]
          \arrow[from=1-3, to=1-4]
          \arrow[from=2-3, to=2-4]
          \arrow["{d_{n-1}}", from=2-2, to=2-3]
          \arrow[from=2-1, to=2-2]
          \arrow["{d_n}", from=1-2, to=2-2]
          \arrow["{d_{n-1}}", from=1-3, to=2-3]
    \end{tikzcd}\]
    Ниже мы по произвольному комплексу $C$ строим новые комплексы.
    \definition[Циклы]{Комплекс $Z = Z(C) \bydef \Ker d[-1]$.}
    В конкретной категории в $n$-й компоненте комплекса циклов лежит подмодуль $C_n$, при взятии дифференциала обращающийся в нуль: $Z(C)_n = \Ker d[-1]_n = \Ker d_{n-1} \subset C_{n}$.
    \definition[Границы]{Комплекс $B = B(C) \bydef \Image d$.}
    В конкретной категории в $n$-й компоненте комплекса границ лежит подмодуль $C_n$, являющийся образом дифференциала: $B(C)_n = \Image d_n \subset C_{n}$.

    Определения циклов и границ имеют смысл и для абстрактных абелевых категорий.
    В них, \emph{образ} --- это ядро коядра: $\Image \phi \bydef \Ker(\coker \phi)$.
    В абелевой категории канонически $\Image \phi \cong \CoIm \phi \bydef \CoKer(\ker \phi)$, так что образ можно определять и так.

    На языке конкретных категорий, так как $d^2 = 0$, то $B_n \subset Z_n$, и можно определить фактормодуль $H_n \coloneqq Z_n/B_n$ --- \emph{гомологии}.

    То же самое можно сказать на языке универсальных свойств, хотя в будущем мы, ссылаясь на теорему Митчелла, будем всё писать исключительно в терминах элементов.
    \provehere[Построение $H$ в терминах универсальных свойств]{Пусть $C$ --- произвольный комплекс, $Z = Z(C)$, $B = B(C)$.
    Изобразим следующую диаграмму в категории комплексов, где $z: Z(C) \map C$ вкладывает ядра, а $\coker z = b: C[1] \map B$ --- факторизация по этому вложению:
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJaWzFdIl0sWzEsMCwiQ1sxXSJdLFsxLDEsIkIiXSxbMiwwLCJDIl0sWzMsMCwiQ1stMV0iXSxbMiwxLCJaIl0sWzMsMSwiSCJdLFs0LDEsIjAiXSxbMyw0LCJkWy0xXSJdLFsxLDMsImQiXSxbMSwyLCJiIiwyXSxbMCwxLCJ6WzFdIl0sWzUsMywieiIsMl0sWzEsNSwiXFxhbHBoYSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDUsIlxcYmV0YSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dLFs1LDYsIlxcY29rZXJcXGJldGEiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbNiw3LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {Z[1]}
          \& {C[1]} \& C \& {C[-1]} \\
          \& B \& Z \& H \& 0
          \arrow["{d[-1]}", from=1-3, to=1-4]
          \arrow["d", from=1-2, to=1-3]
          \arrow["b"', from=1-2, to=2-2]
          \arrow["{z[1]}", from=1-1, to=1-2]
          \arrow["z"', from=2-3, to=1-3]
          \arrow["\alpha"{description}, dashed, from=1-2, to=2-3]
          \arrow["\beta"', dotted, from=2-2, to=2-3]
          \arrow["\coker\beta"', dotted, from=2-3, to=2-4]
          \arrow[dotted, from=2-4, to=2-5]
    \end{tikzcd}\]
%    В частности, последовательность $0 \map Z[1] \map C[1] \map B \map 0$ точна~(\cref{short-exact}).
%
        Так как $d[-1] \cdot d = 0$, то можно пропуститься через ядро: $\exists! \alpha: z \cdot \alpha = d$.

        Далее, $z \cdot \alpha \cdot z[1] = d \cdot z[1] = 0$, а так как $z$ --- моно, то $\alpha \cdot z[1] = 0$.
        Значит, можно пропуститься через коядро, то есть $\exists ! \beta: \beta b = \alpha$.
        Далее $H$ определяется, как коядро $\beta$.
    }
    Взятие циклов, границ и гомологий функториально (то есть циклы, границы и даже гомологии являются функторами, бьющими из категории комплексов в неё же).
    Например, для морфизма комплексов образуется соответствующий морфизм комплексов их гомологий.
    Это сразу следует из функториальности взятия ядер и коядер.
    \corollary{
        В комплексах $Z, B, H$ нулевые дифференциалы.
        \provehere{
            Из диаграммы следует, что в комплексе $Z$ нулевые дифференциалы.
            Это неудивительно --- $Z$, как комплекс ядер, имеет дифференциалы, получаемые ограничением $d_n$, на при ограничении $d_n$ на своё ядро получается нуль:
        % https://q.uiver.app/#q=WzAsOCxbMSwwLCJcXEtlcihkX24pIl0sWzIsMCwiXFxLZXIoZF97bi0xfSkiXSxbMSwxLCJDX3tuKzF9Il0sWzIsMSwiQ19uIl0sWzAsMSwiXFxjZG90cyJdLFszLDEsIlxcY2RvdHMiXSxbMCwwLCJcXGNkb3RzIl0sWzMsMCwiXFxjZG90cyJdLFsyLDMsImRfbiJdLFs2LDBdLFswLDFdLFsxLDddLFszLDVdLFs0LDJdLFswLDJdLFsxLDNdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \cdots \& {\Ker(d_n)} \& {\Ker(d_{n-1})} \& \cdots \\
                  \cdots \& {C_{n+1}} \& {C_n} \& \cdots
                  \arrow[from=1-1, to=1-2]
                  \arrow[from=1-2, to=1-3]
                  \arrow[from=1-2, to=2-2]
                  \arrow[from=1-3, to=1-4]
                  \arrow[from=1-3, to=2-3]
                  \arrow[from=2-1, to=2-2]
                  \arrow["{d_n}", from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
            \end{tikzcd}\]
            $B$ состоит из подмодулей в $Z$, $H$ --- из фактормодулей, понятно, что там дифференциалы тоже нулевые.
        }
    }
    \subsection{Гомологии окружности}
    \bullets{
        \item Рассмотрим окружность, как симплициальное множество, склеенное из двух нульмерных клеток-точек $\{a, b\}$, и двух одномерных клеток-отрезков $\{x, y\}$:
        \begin{tikzpicture}[baseline=-4]
            \draw(0,0) circle[radius=0.5];
            \fill[blue] (-0.5,0) circle (1pt) node[left] {$a$};
            \fill[blue] (0.5,0) circle (1pt) node[right] {$b$};
            \node[darkgreen, above] at (0, 0.5) {$x$};
            \node[darkgreen, below] at (0, -0.5) {$y$};
            \draw[darkgreen,->] (-0.05, 0.5) -- (0.05, 0.5);
            \draw[darkgreen,<-] (-0.05, -0.5) -- (0.05, -0.5);
        \end{tikzpicture}

        Построим $C_0 = \Z a + \Z b$ --- свободная абелева группа на $\{a, b\}$, $C_1 = \Z x + \Z y$ --- тоже свободная абелева группа, но на образующих $\{x, y\}$.
        Вместо $\Z$ можно было взять любое другое кольцо.

        Получили так называемый \emph{симплициальный комплекс} для данного разбиения окружности на клетки (все остальные элементы комплекса объявляются нулями):
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCIwIl0sWzEsMCwiQ18xIl0sWzIsMCwiQ18wIl0sWzMsMCwiMCJdLFsyLDNdLFsxLDIsImRfMSJdLFswLDFdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              0 \& {C_1} \& {C_0} \& 0
              \arrow[from=1-3, to=1-4]
              \arrow["{d_1}", from=1-2, to=1-3]
              \arrow[from=1-1, to=1-2]
        \end{tikzcd}\]

        Определим $d_1$, как <<конец минус начало>>: $\all{d_1(x) = b - a,\\ d_1(y) = a - b}$.

        Теперь $\all{Z_0 = C_0 \\ Z_1 = \Z(x + y)} \all{B_0 = \Z(b - a) \\ B_1 = 0}$ и $\all{H_0 = Z_0 / B_0 = (\Z a + \Z b)/\Z(b - a) &\cong \Z \\ H_1 = Z_1/B_1 = \Z(x + y) &\cong \Z}$.
        \item Теперь триангулируем окружность по-другому:
        \begin{tikzpicture}[baseline=-4]
            \draw(0,0) circle[radius=0.5];
            \fill[blue] (-0.25,0.433) circle (1pt) node[left] {$a$};
            \fill[blue] (-0.25,-0.433) circle (1pt) node[left] {$c$};
            \fill[blue] (0.5,0) circle (1pt) node[right] {$b$};
            \node[darkgreen,above,right] at (0.3, 0.5) {$x$};
            \node[darkgreen,below,right] at (0.3, -0.5) {$y$};
            \node[darkgreen,left] at (-0.5, 0) {$z$};
            \draw[darkgreen,->] (-0.5, -0.05) -- (-0.5, 0.05);
            \draw[darkgreen,->] (0.3, 0.4) -- (0.4, 0.3);
            \draw[darkgreen,->] (0.4, -0.3) -- (0.3, -0.4);
        \end{tikzpicture}
        $\all{d_1(x) = b - a,\\ d_1(y) = c - b,\\ d_1(z) =  a - c}$.

        Теперь $\all{Z_0 = C_0 \\ Z_1 = \Z(x + y + z)}$, $\all{B_0 = \Z(b - a) + \Z(c - b) \\ B_1 = 0}$ и $\all{H_0  &\cong \Z \\ H_1 = \Z(x + y + z)/0 &\cong \Z.}$
    }
    Ответ получился тот же самый, и это не случайно --- есть теорема, что сингулярные/симплициальные гомологии (они равны для клеточных пространств) не зависят от триангуляции.
    \exercise{
        Триангулировать сферу, и вычислить гомологии. Дифференциал от треугольника $ABC$ (ориентация --- порядок вершин --- важна) определяют, как его обход вдоль периметра: $AB + BC + CA$.
    }
    \subsection{Длинная точная последовательность гомологий}
    Напомним, что комплекс называется \emph{точным}, если не просто $d_{n} \cdot d_{n+1} = 0$, но и сразу $\Image(d_{n+1}) = \Ker(d_n)$.
    Часто встречаются \emph{короткие точные последовательности} --- последовательности вида $0 \map A \overset{i}\map B \overset{\pi}\map C \map 0$.
    Точность в члене $A$ означает, что $i$ --- моно, точность в члене $C$ означает, что $\pi$ --- эпи, а в члене $B$ --- что $\Image(i) = \Ker(\pi)$, то есть (в элементах) $\forall x \in B: \pi(x) = 0 \iff x \in \Image(i)$.
    \theorem[Длинная точная последовательность гомологий]{\label{long-homology}
        Пусть имеется точная последовательность комплексов $0 \map A' \overset{i}\map A \overset{\pi}\map A'' \map 0$.

        Тогда существует длинная точная последовательность гомологических групп
    % https://q.uiver.app/#q=WzAsNyxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiSCciXSxbMiwwLCJIIl0sWzMsMCwiSCcnIl0sWzQsMCwiSCdbLTFdIl0sWzUsMCwiSFstMV0iXSxbNiwwLCJcXGNkb3RzIl0sWzAsMV0sWzEsMiwiaSJdLFsyLDMsIlxccGkiXSxbMyw0LCJcXGRlbHRhIl0sWzQsNSwiaVstMV0iXSxbNSw2XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {H'} \& H \& {H''} \& {H'[-1]} \& {H[-1]} \& \cdots
              \arrow[from=1-1, to=1-2]
              \arrow["i", from=1-2, to=1-3]
              \arrow["\pi", from=1-3, to=1-4]
              \arrow["\delta", from=1-4, to=1-5]
              \arrow["{i[-1]}", from=1-5, to=1-6]
              \arrow[from=1-6, to=1-7]
        \end{tikzcd}\]
        где связующий морфизм $\delta$ будет построен в доказательстве.

        Более того, это всё функториально: если есть другая короткая точная последовательность, и морфизм между ними, то по отношению к ним найдётся естественный морфизм полученных длинных точных последовательностей гомологий.
        \provehere{
            Для $z \in Z_n''$, обозначим за $[z]$ класс $z$ в $H_n''$.
% https://q.uiver.app/#q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIkFfbiciXSxbMiwwLCJBX24iXSxbMywwLCJBX24nJyJdLFs0LDAsIjAiXSxbMCwxLCIwIl0sWzEsMSwiQV97bi0xfSciXSxbMiwxLCJBX3tuLTF9Il0sWzMsMSwiQScnX3tuLTF9Il0sWzQsMSwiMCJdLFsyLDMsIlxccGlfbiJdLFsyLDcsImRfbiIsMV0sWzYsNywiaV97bi0xfSJdLFs3LDgsIlxccGlfe24tMX0iXSxbOCw5XSxbMyw0XSxbMyw4LCJkX24nJyJdLFsxLDIsImlfbiJdLFsxLDYsImRfbiciLDJdLFswLDFdLFs1LDZdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  0 \& {A_n'} \& {A_n} \& {A_n''} \& 0 \\
                  0 \& {A_{n-1}'} \& {A_{n-1}} \& {A''_{n-1}} \& 0
                  \arrow[from=1-1, to=1-2]
                  \arrow["{i_n}", from=1-2, to=1-3]
                  \arrow["{d_n'}"', from=1-2, to=2-2]
                  \arrow["{\pi_n}", from=1-3, to=1-4]
                  \arrow["{d_n}"{description}, from=1-3, to=2-3]
                  \arrow[from=1-4, to=1-5]
                  \arrow["{d_n''}", from=1-4, to=2-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow["{i_{n-1}}", from=2-2, to=2-3]
                  \arrow["{\pi_{n-1}}", from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
            \end{tikzcd}\]
            Рассуждения ниже обычно называют \emph{диаграммный поиск}.
            \comment{Кажется, это невозможно ни записывать, ни читать, но для полной картины пусть будет.}

            \bullets{
                \item Для начала построим $\delta: H_n'' \map H_{n-1}'$.
                \bullets{
                    \item Выберем $z \in \Ker(d_n'')$, пусть $y \in \pi_n^{-1}(z)$ --- произвольный прообраз.
                    $\bar{y} \coloneqq d_n(y)$ лежит в ядре $\pi_{n-1}$ из коммутативности правого квадрата.
                    Из точности нижней строки $\exists \bar{x} \in i_{n-1}^{-1}(\bar{y})$ (и он единственен, так как $i_{n-1}$ --- моно), положим $\delta([z]) \coloneqq \left[\bar{x}\right]$.

                    \item  Убедимся, что определение не зависит от выбора $y \in \pi_n^{-1}(z)$.
                    Для этого рассмотрим другой $y' \in \pi_n^{-1}(z)$.
                    Так как $\pi_n(y - y') = 0$, то из точности верхней строки $\exists x \in i_n^{-1}(y - y')$.
                    Из коммутативности левого квадрата: $d'_n(x) = i_{n-1}^{-1}(d_n(y - y')) = i_{n-1}^{-1}(d_n(y)) - i_{n-1}^{-1}(d_n(y'))$, то есть $\bar{x}$ определён с точностью до $\Image(d_n')$, а его класс эквивалентности в гомологиях --- однозначно.

                    \item Очевидно, что $\delta$ линеен: его можно задать формулой $i_{n-1}^{-1}(d(\pi_{n}^{-1}(\_)))$, где берётся любой прообраз.
                    Для всякого $R$-линейного $f: x_1 \in f^{-1}(y_1), x_2 \in f^{-1}(y_2) \then \forall \alpha, \beta \in R: \alpha x_1 + \beta y_1 \in f^{-1}(\alpha x_2 + \beta y_2)$, то есть прообразы можно выбирать линейно.
                }
                \item Убедимся, что полученная длинная точная последовательность гомологических групп точна.
                    Здесь используются определённые при построении $\delta$ элементы $y \in A_n$ и $\bar{y} \in A_{n-1}, \bar{x} \in A_{n-1}'$.
                \bullets{
                    \item $\forall z \in \Ker(d_n''): \delta\left([z]\right) = 0 \iff \bar{y} = 0\iff y \in \Ker(d_n)$.
                    Отсюда $\delta\left([z]\right) = 0 \iff z \in \pi_n\left(\Ker(d_n)\right)$, что означает точность в члене $H_n''$.
                    \item С одной стороны, $\forall \bar{x} \in \Ker(d_{n-1}'): i_{n-1}\left(\bar{x}\right) \in \Image(d_n) \then \exists y \in A_n: i_{n-1}(\bar{x}) = d_n(y) \then \bar{x} = \delta\left([\pi_n(y)]\right)$ ($\delta$ определена, так как $\pi_n(y) \in \Ker(d_n'')$ --- из коммутативности правого квадрата: $d_n''(\pi_n(y)) = \pi_{n-1}\left(\bar{y}\right)$, а из точности нижней строки это нуль).
                    С другой стороны, $\forall z \in \Ker(d_n''):  i_{n-1}(\delta([z])) = d_n(y) \in \Image(d_n)$.
                    Это означает точность в члене $H_{n-1}'$.
                \item С одной стороны, $\forall \bar{x} \in \Ker(\d_{n-1}'): \pi_{n-1}(i_{n-1}(\bar{x})) = 0$ из точности нижней строки.
                С другой стороны, $\forall \bar{y} \in \Ker\left(d_{n-1}\right)$: если $\pi_{n-1}(\bar{y}) \in \Image(d_n'')$, то из сюръективности $\pi$: $\exists y \in A_n: d_n''(\pi_n(z)) = \pi_{n-1}(\bar{y})$.
                Обозначим $\Delta \coloneqq \bar{y} - d_n(y)$, так как $\pi_{n-1}(\Delta) = 0$, то $\Delta \in \Image(i_{n-1})$.
                Тем самым, $[\bar{y}] = [\Delta]$ лежит в образе $H_{n-1}''$, и последовательность точна в члене $H_n$.
                }
            \item Функториальность идёт без доказательства. \qedhere
            }
        }
    }
    \newlection{4 марта 2024 г.}
    Теперь приведём другое доказательство существования длинной точной последовательности гомологий, опирающееся на лемму о змее.
    \lemma[О змее]{\label{snake}
        Пусть даны два точных комплекса $A' \map A \map A'' \map 0$ и $0 \map B' \map B \map B''$, и морфизм между ними.
        Тогда имеется длинная точная последовательность из пунктирных стрелок.

        Короткие стрелки получены из действия соответственных функторов (ядра и коядра), а связующий гомоморфизм определён $\delta$ определён в доказательстве, и естественен (функториален).
    % https://q.uiver.app/#q=WzAsMTQsWzEsMSwiQSciXSxbMiwxLCJBIl0sWzMsMSwiQScnIl0sWzQsMSwiMCJdLFswLDIsIjAiXSxbMSwyLCJCJyJdLFsyLDIsIkIiXSxbMywyLCJCJyciXSxbMSwwLCJcXEtlciBcXHBoaSciXSxbMiwwLCJcXEtlciBcXHBoaSJdLFszLDAsIlxcS2VyIFxccGhpJyciXSxbMSwzLCJcXENvS2VyIFxccGhpJyJdLFsyLDMsIlxcQ29LZXIgXFxwaGkiXSxbMywzLCJcXENvS2VyXFxwaGknJyJdLFsyLDcsIlxccGhpJyciXSxbMSw2LCJcXHBoaSJdLFswLDUsIlxccGhpIl0sWzQsNV0sWzUsNl0sWzYsN10sWzAsMV0sWzEsMl0sWzIsM10sWzgsMCwiXFxrZXIgXFxwaGknIl0sWzksMSwiXFxrZXIgXFxwaGkiXSxbMTAsMiwiXFxrZXIgXFxwaGknJyJdLFs1LDExLCJcXGNva2VyIFxccGhpJyJdLFs2LDEyLCJcXGNva2VyIFxccGhpIl0sWzcsMTMsIlxcY29rZXIgXFxwaGknJyJdLFs4LDksIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDEwLCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMTEsMTIsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxMiwxMywiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& {\Ker \phi'} \& {\Ker \phi} \& {\Ker \phi''} \\
              \& {A'} \& A \& {A''} \& 0 \\
              0 \& {B'} \& B \& {B''} \\
              \& {\CoKer \phi'} \& {\CoKer \phi} \& {\CoKer\phi''}
              \arrow["{\phi''}", from=2-4, to=3-4]
              \arrow["\phi", from=2-3, to=3-3, ""{coordinate, near start, name=Z}]
              \arrow["\phi", from=2-2, to=3-2]
              \arrow[from=3-1, to=3-2]
              \arrow[from=3-2, to=3-3]
              \arrow[from=3-3, to=3-4]
              \arrow[from=2-2, to=2-3]
              \arrow[from=2-3, to=2-4]
              \arrow[from=2-4, to=2-5]
              \arrow["{\ker \phi'}", from=1-2, to=2-2]
              \arrow["{\ker \phi}", from=1-3, to=2-3]
              \arrow[dll, "\delta", dashed, rounded corners, to path={ -- ([xshift=10ex]\tikztostart.east) |- (Z) \tikztonodes -| ([xshift=-10ex]\tikztotarget.west)-- (\tikztotarget)},from=1-4,to=4-2]
              \arrow["{\ker \phi''}", from=1-4, to=2-4]
              \arrow["{\coker \phi'}", from=3-2, to=4-2]
              \arrow["{\coker \phi}", from=3-3, to=4-3]
              \arrow["{\coker \phi''}", from=3-4, to=4-4]
              \arrow[dashed, from=1-2, to=1-3]
              \arrow[dashed, from=1-3, to=1-4]
              \arrow[dashed, from=4-2, to=4-3]
              \arrow[dashed, from=4-3, to=4-4]
        \end{tikzcd}\]
        \provehere{
            Доказательство очень похоже на доказательство существования длинной точной последовательности гомологий.

            Можно опять сказать, что это диаграммный поиск,  и повторить доказательство, но проще вывести из доказательства~(\cref{long-homology}).
            Для этого достаточно рассмотреть комплексы $C_\bullet \coloneqq \left[\dots \map 0 \map A \overset{\phi}\map B \map 0 \map \dots\right]$, и соответствующие $C'_\bullet$ и $C''_\bullet$ (где вместо $A$ и $B$ подставлены $A'$ и $B'$ либо $A''$ и $B''$ соответственно).
            После этого доказательство~(\cref{long-homology}) строит искомую длинную точную последовательность, так как $H(C_\bullet) = \left[\dots \map 0 \map \Ker(\phi) \map \CoKer(\phi) \map 0 \map \dots\right]$.
            При этом априори лемма о змее чуть сильнее, так как она не использует, что $A' \map A$ --- моно, а $B \map B'$ --- эпи, но можно проследить, что доказательство~(\cref{long-homology}) в нужных членах это тоже не использует.
        }
    }
    \theorem[Длинная точная последовательность гомологий на бис]{\label{long-homology-bis}
        Пусть имеется точная последовательность комплексов $0 \map A' \overset{i}\map A \overset{\pi}\map A'' \map 0$.

        Существует длинная точная последовательность гомологических групп
    % https://q.uiver.app/#q=WzAsNyxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiSCciXSxbMiwwLCJIIl0sWzMsMCwiSCcnIl0sWzQsMCwiSCdbLTFdIl0sWzUsMCwiSFstMV0iXSxbNiwwLCJcXGNkb3RzIl0sWzAsMV0sWzEsMiwiaSJdLFsyLDMsIlxccGkiXSxbMyw0LCJcXGRlbHRhIl0sWzQsNSwiaVstMV0iXSxbNSw2XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {H'} \& H \& {H''} \& {H'[-1]} \& {H[-1]} \& \cdots
              \arrow[from=1-1, to=1-2]
              \arrow["i", from=1-2, to=1-3]
              \arrow["\pi", from=1-3, to=1-4]
              \arrow["\delta", from=1-4, to=1-5]
              \arrow["{i[-1]}", from=1-5, to=1-6]
              \arrow[from=1-6, to=1-7]
        \end{tikzcd}\]
        где связующий морфизм $\delta$ будет построен в доказательстве.

        Более того, это всё функториально.
        \provehere{
            Длинная точная последовательность комплексов означает наличие следующей коммутативной диаграммы (где строки точны, и столбцы --- комплексы)
        % https://q.uiver.app/#q=WzAsMTYsWzEsMSwiQV9uJyJdLFsyLDEsIkFfbiJdLFszLDEsIkFfbicnIl0sWzQsMSwiMCJdLFswLDIsIjAiXSxbMSwyLCJBX3tuLTF9JyJdLFsyLDIsIkFfe24tMX0iXSxbMywyLCJBJydfe24tMX0iXSxbMCwxLCIwIl0sWzQsMiwiMCJdLFsxLDAsIlxcdmRvdHMiXSxbMiwwLCJcXHZkb3RzIl0sWzMsMCwiXFx2ZG90cyJdLFsxLDMsIlxcdmRvdHMiXSxbMiwzLCJcXHZkb3RzIl0sWzMsMywiXFx2ZG90cyJdLFswLDFdLFsxLDJdLFsyLDNdLFs0LDVdLFs1LDZdLFs2LDddLFswLDUsImQnX24iXSxbMSw2LCJkX24iXSxbMiw3LCJkJydfbiJdLFs4LDBdLFs3LDldLFsxMCwwXSxbMTEsMV0sWzEyLDJdLFs1LDEzXSxbNiwxNF0sWzcsMTVdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& \vdots \& \vdots \& \vdots \\
                  0 \& {A_n'} \& {A_n} \& {A_n''} \& 0 \\
                  0 \& {A_{n-1}'} \& {A_{n-1}} \& {A''_{n-1}} \& 0 \\
                  \& \vdots \& \vdots \& \vdots
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
                  \arrow[from=3-1, to=3-2]
                  \arrow[from=3-2, to=3-3]
                  \arrow[from=3-3, to=3-4]
                  \arrow["{d'_n}", from=2-2, to=3-2]
                  \arrow["{d_n}", from=2-3, to=3-3]
                  \arrow["{d''_n}", from=2-4, to=3-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow[from=3-4, to=3-5]
                  \arrow[from=1-2, to=2-2]
                  \arrow[from=1-3, to=2-3]
                  \arrow[from=1-4, to=2-4]
                  \arrow[from=3-2, to=4-2]
                  \arrow[from=3-3, to=4-3]
                  \arrow[from=3-4, to=4-4]
            \end{tikzcd}\]
            Пусть циклы, границы и гомологии в комплексе $A$ обозначаются $Z_\bullet, B_\bullet, H_\bullet$ соответственно, в $A'$ --- $Z_\bullet', B_\bullet', H_\bullet'$, , в $A''$ --- $Z_\bullet'', B_\bullet'', H_\bullet''$.
            Из коммутативности диаграммы $B'_n$ вправо уходит в $B_n$, а $B_n$, в свою очередь --- в $B_n''$.

            Чтобы воспользоваться леммой о змее, построим следующую диаграмму, взяв коядро верхней строки, ядро --- нижней, и дорисовав сверху --- ядра вертикальных стрелок, снизу --- коядра:
% https://q.uiver.app/#q=WzAsMTQsWzEsMSwiQSdfbi9CJ19uIl0sWzIsMSwiQV9uL0JfbiJdLFszLDEsIkFfbicnL0JfbicnIl0sWzQsMSwiMCJdLFswLDIsIjAiXSxbMSwyLCJaX3tuLTF9JyJdLFsyLDIsIlpfe24tMX0iXSxbMywyLCJaJydfe24tMX0iXSxbMSwwLCJIX24nIl0sWzIsMCwiSF9uIl0sWzMsMCwiSCcnX24iXSxbMSwzLCJIX3tuLTF9JyJdLFsyLDMsIkhfe24tMX0iXSxbMywzLCJIX3tuLTF9JyciXSxbMCwxXSxbMSwyXSxbMiwzXSxbNCw1XSxbNSw2XSxbNiw3XSxbMCw1LCJcXG92ZXJsaW5le2R9J19uIl0sWzEsNiwiXFxvdmVybGluZXtkfV9uIl0sWzIsNywiXFxvdmVybGluZXtkfScnX24iXSxbOCwwXSxbOSwxXSxbMTAsMl0sWzUsMTFdLFs2LDEyXSxbNywxM11d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& {H_n'} \& {H_n} \& {H''_n} \\
                  \& {A'_n/B'_n} \& {A_n/B_n} \& {A_n''/B_n''} \& 0 \\
                  0 \& {Z_{n-1}'} \& {Z_{n-1}} \& {Z''_{n-1}} \\
                  \& {H_{n-1}'} \& {H_{n-1}} \& {H_{n-1}''}
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
                  \arrow[from=3-1, to=3-2]
                  \arrow[from=3-2, to=3-3]
                  \arrow[from=3-3, to=3-4]
                  \arrow["{\overline{d}'_n}", from=2-2, to=3-2]
                  \arrow["{\overline{d}_n}", from=2-3, to=3-3]
                  \arrow["{\overline{d}''_n}", from=2-4, to=3-4]
                  \arrow[from=1-2, to=2-2]
                  \arrow[from=1-3, to=2-3]
                  \arrow[from=1-4, to=2-4]
                  \arrow[from=3-2, to=4-2]
                  \arrow[from=3-3, to=4-3]
                  \arrow[from=3-4, to=4-4]
            \end{tikzcd}\]
            Обоснуем, каким образом получилась такая диаграмма.
            По определению $d_n(B_n) = \{0\}$, поэтому $A_n \overset{d_n}\Map A_{n-1}$ пропускается через фактор, и получается отображение $\tilde{d}_n: A_n/B_n \map A_{n-1}$.
            Так как $A$ --- комплекс, то $\tilde{d}_n(A_n/B_n) \subset Z_{n-1}$, можно сузить codomain, получая $\overline{d}_n$.
            По определению $H_n = Z_n/B_n$, поэтому действительно $H_n = \Ker(d_n)$.
            В свою очередь, $H_{n-1} = Z_{n-1}/B_{n-1}$, и это действительно $\CoKer(d_n)$.

            Отображение $A_n \map A_n''$ было эпиморфизмом, после взятия коядра эпиморфизмом оно и осталось.
            Двойственно, $A'_{n-1} \map A_{n-1}$ было мономорфизмом, мономорфизмом оно и осталось.

            Применяя лемму о змее, получаем утверждение теоремы.
        }
    }


    \section{Функторы между абелевыми категориями}
    Пусть $\cat A, \cat B$ --- абелевы категории.
    \definition[Аддитивный функтор $\cat F: \cat A \map \cat B$]{
        Такой функтор, что $\forall \alpha, \beta \in \Mor(\cat A): \cat F(\alpha + \beta) = \cat F(\alpha) + \cat F(\beta)$ всегда, когда определено.
    }
    \subsection{Точные и полуточные функторы}
    Рассмотрим произвольную короткую точную последовательность $0 \map A' \map A \map A'' \map 0$ в $\cat A$.
    Подействовав на неё функтором $\cat F$, мы получим последовательность $0 \map \cat F(A') \map \cat F(A) \map \cat F(A'') \map 0$.
    Точность, вообще говоря, пропадёт, но если $\cat F$ сохраняет точность в каком-то члене для всех таких коротких точных последовательностей, то функтор $\cat F$ имеет соответствующее название:
    \numbers{
        \item Если всегда имеется точность в члене $\cat F(A)$, то $\cat F$ --- \emph{полуточный функтор}.
        \item Если всегда имеется точность в членах $\cat F(A')$ и $\cat F(A)$, то $\cat F$ --- \emph{точный слева функтор}.
        \item Если всегда имеется точность в членах $\cat F(A)$ и $\cat F(A'')$, то $\cat F$ --- \emph{точный справа функтор}.
        \item Если всякая короткая точная последовательность переходит в короткую точную последовательность, то $\cat F$ --- \emph{точный функтор}.
    }
    \comment{
        Примеры ниже точно должны были быть на лекции, но я их как-то упустил.
        Оставлю здесь, надеюсь, что всё ниже написанное --- правда.
    }
    \examples{
    \item Функтор $\ker: \cat{Arr}\cat C \map \cat{Arr}\cat C$ является точным слева.

        Вообще, категория $\cat{Arr}\cat C$ является абелевой: морфизмы в ней являются парами морфизмов в $\cat{Arr}\cat C$, и их можно складывать по правилу $(\alpha_1,\beta_1) + (\alpha_2, \beta_2) = (\alpha_1 + \alpha_2, \beta_1 + \beta_2)$.
        Нулевым объектом является $\id_0$, а бипроизведением двух объектов $f: A \map B$ и $g: C \map D$ (где $A,B,C,D \in \Obj\cat C$) --- объект $f \oplus g: A \oplus C \map B \oplus D$.
        Мономорфизмами в $\cat{Arr}\cat C$ являются пары мономорфизмов из $\cat C$, откуда очевидно, что всякий мономорфизм нормален (мономорфизм $(\alpha, \beta)$ является ядром $(\coker \alpha, \coker \beta)$).

        Для проверки того, что $\ker$ точен слева, посмотрим, как $\ker$ действует на короткой точной последовательности $0 \map f \overset{(\alpha,\beta)}\map g \overset{(\gamma,\delta)}\map h \map 0$:
% https://q.uiver.app/#q=WzAsMTUsWzEsMCwiXFxLZXIgZiJdLFsxLDEsIkEiXSxbMSwyLCJBJyJdLFsyLDEsIkIiXSxbMiwyLCJCJyJdLFszLDEsIkMiXSxbMywyLCJDJyJdLFswLDEsIjAiXSxbMCwyLCIwIl0sWzQsMSwiMCJdLFs0LDIsIjAiXSxbMCwwLCIwIl0sWzIsMCwiXFxLZXIgZyJdLFszLDAsIlxcS2VyIGgiXSxbNCwwLCIwIl0sWzAsMSwiXFxrZXIgZiJdLFsxLDIsImYiXSxbMyw0LCJnIl0sWzEsMywiXFxhbHBoYSJdLFsyLDQsIlxcYmV0YSJdLFs1LDYsImgiXSxbMyw1LCJcXGdhbW1hIl0sWzcsOCwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzksMTAsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFs3LDFdLFs4LDJdLFs1LDldLFs2LDEwXSxbNCw2LCJcXGRlbHRhIl0sWzExLDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFsxMiwzLCJcXGtlciBnIl0sWzEzLDUsIlxca2VyIGgiXSxbMTEsMF0sWzAsMTIsIlxcdGlsZGV7XFxhbHBoYX0iXSxbMTIsMTMsIlxcdGlsZGV7XFxnYW1tYX0iXSxbMTQsOSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzEzLDE0XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              0 \& {\Ker f} \& {\Ker g} \& {\Ker h} \& 0 \\
              0 \& A \& B \& C \& 0 \\
              0 \& {A'} \& {B'} \& {C'} \& 0
              \arrow[from=1-1, to=1-2]
              \arrow[tail reversed, from=1-1, to=2-1]
              \arrow["{\tilde{\alpha}}", from=1-2, to=1-3]
              \arrow["{\ker f}", from=1-2, to=2-2]
              \arrow["{\tilde{\gamma}}", from=1-3, to=1-4]
              \arrow["{\ker g}", from=1-3, to=2-3]
              \arrow[from=1-4, to=1-5]
              \arrow["{\ker h}", from=1-4, to=2-4]
              \arrow[tail reversed, from=1-5, to=2-5]
              \arrow[from=2-1, to=2-2]
              \arrow[tail reversed, from=2-1, to=3-1]
              \arrow["\alpha", from=2-2, to=2-3]
              \arrow["f", from=2-2, to=3-2]
              \arrow["\gamma", from=2-3, to=2-4]
              \arrow["g", from=2-3, to=3-3]
              \arrow[from=2-4, to=2-5]
              \arrow["h", from=2-4, to=3-4]
              \arrow[tail reversed, from=2-5, to=3-5]
              \arrow[from=3-1, to=3-2]
              \arrow["\beta", from=3-2, to=3-3]
              \arrow["\delta", from=3-3, to=3-4]
              \arrow[from=3-4, to=3-5]
        \end{tikzcd}\]
        Точность в левом члене сохраняется, так как $\tilde \alpha = \alpha\big|_{\Ker f}$, и ограничение мономорфизма --- мономорфизм.

        Точность в среднем члене сохраняется: $\forall y \in \Ker g: \tilde{\gamma}(y) = 0 \iff \gamma(y) = 0 \iff \exists x \in A: y = \alpha(x)$.
        В силу того, что $g(y) = 0$, а $\beta$ --- мономорфизм, то $f(x) = 0$ тоже, откуда $x \in \Ker f$, что означает точность в среднем члене.

        Точность в правом члене, конечно, не обязана сохраниться: скажем, если $B = B' = C = \Z$, $C' = 0$, и $g = \gamma = \id_{\Z}$, то $(\gamma,\delta)$ --- эпиморфизм, но при взятии его ядра получится $\tilde{\gamma}: 0 \map \Z$.
        Так как $\tilde{\gamma}$ не эпиморфизм, то и $(\tilde{\gamma}, \gamma)$ эпиморфизмом тоже не является.

    \item Двойственно, функтор коядра точен справа.
    }
    \lemma{
        Пусть $\cat F$ --- аддитивный функтор. Следующие условия эквивалентны:
        \numbers{
            \item $\cat F$ точен справа.
            \item $\cat F$ сохраняет нуль и коядра: $\cat F(0) = 0, \cat F(\coker(\phi)) = \coker(\cat F(\phi))$.
            \item $\cat F$ сохраняет конечные копределы.
        }
        \provebullets{
            \item[$(3)\then(2)$] Коядро --- конечный копредел, поэтому очевидно.
            \item[$(2)\then(3)$] В свою очередь, копроизведение в абелевой категории --- бипроизведение, а это <<внутренний объект>> (его определение не использует никакие универсальные свойства, только накладываются некоторые условия на стрелки, которые аддитивные функторы сохраняют), поэтому всякий аддитивный функтор сохраняет его.
            Предложение из предыдущего семестра о том, что существование инициального объекта и всех копроизведений влечёт существование всех копределов завершает доказательство.
            \item[$(2)\then(1)$] Короткая точная последовательность $A' \overset{\phi}\map A \overset{\psi}\map A'' \map 0$ характеризуется свойствами $\psi = \coker \phi, 0 = \coker \psi$.
            \item[$(1) \then (2)$] Рассмотрим произвольный $\phi: A' \map A$.
            У него есть эпи-моно разложение $\phi = \mu\eps$ ($\mu$ --- моно, $\eps$ --- эпи), и $\coker(\mu\eps) = \coker(\mu)$, так как $\eps$ --- эпиморфизм.
            Значит, без потери общности $\phi$ --- мономорфизм.

            Тогда последовательность $0 \map A' \overset{\phi}\map A \overset{\coker \phi}\map \CoKer\phi \map 0$ точна, и так как $\cat F$ --- точен справа, то $\cat F(\coker \phi) = \coker(\cat F(\phi))$.

            Также точный справа функтор сохраняет нуль: $0 \map A \overset{\id}\map A \map 0 \map 0$ переходит в $\cat F(A) \overset{\id}\map \cat F(A) \map \cat F(0) \map 0$.
        }
    }
    \corollary{
        Левый сопряжённый функтор (к любому другому функтору) точен справа.
        \provehere{Он сохраняет копределы.}
    }
    Функтор копредела (который является левым сопряжённым к диагональному $\Delta$) сохраняет копределы, значит, точен справа.
    Другими словами, копределы коммутируют.

    К сожалению, в лемме о змее это не помогает в доказательстве того, что последовательность точна в члене $\Ker \phi$, так как нет точной последовательности $0 \map A' \map A \map A'' \map 0$.

    При доказательстве существования длинной точной последовательности гомологий на бис, мы использовали, что коядро точно справа, ядро --- точно слева.
    \newlection{11 марта 2024 г.}

    \fact{
        Если точный справа функтор сохраняет мономорфизмы, то функтор точен.
        Двойственно, точный слева функтор, сохраняющий эпиморфизмы, точен.
        \provehere{
            Условия как раз означают, что короткая точная последовательность отображается в короткую точную последовательность.
        }
    }
    \subsection{Гомотопность морфизмов комплексов}
    Пусть имеются комплексы $X_\bullet$ и $X'_\bullet$, и между ними морфизмы $f, g$.
    \definition[Морфизмы $f$ и $g$ гомотопны]{
        Существует семейство морфизмов $s_k: X_{k-1} \map X'_k$, таких, что $f_{n} - g_{n} = d'_{n}s_{n+1} + s_{n}d_{n-1}$.
        При этом диаграмма ниже \textbf{не обязана} быть коммутативной.
        % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiWF9uIl0sWzIsMCwiWF97bi0xfSJdLFszLDAsIlxcY2RvdHMiXSxbNCwwLCJYXzAiXSxbMSwxLCJYJ19uIl0sWzIsMSwiWCdfe24tMX0iXSxbMywxLCJcXGNkb3RzIl0sWzQsMSwiWCdfMCJdLFswLDEsIlgnX3tuKzF9Il0sWzAsMCwiWF97bisxfSJdLFswLDQsImZfbiIsMix7ImxhYmVsX3Bvc2l0aW9uIjo4MCwib2Zmc2V0IjoxfV0sWzAsNCwiZ19uIiwwLHsibGFiZWxfcG9zaXRpb24iOjIwLCJvZmZzZXQiOi0xfV0sWzEsNSwiZl97bi0xfSIsMix7ImxhYmVsX3Bvc2l0aW9uIjo4MCwib2Zmc2V0IjoxfV0sWzEsNSwiZ197bi0xfSIsMCx7ImxhYmVsX3Bvc2l0aW9uIjoyMCwib2Zmc2V0IjotMX1dLFszLDcsImZfMCIsMix7ImxhYmVsX3Bvc2l0aW9uIjo4MCwib2Zmc2V0IjoxfV0sWzMsNywiZ18wIiwwLHsibGFiZWxfcG9zaXRpb24iOjIwLCJvZmZzZXQiOi0xfV0sWzAsMSwiZF97bi0xfSJdLFsxLDIsImRfe24tMn0iXSxbMiwzLCJkXzAiXSxbNiw3LCJkJ18wIiwyXSxbNSw2LCJkJ197bi0yfSIsMl0sWzQsNSwiZCdfe24tMX0iLDJdLFs4LDQsImQnX3tufSIsMl0sWzksOCwiZl97bisxfSIsMix7ImxhYmVsX3Bvc2l0aW9uIjo4MCwib2Zmc2V0IjoxfV0sWzksOCwiZ197bisxfSIsMCx7ImxhYmVsX3Bvc2l0aW9uIjoyMCwib2Zmc2V0IjotMX1dLFs5LDAsImRfe259Il0sWzgsMCwic197bisxfSIsMyx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs0LDEsInNfbiIsMyx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDIsInNfe24tMX0iLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifSwiYm9keSI6eyJuYW1lIjoiZG90dGVkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNiwzLCJzXzEiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifSwiYm9keSI6eyJuYW1lIjoiZG90dGVkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {X_{n+1}}
              \& {X_n} \& {X_{n-1}} \& \cdots \& {X_0} \\
              {X'_{n+1}} \& {X'_n} \& {X'_{n-1}} \& \cdots \& {X'_0}
              \arrow["{f_n}"'{pos=0.8}, shift right, from=1-2, to=2-2]
              \arrow["{g_n}"{pos=0.2}, shift left, from=1-2, to=2-2]
              \arrow["{f_{n-1}}"'{pos=0.8}, shift right, from=1-3, to=2-3]
              \arrow["{g_{n-1}}"{pos=0.2}, shift left, from=1-3, to=2-3]
              \arrow["{f_0}"'{pos=0.8}, shift right, from=1-5, to=2-5]
              \arrow["{g_0}"{pos=0.2}, shift left, from=1-5, to=2-5]
              \arrow["{d_{n-1}}", from=1-2, to=1-3]
              \arrow["{d_{n-2}}", from=1-3, to=1-4]
              \arrow["{d_0}", from=1-4, to=1-5]
              \arrow["{d'_0}"', from=2-4, to=2-5]
              \arrow["{d'_{n-2}}"', from=2-3, to=2-4]
              \arrow["{d'_{n-1}}"', from=2-2, to=2-3]
              \arrow["{d'_{n}}"', from=2-1, to=2-2]
              \arrow["{f_{n+1}}"'{pos=0.8}, shift right, from=1-1, to=2-1]
              \arrow["{g_{n+1}}"{pos=0.2}, shift left, from=1-1, to=2-1]
              \arrow["{d_{n}}", from=1-1, to=1-2]
              \arrow["{s_{n+1}}"{marking, allow upside down}, dotted, tail reversed, no head, from=2-1, to=1-2]
              \arrow["{s_n}"{marking, allow upside down}, dotted, tail reversed, no head, from=2-2, to=1-3]
              \arrow["{s_{n-1}}"{marking, allow upside down}, dotted, tail reversed, no head, from=2-3, to=1-4]
              \arrow["{s_1}"{marking, allow upside down}, dotted, tail reversed, no head, from=2-4, to=1-5]
        \end{tikzcd}\]
        Пишут $f \simeq g$.
    }
    \comment{А почему вот такие диагональные стрелки --- это то же самое, что и гомотопность в топологии?}
    \theorem{\label{homotopy-preserves-h}
    Если два морфизма комплексов $f, g: X \map X'$ гомотопны, то $H(f) = H(g)$ (здесь функтор гомологий применён не к объектам-комплексам, а к морфизмам комплексов).
    \provehere{
        Гомологии --- аддитивный функтор, докажем, что $H(f - g) = 0$.

        Рассмотрим $\overline{x} \in H_n(X)$.
        У него имеется прообраз $x \in Z_n(X)$.

        Заметим, что $H(f_n - g_n)(\overline{x}) = \overline{(f_n - g_n)(x)} = \overline{d'_n(s_{n+1}(x))} + \overline{s_n(d_{n-1}(x))}$.
        Первое слагаемое равно нулю, так как $d'_n(\cdots) \in B_n(X')$, а второе --- так как $x \in \Ker d_{n-1}$.
    }
    }
    \note{
        Если $\cat F: \cat A \map \cat A$ --- аддитивный функтор, то ему соответствует функтор $\cat{Comp}(\cat F)$, действующий на комплексах с элементами из $\cat A$ поэлементным применением к объектам и морфизмам функтора $\cat F$.
        Допуская вольность речи, можно обозначать этот функтор тоже $\cat F$.
        Используя эту вольность речи, можно отметить, что если $f \simeq g$ --- гомотопные морфизмы комплексов с объектами из $\cat A$, то $\cat F(f) \simeq \cat F(g)$.
    }
    \fact{
        Для морфизмов комплексов <<быть гомотопными>> --- отношение эквивалентности.
        \provehere{
            Рефлексивность: $\forall n: s_n = 0$.
            Симметричность: $s_n \coloneqq -s_n$.
            Транзитивность: \[\all{f_n - g_n = d'_n s_{n+1} + s_n d_{n-1} \\ g_n - h_n =d'_n r_{n+1} + r_n d_{n-1}} \then f_n - h_n = d'_n(s_{n+1} + r_{n+1}) + (s_n + r_n)d_{n-1}\qedhere\]
        }
    }
    \definition[Два комплекса $X$ и $X'$ гомотопически эквивалентны]{
        Существуют морфизмы комплексов $f: X \map X'$ и $g: X' \map X$, такие, что $f g \simeq \id_{X'}$ и $g f \simeq \id_{X}$.
        Данные морфизмы $f$ и $g$ называют \emph{гомотопическими эквивалентностями}.
    }
    \fact{
        Если $X$ и $X'$ гомотопически эквивалентны, то $H(X) \cong H(X')$.
    }
    \definition[Квазиизоморфизм $f: X \map X'$]{
        Морфизм $f$, такой, что $H(f)$ --- изоморфизм.
    }
    \fact{
        Гомотопическая эквивалентность --- квазиизоморфизм.
    }
    \definition[Комплекс $X$ ацикличен]{
        $X$ точен, то есть $H(X) = 0$.
    }
    \definition[Комплекс $X$ стягиваем]{
        $\id_X \simeq 0_X$.
    }
    \note{
        Из~(\cref{homotopy-preserves-h}) следует, что стягиваемый комплекс ацикличен.
    }
    Обратное, вообще говоря, неверно.
    Стягиваемый комплекс сохраняется под действием функторов, а ацикличный --- может и не сохраниться.


    \section{Проективные резольвенты}
%    \subsection{Идея}
%    Пусть имеется точный комплекс $\cdots \map P_2 \map P_1 \map P_0 \map M \map 0$, где $P_i$ --- свободные модули.
%
%    Применяя $\cat F$, получим комплекс $\cdots \map \cat F(P_1) \map \cat F(P_0) \map \cat F(M) \map 0$.
%    Определим $L_n\cat F(M) \bydef H_n(X)$.
%    \comment{Я не понял.}
%    \ok
    Пусть $\cat A$ --- абелева категория, $P \in \cat A$.
    \definition[Объект $P$ проективен]{
        $\forall \phi: A \map B$: $\phi$ --- эпи $\then \forall \psi: P \map B$: $\exists {\theta: P \map A}$, такое, что диаграмма коммутирует.
        При этом $\theta$ должно быть какое-то, не факт, что оно единственно.
        % https://q.uiver.app/#q=WzAsNCxbMCwxLCJBIl0sWzEsMSwiQiJdLFsyLDEsIjAiXSxbMSwwLCJQIl0sWzAsMSwiXFxmb3JhbGwgXFxwaGkiXSxbMSwyXSxbMywxLCJcXGZvcmFsbCBcXHBzaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDAsIlxcZXhpc3RzIFxcdGhldGEiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& P \\
              A \& B \& 0
              \arrow["{\exists \theta}"', dotted, from=1-2, to=2-1]
              \arrow["{\forall \psi}", dashed, from=1-2, to=2-2]
              \arrow["{\forall \phi}", from=2-1, to=2-2]
              \arrow[from=2-2, to=2-3]
        \end{tikzcd}\]
    }
    \fact{
        В $\cat{Set}$ все множества --- проективные объекты.
    }
    \theorem{
        Пусть $\cat A = \Lmod{R}$.
        Модуль $P$ проективен $\iff$ $P$ является прямым слагаемым свободного модуля.
        \provenumbers{
            \item Свободный модуль проективен: пусть $\{p_\alpha\}$ --- базис $P$. Определим $\theta(p_\alpha) = \psi(\phi^{-1}(p_\alpha))$, где прообраз выбран произвольно, и продолжим по линейности.
            \item Прямое слагаемое проективного модуля проективно.
            Рассмотрим каноническое вложение $M \hookrightarrow M \oplus N$, где $M \oplus N$ --- проективен.
        % https://q.uiver.app/#q=WzAsNSxbMSwwLCJNIl0sWzIsMCwiTVxcb3BsdXMgTiJdLFsxLDEsIkIiXSxbMCwxLCJBIl0sWzIsMSwiMCJdLFszLDIsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFsyLDRdLFswLDFdLFsxLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDMsIiIsMCx7ImN1cnZlIjo0fV0sWzAsMiwiXFxwc2kiXV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& M \& {M\oplus N} \\
                  A \& B \& 0
                  \arrow[two heads, from=2-1, to=2-2]
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=1-2, to=1-3]
                  \arrow[dashed, from=1-3, to=2-2]
                  \arrow[curve={height=36pt}, from=1-3, to=2-1]
                  \arrow["\psi", from=1-2, to=2-2]
            \end{tikzcd}\]
            Определим $M \oplus N \map B, (m, n) \mapsto \psi(m)$.
            Так как $M \oplus N$ проективен, то найдётся $M \oplus N \map A$, и композиция $M \map M \oplus N \map A$ подходит в качестве морфизма, который должен найтись из определения проективного модуля.
            \item Пусть $P$ проективен. Возьмём свободный модуль $F$, сюръективно накрывающий $P$ (например, подойдёт свободный модуль на всех элементах $P$, но на практике, конечно, удобно брать модуль поменьше).
        % https://q.uiver.app/#q=WzAsMyxbMSwwLCJQIl0sWzEsMSwiUCJdLFswLDEsIkYiXSxbMiwxLCJcXHBpIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoiZXBpIn19fV0sWzAsMSwiXFxpZCIsMl0sWzAsMiwiXFxleGlzdHMiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& P \\
                  F \& P
                  \arrow["\pi", two heads, from=2-1, to=2-2]
                  \arrow["\id"', from=1-2, to=2-2]
                  \arrow["\exists"', dashed, from=1-2, to=2-1]
            \end{tikzcd}\]
            Так как модуль проективен, то найдётся пунктирная стрелка. Значит, $F \cong P \oplus \Ker \pi$
            ($\forall f \in F: \pi^{-1}(f) = P(f) + \Ker \pi$).
        }
    }
    \examples{
        \item Пусть $R = \Z/6\Z$. Тогда $\Z/6\Z$ является $R$-модулем, но $\Z/6\Z \cong \Z/2\Z \oplus \Z/3\Z$, значит, модули $\Z/2\Z$, $\Z/3\Z$, $\Z/6\Z$ все проективны над кольцом $\Z/6\Z$.
        \item Можно предъявить проективный модуль, исходя из топологического факта о том, что шар нельзя причесать.
        \comment{А как?}
    }
    \definition[Проективная резольвента модуля $M$]{
        Ацикличный (точный) комплекс вида $\cdots \map P_n \map P_{n-1} \map \cdots \map P_0 \map M \map 0$, где $P_i$ --- проективные модули.
    }
    В будущем докажем, что любые две проективные резольвенты гомотопически эквивалентны~(\cref{resolvents-are-equivalent}).

    \definition[В категории $\cat A$ достаточно много проективных объектов]{
        $\forall A \in \cat A$ найдётся проективный объект $P \in \cat A$ вместе с эпиморфизмом $P \twoheadrightarrow A$.
    }
    Если в нашей категории $\cat A$ достаточно много проективных объектов, то у всякого модуля $M$ найдётся резольвента --- надо просто подряд накрывать возникающие ядра.
    \newlection{18 марта 2024 г.}
    \section{Левый производный функтор}
    Зафиксируем некоторый аддитивный функтор $\cat F: \cat A \map \cat B$, который обычно будет точен справа.
    Пусть у объекта $A \in \cat A$ имеется проективная резольвента, которую я выделил стрелками $\rightsquigarrow$ .
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiUF8xIl0sWzIsMCwiUF8wIl0sWzMsMCwiMCJdLFsyLDEsIkEiXSxbMywxLCIwIl0sWzEsMSwiMCJdLFswLDEsIlxcY2RvdHMiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJzcXVpZ2dseSJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6InNxdWlnZ2x5In19fV0sWzIsM10sWzIsNCwiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoic3F1aWdnbHkifX19XSxbNCw1LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJzcXVpZ2dseSJ9fX1dLFs2LDRdLFs3LDZdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          \cdots \& {P_1} \& {P_0} \& 0 \\
          \cdots \& 0 \& A \& 0
          \arrow[squiggly, from=1-1, to=1-2]
          \arrow[squiggly, from=1-2, to=1-3]
          \arrow[from=1-3, to=1-4]
          \arrow[squiggly, from=1-3, to=2-3]
          \arrow[squiggly, from=2-3, to=2-4]
          \arrow[from=2-2, to=2-3]
          \arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
    Иными словами, проективная резольвента --- это некоторый морфизм комплексов $P$ и $A_\bullet$.
    Под комплексом $A_\bullet$ подразумевается такой комплекс, в котором в нулевой градуировке сидит $A$, а в остальных --- нули (следовательно, все дифференциалы --- тоже нули).

    Раз $\cat F$ точен справа, то он сохраняет нуль.
    Применим $\cat F$ к верхней строчке.
    Тогда получится комплекс вида
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNkb3RzIl0sWzEsMCwiXFxjYXQgRihQXzEpIl0sWzIsMCwiXFxjYXQgRihQXzApIl0sWzMsMCwiMCJdLFswLDFdLFsxLDJdLFsyLDNdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          \cdots \& {\cat F(P_1)} \& {\cat F(P_0)} \& 0
          \arrow[from=1-1, to=1-2]
          \arrow[from=1-2, to=1-3]
          \arrow[from=1-3, to=1-4]
    \end{tikzcd}\]
    Чуть ниже мы определим $L_n \cat F(A) \coloneqq H_n \cat F(P)$ --- \emph{левый производный функтор}, измеряющий неточность $\cat F$ --- но пока, например, неясна корректность (независимость от резольвенты) такого определения.
    \theorem{\label{extension-to-projectives}
        Пусть $P_i$ проективные, сверху комплекс (ноль в верхней строчке стоит для красоты, он там неважен), снизу --- точный комплекс, и дан морфизм $f$.
    % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiUF8xIl0sWzIsMCwiUF8wIl0sWzMsMCwiQSJdLFs0LDAsIjAiXSxbNCwxLCIwIl0sWzMsMSwiQiJdLFsyLDEsIlFfMCJdLFsxLDEsIlFfMSJdLFswLDAsIlxcY2RvdHMiXSxbMCwxLCJcXGNkb3RzIl0sWzgsMF0sWzksN10sWzAsNywiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsNiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzIsNSwiZiIsMV0sWzAsMV0sWzEsMl0sWzIsM10sWzUsNF0sWzYsNV0sWzcsNl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {P_1} \& {P_0} \& A \& 0 \\
              \cdots \& {Q_1} \& {Q_0} \& B \& 0
              \arrow[from=1-1, to=1-2]
              \arrow[from=2-1, to=2-2]
              \arrow[dashed, from=1-2, to=2-2]
              \arrow[dashed, from=1-3, to=2-3]
              \arrow["f"{description}, from=1-4, to=2-4]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-3, to=1-4]
              \arrow[from=1-4, to=1-5]
              \arrow[from=2-4, to=2-5]
              \arrow[from=2-3, to=2-4]
              \arrow[from=2-2, to=2-3]
        \end{tikzcd}\]
        Тогда найдутся пунктирные стрелки, и они определены с точностью до гомотопии.
        \provebullets{
            \item\bullets{\item Сначала построим $f_i: P_i \map Q_i$.

                $Q_0 \map B$ сюръективно, значит, так как $P_0$ проективен, то найдётся $f_0: P_0 \map Q_0$, такое, что квадрат коммутативен.

                \item Далее по индукции: пусть построены $f_0, \dots, f_{n}$.
                % https://q.uiver.app/#q=WzAsNixbMCwwLCJQX3tuKzF9Il0sWzEsMCwiUF9uIl0sWzIsMCwiUF97bi0xfSJdLFswLDEsIlFfe24rMX0iXSxbMSwxLCJRX24iXSxbMiwxLCJRX3tuLTF9Il0sWzIsNSwiZl97bi0xfSJdLFsxLDQsImZfbiJdLFswLDMsImZfe24rMX0iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwxLCJkXlBfbiJdLFsxLDIsImReUF97bi0xfSJdLFszLDQsImReUV9uIl0sWzQsNSwiZF5RX3tuLTF9Il1d
                \[\begin{tikzcd}[ampersand replacement=\&]
                {P_{n+1}} \& {P_n} \& {P_{n-1}} \\
                {Q_{n+1}} \& {Q_n} \& {Q_{n-1}}
                \arrow["{d^P_n}", from=1-1, to=1-2]
                \arrow["{f_{n+1}}", dashed, from=1-1, to=2-1]
                \arrow["{d^P_{n-1}}", from=1-2, to=1-3]
                \arrow["{f_n}", from=1-2, to=2-2]
                \arrow["{f_{n-1}}", from=1-3, to=2-3]
                \arrow["{d^Q_n}", from=2-1, to=2-2]
                \arrow["{d^Q_{n-1}}", from=2-2, to=2-3]
                \end{tikzcd}\]
                Хочется заполучить стрелку $P_{n+1} \map Q_{n+1}$, воспользовавшись проективностью $P_{n+1}$.
                Для этого надо найти сюръективное отображение из $Q_{n+1}$.

                Так как внизу --- точная последовательность, то $d_{n}^Q: Q_{n+1} \map \Ker (d^Q_{n-1})$ подойдёт: во-первых, $\Image(d_n^Q) = \Ker(d^Q_{n-1})$ из точности $Q_\bullet$, а во-вторых, $\Image(f_n \circ d_n^P) \subset \Ker(d_n^Q)$ --- чтобы это увидеть, надо применить $d_n^Q$ и воспользоваться коммутативностью правого квадрата, и тем, что $P$ --- комплекс.
                Тем самым, по определению проективного модуля $\exists f_{n+1}: P_{n+1}\map Q_{n+1}$.
            }
            \item\bullets{
                \item Теперь пусть имеются два морфизма комплексов, продолжающих $f$, это $f_i$ и $g_i$.
            % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiUF8xIl0sWzIsMCwiUF8wIl0sWzMsMCwiQSJdLFsxLDEsIlFfMSJdLFsyLDEsIlFfMCJdLFszLDEsIkIiXSxbMCwwLCJcXGNkb3RzIl0sWzAsMSwiXFxjZG90cyJdLFs0LDEsIjAiXSxbNCwwLCIwIl0sWzAsMV0sWzEsMl0sWzYsMF0sWzcsM10sWzAsMywiZ18xIiwwLHsibGFiZWxfcG9zaXRpb24iOjQwLCJvZmZzZXQiOi0xfV0sWzAsMywiZl8xIiwyLHsib2Zmc2V0IjoxfV0sWzEsNCwiZ18wIiwwLHsib2Zmc2V0IjotMX1dLFsxLDQsImZfMCIsMix7Im9mZnNldCI6MX1dLFsyLDUsImYiLDFdLFszLDRdLFs0LDVdLFs1LDhdLFsyLDldXQ==
                \[\begin{tikzcd}[ampersand replacement=\&]
                      \cdots \& {P_1} \& {P_0} \& A \& 0 \\
                      \cdots \& {Q_1} \& {Q_0} \& B \& 0
                      \arrow[from=1-1, to=1-2]
                      \arrow[from=1-2, to=1-3]
                      \arrow["{g_1}"{pos=0.4}, shift left, from=1-2, to=2-2]
                      \arrow["{f_1}"', shift right, from=1-2, to=2-2]
                      \arrow[from=1-3, to=1-4]
                      \arrow["{g_0}", shift left, from=1-3, to=2-3]
                      \arrow["{f_0}"', shift right, from=1-3, to=2-3]
                      \arrow[from=1-4, to=1-5]
                      \arrow["f"{description}, from=1-4, to=2-4]
                      \arrow[from=2-1, to=2-2]
                      \arrow[from=2-2, to=2-3]
                      \arrow[from=2-3, to=2-4]
                      \arrow[from=2-4, to=2-5]
                \end{tikzcd}\]
                Распишем разность: пусть $h_i \coloneqq f_i - g_i$.
                Построим гомотопию $h \simeq 0$.
                Понятно, что $A \map Q_0$ надо взять нулевым.
            % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiUF8xIl0sWzIsMCwiUF8wIl0sWzMsMCwiQSJdLFsxLDEsIlFfMSJdLFsyLDEsIlFfMCJdLFszLDEsIkIiXSxbMCwwLCJcXGNkb3RzIl0sWzAsMSwiXFxjZG90cyJdLFs0LDEsIjAiXSxbNCwwLCIwIl0sWzAsMV0sWzEsMl0sWzYsMF0sWzcsM10sWzIsNSwiMCIsMV0sWzMsNF0sWzQsNSwiZF97LTF9XlEiXSxbNSw4XSxbMCwzLCJoXzEiLDFdLFsxLDQsImhfMCIsMV0sWzIsNCwiMCIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDMsInNfMCIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDUsIjAiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiw5XV0=
                \[\begin{tikzcd}[ampersand replacement=\&]
                      \cdots \& {P_1} \& {P_0} \& A \& 0 \\
                      \cdots \& {Q_1} \& {Q_0} \& B \& 0
                      \arrow[from=1-2, to=1-3]
                      \arrow[from=1-3, to=1-4]
                      \arrow[from=1-1, to=1-2]
                      \arrow[from=2-1, to=2-2]
                      \arrow["0"{description}, from=1-4, to=2-4]
                      \arrow[from=2-2, to=2-3]
                      \arrow["{d_{-1}^Q}", from=2-3, to=2-4]
                      \arrow[from=2-4, to=2-5]
                      \arrow["{h_1}"{description}, from=1-2, to=2-2]
                      \arrow["{h_0}"{description}, from=1-3, to=2-3]
                      \arrow["0"{description}, dashed, from=1-4, to=2-3]
                      \arrow["{s_0}"{description}, dashed, from=1-3, to=2-2]
                      \arrow["0"{description}, dashed, from=1-5, to=2-4]
                      \arrow[from=1-4, to=1-5]
                \end{tikzcd}\]
                $s_0$ строится по основному свойству проективного модуля $P_0$: ведь $h_0(P_0) \subset \Ker (d_{-1}^Q) = \Image d_0^Q$

                \item Далее индукция. Пусть построены $s_{0}, \dots, s_{n-1}$, строим $s_n$.
                \[\begin{tikzcd}[ampersand replacement=\&]
                      \& {P_n} \& {P_{n-1}} \& {P_{n-2}} \\
                      {Q_{n+1}} \& {Q_n} \& {Q_{n-1}}
                      \arrow["{s_{n}}"{marking, allow upside down, yshift=1ex}, dashed, tail reversed, no head, from=2-1, to=1-2]
                      \arrow["{d_n^Q}", from=2-1, to=2-2]
                      \arrow["{d_{n-1}^Q}", from=2-2, to=2-3]
                      \arrow["{h_n}"{description}, from=1-2, to=2-2]
                      \arrow["{d_{n-1}^P}", from=1-2, to=1-3]
                      \arrow["{s_{n-1}}"{marking, allow upside down, yshift=1ex}, tail reversed, no head, from=2-2, to=1-3]
                      \arrow["{h_{n-1}}"{description}, from=1-3, to=2-3]
                      \arrow["{d_{n-2}^P}", from=1-3, to=1-4]
                      \arrow["{s_{n-2}}"{marking, allow upside down, yshift=1ex}, tail reversed, no head, from=2-3, to=1-4]
                \end{tikzcd}\]
                Хочется, чтобы выполнялось $h_n = d_n^Q s_n + s_{n-1} d_{n-1}^P$, эквивалентно $d_n^Q s_n = h_n - s_{n-1} d_{n-1}^P$.

                Надо проверить, что образ правой части лежит в $\Image(d_n^Q)$, то есть $\Ker(d_{n-1}^Q)$.
                Применим $d_{n-1}^Q$.
                Получим \[d_{n-1}^Q h_n - d_{n-1}^Q s_{n-1} d_{n-1}^P = h_{n-1}d_{n-1}^P - (h_{n-1} - s_{n-2}d_{n-2}^P)d_{n-1}^P = 0\]
                Тем самым, $s_n$ действительно найдётся согласно свойству проективного модуля.\qedhere
            }}
    }
    \corollary{\label{resolvents-are-equivalent}
        Любые две проективные резольвенты одного и того же объекта гомотопически эквивалентны.
    \provehere{
    Пусть $P, Q$ --- две резольвенты объекта $A$.
        В силу~(\cref{extension-to-projectives}), можно построить морфизмы этих резольвент $f: P \map Q$ и $g: Q \map P$.
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJQIl0sWzAsMSwiUSJdLFsxLDEsIkEiXSxbMSwwLCJBIl0sWzIsMCwiUCJdLFsyLDEsIlAiXSxbMywxLCJBIl0sWzMsMCwiQSJdLFswLDEsImYiLDAseyJvZmZzZXQiOi0yfV0sWzEsMCwiZyIsMCx7Im9mZnNldCI6LTJ9XSxbMywyLCJcXGlkIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzAsM10sWzEsMl0sWzcsNiwiXFxpZCIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFs1LDZdLFs0LDddLFs0LDUsImdmIiwwLHsibGFiZWxfcG9zaXRpb24iOjQwLCJvZmZzZXQiOi0yfV0sWzQsNSwiXFxpZCIsMix7Im9mZnNldCI6Mn1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              P \& A \& P \& A \\
              Q \& A \& P \& A
              \arrow[from=1-1, to=1-2]
              \arrow["f", shift left=2, from=1-1, to=2-1]
              \arrow["\id", tail reversed, from=1-2, to=2-2]
              \arrow[from=1-3, to=1-4]
              \arrow["gf"{pos=0.4}, shift left=2, from=1-3, to=2-3]
              \arrow["\id"', shift right=2, from=1-3, to=2-3]
              \arrow["\id", tail reversed, from=1-4, to=2-4]
              \arrow["g", shift left=2, from=2-1, to=1-1]
              \arrow[from=2-1, to=2-2]
              \arrow[from=2-3, to=2-4]
        \end{tikzcd}\]
    Получается, что $gf: P \map P$ --- эндоморфизм $P$, как резольвенты $A$.
        С другой стороны, $\id_P$ --- тоже эндоморфизм $P$, как резольвенты $A$, и опять применяя~(\cref{extension-to-projectives}), получаем, что $gf \simeq \id_P$.
    Аналогично $fg \simeq \id_Q$.
    }
    }
    Таким образом, определение левого производного функтора $L_n\cat F(A) \bydef H_n \cat F(P)$ корректно.
%    \comment{Возможно, надо требовать, чтобы $\cat F$ сохранял нуль, я не знаю.}

    С некоторой точки зрения <<правильно>> рассматривать категорию комплексов с точностью до гомотопической эквивалентности, назовём её $\cat{HoComp}(\cat A)$: там объекты --- $\Obj \cat A$, а группа морфизмов  $\Mor_{\cat{HoComp}(\cat A)}(P, Q) = \Mor(\cat{Comp}(\cat A))/\text{Ho}(P, Q)$, где $Ho(P, Q)$ --- группа морфизмов, гомотопных $0$.
    \examples[Что такое $L_0$ от точного справа функтора]{
        \item Предположим, что $\cat F$ точен справа.
        Тогда
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdCBGKFBfMSkiXSxbMSwwLCJcXGNhdCBGKFBfMCkiXSxbMiwwLCJcXGNhdCBGKEEpIl0sWzMsMCwiMCJdLFswLDFdLFsxLDJdLFsyLDNdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\cat F(P_1)}
              \& {\cat F(P_0)} \& {\cat F(A)} \& 0
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-3, to=1-4]
        \end{tikzcd}\]
        точна. $L_0\cat F(A) = H_0(\cat F(P)) = \CoKer(\cat F(P_1) \map \cat F(P_0))$.
        Получается $\CoKer(\cat F(P_1) \map \cat F(P_0)) = \cat F(A)$, то есть $L_0 \cat F = \cat F$.
        \item
        Обратно, если $L_0 \cat F = \cat F$, то $\cat F$ сохраняет коядра, значит, точен справа.
        \comment{Вообще-то, сохраняются только коядра морфизмов проективных объектов, почему этого достаточно?}
        (По-хорошему, надо ещё проверить, что $L_0 \cat F$ действует на морфизмах так же, но это банально).
    }
    \corollary{
        Если $P_A, P_B$ --- проективные резольвенты $A, B$ соответственно, и $f: A \map B$, то $\exists \tilde{f}: P_A \map P_B$, делающий диаграмму коммутативной.
        Он определён однозначно с точностью до гомотопии.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJQX0EiXSxbMSwwLCJBIl0sWzAsMSwiUF9CIl0sWzEsMSwiQiJdLFswLDIsIlxcdGlsZGV7Zn0iLDJdLFsxLDMsImYiLDJdLFsyLDNdLFswLDFdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {P_A}
              \& A_{\bullet} \\
              {P_B} \& B_{\bullet}
              \arrow["{\tilde{f}}"', from=1-1, to=2-1]
              \arrow["f"', from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
              \arrow[from=1-1, to=1-2]
        \end{tikzcd}\]
        Здесь $A_\bullet$ --- комплекс, где $A$ сосредоточен в нулевом члене.
    }
    Таким образом, морфизму $f$ объектов из $\cat A$ сопоставляется морфизм резольвент $\tilde{f}$, а он, в свою очередь, индуцирует морфизм гомологий $H_n(P_A) \map H_n(P_B)$.
    Значит, конструкция $L$ функториальна.

    \subsection{Длинная точная последовательность левых производных функторов}
    Зафиксируем некоторый функтор $\cat F$.
    Далее мы исследуем $L_n \cat F$, для упрощения записи будем писать $L_n \coloneqq L_n \cat F$.

    Пусть имеется короткая точная последовательность $0 \map A \map B \map C \map 0$ в $\cat A$.
    Построим длинную точную последовательность производных функторов, выглядящую так: %\comment{Это так говорится? Скорее всё-таки их значений на $A, B, C$}
    \[\cdots \map L_1(A) \map L_1(B) \map L_1(C) \map L_0(A) \map L_0(B) \map L_0(C) \map \cdots\]
    Для получения такой штуки было бы неплохо заполучить точную последовательность резольвент $P_A \map P_B \map P_C$, причём не абы какую, а сохраняющую свою точность под действием любого аддитивного функтора.
    Оказывается, это сделать несложно, и в этом нам поможет лемма о подкове.
    \lemma[О подкове]{
        Пусть $P$ --- проективный модуль, все строки и столбцы (состоящие из чёрных сплошных стрелок) точны.
    % https://q.uiver.app/#q=WzAsMTEsWzAsMSwiMCJdLFsxLDEsIkEiXSxbMiwxLCJCIl0sWzMsMSwiQyJdLFs0LDEsIjAiXSxbMSwwLCJRIl0sWzMsMCwiUCJdLFsxLDIsIjAiXSxbMywyLCIwIl0sWzIsMCwiUSBcXG9wbHVzIFAiXSxbMiwyLCIwIl0sWzEsN10sWzUsMV0sWzYsM10sWzMsOF0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzUsOSwiaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDYsIlxccGkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOSwyLCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiwxMCwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& Q \& {\textcolor{darkgreen}{Q \oplus P}} \& P \\
              0 \& A \& B \& C \& 0 \\
              \& 0 \& {\textcolor{darkgreen}{0}} \& 0
              \arrow[from=2-2, to=3-2]
              \arrow[from=1-2, to=2-2]
              \arrow[from=1-4, to=2-4]
              \arrow[from=2-4, to=3-4]
              \arrow[from=2-1, to=2-2]
              \arrow[from=2-2, to=2-3]
              \arrow[from=2-3, to=2-4]
              \arrow[from=2-4, to=2-5]
              \arrow["i", dashed, from=1-2, to=1-3,darkgreen]
              \arrow["\pi", dashed, from=1-3, to=1-4,darkgreen]
              \arrow[dashed, from=1-3, to=2-3,darkgreen]
              \arrow[dashed, from=2-3, to=3-3,darkgreen]
        \end{tikzcd}\]
        Утверждается, что диаграмму можно достроить до коммутативной, добавив зелёные пунктирные стрелки.
        Новые строки и столбцы также станут точны.
        \provehere{
            Так как $P$ --- проективен, а $g$ --- эпи, то найдётся сечение $s$ такое, что $gs = h_C$.
% https://q.uiver.app/#q=WzAsMTEsWzAsMSwiMCJdLFsxLDEsIkEiXSxbMiwxLCJCIl0sWzMsMSwiQyJdLFs0LDEsIjAiXSxbMSwwLCJRIl0sWzMsMCwiUCJdLFsxLDIsIjAiXSxbMywyLCIwIl0sWzIsMCwiUSBcXG9wbHVzIFAiXSxbMiwyLCIwIl0sWzEsN10sWzUsMSwiaF9BIiwyXSxbNiwzLCJoX0MiLDJdLFszLDhdLFswLDFdLFsxLDIsImYiXSxbMiwzLCJnIl0sWzMsNF0sWzUsOSwiaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDYsIlxccGkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOSwyLCJoX0IiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiwxMCwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzYsMiwicyIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& Q \& {Q \oplus P} \& P \\
                  0 \& A \& B \& C \& 0 \\
                  \& 0 \& 0 \& 0
                  \arrow[from=2-2, to=3-2]
                  \arrow["{h_A}"', from=1-2, to=2-2]
                  \arrow["{h_C}"', from=1-4, to=2-4]
                  \arrow[from=2-4, to=3-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow["f", from=2-2, to=2-3]
                  \arrow["g", from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
                  \arrow["i", dashed, from=1-2, to=1-3]
                  \arrow["\pi", dashed, from=1-3, to=1-4]
                  \arrow["{h_B}"', dashed, from=1-3, to=2-3]
                  \arrow[dashed, from=2-3, to=3-3]
                  \arrow["s"{description}, dotted, from=1-4, to=2-3,red]
            \end{tikzcd}\]
            Определим стрелку $h_B$ исходя из того, что квадраты должны в итоге получиться коммутативными.
            Из коммутативности левого квадрата $h_B(u, 0) = f(h_A(u))$.
            Из коммутативности правого треугольника $g h_B(0, v) = h_C(v) = gs(v)$.
            Тем самым, подойдёт $h_B(u, v) \coloneqq f(h_A(u)) + s(v)$.

            При таком определении правый квадрат будет коммутативен: $g(s(v)) = h_C(\pi(u, v)) \overset{\text{?}}{=} g(h_B(u, v)) = g(s(v))$, последнее равенство имеет место, так как $gf = 0$.

            Также несложно убедиться, что построенный морфизм $h_B$ --- эпи, видимо, это делается в тупую при помощи диаграммного поиска:

            Рассмотрим $b \in B$, пусть $c \coloneqq g(c)$ и $\bar{b} \coloneqq \pi^{-1}\left(h_C^{-1}(c)\right)$ --- произвольный прообраз.
            Из коммутативности правого квадрата $h_B\left(\bar{b}\right)$ и $b$ под действием $g$ уходят в $g(b)$, откуда $g\left(b - h_B\left(\bar{b}\right)\right) = 0$.
            Из точности нижней строки $\exists a \in A: f(a) = b - h_B\left(\bar{b}\right)$, а из эпиморфности $h_A: \exists \bar{a} \in Q: h_A\left(\bar{a}\right) = a$.
            Тем самым, $h_B\left(i(\bar{a}) + \bar{b}\right) = b$.
        }
    }
    \theorem{\label{cool-resolvent}
    Для короткой точной последовательности $0 \map A \map B \map C \map 0$ существует точная последовательность резольвент $0 \map P_A \map P_B \map P_C \map 0$, точность которой сохраняется под действием любого аддитивного функтора.
    \provehere{
        Возьмём произвольные резольвенты $P_A, P_C$.
        Резольвенту $P_B$ будем строить пошагово, по индукции.
        $(P_B)_0 \coloneqq (P_A)_0 \oplus (P_C)_0$ строится прямым применением леммы о подкове.

        Далее необходимо провести индукционный переход.
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& {(P_A)_{n+1}} \& \textcolor{darkgreen}{(P_A)_{n+1} \oplus (P_C)_{n+1}} \& {(P_C)_{n+1}} \\
              0 \& {\Ker(d_{n-1}^A)} \& {\Ker(d_{n-1}^B)} \& {\Ker(d_{n-1}^C)} \& {\textcolor{red}{0}} \\
              0 \& {(P_A)_n} \& {(P_B)_n} \& {(P_C)_n} \& 0 \\
              0 \& {\Ker(d_{n-2}^A)} \& {\Ker(d^B_{n-2})} \& {\Ker(d_{n-2}^C)} \& 0
              \arrow[red,from=2-4, to=2-5]
              \arrow[from=3-4, to=3-5]
              \arrow[from=4-4, to=4-5]
              \arrow[from=4-1, to=4-2]
              \arrow[from=4-2, to=4-3]
              \arrow[from=4-3, to=4-4]
              \arrow[from=3-1, to=3-2]
              \arrow[from=3-2, to=3-3]
              \arrow[from=3-3, to=3-4]
              \arrow[from=2-1, to=2-2]
              \arrow[from=2-2, to=2-3]
              \arrow[from=2-3, to=2-4]
              \arrow[two heads, from=1-2, to=2-2]
              \arrow[hook, from=2-2, to=3-2]
              \arrow["{d_{n-1}^A}", from=3-2, to=4-2]
              \arrow[two heads, from=1-4, to=2-4]
              \arrow[hook, from=2-4, to=3-4]
              \arrow["{d_{n-1}^C}", from=3-4, to=4-4]
              \arrow[hook, from=2-3, to=3-3]
              \arrow[two heads,"{d_{n-1}^B}", from=3-3, to=4-3]
              \arrow["i", dashed, from=1-2, to=1-3,darkgreen]
              \arrow["\pi", dashed, from=1-3, to=1-4,darkgreen]
              \arrow["d_n^B", dashed, from=1-3, to=2-3,darkgreen]
        \end{tikzcd}\]
        Вычленим некоторый кусочек диаграммы, и попробуем применить лемму о подкове для получения $d_n^B$.
        Для этого необходимо потребовать от стрелки $\Ker(d_{n-1}^B) \map \Ker(d_{n-1}^C)$, чтобы она была эпиморфизмом.

        При $n = 1$ это верно в силу леммы о змее:
    % https://q.uiver.app/#q=WzAsMTgsWzEsMiwiQSJdLFswLDIsIjAiXSxbMiwyLCJCIl0sWzMsMiwiQyJdLFs0LDIsIjAiXSxbMCwxLCIwIl0sWzEsMSwiUF9BIl0sWzIsMSwiUF9CIl0sWzMsMSwiUF9DIl0sWzQsMSwiMCJdLFswLDAsIjAiXSxbMSwwLCJcXEtlcihkX3stMX1eQSkiXSxbMiwwLCJcXEtlcihkX3stMX1eQikiXSxbMywwLCJcXEtlcihkX3stMX1eQykiXSxbNCwwLCIwIl0sWzEsMywiMCJdLFsyLDMsIjAiXSxbMywzLCIwIl0sWzAsMTVdLFsyLDE2XSxbMywxN10sWzEsMF0sWzAsMl0sWzIsM10sWzMsNF0sWzUsNl0sWzYsN10sWzcsOF0sWzgsOV0sWzExLDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzYsMCwiZF97LTF9XkEiXSxbMTIsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbNywyLCJkX3stMX1eQiJdLFsxMyw4LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFs4LDMsImRfey0xfV5DIl0sWzEwLDExXSxbMTEsMTJdLFsxMiwxM10sWzEzLDE0XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              0 \& {\Ker(d_{-1}^A)} \& {\Ker(d_{-1}^B)} \& {\Ker(d_{-1}^C)} \\
              0 \& {P_A} \& {P_B} \& {P_C} \& 0 \\
              0 \& A \& B \& C \& 0 \\
              \& \textcolor{blue}{0} \& 0 \& 0
              \arrow[from=3-2, to=4-2]
              \arrow[from=3-3, to=4-3]
              \arrow[from=3-4, to=4-4]
              \arrow[from=3-1, to=3-2]
              \arrow[from=3-2, to=3-3]
              \arrow[from=3-3, to=3-4]
              \arrow[from=3-4, to=3-5]
              \arrow[from=2-1, to=2-2]
              \arrow[from=2-2, to=2-3]
              \arrow[from=2-3, to=2-4]
              \arrow[from=2-4, to=2-5]
              \arrow[hook, from=1-2, to=2-2]
              \arrow["{d_{-1}^A}", from=2-2, to=3-2,""{coordinate, near start, name=Z}]
              \arrow[dll, dashed, blue, rounded corners, to path={ -- ([xshift=10ex]\tikztostart.east) |- (Z) \tikztonodes -| ([xshift=-12ex]\tikztotarget.west)-- (\tikztotarget)},from=1-4,to=4-2]
              \arrow[hook, from=1-3, to=2-3]
              \arrow["{d_{-1}^B}", from=2-3, to=3-3]
              \arrow[hook, from=1-4, to=2-4]
              \arrow["{d_{-1}^C}", from=2-4, to=3-4]
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-3, to=1-4]
        \end{tikzcd}\]
        Если же $n > 1$, то воспользуемся тем, что $(P_B)_n = (P_A)_n \oplus (P_C)_n$.
        Это, в частности, значит, что у ретракции $\pi_n: (P_B)_n \map (P_C)_n$ имеется односторонняя обратная --- сечение $s_n: (P_C)_n \map (P_B)_n$, такая, что $\pi_n \cdot s_n = \id_{(P_C)_n}$.
        Ввиду функториальности ядра односторонняя обратная будет иметься и у отображения ядер $\Ker(d_{n-1}^B) \map \Ker(d_{n-1}^C)$, что значит, что это эпиморфизм.

        Так как прямая сумма проективных проективна, то $(P_A)_{n+1} \oplus (P_C)_{n+1} \twoheadrightarrow \Ker d_{n-1}^B$, и определение резольвенты $B$ по индукции корректно.

        Точность $0 \map P_A \map P_B \map P_C$ под действием всякого аддитивного функтора, конечно, сохраняется, так как $(P_B)_n = (P_A)_n \oplus (P_C)_n$, а аддитивные функторы сохраняют бипроизведение.
    }
    }
    \corollary[Длинная точная последовательность производных функторов]{
        Для короткой точной последовательности $0 \map A \map B \map C \map 0$ имеет место длинная точная последовательность
        \[\cdots \map L_1(A) \map L_1(B) \map L_1(C) \map L_0(A) \map L_0(B) \map L_0(C) \map \cdots\]
        \provehere{
            Из~(\cref{cool-resolvent}) найдётся точная последовательность проективных резольвент $0 \map P_A \map P_B \map P_C \map 0$.
            Применяя $\cat F$, получаем точную последовательность $0 \map \cat F(P_A) \map \cat F(P_B) \map \cat F(P_C) \map 0$.

            Возьмём у $\cat F(P_A), \cat F(P_B), \cat F(P_C)$ гомологии.
            Составленная из них длинная точная гомологическая последовательность как раз и сконструирует искомую длинную точную последовательность левых производных функторов.
        }
    }
    \note{
        Если $\cat F$ точен справа, то длинная точная последовательность производных функторов обрывается эпиморфизмом: $L_0(B) \map L_0(C) \map 0$.
    }
    \newlection{25 марта 2024 г.}
    \subsection{Связанные последовательности функторов}
%    \example{В качестве $\cat F$ можно, например, рассмотреть функтор $\_ \otimes M$ для фиксированного модуля.}
    Рассмотрим формальное обобщение производных функторов.

    Пусть имеется семейство $\{\cat F_i\}_{i\in \N}$ функторов $\cat F_i: \cat A \map \cat A'$.

    \definition[(Левая) связанная последовательность функторов]{
        Такая последовательность функторов $\{\cat F_i\}_{i \in \N}$, что для любой точной последовательности $0 \map A \map B \map C \map 0$ существует функториальная длинная точная последовательность
        \[\cdots \map \cat F_1(A) \map \cat F_1(B) \map \cat F_1(C) \map \cat F_0(A) \map \cat F_0(B) \map \cat F_0(C)\]
    }
    \example{Последовательность $\{L_i \cat F\}_{i \in \N}$ --- связанная последовательность функторов.}
    Заметим, что $\forall i > 0: L_i \cat F(P) = 0$, если $P$ проективен.
    Это очевидным образом следует из существования резольвенты $0 \map P \map P \map 0$.
    Если $\cat F$ точен справа (а мы это предполагаем), то он сохраняет ноль.
    Тогда $L_n \cat F$ --- гомологии $\left[\cdots \map 0 \map 0 \map \cat F(P) \map 0\right]$, которые в нулевом члене --- $\cat F(P)$, а в остальных --- нулевые.

    Оказывается, этого условия достаточно, чтобы определить связанную последовательность по нулевому элементу:
    \theorem{
        Пусть $\{\cat F_i\}, \{\cat G_i\}$ --- две связанные последовательности функторов, такие, что имеется естественный изоморфизм $\cat F_0 \cong \cat G_0$, и для любого проективного $P$: $\forall i > 0: \cat F_i(P) = \cat G_i(P) = 0$.

        Также предположим, что в $\cat A$ достаточно много проективных объектов.

        Тогда $\forall i: \cat F_i \cong \cat G_i$ --- естественный изоморфизм.
        \provehere{
            Пусть $A \in \cat A$. Накроем $A$ проективным, возьмём ядро, получим точную последовательность
            \[0 \map M \map P \map A \map 0\]
            Так как последовательности функторов --- связаны --- то имеется длинная точная последовательность, нарисуем её кусок:
        % https://q.uiver.app/#q=WzAsOCxbMCwwLCIwID0gXFxjYXQgRl8xKFApIl0sWzEsMCwiXFxjYXQgRl8xKEEpIl0sWzIsMCwiXFxjYXQgRl8wKE0pIl0sWzMsMCwiXFxjYXQgRl8wKFApIl0sWzMsMSwiXFxjYXQgR18wKFApIl0sWzIsMSwiXFxjYXQgR18wKE0pIl0sWzEsMSwiXFxjYXQgR18xKEEpIl0sWzAsMSwiMCA9IFxcY2F0IEdfMShQKSJdLFswLDFdLFsxLDJdLFsyLDNdLFs3LDZdLFs2LDVdLFs1LDRdLFsyLDUsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFszLDQsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9fX1dLFsxLDYsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {0 = \cat F_1(P)}
                  \& {\cat F_1(A)} \& {\cat F_0(M)} \& {\cat F_0(P)} \\
                  {0 = \cat G_1(P)} \& {\cat G_1(A)} \& {\cat G_0(M)} \& {\cat G_0(P)}
                  \arrow[from=1-1, to=1-2]
                  \arrow[from=1-2, to=1-3]
                  \arrow[from=1-3, to=1-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[tail reversed, from=1-3, to=2-3]
                  \arrow[tail reversed, from=1-4, to=2-4]
                  \arrow[dashed, tail reversed, from=1-2, to=2-2]
            \end{tikzcd}\]
            Значит, имеется естественный изоморфизм ядер, $\cat F_1(A) \cong \cat G_1(A)$, тем самым, $\cat F_1 \cong \cat G_1$ (естественность --- упражнение).

            Теперь займёмся индукционным переходом:
        % https://q.uiver.app/#q=WzAsOCxbMCwwLCIwID0gXFxjYXQgRl9pKFApIl0sWzEsMCwiXFxjYXQgRl9pKEEpIl0sWzIsMCwiXFxjYXQgRl97aS0xfShNKSJdLFszLDAsIlxcY2F0IEZfe2ktMX0oUCk9MCJdLFszLDEsIlxcY2F0IEdfe2ktMX0oUCk9MCJdLFsyLDEsIlxcY2F0IEdfe2ktMX0oTSkiXSxbMSwxLCJcXGNhdCBHX2koQSkiXSxbMCwxLCIwID0gXFxjYXQgR19pKFApIl0sWzAsMV0sWzEsMl0sWzIsM10sWzcsNl0sWzYsNV0sWzUsNF0sWzIsNSwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzEsNiwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {0 = \cat F_i(P)}
                  \& {\cat F_i(A)} \& {\cat F_{i-1}(M)} \& {\cat F_{i-1}(P)=0} \\
                  {0 = \cat G_i(P)} \& {\cat G_i(A)} \& {\cat G_{i-1}(M)} \& {\cat G_{i-1}(P)=0}
                  \arrow[from=1-1, to=1-2]
                  \arrow[from=1-2, to=1-3]
                  \arrow[from=1-3, to=1-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[tail reversed, from=1-3, to=2-3]
                  \arrow[dashed, tail reversed, from=1-2, to=2-2]
            \end{tikzcd}\]
            Зажав $\cat F_i(A)$ и $\cat F_{i-1}(M)$ между двумя нулями, мы доказали, что все четыре ненулевых объекта изоморфны (естестенность, опять же, доказывается несложно).
        }
    }
    \corollary{
        Пусть $\cat F$ точен справа (например $\cat F = \_ \otimes M$, где $M$ --- фиксированный модуль).
        Пусть $\cat F_0 \cong \cat F$, где $\{\cat F_i\}$ --- связанная последовательность функторов, такая, что для любого проективного $P: \cat F(P) = 0$.

        По-прежнему предполагаем, что в $\cat A$ достаточно много проективных объектов.

        Тогда $\forall i \in \N: \cat F_i \cong L_i \cat F$.
    }


    \section{Производные функторы для $\otimes$}
    Пусть $R$ --- необязательно коммутативное кольцо с единицей, $M \in \modR{R}, N \in \Lmod{R}$, напомним, что тогда $M \otimes_R N \in \cat{Ab}$.

    Изучим производные функторов тензорного произведения (функтор тензорного произведения точен справа, так как он --- левый сопряжённый к $\Hom$ (что верно в силу естественного изоморфизма $\Hom(A \otimes B, C) \cong \Hom(A, \Hom(B, C))$)).

    Обозначим $\LTor_i(M, \_) \bydef L_i(M \otimes \_)$, $\RTor_i(\_, N) \bydef L_i(\_ \otimes N)$.
    \examples{
        \item Изучим $\Tor_1(M, R/aR)$, где $R$ --- коммутативная область целостности.
        Для $R/aR$ несложно написать проективную резольвенту: $0 \map R \overset{a}{\Map} R \map R/aR \map 0$ ($a(m) = am$).

        Тензорно домножая на $M$, мы получаем $0 \map M \overset{m \otimes r \mapsto m \otimes ar}\Map M \map M\otimes R/aR \map 0$.
        Так как кольцо коммутативное, то тензорное произведение --- $\modR{R}$, поэтому $m \otimes r \mapsto m \otimes ar$ --- тоже просто отображение умножения на $a$.

        Так как естественно $M \otimes R/aR \cong M/aM \otimes R \cong M/aM$, то гомологии в среднем члене --- нуль, а в левом члене --- $a$-\emph{кручение} в $M$, то есть $\defset{x \in M}{ax = 0}$.
    \item Если же хочется изучить всё кручение $M$, то оказывается, $\Tor_1(M, F/R) = \defset{x \in M}{\exists a \in R \sm \{0\}: ax = 0}$ (здесь $F/R$ --- фактор $R$-модулей).
        Здесь используется, что $F/R = \varinjlim R/aR$, значит, $\Tor_1(F/R, M) = \varinjlim \Tor_1(R/aR, M)$.
    }

    \theorem{
        Имеет место естественный изоморфизм: $\forall i: \LTor_i \cong \RTor_i$.
        \provehere[Идея доказательства]{
            Пусть имеются резольвенты $\left[\dots \map P_1 \map P_0 \map M\right]$ и $\left[\dots \map Q_1 \map Q_0 \map N\right]$, нарисуем следующую коммутативную диаграмму:
        % https://q.uiver.app/#q=WzAsMTksWzEsMSwiUF8xXFxvdGltZXMgUV8xIl0sWzIsMSwiUF8wXFxvdGltZXMgUV8xIl0sWzMsMSwiTSBcXG90aW1lcyBRXzEiXSxbMSwyLCJQXzFcXG90aW1lcyBRXzAiXSxbMiwyLCJQXzBcXG90aW1lcyBRXzAiXSxbMywyLCJNXFxvdGltZXMgUV8wIl0sWzEsMywiUF8xXFxvdGltZXMgTiJdLFsyLDMsIlBfMFxcb3RpbWVzIE4iXSxbMywzLCJNIFxcb3RpbWVzIE4iXSxbNCwxLCIwIl0sWzQsMiwiMCJdLFsxLDQsIjAiXSxbMiw0LCIwIl0sWzAsMywiXFxjZG90cyJdLFszLDAsIlxcdmRvdHMiXSxbMiwwLCJcXHZkb3RzIl0sWzEsMCwiXFx2ZG90cyJdLFswLDEsIlxcY2RvdHMiXSxbMCwyLCJcXGNkb3RzIl0sWzIsOV0sWzUsMTBdLFs2LDExXSxbNywxMl0sWzEzLDZdLFs2LDddLFs3LDhdLFsxNywwXSxbMCwxXSxbMSwyXSxbMTgsM10sWzMsNF0sWzQsNV0sWzE2LDBdLFswLDNdLFszLDZdLFsxNSwxXSxbMSw0LCIgICAgIl0sWzQsN10sWzIsNV0sWzUsOF0sWzE0LDJdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& \vdots \& \vdots \& \vdots \\
                  \cdots \& {P_1\otimes Q_1} \& {P_0\otimes Q_1} \& {M \otimes Q_1} \& 0 \\
                  \cdots \& {P_1\otimes Q_0} \& {P_0\otimes Q_0} \& {M\otimes Q_0} \& 0 \\
                  \cdots \& {P_1\otimes N} \& {P_0\otimes N} \& {M \otimes N} \\
                  \& 0 \& 0
                  \arrow[from=2-4, to=2-5]
                  \arrow[from=3-4, to=3-5]
                  \arrow[from=4-2, to=5-2]
                  \arrow[from=4-3, to=5-3]
                  \arrow[from=4-1, to=4-2]
                  \arrow[from=4-2, to=4-3]
                  \arrow[from=4-3, to=4-4]
                  \arrow[from=2-1, to=2-2]
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[from=3-1, to=3-2]
                  \arrow[from=3-2, to=3-3]
                  \arrow[from=3-3, to=3-4]
                  \arrow[from=1-2, to=2-2]
                  \arrow[from=2-2, to=3-2]
                  \arrow[from=3-2, to=4-2]
                  \arrow[from=1-3, to=2-3]
                  \arrow["{    }", from=2-3, to=3-3]
                  \arrow[from=3-3, to=4-3]
                  \arrow[from=2-4, to=3-4]
                  \arrow[from=3-4, to=4-4]
                  \arrow[from=1-4, to=2-4]
            \end{tikzcd}\]
            Тензорное домножение на свободный объект --- точный справа функтор --- из дистрибутивности тензорного произведения.
            Тензорное домножение на проективный объект (прямое слагаемое свободного) --- точный справа функтор --- опять же из дистрибутивности.

            Все строки точны, кроме нижней, и все столбцы точны, кроме правого, в которых мы и хотим посчитать гомологии, и доказать, что они равны.

            Заведём тотальный комплекс $\text{Tot}(M, N)_n \coloneqq \bigoplus_{i = 0}^{n}P_i \otimes Q_{n-i}$, и теперь надо определить дифференциал $D$.
            Необходимо, чтобы выполнялось требование $D^2 = 0$, поэтому абы какой не подойдёт.

            Пусть $d_p: P_p \map P_{p-1}$, $d_q: Q_q \map Q_{q-1}$ --- дифференциалы резольвент, определим
            \begin{align*}
                D_{p,q}: P_p \otimes Q_q &\map \text{Tot}(M, N)_{p+q-1}\\(x \otimes y) &\mapsto d_p(x) \otimes y + (-1)^p x \otimes d_q(y)
            \end{align*}
            Теперь определим полный дифференциал $D_{n} \coloneqq \bigoplus\limits_{p + q = n}D_{p,q}: \text{Tot}(M, N)_{n} \map \text{Tot}(M,N)_{n-1}$.
            \exercise{$D_{n-1} \cdot D_n = 0$.}
            Осталось показать, что гомологии нижней строки, как и гомологии правого столбца, совпадают с гомологиями тотального комплекса.
        }
    }


    \section{Производные функторы для $\Hom$}
    Теперь разберёмся с функторами $\Hom$ --- эти функторы являются правыми сопряжёнными к $\otimes$, поэтому точны слева.

    Таких функторов два: имеются ковариантный $\Hom(M, \_)$, и контравариантный $\Hom(\_, N)$.

    Для изучения точных слева функторов будем строить последовательность правых сопряжённых функторов.
    \subsection{Инъективные резольвенты}
    \definition[Инъективный модуль $Q$]{
        Такой модуль $Q$, что для любой инъекции $A \rightarrowtail B$, и для любого морфизма $A \map Q$, существует морфизм $B \map Q$ такой, что диаграмма коммутативна:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIlEiXSxbMCwyXSxbMCwxLCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtb25vIn19fV0sWzEsMiwiXFxleGlzdHMiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              Q
              \arrow[from=1-1, to=2-1]
              \arrow[tail, from=1-1, to=1-2]
              \arrow["\exists", dashed, from=1-2, to=2-1]
        \end{tikzcd}\]
    }
    \intfact{
        Инъективный модуль --- то же самое, что и делимый модуль, то есть $\forall r \in R \sm \{0\}, q \in M: \exists x \in M: rx = q$.
    \comment{Скорее всего, это верно только над PID.}
    }
    В одну сторону доказательство очевидно --- чтобы убедиться, что инъективный модуль является делимым, надо в качестве $A$ взять кольцо $R$, а в качестве $B$ --- поле частных $R$.

    В категории $\cat C$, где \emph{достаточно много инъективных объектов} (то есть $\forall C \in \cat C: \exists$ проективный $Q$ вместе с вложением $Q \hookrightarrow C$), двойственно проективной, строится инъективная резольвента, в которой коядро предыдущего морфизма вкладывается в следующий инъективный модуль:
    \[0 \map N \map Q_0 \map Q_1 \map Q_2 \map \cdots\]
    Далее аналогично определяются правые производные функторы, в частности, имеется комплекс
    \[0 \map \Hom(M, Q_0) \map \Hom(M, Q_1) \map \cdots\]
    Гомологии такого комплекса обозначают $\Ext^i(M, N)$.

    Построим теперь проективную резольвенту для $M$: $\cdots \map P_2 \map P_1 \map P_0 \map M \map 0$.
    Применяя к этой последовательности контравариантный $\Hom$, получаем $0 \map \Hom(P_0, N) \map \Hom(P_1, N) \map \cdots$
    Гомологии этого комплекса обозначают $\Ext^i(M, N)$ (это уже другой $\Ext$, но они, как и $\Tor$, естественно изоморфны, доказательство абсолютно аналогично)

    \subsection{О расширениях модулей и $\Ext^1$}
    Название $\Ext$ происходит от extensions, элементы $\Ext^1$ находятся в биекции с классами коротких точных последовательностей $0 \map M \map\:\, ? \map N \map 0$~(\cref{ext1}).
    В качестве среднего члена всегда подойдёт $M \oplus N$, но, может быть, и ещё что-то, и за это отвечает $\Ext^1$.

    Для функторов $\Ext$ более высокой степени надо брать более длинные последовательности.
    \newlection{1 апреля 2024 г.}
    Пусть $M, N \in \modR{R}$.
    \definition[Расширение $N$ при помощи $M$]{
        Точная последовательность $0 \map M \map X \map N \map 0$.
    }
    Морфизм расширений $0 \map M \map X \map N \map 0$ и $0 \map M \map X' \map N \map 0$ --- такая стрелка $X \map X'$, что два получившихся треугольника коммутативны.
    \theorem{\label{ext1}
        $\Ext^1(N,M)$ естественно изоморфен множеству классов изоморфизмов расширений $N$ при помощи $M$.
        \provehere{
            Рассмотрим расширение $0 \map M \map X \map N \map 0$.
            Запишем кусок длинной точной последовательности правых производных функторов для $\Hom(\_, M)$ и данной короткой точной последовательности, заменяя $\Ext^0$ на $\Hom$:
        % https://q.uiver.app/#q=WzAsNSxbMywwLCJcXEhvbShOLCBNKSJdLFsyLDAsIlxcSG9tKFgsIE0pIl0sWzEsMCwiXFxIb20oTSwgTSkiXSxbMCwwLCJcXEV4dF4xKE4sIE0pIl0sWzQsMCwiMCJdLFsyLDNdLFsxLDJdLFswLDFdLFs0LDBdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\Ext^1(N, M)}
                  \& {\Hom(M, M)} \& {\Hom(X, M)} \& {\Hom(N, M)} \& 0
                  \arrow[from=1-2, to=1-1]
                  \arrow[from=1-3, to=1-2]
                  \arrow[from=1-4, to=1-3]
                  \arrow[from=1-5, to=1-4]
            \end{tikzcd}\]
            Построим $x \in \Ext^1(N, M)$, как образ $\id \in \Hom(M, M)$.
            Данный элемент $x$ ставится в соответствии с короткой точной последовательностью $0 \map M \map X \map N \map 0$.

            Построим стрелку обратно, накрыв $N$ проективным объектом, и взяв ядро: $0 \map A \map P \map N \map 0$.
            Для $\Hom(\_, M)$ и этой короткой точной последовательности можно тоже записать кусок длинной точной последовательности правых производных функторов:
        % https://q.uiver.app/#q=WzAsNSxbNCwwLCJcXEhvbShOLCBNKSJdLFszLDAsIlxcSG9tKFAsIE0pIl0sWzIsMCwiXFxIb20oQSwgTSkiXSxbMSwwLCJcXEV4dF4xKE4sIE0pIl0sWzAsMCwiMCA9IFxcRXh0XjEoUCwgTSkiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {0 = \Ext^1(P, M)} \& {\Ext^1(N, M)} \& {\Hom(A, M)} \& {\Hom(P, M)} \& {\Hom(N, M)}
                  \arrow[from=1-5, to=1-4]
                  \arrow[from=1-4, to=1-3]
                  \arrow[from=1-3, to=1-2]
                  \arrow[from=1-2, to=1-1]
            \end{tikzcd}\]
            Так как домножение на проективный модуль --- точный функтор, то $\Ext^1(P, M) = 0$.
            Значит, $\Ext^1(N, M) \map \Hom(A, M)$ --- эпиморфизм.
            Сопоставим элементу $x \in \Ext^1(N, M)$ его какой-то прообраз $\beta \in \Hom(A, M)$.
            Теперь пусть $X$ --- пушаут диаграммы $M \overset{\beta}\leftarrow A \rightarrow P$.

            Построим следующую диаграмму, получая отображение $X \map N$ из универсального свойства пушаута, применённого к $P \map N$ и нулевому $M \map N$.
        % https://q.uiver.app/#q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIkEiXSxbMiwwLCJQIl0sWzMsMCwiTiJdLFs0LDAsIjAiXSxbNCwxLCIwIl0sWzMsMSwiTiJdLFsyLDEsIlgiXSxbMSwxLCJNIl0sWzAsMSwiMCJdLFswLDFdLFsxLDJdLFsyLDNdLFszLDRdLFszLDYsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsN10sWzEsOCwiXFxiZXRhIl0sWzksOF0sWzgsN10sWzcsNl0sWzYsNV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  0 \& A \& P \& N \& 0 \\
                  0 \& M \& X \& N \& 0
                  \arrow[from=1-1, to=1-2]
                  \arrow[from=1-2, to=1-3]
                  \arrow[from=1-3, to=1-4]
                  \arrow[from=1-4, to=1-5]
                  \arrow[Rightarrow, no head, from=1-4, to=2-4]
                  \arrow[from=1-3, to=2-3]
                  \arrow["\beta", from=1-2, to=2-2]
                  \arrow[from=2-1, to=2-2]
                  \arrow[from=2-2, to=2-3]
                  \arrow[from=2-3, to=2-4]
                  \arrow[from=2-4, to=2-5]
            \end{tikzcd}\]
            Можно показать, что нижняя последовательность --- короткая точная, и мы определим её, как образ элемента $x \in \Ext^1(N, M)$.

            Далее можно проверить, что в одну сторону эти отображения взаимно обратны --- построим по диаграмме выше, как по паре коротких точных последовательностей, последовательность правых производных функторов, и в силу функториальности между ними будут следующие морфизмы:
        % https://q.uiver.app/#q=WzAsOSxbNCwwLCJcXEhvbShOLCBNKSJdLFszLDAsIlxcSG9tKFAsIE0pIl0sWzIsMCwiXFxIb20oQSwgTSkiXSxbMSwwLCJcXEV4dF4xKE4sIE0pIl0sWzAsMCwiMCA9IFxcRXh0XjEoUCwgTSkiXSxbNCwxLCJcXEhvbShOLCBNKSJdLFszLDEsIlxcSG9tKFgsIE0pIl0sWzIsMSwiXFxIb20oTSwgTSkiXSxbMSwxLCJcXEV4dF4xKE4sIE0pIl0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzgsMywiPyIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsNl0sWzYsN10sWzcsOF0sWzAsNSwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNywyLCJcXF8gXFxjZG90IFxcYmV0YSJdLFs2LDFdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {0 = \Ext^1(P, M)} \& {\Ext^1(N, M)} \& {\Hom(A, M)} \& {\Hom(P, M)} \& {\Hom(N, M)} \\
            \& {\Ext^1(N, M)} \& {\Hom(M, M)} \& {\Hom(X, M)} \& {\Hom(N, M)}
            \arrow[from=1-2, to=1-1]
            \arrow[from=1-3, to=1-2]
            \arrow[from=1-4, to=1-3]
            \arrow[from=1-5, to=1-4]
            \arrow[Rightarrow, no head, from=1-5, to=2-5]
            \arrow["{?}", Rightarrow, no head, from=2-2, to=1-2]
            \arrow["{\_ \cdot \beta}", from=2-3, to=1-3]
            \arrow[from=2-3, to=2-2]
            \arrow[from=2-4, to=1-4]
            \arrow[from=2-4, to=2-3]
            \arrow[from=2-5, to=2-4]
            \end{tikzcd}\]
            $\id \in \Hom(M, M)$ уходит вверх в $\beta$, далее влево --- в $x$ по определению $x$.
            Если же отправить $\id$ вправо, то он тоже уйдёт в $x$. \comment{Почему?} И надо ещё проверить, что $? = \id$, и то, что соответствие обратно и в другую сторону.
        }
    }
%    \comment{Далее идёт отступление про то, что быть определённым с точностью изоморфизма, и быть определённым --- разные вещи, и я не справился это записать.}


    \section{Гомологии и когомологии групп}
    Пусть $G$ --- группа, $A$ --- абелева группа, на которой действует $G$.
    Иными словами, $A$ --- $\Z[G]$-модуль.

    Рассматриваем $\Z$, либо как кольцо, либо как $\Z[G]$-модуль с тривиальным действием $G$.

    Определим гомологии $H_n(G, A) \bydef \Tor_n^{\Z[G]}(\Z, A)$ (верхний индекс $\Z[G]$ указывает, что мы работаем в категории $\Z[G]$-модулей).
    Также определим когомологии $H^n(G, A) \bydef \Ext_{\Z[G]}^n(\Z, A)$.

    Запишем проективную резольвенту по первому аргументу.
    \bullets{
        \item Пусть $P_n$ --- свободный $\Z$-модуль с базисом $\defset{(g_0, \dots, g_n)}{g_i \in G}$.
        По совместительству $P_n$ --- свободный $\Z[G]$-модуль с базисом $\defset{(1, g_1, \dots, g_n)}{g_i \in G}$ и действием $g \cdot (g_0, \dots, g_n) = (gg_0, \dots, gg_n)$.

        \item Теперь определим гомоморфизмы.
    % https://q.uiver.app/#q=WzAsMyxbMiwwLCJcXFoiXSxbMSwwLCJQXzAgPSBcXFpbR10iXSxbMCwwLCJcXGNkb3RzIl0sWzEsMF0sWzIsMV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {P_0 = \Z[G]} \& \Z
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-1, to=1-2]
        \end{tikzcd}\]
        Граничные гомоморфизмы определены так: $d_n(g_0, \dots, g_n) = \sum\limits_{i = 0}^{n}(-1)^{i}(g_0, \dots, \hat{g}_i, \dots, g_n)$.
        Несложно проверить, что $d_{n-1}\cdot d_n = 0$.
    }
    \bullets{
        \item Посчитаем нулевые гомологии и когомологии группы $G$.
        $H_0(G, A) = \Z \otimes_{\Z[G]} A$.

        $\Z = \Z[G]/I_G$, где $I_G = \Ker(\phi)$, здесь $\phi: \Z[G] \map \Z$ --- $\Z$-линейный гомоморфизм аугментации, определённый на базисе $g \mapsto 1$.
        Иными словами, $I_G = \angles{g - 1\middle| g \in G} = \defset{\sum\limits_{g \in G}\alpha_h \cdot g}{\sum\limits_{g \in G}\alpha_g = 0}$, все суммы финитные.

        Тем самым, $H_0(G, A) = \Z \otimes_{\Z[G]} A \cong A/(I_G A)$ --- \emph{коинварианты}. $I_G A = \angles{ga - a\middle| g \in G, a \in A}$.

        \item Теперь посчитаем когомологии.
        $H^0(G, A) = \Hom_{\Z[G]}(\Z, A)$.
        Всякому гомоморфизму $\varphi \in \Hom_{\Z[G]}(\Z, A)$ можно $\phi(1)$.
        Из $G$-линейности $\forall g \in G: \phi(1) = \phi(g \cdot 1) = g \cdot \phi(1)$, значит, $\phi(1) \in A^G \bydef \defset{a \in A}{\forall g \in G: ga = a}$ --- \emph{инварианты}.
        Значит, нулевые когомологии --- инварианты.

        \item $H_1(G, \Z) = G^{\ab} \bydef G/[G, G]$.
        \item $H^1(G, A) = \Der(G, A)$ --- множество скрещённых гомоморфизмов.

        Скрещенный гомоморфизм --- это такое отображение $\phi: G \map A$, которое обладает свойством $\phi(gh) = g \cdot \phi(h) + \phi(g)$.
        \item $H_2(G, \Z) = ?$
        Предположим, что имеется точная последовательность групп $0 \map R \map F \map G \map 1$, то есть $G \cong F/R$.

        Тогда $H_2(G, \Z) = \frac{R \cap [F, F]}{[R, F]}$.

        Если $[G, G] = G$ ($G$ совершенна), то существует универсальное центральное расширение $\pi: S \twoheadrightarrow G$, то есть $\Ker(\pi) \in C(S)$, и
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJTIl0sWzEsMCwiRyJdLFsxLDEsIkgiXSxbMCwyLCJcXGV4aXN0cyEiLDJdLFsyLDEsIlxcZm9yYWxsIFxcdGV4dHsg0YbQtdC90YLRgNCw0LvRjNC90L7Qs9C+INGA0LDRgdGI0LjRgNC10L3QuNGPfSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDEsIiIsMSx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              S \& G \\
              \& H
              \arrow["{\exists!}"', from=1-1, to=2-2]
              \arrow["{\forall \text{ центрального расширения}}"', dashed, from=2-2, to=1-2]
              \arrow[two heads, from=1-1, to=1-2]
        \end{tikzcd}\]
        В этом случае $H_2(G, \Z) = \Ker\pi$. Например, в случае $G = SL_n(F): S = \St_n(F)$ --- \emph{группа Стейнберга}.
        Ядро $\St_n(F) \twoheadrightarrow SL_n(F)$ --- это $K_{2,n}(F) = H_2(G, \Z)$.
        Для $n \ge 5$ от поля ничего не зависит.
    }


    \chapter{Теория Галуа}
    \newlection{15 апреля 2024 г.}


    \section{Базовые понятия про расширения полей}
    Мы будем изучать расширения полей, и базовое поле будем обозначать $F$ (от английского Field), а расширенное --- $K$ (от немецкого Körper).
    Имеется теоретико-множественное включение $F \subset K$, и включение полей обозначается $K/F$ (это не надо путать с факторкольцом, никаких факторов здесь не берётся, просто общепринятое обозначение).

    $K$ является векторным пространством над $F$, и $\dim_F K \bydef [K : F]$ --- \emph{степень расширения}.

    Для элемента $\alpha \in K$ поле $F(\alpha)$ --- наименьшее подполе в $K$, содержащее $F$ и $\alpha$.
    \subsection{Лемма о простых расширениях. Алгебраические и трансцендентные элементы}
    \lemma[О простых расширениях]{\label{idontknowletitbesimple}
    Либо $F(\alpha) \cong F(t)$ --- поле дробно-рациональных функций, оно же поле частных $F[t]$, его общий элемент имеет вид $\frac{p}{q}$ ($p \in F[t], q \in F[t]^*$).

    Либо $F(\alpha) \cong F[t]/(p)$, где $p \in F[t]$ --- неприводимый.
    В этом случае $\deg p$ --- степень расширения.
    \provehere{
        Рассмотрим гомоморфизм $F$-алгебр $\phi:F[t] \map F(\alpha), t \mapsto \alpha$.

        \bullets{
            \item Если $\Ker \phi = \{0\}$, то $\Image\phi \cong F[t]$.
            Тем самым, $F(\alpha) \supset \Image \phi$, а раз $F(\alpha)$ --- поле, то оно содержит и поле частных $Q(\Image \phi) \cong Q(F[t])$.

            Так как $F(\alpha)$ --- наименьшее подполе, содержащее $\alpha$, то $F(\alpha) \cong F(t)$.

            \item Иначе, так как многочлены --- PID --- то $\Ker\phi = p \cdot F[t]$, и $\Image\phi \cong F[t]/(p)$.
            То, что $p$ неприводим, легко видеть от противного: если $p = rs$, то один из $r, s$ ассоциирован с $p$, иначе в кольце появляются делители нуля.

            Тем самым, раз $p$ неприводим, то $(p)$ --- максимальный идеал, откуда $\Image \phi \cong F[t]/(p)$ --- уже поле.
            Базисом $F[t]/(p)$ над $F$ является, например, $\left(1, \overline{t}, \dots, \overline{t}^{\deg(p) - 1}\right)$.\qedhere
        }
    }
    }
    В первом случае $F(\alpha) \cong F(t)$ элемент $\alpha \in K$ называется \emph{трансцендентным}.

    Во втором случае $F(\alpha) \cong F[t]/(p)$ элемент $\alpha \in K$ называется \emph{алгебраическим}.
    В таком случае $p \in F[t]$ --- \emph{минимальный многочлен} $\alpha$.
    Таким образом, $F(\alpha) = F[\alpha]$, где $F[\alpha]$ --- наименьшее кольцо в $K$, содержащее $F$ и $\alpha$.

    В случае расширений колец вместо слова алгебраический используют \emph{целый} при дополнительном условии унитальности минимального многочлена.
    \definition[Алгебраическое расширение $K/F$]{
        Такое расширение, что $\forall \alpha \in K$: $\alpha$ --- алгебраический.
        В противном случае ($\exists \alpha \in K$: $\alpha$ --- трансцендентный) расширение называют трансцендентным.
    }
    \definition[Конечное расширение $F/K$]{
        Расширение конечной степени: $[K : F] < \infty$.
    }
    \lemma{
        Пусть имеется композиция (ещё говорят \emph{башня}) расширений $L/K/F$.
        Тогда $[L : F] = [L : K] \cdot [K : F]$.
        \provehere{
            Пусть $(a_\alpha)_{\alpha \in A}$ --- базис $K$ над $F$, и $(b_\beta)_{\beta \in B}$ --- базис $L$ над $K$.

            Тогда несложно видеть, что $(a_{\alpha} \cdot b_\beta)_{\alpha \in A, \beta \in B}$ --- базис $L$ над $F$.
        }
    }
    \subsection{Конечные и алгебраические расширения}
    Конечные и алгебраические расширения тесно связаны между собой, но, конечно, существует бесконечное алгебраическое расширение.
    Например, $\Q\left(\sqrt{p}\middle|p \in \P\right)$ --- имеет бесконечную степень над $\Q$, так как корни из простых чисел линейно независимы над $\Q$ (что вообще говоря тоже надо обосновать, но это верный факт).
    \theorem{\label{finite-extension}
    Пусть $K/F$ --- расширение полей. Следующие условия равносильны:
    \numbers{
        \item Расширение $K/F$ конечно.
        \item Расширение $K/F$ --- алгебраическое и конечнопорождённое.
        \item $K = F[\alpha_1, \dots, \alpha_n]$, где все $\alpha_i$ алгебраичны над $F$.
    }
    \provebullets{
        \item[$(3) \then (1)$] Индукция по $n$.

        \underline{База: } $n = 0 \then K = F$.

        \underline{Переход: } $F[\alpha_1, \dots, \alpha_n] = F[\alpha_1, \dots, \alpha_{n-1}][\alpha_n]$.
        Так как $\alpha_n$ алгебраично над $F$, то оно алгебраично и над $F[\alpha_1, \dots, \alpha_{n-1}]$ (впрочем, степень минимального многочлена при увеличении поля может стать меньше).
        \item[$(1) \then (2)$]\up\up\indentlemma{
            Любой элемент конечного расширения $K/F$ алгебраический.
        }{
            Рассмотрим $\alpha \in K$.
            Так как расширение конечно, то $1, \alpha, \alpha^2, \dots$ линейно зависимы.
            Выбрав линейную зависимость $\beta_0 + \beta_1\alpha + \dots + \beta_d \alpha^d = 0$.
            Тогда $\beta_0 + \beta_1 t + \dots + \beta_d t^d$ аннулирует $\alpha$, то есть ядро $\phi$ из доказательства~(\cref{idontknowletitbesimple}) ненулевое.
        }
        Пусть $[K : F] = d$, значит, $K$ имеет базис $(\alpha_1, \dots, \alpha_d)$ над $F$.
        Тогда $K$ порождено элементами $\alpha_1, \dots, \alpha_d$ даже просто как векторное пространство, а не как $F$-алгебра.
    }
    \item[$(2)\then(3)$] Тавтологично.
    }

    \subsection{Алгебраическое замыкание одного поля в другом}
    Пусть имеется расширение полей $K/F$, тогда $\Int_K F \bydef \defset{\alpha \in K}{\alpha\text{ алгебраичен над }F}$ --- целое (алгебраическое) замыкание $F$ в $K$.

    $\Int_K F$ является полем: $\forall \alpha, \beta \in \Int_K F: \alpha - \beta, \alpha + \beta, \alpha \cdot \beta, \frac{\alpha}{\beta}$ (последнее при $\beta \ne 0$) лежат в $F[\alpha, \beta]$, а это --- конечное расширение согласно~(\cref{finite-extension}).
    \ok
    Пусть $X \subset K$ --- произвольное подмножество, где по-прежнему $K/F$ --- расширение полей.
    \definition[$X$ алгебраически независим над $F$]{
        $\forall f \in F[t_1, \dots, t_m], \forall x_1, \dots, x_m \in X$ (где $x_i$ попарно различны): $f(x_1, \dots, x_m) \ne 0$.
    }
    Иными словами, отображение из универсальной $F$-алгебры, порождённой элементами $X$ в $F[X]$ (определённое на образующих $x \mapsto x$) имеет нулевое ядро.

    \definition[Линейная оболочка $X$ над $F$]{
        $\angles{X} \bydef \Int_K F(X)$ (где, как обычно, $F(X)$ --- наименьшее подполе в $K$, содержащее $F$ и $X$).
    }
    \definition[$X$ --- (алгебраический) базис расширения $K/F$]{
        Алгебраически независимое $X$ такое, что $\angles{X} = K$.
        При этом $|X|$ называется \emph{степенью трансцендентности} $K/F$
    }
    \example{
        В кольце $F(t)$: одноэлементное множество $\{t\}$ --- базис трансцендентности.
    }
    Для алгебраического базиса $X$ верны те же аксиомы, что и для базиса векторных полей:
    \numbers{
        \item todo
        \item todo
        \item todo
    }
    \comment{Я не смог найти эти аксиомы, а интересно, может кто-то другой подскажем, как они выглядят? }
    \theorem{
        Степень трансцендентности не зависит от выбора базиса.
        \provehere{
            Аналогично подобному факту из линейной алгебры.
        }
    }
\section{Построение полей}
    \subsection{Поле разложения}
    Пусть $F$ --- поле, $f \in F[t]$.
    \definition[Поле разложения $f$ над $F$]{
        Расширение $F_f/F$, в котором $f$ раскладывается на линейные множители, и вкладывающееся (\textbf{не факт}, что единственным образом) в любое другое поле, обладающее тем же свойством.
    }
    \examples{
        \item $F = \R, f = t^2 + 1$.
        В этом случае $F_f \cong \C$.
        \item $F = \Q, f = t^3 - 2$.
        В этом случае $\Q\left(\sqrt[3]{2}\right)$ --- не поле разложения, оно вкладывается в $\R$, а $f$ в $\R$ на линейные множители не раскладывается.

        Надо присоединить ещё какой-то корень $f$, достаточно присоединить какой-то $\sqrt[3]{1}$, отличный от $1$; это то же самое, что присоединить $\sqrt{-3}$, так как $\left(\frac{-1 \pm \sqrt{-3}}{2}\right)^3 = 1$.
        Тем самым, поле разложения $\Q_f \cong \Q\left[\sqrt[3]{2}, \sqrt{-3}\right]$.
    }
    \theorem{\label{splitting-field}
    Для любого $f \in F[t]$ существует его поле разложения.
    \provehere{
        Индукция по $\deg f$.

        \underline{База:} $\deg f = 1 \then F_f = F$.

        \underline{Переход:} Пусть $f = p g$, где $p$ --- неприводим.

        Пусть $E \coloneqq F[t]/(p)$.
        В $E$: $\alpha \coloneqq \overline{t} = t + (p)$ --- корень $p$.

        Также в $E$: $f(t) = (t - \alpha) \cdot h(t)$ для некоторого $h: \deg h = \deg f - 1$.
        Положим $F_f \coloneqq E_h$, $E_h$ существует по индукционному предположению.

        Теперь пусть $K/F$ --- другое поле, в котором $f$ раскладывается на линейные множители.
        Сначала устроим вложение $E \hookrightarrow K$, отправив $\alpha$ в любой корень $p$.
        Такой корень найдётся в $K$, так как $F[t]$ --- UFD, и раз уж $f$ раскладывается на линейные множители в $K$, то $p$ и подавно.

        При этом $h$ раскладывается в $K$ на линейные множители, по индукции $E_h$ вкладывается в $K$.
    }
    }
    Пусть $K/F$ и $L/F$ --- расширения полей. Тогда гомоморфизм $\phi: K \map L$ называется \emph{гомоморфизмом полей над $F$}, если он оставляет $F$ на месте.
    Все гомоморфизмы полей по определению сохраняют $1$, в частности, любой гомоморфизм полей инъективен ($\phi(x) = \phi(y) \iff \phi(xy^{-1}) = \phi(1) \iff xy^{-1} = 1$).
    \theorem{\label{splitting-field-characterization}
        Пусть $K$ --- поле, в котором $f \in F[t]$ раскладывается на линейные множители.
        Тогда $K$ --- поле разложения $f \iff K \cong F[\alpha_1, \dots, \alpha_n]$, где $\alpha_i$ --- корни $f$.
        \provehere{
            В одну сторону видно, что построенное в~(\cref{splitting-field}) поле разложения действительно порождено корнями $f$.

            В другую сторону, можно устроить гомоморфизм $K \map F[\alpha_1, \dots, \alpha_n]$, он сюръективен (в образе лежит $F$, так как гомоморфизм --- над $F$, и в образе лежат корни $\alpha_i$, так как в них отправили корни многочлена $f$) и инъективен (любой гомоморфизм полей инъективен).
        }
    }
    \newlection{16 апреля 2024 г.}
    \lemma{\label{leftrightarrow-is-iso}
    Пусть $K/F$ и $L/F$ --- конечные расширения, и $K \map L, L \map K$ --- гомоморфизмы над $F$.
    Тогда $K \cong L$ (оба отображения --- изоморфизмы).
    \provehere{
        Достаточно убедиться, что оба гомоморфизма биективны, а это удобно проверять, рассматривая $K$ и $L$, как векторные пространства над $F$.
        Так как гомоморфизмы полей --- мономорфизмы, то $\dim_F K = \dim_F L$.
    }
    }
    \subsection{Конечные поля}
    Пусть $F$ --- конечное поле ($|F| < \infty$).
    В поле есть единница, и так как поле конечное, то его характеристика ненулевая: в конечной аддитивной группе поля любой элемент, в том числе $1$, имеет конечный порядок.
    Пусть $p$ --- эта характеристика.
    Так как поле --- область целостности, то $p \in \P$.

    Тем самым, в $F$ вкладывается поле из $p$ элементов, изоморфное факторкольцу $\Z/p\Z$.
    Обозначим поле из $p$ элементов за $\Ff_p$.

    \lemma{Любое конечное поле характеристики $p$ содержит $p^n$ элементов, где $n \in \N$.
    \provehere{Так как $F$ --- векторное пространство над $\Ff_p$, то $F \overset{\Ff_p\text{-}\cat{Vect}}\cong \Ff_p^n$ для некоторого $n \in \N$.}}
    \theorem{
        Для любого простого $p$ и любого $n \in \N$ существует поле из $p^n$ элементов.
        При этом все такие поля изоморфны (но изоморфизмов может быть несколько).
        \provebullets{
            \item Обозначим $q \coloneqq p^n \in \N$.
            Рассмотрим $f \in \Ff_p[t], f(t) = t^q - t$, и посмотрим на его поле разложения $(\Ff_p)_f$.
            Так как в $\Ff_p$: $q = 0$, то $f'(t) = qt^{q - 1} - 1 = -1$, что показывает, что у $f$ нет кратных корней.
            Тем самым, $F \coloneqq (\Ff_p)_f$ содержит по меньшей мере $q$ элементов --- корни $f$.
            \item Рассмотрим корни $f$ в его поле разложения $X \coloneqq \defset{x \in F}{x^q - x = 0}\subset F$.
            Заметим, что $X$ замкнуто относительно сложения и умножения: \[\all{x^q = x \\ y^q = y} \then \all{\left(xy\right)^q = xy \\ (x + y)^q = x^q + y^q = x + y}\]
            Первое следует из коммутативности, второе --- из того, что $p$ делит все биномиальные коэффициенты $\binom{q}{k}$, кроме $\binom{q}{0}$ и $\binom{q}{q}$; $x \mapsto x^p$ --- эндоморфизм Фробениуса из первого семестра, а $x^q = \left({{(x^p)^{\cdot}}^\cdot}\right)^p$.

            Тем самым, $X \le F$ --- подкольцо в $F$.
            Так как $\forall x \in X: x^{q - 2} = x^{-1}$, то это даже подполе.
            Более того, так как $1 \in X$, то $X/\Ff_p$ --- тоже расширение полей.

            С другой стороны, $X$ содержит все корни $t^q - t$, а $F$ --- поле разложения $t^q - t$, значит, имеется и гомоморфизм $F \map X$.
            $X/\Ff_p$ и $F/\Ff_p$ конечны, откуда~(\cref{leftrightarrow-is-iso}) $X = F$.
            \item Пусть $E$ --- произвольное поле порядка $p^n$. Его характеристика равна $p$, значит, в него вкладывается $\Ff_p$.
            $|E^*| = q - 1$, значит по теореме Лагранжа (о порядке элемента в группе) $\forall x \in E: x^{q - 1} = 1$.
            Тем самым, $f$ раскладывается на линейные множители и в $E$, откуда опять же имеется вложение $F \hookrightarrow E$. Но $|F| = |E| = q$, значит, $F \cong E$.
        }
    }
    \subsection{Алгебраическая замкнутость поля и алгебраическое замыкание}
    \lemma{\label{algebraically-closed}
    Пусть $F$ --- поле. Следующие условия эквивалентны:
    \numbers{
        \item $\forall f \in F[t] \sm F: f$ раскладывается на линейные множители в $F$.
        \item $\forall f \in F[t] \sm F: f$ имеет корень в $F$.
        \item $\forall f \in F[t] \sm F$: ($f$ неприводим $\iff \deg f = 1$).
        \item Любое алгебраическое расширение $F$ совпадает с $F$.
        \item Любое конечное расширение $F$ совпадает с $F$.
    }
    \provehere{Тривиально.
    \bullets{
        \item[$(1) \then (2)$] Тавтологично.
        \item[$(2) \then (3)$] $\then$ следует из теоремы Безу ($\alpha$ корень $\iff$ $t - \alpha$ --- делитель), $\when$ следует из того, что все многочлены степени $1$ неприводимы.
        \item[$(3) \then (4)$] Пусть $E/F$ --- алгебраическое расширение, выберем $\theta \in E$, и найдём его минимальный многочлен. Он неприводим $\then \deg f = 1$, то есть $\theta \in F$.
        \item[$(4) \then (5)$] Тавтологично.
        \item[$(5) \then (1)$] Рассмотрим $f \in F[t]$. $F_f = F \then$ все корни $f$ лежат в $F$. Так как $f$ неприводим, то $\deg f = 1$.
    }
    }
    }
    \definition[Алгебраически замкнутое поле]{
        Поле $F$, удовлетворяющее условиям из предыдущей леммы~(\cref{algebraically-closed}).
    }
    \lemma{\label{closeness-criterion}
    Пусть $K/F$ --- алгебраическое расширение, и любой многочлен из $F[t]$ раскладывается на линейные множители в $K[t]$.
    Тогда $K$ алгебраически замкнуто.
    \provehere{
        Пусть $f$ -- неприводимый в $K[t]$. Без потери общности $f$ --- унитальный: $f(t) = t^n + \alpha_{n_1}t^{n-1} + \dots + \alpha_0$.
        Построим поле $E \coloneqq F[\alpha_0, \dots, \alpha_n]$, расширение $E/F$ конечно.

        $f$ тем более неприводим в $E$, значит, можно рассмотреть поле $L \coloneqq E[t]/(f)$, расширение $L/E$, а стало быть и $L/F$ тоже конечны.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJLIl0sWzAsMSwiRSJdLFswLDIsIkYiXSxbMSwwLCJMIl0sWzAsMSwiXFx0ZXh0e9Cw0LvQs9C10LHRgNCw0LjRh9C90L59IiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDIsIlxcdGV4dHvQutC+0L3QtdGH0L3Qvn0iLDIseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsMSwiXFx0ZXh0e9C60L7QvdC10YfQvdC+fSIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
        \begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
            K \& L \\
            E \\
            F
            \arrow["{\text{алгебраично}}"', no head, from=1-1, to=2-1]
            \arrow["{\text{конечно}}", no head, from=1-2, to=2-1]
            \arrow["{\text{конечно}}"', no head, from=2-1, to=3-1]
        \end{tikzcd}

        $f$ имеет корень в $L$, назовём его $\beta$.
        В силу конечности $\beta$ алгебраично над $F$, то есть $\exists g \in F[t]: g(\beta) = 0$.
        Согласно посылке леммы, $g$ разложим на множители в $K[t]$, значит, имеется вложение $\phi: F_g \hookrightarrow K$ над $E$.
        Но $f(\beta) = 0 \then f(\phi(\beta)) = \phi(f(\beta)) = \phi(0) = 0$, то есть $f$ имеет корень в $K$.
    }
    }
    \intfact{
        Можно ослабить посылку: если $K/F$ --- алгебраическое расширение, и любой многочлен из $F[t]$ имеет корень в $K$, то $K$ алгебраически замкнуто.
    }
    \lemma{\label{closure-is-closed}
    Пусть $L/F$ --- расширение полей, причём $L$ алгебраически замкнуто.
    Тогда $\Int_L F$ тоже алгебраически замкнуто.
    \provehere{
        Рассмотрим $f \in F[t]$. В $L$ он раскладывается на линейные множители $f(t) = (t - \alpha_1) \proddots (t - \alpha_n)$, где $\alpha_i \in L$.
        По определению алгебраического замыкания $F$ в $L$, $\alpha_i \in \Int_L F$.
        Применяя~(\cref{closeness-criterion}), получаем, что $\Int_L F$ алгебраически замкнуто.
    }
    }
    \example{
        Рассмотрим расширение $\C/\Q$. Целые алгебраические числа $\A \bydef \Int_\C\Q$ --- алгебраически замкнутое подполе в $\C$.
        Оно не совпадает с $\C$, так как $\C$ континуально, а $\Int_\C\Q$ счётно.
    }
    \definition[Алгебраическое замыкание поля $F$]{
        Алгебраическое расширение $F$, являющееся алгебраически замкнутым полем.
        Обозначается $\alg{F}$.
    }
%    Далее следует доказать, что у любого поля имеется алгебраическое замыкание.
%    Для доказательства существования $\alg{F}$, достаточно доказать существование унитальной $F$-алгебры $R$ (кольца с единицей, содержащего $F$), в которой все многочлены из $F[t]$ имеют корень:
%    в этом кольце найдётся максимальный идеал $\mathfrak{m} \normeq R$, и факторкольцо $R/\mathfrak{m}$ является полем, содержащем корни всех многочленов из $F[t]$.
%
%    Это кольцо можно строить, например, как $\bigotimes\limits_{f \in F[t]}F_f$, но надо доказать, что это не нуль.
%    Мы пойдём немного другим путём.
    \theorem{
        У любого поля $F$ существует алгебраическое замыкание.
        \provehere{
            Рассмотрим множество многочленов $F[t]$, как множество индексов, и введём множество переменных $X \coloneqq \defset{x_f}{f \in F[t]}$.
            Далее рассмотрим кольцо многочленов от этих переменных $F[X]$, и профакторизуем его по идеалу $J \coloneqq (f(x_f)| f \in F[t])$.
            \indentlemma{
                Этот идеал не совпадает со всем кольцом: $J \ne F[X]$.
            }{
                Пойдём от противного: $J = F[X] \then 1 \in J$, то есть существует конечная линейная комбинация \[g_1 f_1(x_{f_1}) + \dots + f_m f_m(x_{f_m}) = 1\text{, где }f_i, g_i \in F[t]\label{in-ideal}\tag{$\triangle$}\]
                Корни конечного множества многочленов мы умеем присоединять: введём $f \coloneqq f_1 \proddots f_m$, в $F_f$ у каждого из $f_i$ есть корень, назовём его $\beta_i$.
                Теперь устроим гомоморфизм $F$-алгебр $\phi: F[X] \map F_f, \all{x_{f_i} \mapsto \beta_i \\ x_g \mapsto 0}$, он определён согласно универсальному свойству кольца многочленов.

                В образe~(\ref{in-ideal}) обращается в равенство $0 = 1$, но в $F_f$ это, конечно, неверно.
            }
            Раз $J \normneq F[X]$ не совпадает со всем кольцом, то можно взять максимальный идеал $\mathfrak{m}$, содержащий $J$, и не совпадающий со всем кольцом (лемма Цорна).
            Факторкольцо $E_1 \coloneqq F[X]/\mathfrak{m}$ является полем, в котором образ переменной $x_f$ --- корень многочлена $f$.

            К сожалению, не факт, что $E_1$ алгебраически замкнуто:~(\cref{closeness-criterion}) неприменима, так как неизвестно, алгебраично ли расширение $E_1/F$.

            Обозначим $E_0 \coloneqq F$, и устроим итерации, по $E_i$ получая $E_{i+1}$ согласно вышеописанной процедуре.
            Для цепочки вложений полей $E_0 \hookrightarrow E_1 \hookrightarrow E_2 \hookrightarrow \dots$ можно рассмотреть объединение с понятно определёнными операциями.
            Поле $\overline{F} \coloneqq \bigcup\limits_{i = 0}^{\infty}E_i$ уже является алгебраически замкнутым полем (любой многочлен из $\overline{F}[t]$ имеет конечное количество коэффициентов, которые все лежат в каком-то $E_N$, а корень можно найти в $E_{N+1}$).

            Теперь осталось положить $\alg{F} \coloneqq \Int_{\overline{F}}F$, оно алгебраически замкнуто, согласно~(\cref{closure-is-closed}).
        }
    }
    \newlection{22 апреля 2024 г.}
    \proposal{
        Пусть $E/F$ --- алгебраическое расширение, и $L/F$ --- такое расширение, что $\forall f \in F[t]$: $f$ раскладывается на линейные множители в $L[t]$.
        Обозначим $K \coloneqq \Int_L F$. Тогда
        \numbers{
            \item Существует вложение $\phi: E \hookrightarrow L$ над $F$.
            \item Для всякого вложения $\phi$: $\phi(E) \subset K$.
            \item Если $E$ алгебраически замкнуто, то $\phi(E) = K$.
        }
        \provenumbers{
            \item Образуем множество $\mathscr{X} \coloneqq \defset{(\tilde{F}, \phi)}{F \subset \tilde{F} \subset E, \phi: \tilde{F} \hookrightarrow L}$.
            На $\mathscr{X}$ введём частичный порядок: $(F', \phi') \preceq (F'', \phi'') \iff F' \subset F''$ и $\phi''\big|_{F'} = \phi'$.

            $\mathscr{X}$ непусто, так как $(F, F \hookrightarrow L) \in \mathscr{X}$.

            Убедимся, что здесь применима лемма Цорна: если $(F_\alpha, \phi_\alpha)_{\alpha \in A}$ --- цепь, то $\tilde{F} \coloneqq \bigcup\limits_{\alpha \in A}F_\alpha$ вместе с $\tilde{\phi}$ --- верхняя грань (где $\tilde{\phi}$ определено так: и $\forall x \in \tilde{F}: \tilde{\phi}(x) \coloneqq \phi_\alpha(x)$ для произвольного $\alpha$, такого, что $x \in F_\alpha$).

            Тем самым, имеется максимальный элемент $(\tilde{F}, \tilde{\phi}) \in \mathscr{X}$.
            Предположим, что $\tilde{F} \ne E$, то есть $\exists \theta \in E \sm \tilde{F}$.
            Пусть $f \in F[t]$ --- минимальный многочлен $\theta$ в $F$, и $g \in \tilde{F}[t]$ --- минимальный многочлен $\theta$ над $\tilde{F}$.

            Отождествим $\tilde{F}$ с его образом $\tilde{\phi}(\tilde{F}) \subset L$ ($\phi$ инъективно, как гомоморфизм полей).

            В $L$ многочлен $f$ раскладывается на линейные множители.
            Так как $g \divs f$, то $g \in L[t]$ тоже раскладывается на линейные множители, то есть $\exists \alpha \in L: g(\alpha) = 0$.
            Согласно универсальному свойству простого расширения: $\tilde{F}[\theta] \cong \tilde{F}[t]/(g)$, то есть $\exists!\psi: \tilde{F}[\theta] \map \tilde{F}[\alpha]$ --- гомоморфизм полей над $\tilde{F}$, такой, что $\psi(\theta) = \alpha$.
            \item Корень $f \in F[t]$ переходит в корень, поэтому $\phi$ сохраняет множество алгебраических элементов, откуда $\phi(E) \subset K$.
            \item Рассмотрим $\beta \in K$, это корень некоторого унитального многочлена $f \in F[t]$.
            В $E$ многочлен $f$ раскладывается на линейные множители $f(t) = (t - \alpha_1) \proddots (t - \alpha_n)$, где $\alpha_i \in E$.
            Применяя индуцированный $\phi: E[t] \map L[t]$ к данному разложению, получаем $f(t) = (t - \phi(\alpha_1)) \proddots (t - \phi(\alpha_n))$.
            Подставляя $\beta$, получаем, нуль. Значит, $\beta = \phi(\alpha_i)$ для некоторого $i$.
        }
    }
    \corollary{
        Любое алгебраическое расширение $F$ вкладывается в алгебраическое замыкание $F$.
    }
    \corollary{
        Алгебраическое замыкание $F$ вкладывается в любое алгебраически замкнутое поле, содержащее $F$.
    }
    \corollary{
        Алгебраическое замыкание единственно с точностью до \textbf{не единственного} изоморфизма.
    }

    \section{Сепарабельность}
    Пусть $F$ --- поле, $f \in F[t]$.
    \definition[Сепарабельный многочлен $f$]{
        $f$ не имеет кратных корней в $\alg{F}$.
    }
    Так как кратные корни --- это корни $\gcd(f, f')$, то условие сепарабельности эквивалентно условию $\gcd(f, f') = 1$.

    Если $f = \prod\limits_{i = 1}^{n}f_i$, где $f_i$ неприводимы, то $f$ сепарабелен $\iff$ все $f_i$ различны и сепарабельны.
    Неприводимый же многочлен на сепарабельность проверять легко: $\deg f' < \deg f$, поэтому при $\deg f > 0$: $\gcd(f, f') \ne 1 \iff f' = 0$ (что бывает только в конечной характеристике).

    Теперь пусть $E/F$ --- алгебраическое расширение полей.
    \definition[$\alpha \in E$ сепарабелен над $F$]{Минимальный многочлен $\alpha$ сепарабелен.}
    \definition[Расширение $E/F$ сепарабельно]{$\forall \alpha \in E$: $\alpha \in E$ сепарабелен над $F$. }
    \intfact{
        $F = E^{\Aut(E/F)} \iff E/F$ --- сепарабельное расширение. Здесь $\Aut(E/F)$ --- автоморфизмы $E$, тождественные над $F$, и для $G \subset \Aut(E/F)$: $E^G \bydef \defset{x \in E}{\forall g \in G: g x = x}$ --- множество точек, оставляемых под действием $G$ на месте.
    }
    \examples[Сепарабельные и несепарабельные расширения]{
        \item Любое расширение поля характеристики нуль сепарабельно.
        \item Пусть $E \coloneqq \Ff_p(t)$, $F \coloneqq \Ff_p(t^p)$ (подполе в $E$, содержащее только степени $t$, кратные $p$).
        Рассмотрим многочлен $x^p - t^p \in F[x]$.
        Над $E: x^p - t^p = (x - t)^p$, то есть он раскладывается на кратные линейные множители.
        Но над $F$ многочлен неприводим, так как легко перечислить все его делители в $E[t]$, и убедиться, что в $F$ они не лежат.

        Получается, $x^p - t^p \in F[x]$ неприводим и несепарабелен.
        И действительно, $(x^p - t^p)' = px^{p-1} = 0$.
    }
    \definition[Совершенное поле $F$]{
        Любое алгебраическое расширение $F$ сепарабельно.
    }
    \exercise{\label{frob-sep}
    Верно ли, что $F$ совершенно $\iff$ эндоморфизм Фробениуса $\Frob: F \map F, x \mapsto x^p$ сюръективен?
    }
    \examples{
        \item Если $\chr F = 0$, то $F$ совершенно.
        \item Если $|F| < \infty$, то $F$ совершенно.
        \provehere{
            Рассмотрим $\theta \in \alg{F}$. $|F[\theta]| = q^n$, где $q \coloneqq |F|$.
            Тогда $\theta^{q^n - 1} = 1$ (теорема Лагранжа для мультипликативной группы $F[\theta]^*$), то есть $\theta$ --- корень $t^{q^n - 1} - 1$.

            Этот многочлен взаимно прост со своей производной: $\left(t^{q^n - 1} - 1\right)' = (q^n - 1)t^{q^n - 2} = -t^{q^n - 2}$, и $\gcd(-t^{q^n - 2}, t^{q^n - 1} - 1) = 1$.

            Минимальный многочлен $\theta$ делит $t^{q^n-1}-1$, значит, он тоже не имеет кратных корней.
        }
    }
    \newlection{29 апреля 2024 г.}

    \proposal{
        Пусть $E/F$ --- алгебраическое расширение полей. Следующие условия эквивалентны:
        \numbers{
            \item $E/F$ несепарабельно.
            \item Минимальный многочлен некоторого $\theta \in E$ несепарабелен над $F$.
%    \item $\exists f \in F[t]$ --- несепарабельный и неприводимый в $F[t]$, причём $f$ имеет корень в $E$.
            \item $\exists f \in F[t]$ --- неприводимый в $F[t]$, такой, что $f' = 0$, причём $f$ имеет корень в $E$.
            \item $\exists f \in F[t]$ --- неприводимый в $F[t]$, такой, что $f$ имеет кратный корень в $E$.
            \item $\exists f \in F[t]$ --- неприводимый в $F[t]$, такой, что $\exists g \in F[t]: f(t) = g(t^p)$, причём $f$ имеет корень $E$.
        }
        \provehere{
            $(1) \iff (2) \then (3) \iff (4) \then (5)$ очевидно (эквивалентность $(3) \iff (4)$ соблюдена, так как для неприводимого многочлена $f: \gcd(f, f') \ne 1 \iff f' = 0$).

            Докажем $(5) \then (2)$. Пусть $\theta \in E$ --- корень $f$.
            Подставим: $f(\theta) = g(\theta^p) = 0$.
            Получили $(t - \theta^p) \divs g \then (t - \theta)^p = t^p - \theta^p \divs f$.
        }
    }
    На самом деле, данное предложение говорит, что кратность любого корня неприводимого несепарабельного многочлена делится на $p$.
    Используя его, несложно доказать эквивалентность из~(\cref{frob-sep}):
    \provehere{
        Если $E/F$ несепарабельно, то найдётся неприводимый многочлен $f = (\alpha_n t^{pn} + \alpha_{n-1}t^{p(n-1)} + \dots + \alpha_0) \in F[t]$.
        Но так как автоморфизм Фробениуса сюръективен, то $\forall \alpha_j \in F: \exists \beta_j \in F: \beta_j^p = \alpha_j$.
        Получаем
        \[\alpha_n t^{pn} + \alpha_{n-1}t^{p(n-1)} + \dots + \alpha_0 = (\beta_n t^{pn} + \beta_{n-1}t^{p(n-1)} + \dots + \beta_0)^p\]
        что противоречит неприводимости $f$.
    }
    \exercise{Сепарабельное расширение сепарабельного расширения сепарабельно.}
    \section{Расширения Галуа}
    \definition[Расширение $E/F$ нормально]{
        Любой неприводимый многочлен из $F[t]$, имеющий корень в $E$, раскладывается на линейные множители в $E$
    }
    \example{
        $\Q\left[\sqrt[3]{2}\right]/\Q$ не нормально, так как $t^3 - 2$ не раскладывается на линейные множители даже в $\R$.

        Любое расширение несложно сделать нормальным, присоединив все корни всех неприводимых многочленов из $F[t]$, имеющих корни в $E$.
    }
    \definition[Расширение Галуа]{Конечное сепарабельное нормальное расширение.}
    Условие конечности в определении иногда отсутствует, но мы другими заниматься не будем.

    \definition[Группа Галуа расширения Галуа $E/F$]{Группа автоморфизмов $E$, тождественных на $F$: $\Gal(E/F) \bydef \Aut(E/F)$.}
    Группа автоморфизмов расширения $E/F$ имеет смысл и не для расширения Галуа, но там не используется запись $\Gal$.
    \subsection{Теорема о количестве вложений}
    \theorem{\label{harvesting}
    Пусть имеются расширения $K/F$ и $E/F$, и $f \in F[t]$.
    При этом $K$ порождено некоторыми корнями многочлена $f$, а в $E$: $f$ раскладывается на линейные множители.
    Пусть $n$ --- количество вложений $K \hookrightarrow E$ над $F$.
    \numbers{
        \item $0 < n\le [K:F]$
        \item Если $f$ сепарабелен, то $n = [K:F]$.
        \item Если $f$ несепарабелен, свободен от квадратов в $F[t]$, и любой неприводимый в $F[t]$ сомножитель $f$ имеет корень в $K$, то $n < [K:F]$.
    }
    \provehere{
        Индукция по степени расширения $[K:F]$.

        \underline{База:} $[K:F] = 1 \iff K = F$. Все три пункта очевидны.

        \underline{Переход:} разложим $f = f_1 \proddots f_n$, где неприводимые $f_i \in F[t]$.
        $K \ne F \then$ не все $f_i$ не имеют корней в $K \sm F$.
        Без потери общности $f_1$ имеет корень в $K\sm F$.
        Дополнительно, если такой существует, то выберем $f_1$, как несепарабельный множитель, имеющий корень в $K \sm F$.

        Зафиксируем какое-то вложение $F[t]/(f_1) \hookrightarrow K$, отождествим $F[t]/(f_1)$ со своим образом $\tilde{F} \le K$.
        Используя универсальное свойство простого расширения, получаем, что количество вложений $\tilde{F} \hookrightarrow E$ (назовём это количество $k$) равно количеству корней $f_1$ в $E$.

        Если $f_1$ сепарабелен, то в $E$ он имеет $\deg f_1$ корней, иначе --- строго меньше.

        Пусть $\phi: \tilde{F} \hookrightarrow E$ --- фиксированное вложение.
        Отождествим $\tilde{F}$ и $\phi(\tilde{F})$.
        Расширение $K/\tilde{F}$ порождено корнями $f$, он по-прежнему раскладывается на линейные множители в $E$.

        $[K:\tilde{F}] \cdot [\tilde{F} : F] = [K : F] \then [K : \tilde{F}] < [K : F]$.
        По индукционному предположению существует $m$ вложений $K \hookrightarrow E$ над $\tilde{F}$, где $m \le [K : \tilde{F}]$.

        Так как столько вложений имеется для каждого $\phi$, то $n = km \le [\tilde{F} : F] \cdot [K : \tilde{F}] = [K : F]$.
        При этом, если $f$ сепарабелен и свободен от квадратов, то несепарабельный $f_1$, имеющий корень в $K$, найдётся, тогда $k < [\tilde{F} : F]$ и $n < [K : F]$.
    }
    }
    \corollary{\label{harvesting-corollary}
    Пусть $K/F$ и $E/F$ --- конечные расширения.
    \numbers{
        \item Количество вложений $K \hookrightarrow E$ над $F$ не превосходит $[K : F]$.
        \item Существует расширение $L/E$: имеется вложение $K \hookrightarrow L$ над $F$.
        \item Если $E/F$ --- расширение Галуа, то количество вложений $K \hookrightarrow E$ над $F$ равно либо $[K : F]$, либо $0$.
    }
    \provehere{
        Пусть $K = F[\alpha_1, \dots, \alpha_n]$, пусть $f_1, \dots, f_n$ --- минимальные многочлены $\alpha_1, \dots, \alpha_n$ соответственно.

        Избавимся от ассоциированных, оставив только уникальные, и положим $f$ равному их произведению.

        Положим $L \coloneqq E_f$.
        Теперь выполнена посылка~(\cref{harvesting}), откуда количество вложений $K \hookrightarrow L$ над $F$ не $0$, но и не более $[K : F]$.

        Если существует вложение $K \hookrightarrow E$ над $F$, то все $f_i$ имеют корни в $E$.
        Если дополнительно $E/F$ --- расширение Галуа, то и подрасширение $E/F$ --- сепарабельно.
        Тогда $\alpha_1, \dots, \alpha_n$ сепарабельны над $F$, то есть $f$ сепарабелен над $F$.
        А из нормальности расширения $E/F$ все $f_i$ раскладываются на линейные множители в $E$.
        Тем самым, $L = E$, и~(\cref{harvesting}) завершает доказательство.
    }
    }
    \corollary{
        Для расширения Галуа: $|\Gal(E/F)| = [E : F]$.
    }
    \subsection{Лемма Артина}
    \theorem[Лемма Артина]{\label{lemma-artin}
    Пусть $E$ --- поле, и $G \le \Aut(E)$, $|G| < \infty$. Обозначим $F \coloneqq E^G \bydef \defset{\alpha \in E}{\forall g \in G: g\alpha = \alpha}$.

    Тогда $[E : F] = |G|$.
    \provehere{
        Достаточно доказать, что $[E:F] \le |G|$, обратное неравенство следует из~(\cref{harvesting-corollary}).

        Пусть $G = \{\phi_1, \phi_2, \dots, \phi_n\}$, где $\phi_1 = 1_G = \id_E$.
        Пусть $m > n, \alpha_1, \dots, \alpha_m \in E$, докажем, что $\alpha_1, \dots, \alpha_m$ линейно зависимы над $F$, то есть что имеет место линейная зависимость $\sum\limits_{i = 1}^{m}\alpha_i x_i = 0$.

        Заведём систему линейных уравнений $\left\{\sum\limits_{i = 1}^{m}\phi_j(\alpha_i)x_i = 0\right\}_{j = 1}^{n}$ относительно переменных $x_1, \dots, x_m$.
        В ней уравнений меньше, чем неизвестных, поэтому по теореме о размерности пересечения имеется ненулевое решение $\beta_1, \dots, \beta_m \in E$.
        Дальше надо доказать, что найдётся решение, где все $\beta_i \in F$.

        Выберем набор $\beta_1, \dots, \beta_m$ с наименьшим количеством ненулевых элементов.
        Пусть $\beta_i \ne 0$ для некоторого $i$, отнормируем решение, поделив на $\beta_i$.
        Теперь $\beta_i = 1$. Утверждается, что все $\beta_i \in F$.

        От противного: если $\exists k: \beta_k \notin F$, то $\exists l: \phi_l(\beta_k) \ne \beta_k$.
        Тогда не только $\beta_1, \dots, \beta_m$ --- решение, но и $\phi_l(\beta_1), \dots, \phi_l(\beta_m)$ --- тоже решение, причём их поэлементная разность имеет меньшее количество ненулевых элементов.
        Получаем противоречие.
    }
    }
    \newlection{6 мая 2024 г.}
    \corollary{\label{group-field-group}
        Для любой группы $G \le \Aut(E)$: $\Aut(E/E^G) = G$.
        \provehere{
            Очевидно, $G \le \Aut(E/E^G)$.
            По лемме Артина $|G| = [E : E^G] \ge |\Aut(E/E^G)| \ge |G|$, и равенство достигается только при $G = \Aut(E/E^G)$
        }
    }
    \subsection{Теорема о характеризации расширений Галуа}
    \theorem[Характеризация расширений Галуа]{\label{galois-extension}
    Пусть $E/F$ --- расширение полей. Следующие условия эквивалентны:
    \numbers{
        \item $E/F$ --- расширение Галуа.
        \item $E$ --- поле разложения некоторого сепарабельного $f \in F[t]$.
        \item $F = E^{\Aut(E/F)}$ и $[E:F] < \infty$.
        \item Для некоторой конечной $G \le \Aut(E)$: $F = E^G$.
    }
    \provebullets{
        \item[$(1) \then (2)$] Аналогично доказательству~(\cref{harvesting-corollary}).
        Так как $E/F$ --- расширение Галуа, то оно порождено конечным множеством элементов: $E = F[\alpha_1, \dots, \alpha_n]$.
        Пусть $f_i \in F[t]$ --- минимальные многочлены $\alpha_i$, и пусть $f \coloneqq f_{i_1} \proddots f_{i_k}$, где перемножаются уникальные среди $f_i$.

        $f$ сепарабелен, как произведение взаимно простых сепарабельных многочленов, $E$ порождено корнями $f$, и так как $E/F$ нормально, то $f$ разложим на линейные множители в $E$.
        Согласно~(\cref{splitting-field-characterization}), $E = F_f$.
        \item[$(2)\then(3)$] Согласно~(\cref{harvesting-corollary}), $|\Aut(E/F)| = [E : F]$.
        Ясно, что $F \subset \tilde{F} \coloneqq E^{\Aut(E/F)}$.
        С другой стороны, по лемме Артина, $[E : \tilde{F}] = |\Aut(E/F)|$, откуда $[\tilde{F} : F] = 1$.
        \item[$(3) \then (4)$] Согласно~(\cref{harvesting}), $[E : F] < \infty \then |\Aut(E/F)| < \infty$, тем самым, $G \coloneqq \Aut(E/F)$ подойдёт.
        \item[$(4)\then(1)$] По лемме Артина, $[E : F] = |G|$, тем самым, расширение конечно.
        Пусть $f \in F[t]$ --- неприводимый, имеющий корень $\alpha \in E$.
        Рассмотрим орбиту $\alpha$ под действием $G$: $G\alpha = \{\alpha_1, \dots, \alpha_m\}$.
        Пусть $h(t) \coloneqq (t - \alpha_1) \proddots (t - \alpha_m) \in E[t]$.
        Раскрыв скобки (по теореме Виета) \[h(t) = t^m - s_1(\alpha_1,\dots,\alpha_m)t^{m-1}+s_2(\alpha_1, \dots,\alpha_m)t^{m-2}+\dots+(-1)^m s_m(\alpha_1, \dots, \alpha_m)\]
        где $s_k(\alpha_1, \dots, \alpha_m)$ --- $k$-й основной симметрический многочлен, то есть сумма всевозможных произведений вида $\alpha_{i_1} \proddots \alpha_{i_k}$ по всем кортежам $1 \le i_1 < \dots < i_k \le m$.
        Эти коэффициенты инвариантны под действием $G$, значит, они лежат в $F$.
        Под действием $G$ коэффициенты $h$ остаются на месте, а корни $h$ переходят в корни.

        Таким образом, $\forall g \in G: \exists \sigma \in S_m: g(\alpha_i) = \alpha_{\sigma(i)}$.
        Но раз $h$ раскладывается на различные линейные множители в $E[t]$, то минимальный многочлен $\alpha$ (который делит $h$) тоже раскладывается на различные линейные множители в $E[t]$.
        Так как $\alpha \in E$ был произвольным, то $E/F$ по определению сепарабельно и нормально.
    }
    }

    \subsection{Характеризация сепарабельных расширений}
    \corollary{\label{sepa}
    Расширение $E/F$, порождённое конечным числом сепарабельных элементов, вкладывается в расширение Галуа (и, следовательно, сепарабельно).
    \provehere{
        Аналогично доказательству~(\cref{harvesting-corollary}).
        Пусть $E = F[\alpha_1, \dots, \alpha_n]$, где $\alpha_i$ сепарабельны.
        Пусть $f_i \in F[t]$ --- минимальный многочлены $\alpha_i$, и пусть $f \coloneqq f_{i_1} \proddots f_{i_k}$, где перемножаются уникальные среди $f_i$.

        $f$ сепарабелен, можно устроить вложение $E \hookrightarrow F_f$ (оно есть, например, согласно~(\cref{harvesting-corollary})), а $F_f$ --- расширение Галуа согласно~(\cref{galois-extension}).
    }
    }
    \corollary{
        Пусть $K/F$ --- расширение полей.
        Множество элементов $K$, сепарабельных над $F$, образует поле.
        \provehere{
            $\forall \alpha, \beta \in K: F[\alpha, \beta]$ сепарабельно~(\cref{sepa}), значит, $\alpha + \beta, \alpha\beta$ и даже $\frac{\alpha}{\beta}$ (при $\beta \ne 0$) тоже сепарабельны.
        }
    }
    Это поле называется \emph{сепарабельным замыканием} $F$ в $K$.
    Если опускают $K$, то подразумевается сепарабельное замыкание в $\sep{F} \subset \alg{F}$.
    \definition[Чисто несепарабельное расширение $K/E$]{
        $\forall \alpha \in K \sm E$: $\alpha$ не сепарабелен над $E$.
    }
    \corollary{
        Любое алгебраическое расширение $K/F$ раскладывается в башню сепарабельного расширения $E/F$ и чисто несепарабельного $K/E$.
        \provehere{
            Выберем за $E$ сепарабельное замыкание $F$ в $K$.
            Дальше надо проверить, что элементы в $K$, несепарабельные над $F$, остались несепарабельными над $E$, упражнение читателю.
        }
    }

    \section{Соответствие Галуа}
    \corollary{\label{under-galois}
        Пусть имеется башня расширений $E/K/F$, и $E/F$ --- расширение Галуа.
        Тогда $E/K$ --- расширение Галуа.
        \provehere{
            Раз $E/F$ --- расширение Галуа, то $\exists f \in F[t]: E = F_f$, где $f$ сепарабелен.
            Тогда $E = K_f$, значит, $E/K$ --- действительно расширение Галуа.
        }
    }


    Теперь у нас всё готово, чтобы установить соответствие Галуа.

    $E/F$ --- расширение Галуа, $G \coloneqq \Gal(E/F) = \Aut(E/F)$.
    Пусть $\mathcal{F} \coloneqq \defset{K \le E}{F \le K \le E}$, и $\mathcal{G} \coloneqq \{H \le G\}$.
    Тогда имеется биекция $\mathcal{F} \leftrightarrow \mathcal{G}$: подполю $K \in \mathcal{F}$ сопоставляется $\Gal(E/K) \le G$.
    Обратно, подгруппе $H \in \mathcal{G}$ сопоставляется подполе $E^H$.
    \theorem[Соответствие Галуа]{
        Указанные выше отображения $\mathcal{F} \leftrightarrow \mathcal{G}$ --- взаимно обратные биекции, удовлетворяющие следующим свойствам:
        \bullets{
            \item Монотонность по включению: $H \le H' \le G \then E^{H'} \le E^H$.
            \item При $H \le H' \le G: |H : H'| = [E^H : E^{H'}]$.
            \item $\forall \sigma \in G: \sigma\left(E^H\right) = E^{\sigma H \sigma^{-1}}$.
            \item $E^H/F$ --- расширение Галуа $\iff H \normeq G$.
            В этом случае $\Gal(E^H / F) \cong G/H$.
        }
        \provebullets{
            \item $\Gal(E/E^H) = H$ --- следствие из леммы Артина~(\cref{group-field-group}).
            \item $E^{\Gal(E/K)} = K$ согласно теореме о характеризации расширений Галуа~(\cref{galois-extension}).
            $E/K$ --- расширение Галуа согласно ей же (точнее,~(\cref{under-galois})).
            \item Монотонность по включению очевидна.
            \item По лемме Артина $\forall H' \le H \le G: |H : H'| = \frac{|H|}{|H'|} = \frac{\left[E:E^H\right]}{\left[E : E^{H'}\right]} = \left[E^{H'} : E^H\right]$.
            \item Запишем цепочку равносильностей $\alpha \in E^H \iff \forall h \in H: h(\alpha) = \alpha \iff \forall h \in H: \sigma h \sigma^{-1}(\sigma \alpha) = \sigma \alpha \iff \sigma \alpha \in E^{\sigma H \sigma^{-1}}$.
            \item $H \normeq G \iff \forall \sigma \in G: \sigma H \sigma^{-1} = H \iff \forall \sigma \in G: \sigma(E^H) = E^H$.
            Рассмотрим гомоморфизм $\theta: G \map \Aut(E^H / F), \sigma \mapsto \sigma\big|_{E^H}$.
            Очевидно, $\Ker(\theta) = H$. Покажем, что $\theta$ сюръективно.
            Пусть $\eta \in \Aut(E^H / F)$, покажем, что $\eta \in \Image(\theta)$.

            Расширение $E/F$ нормально, значит, $\exists f \in F[t]: E = F_f$.
            Тогда и подавно $(E^H)_f = E$.
            Так как $E = (E^H)_f \cong \eta(E^H)_f$, то по теореме о количестве вложений $\exists$ хотя бы одно вложение $E \map E$ над $\eta$ (то есть продолжение $\eta$, как отображения полей).
            Тем самым, $\Aut(E^H / F) \cong G/H$.
            Теперь заметим, что $F = E^G = (E^H)^{G/H} \then E^H / F$ --- расширение Галуа, и $\Gal(E^H/F) \cong G/H$.

            Обратно: пусть $E^H / F$ нормально, $\alpha \in E^H$ --- корень некоторого многочлена $f \in F[t]$.
            Тогда $\forall \sigma \in G: \sigma(\alpha)$ --- корень $f$, то есть $\sigma(E^H) = E^H$.
            С другой стороны, $\sigma(E^H) = E^{\sigma H \sigma^{-1}}$, и так как соответствие Галуа биективно, то $\forall \sigma \in G: \sigma H \sigma^{-1} = H$, то есть $H \normeq G$.
        }
    }
    Теперь можно нарисовать некоторые картинки:
    \begin{figure}[!ht]
        \begin{minipage}{0.5\textwidth}
            % https://q.uiver.app/#q=WzAsNCxbMSwyLCJcXFEiXSxbMCwxLCJcXFFcXGxlZnRbXFxzcXJ0ezJ9XFxyaWdodF0iXSxbMiwxLCJcXFFcXGxlZnRbXFxzcXJ0ezN9XFxyaWdodF0iXSxbMSwwLCJcXFFcXGxlZnRbXFxzcXJ0ezJ9LFxcc3FydHszfVxccmlnaHRdIl0sWzMsMSwiQ18yIiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDIsIkNfMiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwwLCJDXzIiLDIseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiQ18yIiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDAsIkNfMlxcb3BsdXMgQ18yIiwxLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& {\Q\left[\sqrt{2},\sqrt{3}\right]} \\
                  {\Q\left[\sqrt{2}\right]} \&\& {\Q\left[\sqrt{3}\right]} \\
                  \& \Q
                  \arrow["{C_2}"', no head, from=1-2, to=2-1]
                  \arrow["{C_2}", no head, from=1-2, to=2-3]
                  \arrow["{C_2\oplus C_2}"{description}, no head, from=1-2, to=3-2]
                  \arrow["{C_2}"', no head, from=2-1, to=3-2]
                  \arrow["{C_2}"', no head, from=3-2, to=2-3]
            \end{tikzcd}\]
        \end{minipage}
        \begin{minipage}{0.5\textwidth}
            % https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXFFfeyh4XjMgLSAyKX0iXSxbMiwxLCJcXFFcXGxlZnRbXFxzcXJ0WzNdezJ9XFxyaWdodF0iXSxbMSwyLCJcXFEiXSxbMCwxLCJcXFFcXGxlZnRbXFxzcXJ0ey0zfVxccmlnaHRdIl0sWzAsMSwiQ18yIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDIsIlxcdGV4dHvQvdC1INCT0LDQu9GD0LB9IiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDIsIkNfMiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwzLCJDXzMiLDIseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiU18zIiwxLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \& {\Q_{(x^3 - 2)}} \\
                  {\Q\left[\sqrt{-3}\right]} \&\& {\Q\left[\sqrt[3]{2}\right]} \\
                  \& \Q
                  \arrow["{C_3}"', no head, from=1-2, to=2-1]
                  \arrow["{C_2}", no head, from=1-2, to=2-3]
                  \arrow["{S_3}"{description}, no head, from=1-2, to=3-2]
                  \arrow["{C_2}"', no head, from=2-1, to=3-2]
                  \arrow["{\text{не Галуа}}", no head, from=2-3, to=3-2]
            \end{tikzcd}\]
        \end{minipage}
    \end{figure}

    Здесь одно поле находится над другим, если верхнее --- расширение нижнего.
    Их обычно соединяют просто чертой, а не стрелкой, и на черте написана группа Галуа расширения.
    \newlection{20 мая 2024 г.}
    \definition[Решётка]{
        Частично упорядоченное множество, в котором есть все конечные инфимумы (наибольший элемент, меньший данных) и супремумы (наименьший элемент, больший данных).
    }
    Соответствие Галуа устанавливает антиизоморфизм решёток подгрупп и подполей, где порядок индуцирован с включения.

    Для $K$ и $L$ --- подполей большого поля $E$ --- наименьшее поле, содержащее $K$ и $L$, обозначают $K \cdot L$.
    \proposal{\label{prop}
    Пусть $E/F$ --- расширение Галуа, $G \coloneqq \Gal(E/F)$.
    Выберем подгруппы $P, Q \le G$, и соответствующие им поля $K \coloneqq E^P, L \coloneqq E^Q$, и рассмотрим следующую башню полей (поле выше --- расширение поля ниже):
    % https://q.uiver.app/#q=WzAsNixbMSwwLCJFIl0sWzEsMSwiS1xcY2RvdCBMID0gRV57UCBcXGNhcCBRfSJdLFswLDIsIksgPSBFXlAiXSxbMiwyLCJMID0gRV5RIl0sWzEsMywiSyBcXGNhcCBMID0gRV57XFxhbmdsZXN7UCBcXGN1cCBRfX0iXSxbMSw0LCJGIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw0LCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDQsIiIsMSx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw1LCIiLDEseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=tiny,row sep=small]
              \& E \\
              \& {K\cdot L = E^{P \cap Q}} \\
              {K = E^P} \&\& {L = E^Q} \\
              \& {K \cap L = E^{\angles{P \cup Q}}} \\
              \& F
              \arrow[no head, from=1-2, to=2-2]
              \arrow[no head, from=2-2, to=3-1]
              \arrow[no head, from=2-2, to=3-3]
              \arrow[no head, from=3-1, to=4-2]
              \arrow[no head, from=3-3, to=4-2]
              \arrow[no head, from=4-2, to=5-2]
        \end{tikzcd}\]
        Если $K/(K\cap L)$ нормально, то и $(K \cdot L)/L$ нормально, причём $\Gal(K \cdot L / L) \cong \Gal(K/ K \cap L)$.
        \provehere{
            Так как $K/K \cap L$ нормально, то $P \normeq \angles{P \cup Q}$.
            Тем самым, $\angles{P \cup Q} = PQ$, и $P \cap Q \normeq Q$, откуда из соответствия Галуа $K \cdot L/L$ нормально.

            Согласно теореме Нётер об изоморфизме \[\Gal(KL/L) \cong \frac{Q}{Q \cap P} \cong \frac{P Q}{P} \cong \Gal(K / K \cap L)\qedhere\]
        }
    }
    Пусть $f \in F[t]$.
    \definition[Группа Галуа многочлена $f$]{
        $\Gal(f/F) \bydef \Gal(F_f / F)$.
        Если поле $F$ не указано, то логично в качестве него брать наименьшее поле, содержащее коэффициенты многочлена.
        В характеристике нуль $F = \Q(\text{коэффициенты многочлена $f$})$.
    }
    Пусть имеется расширение $E/F$, и $f \in F[t] \subset E[t]$.
    Из определения видно, что $E_f = E \cdot F_f$, так как $F_f$ содержит все корни $f$, а $E_f$ порождено ими над $E$.

    Таким образом, имеет место башня полей
    % https://q.uiver.app/#q=WzAsNSxbMSwwLCJFX2YiXSxbMCwxLCJGX2YiXSxbMiwxLCJFIl0sWzEsMiwiRSBcXGNhcCBGX2YiXSxbMSwzLCJGIl0sWzEsMywiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDQsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwxLCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiIiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDMsIiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&,column sep=tiny,row sep=small]
          \& {E_f} \\
          {F_f} \&\& E \\
          \& {E \cap F_f} \\
          \& F
          \arrow[no head, from=1-2, to=2-1]
          \arrow[no head, from=1-2, to=2-3]
          \arrow[no head, from=2-1, to=3-2]
          \arrow[no head, from=2-3, to=3-2]
          \arrow[no head, from=3-2, to=4-2]
    \end{tikzcd}\]
    Согласно~(\cref{prop}), $\Gal(E_f / E) \cong \Gal(F_f / F_f \cap E) \le \Gal(F_f / F)$.

    \definition[Разрешимая группа $G$]{
        Такая группа $G$, что существует субнормальный ряд с абелевыми факторами $1 = G_0 \normeq G_1 \dots \normeq G_n = G$ (факторы ряда --- факторгруппы $G_{i+1}/G_i$).
    }
    \lemma{
        Группа разрешима $\iff$ существует нормальный ряд с абелевыми факторами, то есть ряд $1 = G_0 \normeq G_1 \dots \normeq G_n$, где все $G_i \normeq G$.
        \provewthen{
            Очевидно.
        }{
            Можно построить ряд по алгоритму $G_{i - 1} \coloneqq [G_i, G_i]$.
        }
    }
    \definition[Композиционный ряд]{
        Неуплотняемый субнормальный ряд без повторений.
        Неуплотняемость означает, что любой фактор --- простая (без нормальных подгрупп) группа.
    }
    В самом деле, если $H \normeq G_{i+1} / G_i$, то $\pi_{G_i}^{-1}(H)$ можно вставить в ряд между $G_i$ и $G_{i+1}$.
    \lemma{
        Любые два композиционных ряда эквивалентны.
        Любые два субнормальных ряда обладают эквивалентными уплотнениями.
        Факторы композиционного ряда изоморфны циклическим группам простого порядка.
    }
    \lemma{\label{lemma}
    Пусть $|G| = p^n$.
    Тогда $\exists H \le G: |G : H| = p$.
    \provehere{
        Пусть $n \ge 1$.
        Центр $C \le G$ $p$-группы нетривиален, значит, $\pi_C(G) = G/C$ имеет порядок строго меньше $p^n$.
        По индукции в ней есть подгруппа $\tilde{H} \le G/C$ индекса $p$, тогда $|G : \pi_C^{-1}(H)| = p$.
    }
    }
    \theorem[FTHA]{
        $\C = \R\left[\sqrt{-3}\right]$ алгебраически замкнуто.
        \provehere{
            Рассмотрим конечное расширение $E/\C$, тогда расширение $E/\R$ тоже конечно.
            Вложим его в нормальное расширение $E' / \C$.

            $G \coloneqq \Gal(E'/\R)$, пусть $|G| = 2^k \cdot m$, где $m$ нечётно.
            Пусть $P$ --- силовская $2$-подгруппа в $G$: $|G : P| = m$.
            Так как $[E' : \R] = 2^k \cdot m$ и $[E' : E'^P] = |P| = 2^k$, то $[E'^P : \R] = m$.

            Рассмотрим $\alpha \in E'^P$, пусть $f \in \R[t]$ --- минимальный многочлен $\alpha$.
            Тогда $\left[\R[\alpha] : \R\right] = \deg f \divs m$, откуда $\deg f$ нечётна.
            Но $f$ неприводим над $\R$, а он нечётной степени.
            Используя соображения непрерывности и полноты $\R$, получаем, что $\deg f = 1$, то есть $\alpha \in \R$.
            Тем самым, $E'^P = \R$, соответствие Галуа говорит, что $P = G$.

            $\Gal(E'/\C) \le \Gal(E'/\R)$, откуда $\Gal(E'/\C)$ --- тоже $2$-группа.
            Согласно~(\cref{lemma}), найдётся $H \le \Gal(E'/\C)$ индекса $2$.

            Тогда $[E'^H : \C] = 2$, но у $\C$ нет расширений степени $2$ --- любой квадратный многочлен над $\C$ разложим в $\C$ на линейные множители.
            Тем самым, $\Gal(E'/\C)$ тривиальна, откуда $E' = \C$, и у $\C$ нет никаких конечных расширений.
        }
    }
    \newlection{21 мая 2024 г.}
    \theorem[Дирихле, о линейной независимости характеров]{\label{dirichlet-character}
    Пусть $H$ --- группа, $E$ --- поле, и $\sigma_1, \dots, \sigma_n: H \map E^*$ --- различные групповые гомоморфизмы.
    Утверждается, что $\sigma_1, \dots, \sigma_n$ линейно независимы над $E$ в пространстве всех функций $H \map E$.
    \provehere{
        Предположим наличие линейной зависимости: \[\forall h \in H: \sum\limits_{i = 1}^{n}\alpha_i \sigma_i(h) = 0\text{, где }\alpha_i \in E\label{character-dependency}\tag{$\hexagon$}\]
        Выберем самую короткую такую (с наименьшим $n$), в ней в частности все $\alpha_i \ne 0$.

        Пусть $g \in H$ таков, что $\sigma_n(g) \ne \sigma_{n-1}(g)$.
        Запишем \[\all{\sum\limits_{i = 1}^{n}\alpha_i \sigma_i(g)\sigma_i(h) = 0 \\ \sum\limits_{i = 1}^{n}\alpha_i \sigma_n(g)\sigma_i(h) = 0}\]
        где первое получено подстановкой $h \leftarrow gh$ в~(\ref{character-dependency}), а второе --- домножением~(\ref{character-dependency}) на $\sigma_n(g)$.
        Вычитая, получаем линейную зависимость меньшей длины:
        \[\sum\limits_{i = 1}^{n}\alpha_i (\sigma_i(g) - \sigma_n(g))\sigma_i(h) = 0\]
        При этом зависимость нетривиальна, так как $\alpha_{n-1}(\sigma_{n-1}(g) - \sigma_n(g)) \ne 0$.
    }
    }
    Часто эту теорему применяют для $H = E^*$, $\sigma_i \in \Gal(E/F)$: пусть $E/F$ --- расширение Галуа, пусть $n \coloneqq [E : F]$, $\{\sigma_1, \dots, \sigma_n\} = \Gal(E/F) \le \End(E/F) \bydef \End_F(E)$.

    Тогда $\dim_E(\angles{\Gal_F(E)}) = n$ --- по теореме Дирихле~(\cref{dirichlet-character}) все эндоморфизмы вида $\sum\limits_{i = 1}^{n}\alpha_i \sigma_i$ различны.
    С другой стороны, $\dim_F(\End_F(E)) = n^2$, так как $\dim_F(E) = n$, откуда $\angles{\Gal_F(E)} = \End_F(E)$, то есть $\sigma_1, \dots, \sigma_n$ --- $E$-базис пространства $\End_F(E)$.

    Расширение называется тем же словом, что и его группа --- так, бывают, \emph{абелевы, циклические, разрешимые} расширения, и тому подобное.

    \definition[$\eps \in F$ --- первообразный корень $n$-й степени из $1$]{$\all{\eps^n = 1 \\ \eps^k \ne 1,&0 < k < n }$.}
    Если в поле есть первообразный корень степени $n$, то $\chr F \notdivs n$: если $n = pm$, то $0 = \eps^{pm} - 1 = (\eps^m - 1)^p$, откуда $\eps$ --- не первообразный.

    Несложно видеть, что $\eps^k = \eps^m \iff k \equiv m \pmod{n}$, откуда $\eps^0, \eps, \dots, \eps^{n-1}$ --- корни $n$-й степени из единицы, и многочлен $t^n - 1$ раскладывается на линейные множители.
    Обозначим множество корней этого многочлена $\mu_n(F)$.

    \lemma{\label{cyclic-extension}
    Пусть $E/F$ --- расширение полей, и в базовом поле $F$ есть первообразный корень степени $n$ из $1$.
    Следующие условия эквивалентны.
    \numbers{
        \item $E = F[\alpha]$, где $\alpha^n \in F$, и $\alpha^k \notin F$ при $0 < k < n$.
        \item Расширение $E/F$ циклическое расширение Галуа (то есть $\Gal(E/F) \cong C_n$).
    }
    \provebullets{
        \item[$(1) \then (2)$] Многочлен $f(t) = t^n - \alpha^n \in F[t]$ имеет $n$ различных корней $\defset{\alpha \eps^k}{0 \le k < n}$, откуда $E = F_f$ для сепарабельного $f$, то есть $E/F$ --- расширение Галуа.
        \bullets{
            \item Устроим отображение $\theta: \Gal(E/F) \map E^*, \sigma \mapsto \frac{\sigma(\alpha)}{\alpha}$. Так как $\left(\frac{\sigma(\alpha)}{\alpha}\right)^n = \frac{\sigma(\alpha)^n}{\alpha^n} = \frac{\sigma(\alpha^n)}{\alpha^n} = \frac{\alpha^n}{\alpha^n} = 1$, то $\Image \theta \subset \mu_n(F)$.
            \item Проверим, что это гомоморфизм групп.\[\theta(\tau\sigma) = \frac{\tau\sigma(\alpha)}{\alpha} = \frac{\sigma(\tau(\alpha))}{\tau(\alpha)} \cdot \frac{\tau(\alpha)}{\alpha} \circlesign{=}\]
            Так как $\tau(\alpha)$ --- корень $f$, то $\tau(\alpha) = \eps^m \alpha$ для некоторого $m \in \N$.
            Сокращая на $\eps^m \in F$, получаем
            \[\circlesign{=}\frac{\sigma(\alpha)}{\alpha}\cdot\frac{\tau(\alpha)}{\alpha}= \theta(\sigma)\theta(\tau) = \theta(\tau)\theta(\sigma)\]
            \item Проверим сюръективность. Любая собственная подгруппа $\mu_n$ имеет вид $\mu_k$, где $k \divs n$, и если $\exists k \in \N: \forall \sigma \in \Gal(E/F): \frac{\sigma(\alpha)^k}{\alpha^k} = 1$, то $\forall \sigma \in \Gal(E/F): \sigma(\alpha^k) = \alpha^k$, то есть $\alpha^k \in F$.
            Получаем, что $k \ge n$.
            \item С одной стороны, $|\Gal(E/F)| \ge n$ из сюръективности, с другой стороны, $[E : F] \le n$, откуда $|\Gal(E/F)| = [E : F] = n$, и из количественных соображений $\theta$ --- изоморфизм.
        }
        \item[$(2)\then(1)$] Пусть $\sigma$ --- образующая группы Галуа ($\Gal(E/F) = \{1, \sigma, \dots, \sigma^{n-1}\}$).
        По теореме Дирихле~(\cref{dirichlet-character}), $\sum\limits_{k = 0}^{n - 1}\eps^k \sigma^k \ne 0$, тем самым, $\exists \beta \in E: \alpha \coloneqq \sum\limits_{k = 0}^{n - 1}\eps^k \sigma(\beta)^k \ne 0$.
        \bullets{
            \item Посчитаем
            \[\sigma(\alpha) = \sum\limits_{k = 0}^{n - 1}\eps^k\sigma(\beta)^{k + 1} = \sum\limits_{i = 1}^{n}\eps^{i-1}\sigma(\beta)^i = \eps^{-1}\alpha\]
            Тем самым, $\sigma(\alpha^k) = \sigma(\alpha)^k = (\eps^{-1}\alpha)^k = \eps^{-k}\alpha^k$. В частности, $\alpha^n$ неподвижен под действием $\Gal(E/F)$, и $\alpha^n \in F$.
            \item Покажем линейную независимость $1, \alpha, \dots, \alpha^{n-1}$ над $F$, из количественных соображений будет следовать, что это базис $E$ над $F$.
            Пусть $\sum\limits_{k = 0}^{n - 1}\alpha^k x_k = 0$ для неких $x_k \in F$.
            Применяя $\sigma^j$ к данному равенству, получаем $\sum\limits_{k = 0}^{n - 1}\eps^{-kj}\alpha^k x_k = 0$.
            При $j = 0, \dots, n - 1$ получаются $n$ линейных уравнений с переменными $\alpha^k x_k$.
            Матрица коэффициентов системы $(\eps^{-kj})_{j = 0..n-1}^{k = 0..n-1}$ невырождена, так как её определитель --- определитель Вандермонда --- не нуль.\qedhere
        }
    }
    }
    \lemma{\label{generating-root-extension}
    Пусть $E \coloneqq F[\eps]$, где $\eps$ --- первообразный корень степени $n$.
    Тогда $E/F$ --- расширение Галуа, и $\Gal(E/F) \hookrightarrow (\Z/n\Z)^*$ (в частности, расширение $E/F$ абелево).
    \provehere{
        Так как $\mu_n = \angles{\eps}$, то $t^n - 1$, раскладывается на линейные множители в $F[\eps]$, то есть $F[\eps] = F_{t^n - 1}$.
        Всякий элемент $\sigma \in \Gal(E/F)$ однозначно определён значением $\sigma(\eps)$ (так как $E = F[\eps]$), при этом так как преобразование $\sigma$ обратимо, то $\sigma(\eps)$ --- тоже первообразный корень степени $n$ из $1$.

        Устроим $\pi: \Gal(E/F) \hookrightarrow \Z/n\Z$, сопоставляя элементу $\sigma \in \Gal(E/F)$ такой показатель $k \in \Z/n\Z$, что $\sigma(\eps) = \eps^k$.
        Инъективность $\sigma$ очевидна: $\sigma(\eps) = \tau(\eps) \then \sigma = \tau$.
        Очевидно, это гомоморфизм моноидов, и так как образ обратимых элементов обратим, то $\pi: \Gal(E/F) \map (\Z/n\Z)^*$ --- гомоморфизм групп.
    }
    }
    \definition[Круговой многочлен степени $n$]{
        $\Phi_n(t) \bydef \prod\limits_{\eps}(t - \eps)$, где $\eps$ пробегает все первообразные корни степени $n$ из $1$ по одному разу.
    }
    Так как любой корень степени $n$ из $1$ --- первообразный степени $k \divs n$, то $\prod\limits_{k \divs n}\Phi_k(t) = \prod\limits_{\eps^n = 1}(t - \eps) = t^n - 1$.
    \intfact{
        Для любого поля с первообразным корнем степени $n$ из единицы $\Phi_n \in \Z[t] \le \Q[t]$, и там он неприводим, степени $\phi(n)$ (где $\phi$ --- euler totient function).
    }
    Пусть $f \in F[t]$ --- ненулевой многочлен.
    \definition[Уравнение $f = 0$ разрешимо в радикалах]{
        Все корни $f$ (лежащие в алгебраическом замыкании $F$) выражаются через элементы $F$ при помощи арифметических операций и извлечений корня.
        Иными словами, существуют цепочка полей $F = F_0 \hookrightarrow F_1 \hookrightarrow \dots \hookrightarrow F_m$, где в $F_m$ многочлен $f$ раскладывается на линейные множители, и $F_i = F_{i-1}[\alpha_i]$, где $\beta \coloneqq \alpha_i^k \in F_{i-1}$.
        В таком случае ещё пишут $F_i = F_{i-1}\left[\sqrt[m]{\beta_i}\right]$.
    }
    \theorem[Абель --- Руффини]{
        Пусть $F$ поле, $\chr F = 0$;\ ненулевой $f \in F[t]$. Следующие условия эквивалентны:
        \numbers{
            \item Уравнение $f = 0$ разрешимо в радикалах.
            \item $\Gal(F_f/F)$ разрешима.
        }
        \provewthen{
            Сначала присоединим к $F$ первообразный корень из $1$ достаточно большой степени --- подойдёт первообразный корень $\eps$ степени $(\deg f)!$.
            Положим $F_1 \coloneqq F[\eps]$.
            Иными словами, $F_1 \coloneqq F_{t^{(\deg f)!} - 1}$.
            Это расширение Галуа, так как $\chr F = 0$.

            $\Gal(f/F_1) \le \Gal(f/F)$, поэтому $G \coloneqq \Gal(f/F_1)$ тоже разрешима.
            По определению у неё существует субнормальный ряд, и \comment{видимо так как $G$ конечна} его можно уплотнить до композиционного $\{1\} = G_m \normeq G_{m-1} \normeq \dots \normeq G_1 = G$. Факторгруппы $G_i / G_{i+1}$ --- простые абелевы группы, то есть циклические, простого порядка.
            Положим $F_i \coloneqq ((F_1)_f)^{G_i}$.

            Согласно~(\cref{cyclic-extension}), $F_i$ имеет вид $F_{i-1}[\alpha_i]$, что по определению означает разрешимость в радикалах.
        }{
            По условию существует башня полей $F \hookrightarrow F_1 \hookrightarrow \dots \hookrightarrow F_m$, где $f$ раскладывается на линейные множители в $F_m$, и $F_i = F_{i-1}[\alpha_i]$, где $\alpha_i^{k_i} \in F_{i-1}$.
            Для применения~(\cref{cyclic-extension}) недостаёт первообразного корня.

            Добавим его: $F_{m+1} \coloneqq (F_m)_{t^k-1}$, где $k \coloneqq k_1 \proddots k_m$.
            Далее хотим получить, что $\Gal(f/F)$ разрешима.
            Понятно, что $F_f \subset F_m$, поэтому достаточно доказать, что $\Aut(F_m/F)$ разрешима, или даже $\Aut(F_{m+1}/F)$ разрешима --- факторгруппа разрешимой группы разрешима.
            В доказательстве будет использоваться соответствие Галуа, для этого дополним $F_{m+1}/F$ до нормального: пусть $E/F$ нормально, и $F_{m+1} \subset E$ (например, $E$ --- поле разложения минимального многочлена, аннулирующего все элементы $\eps, \alpha_1, \dots, \alpha_m$).

            Пусть $\Gal(E/F) = \{\sigma_1, \dots, \sigma_n\}$.
            Поле $\tilde{E} = F[\eps, \sigma_i(\alpha_j)] \subset E$ тоже нормально над $F$, так как оно устойчиво под действием $\Gal(E/F)$.
            А для этого поля есть хорошая цепочка (порождающие присоединяются по одному, все образы $\alpha_{j+1}$ добавляются после всех образов $\alpha_j$):
            \[F \subset F[\eps] \subset F[\sigma_1(\alpha_1)] \subset F[\sigma_1(\alpha_1), \sigma_2(\alpha_1)] \subset \dots \subset \tilde{E}\]
            Все промежуточные расширения абелевы (первое вкладывается в $(\Z/n\Z)^*$ согласно~(\cref{generating-root-extension}), остальные циклические согласно~(\cref{cyclic-extension})).
            Соответствие Галуа говорит, что этой башне полей соответствует субнормальный ряд группы $\Gal(\tilde{E}/F)$ с абелевыми факторами, то есть $\Gal(\tilde{E}/F)$ разрешима.
            Её факторгруппа $\Gal(F_f/F)$ тоже разрешима.
        }
    }
\end{document}
